---
title: Distribuzione di Macchine virtuali di Azure per SAP in Windows | Microsoft Docs
description: Informazioni su come distribuire il software SAP in macchine virtuali Windows in Azure.
services: virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: 22aaa98c-bb9f-472f-b546-0b294e033cda
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: ac7c1e3b015a21fe06f27205b27a53fc4d2f3df7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="deploy-sap-on-windows-vms-in-azure"></a><span data-ttu-id="c6664-103">Distribuire SAP in macchine virtuali Windows in Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-103">Deploy SAP on Windows VMs in Azure</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
<span data-ttu-id="c6664-104">[1031096]:https://launchpad.support.sap.com/#/notes/1031096</span><span class="sxs-lookup"><span data-stu-id="c6664-104">[1031096]:https://launchpad.support.sap.com/#/notes/1031096</span></span>
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
<span data-ttu-id="c6664-105">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span><span class="sxs-lookup"><span data-stu-id="c6664-105">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span></span>
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
<span data-ttu-id="c6664-106">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span><span class="sxs-lookup"><span data-stu-id="c6664-106">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span></span>
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
<span data-ttu-id="c6664-107">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span><span class="sxs-lookup"><span data-stu-id="c6664-107">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span></span>
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
<span data-ttu-id="c6664-108">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span><span class="sxs-lookup"><span data-stu-id="c6664-108">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span></span>
<span data-ttu-id="c6664-109">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span><span class="sxs-lookup"><span data-stu-id="c6664-109">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span></span>
<span data-ttu-id="c6664-110">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span><span class="sxs-lookup"><span data-stu-id="c6664-110">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span></span>
<span data-ttu-id="c6664-111">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span><span class="sxs-lookup"><span data-stu-id="c6664-111">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span></span>
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
<span data-ttu-id="c6664-112">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span><span class="sxs-lookup"><span data-stu-id="c6664-112">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span></span>
<span data-ttu-id="c6664-113">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span><span class="sxs-lookup"><span data-stu-id="c6664-113">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span></span>
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
<span data-ttu-id="c6664-114">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span><span class="sxs-lookup"><span data-stu-id="c6664-114">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span></span>
[2367194]:https://launchpad.support.sap.com/#/notes/2367194

[azure-cli]:../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:sap-dbms-guide.md (Azure Virtual Machines DBMS deployment for SAP on Windows)
[dbms-guide-2.1]:sap-dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f (Caching for VMs and VHDs)
[dbms-guide-2.2]:sap-dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91 (Software RAID)
[dbms-guide-2.3]:sap-dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152 (Microsoft Azure Storage)
[dbms-guide-2]:sap-dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64 (Structure of a RDBMS deployment)
[dbms-guide-3]:sap-dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3 (High availability and disaster recovery with Azure VMs)
[dbms-guide-5.5.1]:sap-dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268 (SQL Server 2012 SP1 CU4 and later)
[dbms-guide-5.5.2]:sap-dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b (SQL Server 2012 SP1 CU3 and earlier releases)
[dbms-guide-5.6]:sap-dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 (Using a SQL Server image from the Azure Marketplace)
[dbms-guide-5.8]:sap-dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30 (General SQL Server for SAP on Azure summary)
[dbms-guide-5]:sap-dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737 (Specifics to SQL Server RDBMS)
[dbms-guide-8.4.1]:sap-dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573 (Storage configuration)
[dbms-guide-8.4.2]:sap-dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d (Backup and restore)
[dbms-guide-8.4.3]:sap-dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c (Performance considerations for backup and restore)
[dbms-guide-8.4.4]:sap-dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818 (Other)
[dbms-guide-900-sap-cache-server-on-premises]:sap-dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:./media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:./media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:./media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:./media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:./media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:./media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:./media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:./media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:./media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:sap-deployment-guide.md (Azure Virtual Machines deployment for SAP on Windows)
[deployment-guide-2.2]:#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 (SAP resources)
[deployment-guide-3.1.2]:#3688666f-281f-425b-a312-a77e7db2dfab (Deploying a VM by using a custom image)
[deployment-guide-3.2]:#db477013-9060-4602-9ad4-b0316f8bb281 (Scenario 1: Deploying a VM from the Azure Marketplace for SAP)
[deployment-guide-3.3]:#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 (Scenario 2: Deploying a VM with a custom image for SAP)
[deployment-guide-3.4]:#a9a60133-a763-4de8-8986-ac0fa33aa8c1 (Scenario 3: Moving a VM from on-premises using a non-generalized Azure VHD with SAP)
[deployment-guide-3]:#b3253ee3-d63b-4d74-a49b-185e76c4088e (Deployment scenarios of VMs for SAP on Microsoft Azure)
[deployment-guide-4.1]:#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 (Deploying Azure PowerShell cmdlets)
[deployment-guide-4.2]:#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e (Download and import SAP-relevant PowerShell cmdlets)
[deployment-guide-4.3]:#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc (Join a VM to an on-premises domain - Windows only)
[deployment-guide-4.4.2]:#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 (Linux)
[deployment-guide-4.4]:#c7cbb0dc-52a4-49db-8e03-83e7edc2927d (Download, install, and enable the Azure VM Agent)
[deployment-guide-4.5.1]:#987cf279-d713-4b4c-8143-6b11589bb9d4 (Azure PowerShell)
[deployment-guide-4.5.2]:#408f3779-f422-4413-82f8-c57a23b4fc2f (Azure CLI)
[deployment-guide-4.5]:#d98edcd3-f2a1-49f7-b26a-07448ceb60ca (Configure the Azure Enhanced Monitoring Extension for SAP)
[deployment-guide-5.1]:#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 (Readiness check for Azure Enhanced Monitoring for SAP)
[deployment-guide-5.2]:#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1 (Health check for the Azure monitoring infrastructure)
[deployment-guide-5.3]:#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 (Troubleshooting Azure monitoring for SAP)

[deployment-guide-configure-monitoring-scenario-1]:#ec323ac3-1de9-4c3a-b770-4ff701def65b (Configure monitoring)
[deployment-guide-configure-proxy]:#baccae00-6f79-4307-ade4-40292ce4e02d (Configure the proxy)
[deployment-guide-figure-100]:./media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:./media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:#figure-11
[deployment-guide-figure-1100]:./media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:./media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:./media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:#figure-14
[deployment-guide-figure-1400]:./media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:./media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:./media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:#figure-5
[deployment-guide-figure-50]:./media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:./media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:#figure-6
[deployment-guide-figure-600]:./media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:#figure-7
[deployment-guide-figure-700]:./media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:./media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:./media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:#564adb4f-5c95-4041-9616-6635e83a810b (Checks and troubleshooting for setting up end-to-end monitoring)

[deploy-template-cli]:../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:sap-get-started.md
[getting-started-dbms]:sap-get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:sap-get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:sap-get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:classic/virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:classic/virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:classic/virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:classic/virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:classic/virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:classic/virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-windows-enable-aem.md

[Logo_Linux]:./media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:./media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:sap-planning-guide.md (Azure Virtual Machines planning and implementation for SAP on Windows)
[planning-guide-1.2]:sap-planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff (Resources)
[planning-guide-11]:sap-planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 (High availability and disaster recovery for SAP NetWeaver running on Azure Virtual Machines)
[planning-guide-11.4.1]:sap-planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 (High availability for SAP Application Servers)
[planning-guide-11.5]:sap-planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f (Using Autostart for SAP instances)
[planning-guide-2.1]:sap-planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 (Cloud-only - Virtual Machine deployments in Azure without dependencies on the on-premises customer network)
[planning-guide-2.2]:sap-planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10 (Cross-premises - Deployment of single or multiple SAP VMs in Azure fully integrated with the on-premises network)
[planning-guide-3.1]:sap-planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a (Azure regions)
[planning-guide-3.2.1]:sap-planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 (Fault domains)
[planning-guide-3.2.2]:sap-planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 (Upgrade domains)
[planning-guide-3.2.3]:sap-planning-guide.md#18810088-f9be-4c97-958a-27996255c665 (Azure availability sets)
[planning-guide-3.2]:sap-planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 (Microsoft Azure virtual machines concept)
[planning-guide-3.3.2]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 (Azure Premium Storage)
[planning-guide-5.1.1]:sap-planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 (Moving a VM from on-premises to Azure with a non-generalized disk)
[planning-guide-5.1.2]:sap-planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c (Deploying a VM with a customer specific image)
[planning-guide-5.2.1]:sap-planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef (Preparation for moving a VM from on-premises to Azure with a non-generalized disk)
[planning-guide-5.2.2]:sap-planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 (Preparation for deploying a VM with a customer specific image for SAP)
[planning-guide-5.2]:sap-planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 (Preparing VMs with SAP for Azure)
[planning-guide-5.3.1]:sap-planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 (Difference between an Azure disk and an Azure image)
[planning-guide-5.3.2]:sap-planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a (Uploading a VHD from on-premises to Azure)
[planning-guide-5.4.2]:sap-planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 (Copying disks between Azure Storage accounts)
[planning-guide-5.5.1]:sap-planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 (VM/VHD structure for SAP deployments)
[planning-guide-5.5.3]:sap-planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d (Setting automount for attached disks)
[planning-guide-7.1]:sap-planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 (Single VM with SAP NetWeaver demo/training scenario)
[planning-guide-7]:sap-planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 (Concepts of Cloud-Only deployment of SAP instances)
[planning-guide-9.1]:sap-planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 (Azure Monitoring Solution for SAP)
[planning-guide-azure-premium-storage]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 (Azure Premium Storage)

[planning-guide-figure-100]:./media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:./media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:./media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:./media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:./media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:./media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:./media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:./media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:./media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:./media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:./media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:./media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:./media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:./media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:./media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:./media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:./media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:./media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:./media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:./media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:./media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:./media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:./media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:sap-planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd (Microsoft Azure networking)
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:sap-planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f (Storage: Microsoft Azure Storage and data disks)

[powershell-install-configure]:/powershell/azureps-cmdlets-docs
[resource-group-authoring-templates]:../../resource-group-authoring-templates.md
[resource-group-overview]:../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam (SAP Product Availability Matrix)
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../storage/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../storage/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../storage/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../storage/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../storage/storage-premium-storage.md
[storage-redundancy]:../../storage/storage-redundancy.md
[storage-scalability-targets]:../../storage/storage-scalability-targets.md
[storage-use-azcopy]:../../storage/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../linux/attach-disk-portal.md
[virtual-machines-windows-attach-disk-portal]:../virtual-machines-windows-attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:virtual-machines-windows-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../linux/cli-deploy-templates.md (Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI)
[virtual-machines-deploy-rmtemplates-powershell]:../virtual-machines-windows-ps-manage.md (Manage virtual machines using Azure Resource Manager and PowerShell)
[virtual-machines-linux-agent-user-guide]:../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../linux/capture-image.md
[virtual-machines-linux-capture-image-capture]:../linux/capture-image.md#capture-the-vm
[virtual-machines-windows-capture-image]:../virtual-machines-windows-capture-image.md
[virtual-machines-windows-capture-image-capture]:../virtual-machines-windows-capture-image.md#capture-the-vm
[virtual-machines-linux-configure-lvm]:../linux/configure-lvm.md
[virtual-machines-linux-configure-raid]:../linux/configure-raid.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../linux/update-agent.md
[virtual-machines-manage-availability]:../virtual-machines-windows-manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:../virtual-machines-windows-ps-create.md
[virtual-machines-sizes]:sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:classic/ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:classic/ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:upload-image.md
[virtual-machines-windows-tutorial]:../virtual-machines-windows-hero-tutorial.md
[virtual-machines-windows-create-vm-specialized]:../virtual-machines-windows-create-vm-specialized.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md
[vpn-gateway-vpn-faq]:../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../xplat-cli-azure-resource-manager.md

<span data-ttu-id="c6664-115">Macchine virtuali di Azure è la soluzione ideale per le organizzazioni che necessitano di risorse di calcolo e di archiviazione in tempi minimi e con cicli di approvvigionamento brevi.</span><span class="sxs-lookup"><span data-stu-id="c6664-115">Azure Virtual Machines is the solution for organizations that need compute and storage resources, in minimal time, and without lengthy procurement cycles.</span></span> <span data-ttu-id="c6664-116">È possibile usare Macchine virtuali di Azure per distribuire applicazioni classiche, ad esempio applicazioni basate su SAP NetWeaver, in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-116">You can use Azure Virtual Machines to deploy classical applications, like SAP NetWeaver-based applications, in Azure.</span></span> <span data-ttu-id="c6664-117">È possibile estendere l'affidabilità e la disponibilità di un'applicazione senza risorse locali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="c6664-117">Extend an application's reliability and availability without additional on-premises resources.</span></span> <span data-ttu-id="c6664-118">Macchine virtuali di Azure supporta la connettività cross-premise e quindi è possibile integrare Macchine virtuali di Azure nei domini locali, nei cloud privati e nel panorama applicativo del sistema SAP dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-118">Azure Virtual Machines supports cross-premises connectivity, so you can integrate Azure Virtual Machines into your organization's on-premises domains, private clouds, and SAP system landscape.</span></span>

<span data-ttu-id="c6664-119">Questo articolo illustra la procedura per distribuire applicazioni SAP in macchine virtuali Windows in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-119">In this article, we cover the steps to deploy SAP applications on Windows virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="c6664-120">Questo articolo si basa sulle informazioni contenute in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Windows][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-120">This article builds on the information in [Azure Virtual Machines planning and implementation for SAP on Windows][planning-guide].</span></span> <span data-ttu-id="c6664-121">Integra anche la documentazione sull'installazione di SAP e le note su SAP, che sono le risorse principali per l'installazione e la distribuzione del software SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-121">It also complements SAP installation documentation and SAP Notes, which are the primary resources for installing and deploying SAP software.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="c6664-122">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="c6664-122">Prerequisites</span></span>
<span data-ttu-id="c6664-123">La configurazione di una macchina virtuale di Azure per la distribuzione del software SAP richiede più passaggi e coinvolge diverse risorse.</span><span class="sxs-lookup"><span data-stu-id="c6664-123">Setting up an Azure virtual machine for SAP software deployment involves multiple steps and resources.</span></span> <span data-ttu-id="c6664-124">Prima di iniziare, verificare che siano soddisfatti i prerequisiti di installazione del software SAP in macchine virtuali Windows in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-124">Before you start, make sure that you meet the prerequisites for installing SAP software on Windows virtual machines in Azure.</span></span>

### <a name="local-computer"></a><span data-ttu-id="c6664-125">Computer locale</span><span class="sxs-lookup"><span data-stu-id="c6664-125">Local computer</span></span>
<span data-ttu-id="c6664-126">Per gestire VM Windows o Linux, è possibile usare uno script di PowerShell e il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-126">To manage Windows or Linux VMs, you can use a PowerShell script and the Azure portal.</span></span> <span data-ttu-id="c6664-127">Per entrambi gli strumenti, è necessario un computer locale che esegue Windows 7 o una versione successiva di Windows.</span><span class="sxs-lookup"><span data-stu-id="c6664-127">For both tools, you need a local computer running Windows 7 or a later version of Windows.</span></span> <span data-ttu-id="c6664-128">Per gestire solo VM Linux e usare un computer Linux per questa attività, è possibile usare l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-128">If you want to manage only Linux VMs and you want to use a Linux computer for this task, you can use Azure CLI.</span></span>

### <a name="internet-connection"></a><span data-ttu-id="c6664-129">Connessione Internet</span><span class="sxs-lookup"><span data-stu-id="c6664-129">Internet connection</span></span>
<span data-ttu-id="c6664-130">Per scaricare ed eseguire gli strumenti e gli script necessari per la distribuzione del software SAP, è necessario essere connessi a Internet.</span><span class="sxs-lookup"><span data-stu-id="c6664-130">To download and run the tools and scripts that are required for SAP software deployment, you must be connected to the Internet.</span></span> <span data-ttu-id="c6664-131">Anche la VM di Azure che esegue l'estensione di monitoraggio avanzato di Azure per SAP deve avere accesso a Internet.</span><span class="sxs-lookup"><span data-stu-id="c6664-131">The Azure VM that is running the Azure Enhanced Monitoring Extension for SAP also needs access to the Internet.</span></span> <span data-ttu-id="c6664-132">Se la VM di Azure fa parte di una rete virtuale di Azure o di un dominio locale, verificare che le impostazioni proxy pertinenti siano configurate come descritto in [Configurare il proxy][deployment-guide-configure-proxy].</span><span class="sxs-lookup"><span data-stu-id="c6664-132">If the Azure VM is part of an Azure virtual network or on-premises domain, make sure that the relevant proxy settings are set, as described in [Configure the proxy][deployment-guide-configure-proxy].</span></span>

### <a name="microsoft-azure-subscription"></a><span data-ttu-id="c6664-133">iscriversi a Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-133">Microsoft Azure subscription</span></span>
<span data-ttu-id="c6664-134">È necessario un account Azure attivo.</span><span class="sxs-lookup"><span data-stu-id="c6664-134">You need an active Azure account.</span></span>

### <a name="topology-and-networking"></a><span data-ttu-id="c6664-135">Topologia e rete</span><span class="sxs-lookup"><span data-stu-id="c6664-135">Topology and networking</span></span>
<span data-ttu-id="c6664-136">È necessario definire la topologia e l'architettura della distribuzione SAP in Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-136">You need to define the topology and architecture of the SAP deployment in Azure:</span></span>

* <span data-ttu-id="c6664-137">Account di archiviazione di Azure da usare</span><span class="sxs-lookup"><span data-stu-id="c6664-137">Azure storage accounts to be used</span></span>
* <span data-ttu-id="c6664-138">Rete virtuale in cui si vuole distribuire il sistema SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-138">Virtual network where you want to deploy the SAP system</span></span>
* <span data-ttu-id="c6664-139">Gruppo di risorse in cui si vuole distribuire il sistema SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-139">Resource group to which you want to deploy the SAP system</span></span>
* <span data-ttu-id="c6664-140">Area di Azure in cui si vuole distribuire il sistema SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-140">Azure region where you want to deploy the SAP system</span></span>
* <span data-ttu-id="c6664-141">Configurazione SAP (due livelli o tre livelli)</span><span class="sxs-lookup"><span data-stu-id="c6664-141">SAP configuration (two-tier or three-tier)</span></span>
* <span data-ttu-id="c6664-142">Dimensioni delle VM e numero di dischi rigidi virtuali aggiuntivi da montare nelle VM</span><span class="sxs-lookup"><span data-stu-id="c6664-142">VM sizes and the number of additional virtual hard disks (VHDs) to be mounted to the VMs</span></span>
* <span data-ttu-id="c6664-143">Configurazione di SAP Correction and Transport System (CTS)</span><span class="sxs-lookup"><span data-stu-id="c6664-143">SAP Correction and Transport System (CTS) configuration</span></span>

<span data-ttu-id="c6664-144">Creare e configurare gli account di archiviazione di Azure o le reti virtuali di Azure prima di iniziare il processo di distribuzione del software SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-144">Create and configure Azure storage accounts or Azure virtual networks before you begin the SAP software deployment process.</span></span> <span data-ttu-id="c6664-145">Per informazioni su come creare e configurare queste risorse, vedere [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Windows][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-145">For information about how to create and configure these resources, see [Azure Virtual Machines planning and implementation for SAP on Windows][planning-guide].</span></span>

### <a name="sap-sizing"></a><span data-ttu-id="c6664-146">Dimensionamento di SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-146">SAP sizing</span></span>
<span data-ttu-id="c6664-147">Tenere presenti le informazioni seguenti per dimensionamento di SAP:</span><span class="sxs-lookup"><span data-stu-id="c6664-147">Know the following information, for SAP sizing:</span></span>

* <span data-ttu-id="c6664-148">Carico di lavoro SAP previsto, ad esempio, usando lo strumento SAP Quick Sizer e il numero SAP Application Performance Standard (SAPS)</span><span class="sxs-lookup"><span data-stu-id="c6664-148">Projected SAP workload, for example, by using the SAP Quick Sizer tool, and the SAP Application Performance Standard (SAPS) number</span></span>
* <span data-ttu-id="c6664-149">Utilizzo di memoria e risorse della CPU necessario per il sistema SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-149">Required CPU resource and memory consumption of the SAP system</span></span>
* <span data-ttu-id="c6664-150">Operazioni di input/output (I/O) al secondo necessarie</span><span class="sxs-lookup"><span data-stu-id="c6664-150">Required input/output (I/O) operations per second</span></span>
* <span data-ttu-id="c6664-151">Larghezza di banda di rete necessaria per l'eventuale comunicazione tra diverse VM in Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-151">Required network bandwidth of eventual communication between VMs in Azure</span></span>
* <span data-ttu-id="c6664-152">Larghezza di banda di rete necessaria tra gli asset locali e i sistemi SAP distribuiti in Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-152">Required network bandwidth between on-premises assets and the Azure-deployed SAP system</span></span>

### <a name="resource-groups"></a><span data-ttu-id="c6664-153">Gruppi di risorse</span><span class="sxs-lookup"><span data-stu-id="c6664-153">Resource groups</span></span>
<span data-ttu-id="c6664-154">In Azure Resource Manager è possibile usare i gruppi di risorse per gestire tutte le risorse dell'applicazione nella sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-154">In Azure Resource Manager, you can use resource groups to manage all the application resources in your Azure subscription.</span></span> <span data-ttu-id="c6664-155">Per altre informazioni, vedere [Panoramica di Azure Resource Manager][resource-group-overview].</span><span class="sxs-lookup"><span data-stu-id="c6664-155">For more information, see [Azure Resource Manager overview][resource-group-overview].</span></span>

## <a name="resources"></a><span data-ttu-id="c6664-156">Risorse</span><span class="sxs-lookup"><span data-stu-id="c6664-156">Resources</span></span>

### <span data-ttu-id="c6664-157"><a name="42ee2bdb-1efc-4ec7-ab31-fe4c22769b94"></a>Risorse SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-157"><a name="42ee2bdb-1efc-4ec7-ab31-fe4c22769b94"></a>SAP resources</span></span>
<span data-ttu-id="c6664-158">Quando si configura la distribuzione del software SAP, sono necessarie le risorse SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-158">When you are setting up your SAP software deployment, you need the following SAP resources:</span></span>

* <span data-ttu-id="c6664-159">Nota SAP [1928533], contenente:</span><span class="sxs-lookup"><span data-stu-id="c6664-159">SAP Note [1928533], which has:</span></span>
  * <span data-ttu-id="c6664-160">Elenco delle dimensioni delle VM di Azure supportate per la distribuzione di software SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-160">List of Azure VM sizes that are supported for the deployment of SAP software</span></span>
  * <span data-ttu-id="c6664-161">Importanti informazioni sulla capacità per le dimensioni delle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-161">Important capacity information for Azure VM sizes</span></span>
  * <span data-ttu-id="c6664-162">Software SAP e combinazioni di sistemi operativi e database supportati</span><span class="sxs-lookup"><span data-stu-id="c6664-162">Supported SAP software, and operating system (OS) and database combinations</span></span>
  * <span data-ttu-id="c6664-163">Versione del kernel SAP richiesta per Windows e Linux in Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-163">Required SAP kernel version for Windows and Linux on Microsoft Azure</span></span>

* <span data-ttu-id="c6664-164">La nota SAP [2015553] elenca i prerequisiti per le distribuzioni di software SAP supportate da SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-164">SAP Note [2015553] lists prerequisites for SAP-supported SAP software deployments in Azure.</span></span>
* <span data-ttu-id="c6664-165">La nota SAP [2178632] contiene informazioni dettagliate su tutte le metriche di monitoraggio segnalate per SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-165">SAP Note [2178632] has detailed information about all monitoring metrics reported for SAP in Azure.</span></span>
* <span data-ttu-id="c6664-166">La nota SAP [1409604] contiene la versione dell'agente host SAP per Windows necessaria in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-166">SAP Note [1409604] has the required SAP Host Agent version for Windows in Azure.</span></span>
* <span data-ttu-id="c6664-167">La nota SAP [2191498] contiene la versione dell'agente host SAP per Linux necessaria in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-167">SAP Note [2191498] has the required SAP Host Agent version for Linux in Azure.</span></span>
* <span data-ttu-id="c6664-168">La nota SAP [2243692] contiene informazioni sulle licenze SAP in Linux in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-168">SAP Note [2243692] has information about SAP licensing on Linux in Azure.</span></span>
* <span data-ttu-id="c6664-169">La nota SAP [1984787] contiene informazioni generali su SUSE Linux Enterprise Server 12.</span><span class="sxs-lookup"><span data-stu-id="c6664-169">SAP Note [1984787] has general information about SUSE Linux Enterprise Server 12.</span></span>
* <span data-ttu-id="c6664-170">La nota SAP [2002167] contiene informazioni generali su Red Hat Enterprise Linux 7.x.</span><span class="sxs-lookup"><span data-stu-id="c6664-170">SAP Note [2002167] has general information about Red Hat Enterprise Linux 7.x.</span></span>
* <span data-ttu-id="c6664-171">La nota SAP [1999351] contiene informazioni aggiuntive sulla risoluzione dei problemi per l'estensione di monitoraggio avanzato di Azure per SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-171">SAP Note [1999351] has additional troubleshooting information for the Azure Enhanced Monitoring Extension for SAP.</span></span>
* <span data-ttu-id="c6664-172">[Community WIKI SAP](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) contiene tutte le note su SAP necessarie per Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-172">[SAP Community WIKI](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) has all required SAP Notes for Linux.</span></span>
* <span data-ttu-id="c6664-173">Cmdlet di PowerShell specifici di SAP inclusi in [Azure PowerShell][azure-ps].</span><span class="sxs-lookup"><span data-stu-id="c6664-173">SAP-specific PowerShell cmdlets that are part of [Azure PowerShell][azure-ps].</span></span>
* <span data-ttu-id="c6664-174">Comandi dell'interfaccia della riga di comando di Azure specifici di SAP inclusi nell'[interfaccia della riga di comando di Azure][azure-cli].</span><span class="sxs-lookup"><span data-stu-id="c6664-174">SAP-specific Azure CLI commands that are part of [Azure CLI][azure-cli].</span></span>

<span data-ttu-id="c6664-175">[comment]: <> (MSSedusch TODO Add ARM patch level for SAP Host Agent in SAP Note 1409604)</span><span class="sxs-lookup"><span data-stu-id="c6664-175">[comment]: <> (MSSedusch TODO Add ARM patch level for SAP Host Agent in SAP Note 1409604)</span></span>

### <a name="microsoft-resources"></a><span data-ttu-id="c6664-176">Risorse Microsoft</span><span class="sxs-lookup"><span data-stu-id="c6664-176">Microsoft resources</span></span>
<span data-ttu-id="c6664-177">Questi articoli Microsoft descrivono le distribuzioni SAP in Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-177">These Microsoft articles cover SAP deployments in Azure:</span></span>

* <span data-ttu-id="c6664-178">[Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Windows][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-178">[Azure Virtual Machines planning and implementation for SAP on Windows][planning-guide]</span></span>
* <span data-ttu-id="c6664-179">[Distribuzione di Macchine virtuali di Azure per SAP in Windows (questo articolo)][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-179">[Azure Virtual Machines deployment for SAP on Windows (this article)][deployment-guide]</span></span>
* <span data-ttu-id="c6664-180">[Distribuzione DBMS di Macchine virtuali di Azure per SAP in Windows][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-180">[Azure Virtual Machines DBMS deployment for SAP on Windows][dbms-guide]</span></span>
* <span data-ttu-id="c6664-181">[Portale di Azure][azure-portal]</span><span class="sxs-lookup"><span data-stu-id="c6664-181">[Azure portal][azure-portal]</span></span>

## <span data-ttu-id="c6664-182"><a name="b3253ee3-d63b-4d74-a49b-185e76c4088e"></a>Scenari di distribuzione per il software SAP in VM di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-182"><a name="b3253ee3-d63b-4d74-a49b-185e76c4088e"></a>Deployment scenarios for SAP software on Azure VMs</span></span>
<span data-ttu-id="c6664-183">È possibile distribuire le VM e i dischi associati in Azure in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="c6664-183">You have multiple options for deploying VMs and associated disks in Azure.</span></span> <span data-ttu-id="c6664-184">È importante conoscere le differenze tra le opzioni di distribuzione, perché i passaggi eseguiti per preparare le VM per la distribuzione saranno diversi a seconda del tipo di distribuzione scelto.</span><span class="sxs-lookup"><span data-stu-id="c6664-184">It's important to understand the differences between deployment options, because you might take different steps to prepare your VMs for deployment based on the deployment type you choose.</span></span>

### <span data-ttu-id="c6664-185"><a name="db477013-9060-4602-9ad4-b0316f8bb281"></a>Scenario 1: Distribuzione di una VM da Azure Marketplace per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-185"><a name="db477013-9060-4602-9ad4-b0316f8bb281"></a>Scenario 1: Deploying a VM from the Azure Marketplace for SAP</span></span>
<span data-ttu-id="c6664-186">È possibile usare un'immagine fornita da Microsoft o da terze parti in Azure Marketplace per distribuire la VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-186">You can use an image provided by Microsoft or by a third party in the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="c6664-187">Il Marketplace offre alcune immagini di sistemi operativi standard per Windows Server e diverse distribuzioni Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-187">The Marketplace offers some standard OS images of Windows Server and different Linux distributions.</span></span> <span data-ttu-id="c6664-188">È anche possibile distribuire un'immagine che include SKU di sistema di gestione di database (DBMS), ad esempio, Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6664-188">You also can deploy an image that includes database management system (DBMS) SKUs, for example, Microsoft SQL Server.</span></span> <span data-ttu-id="c6664-189">Per altre informazioni sull'uso di immagini con SKU DBMS, vedere [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-189">For more information about using images with DBMS SKUs, see [Azure Virtual Machines DBMS deployment for SAP on Linux][dbms-guide].</span></span>

<span data-ttu-id="c6664-190">Il diagramma di flusso seguente illustra la sequenza di passaggi specifica di SAP per distribuire una VM da Azure Marketplace:</span><span class="sxs-lookup"><span data-stu-id="c6664-190">The following flowchart shows the SAP-specific sequence of steps for deploying a VM from the Azure Marketplace:</span></span>

![Diagramma di flusso della distribuzione di una VM per sistemi SAP con un'immagine di VM di Azure Marketplace][deployment-guide-figure-100]

#### <a name="create-a-virtual-machine-by-using-the-azure-portal"></a><span data-ttu-id="c6664-192">Creare una macchina virtuale usando il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-192">Create a virtual machine by using the Azure portal</span></span>
<span data-ttu-id="c6664-193">Il modo più semplice per creare una nuova macchina virtuale con un'immagine di Azure Marketplace consiste nell'usare il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-193">The easiest way to create a new virtual machine with an image from the Azure Marketplace is by using the Azure portal.</span></span>

1.  <span data-ttu-id="c6664-194">Accedere a <https://portal.azure.com/#create></span><span class="sxs-lookup"><span data-stu-id="c6664-194">Go to <https://portal.azure.com/#create>.</span></span>  <span data-ttu-id="c6664-195">oppure scegliere **+ Nuovo** dal menu del portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-195">Or, in the Azure portal menu, select **+ New**.</span></span>
2.  <span data-ttu-id="c6664-196">Selezionare **Calcolo** e quindi selezionare il tipo di sistema operativo che si vuole distribuire.</span><span class="sxs-lookup"><span data-stu-id="c6664-196">Select **Compute**, and then select the type of operating system you want to deploy.</span></span> <span data-ttu-id="c6664-197">Ad esempio, Windows Server 2012 R2, SUSE Linux Enterprise Server 12 (SLES 12) o Red Hat Enterprise Linux 7.2 (RHEL 7.2).</span><span class="sxs-lookup"><span data-stu-id="c6664-197">For example, Windows Server 2012 R2, SUSE Linux Enterprise Server 12 (SLES 12), or Red Hat Enterprise Linux 7.2 (RHEL 7.2).</span></span> <span data-ttu-id="c6664-198">L'elenco predefinito non visualizza tutti i sistemi operativi supportati.</span><span class="sxs-lookup"><span data-stu-id="c6664-198">The default list view does not show all supported operating systems.</span></span> <span data-ttu-id="c6664-199">Selezionare **Visualizza tutto** per un elenco completo.</span><span class="sxs-lookup"><span data-stu-id="c6664-199">Select **see all** for a full list.</span></span> <span data-ttu-id="c6664-200">Per altre informazioni sui sistemi operativi supportati per la distribuzione di software SAP, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="c6664-200">For more information about supported operating systems for SAP software deployment, see SAP Note [1928533].</span></span>
3.  <span data-ttu-id="c6664-201">Nella pagina successiva esaminare le condizioni.</span><span class="sxs-lookup"><span data-stu-id="c6664-201">On the next page, review terms and conditions.</span></span>
4.  <span data-ttu-id="c6664-202">Nella casella **Selezionare un modello di distribuzione** selezionare **Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="c6664-202">In the **Select a deployment model** box, select **Resource Manager**.</span></span>
5.  <span data-ttu-id="c6664-203">Selezionare **Crea**.</span><span class="sxs-lookup"><span data-stu-id="c6664-203">Select **Create**.</span></span>

<span data-ttu-id="c6664-204">La procedura guidata illustra in dettaglio l'impostazione dei parametri necessari per creare la macchina virtuale, oltre a tutte le risorse necessarie, come le interfacce di rete e gli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-204">The wizard guides you through setting the required parameters to create the virtual machine, in addition to all required resources, like network interfaces and storage accounts.</span></span> <span data-ttu-id="c6664-205">Ecco alcuni di questi parametri:</span><span class="sxs-lookup"><span data-stu-id="c6664-205">Some of these parameters are:</span></span>

1. <span data-ttu-id="c6664-206">**Nozioni di base**:</span><span class="sxs-lookup"><span data-stu-id="c6664-206">**Basics**:</span></span>
  * <span data-ttu-id="c6664-207">**Nome**: nome della risorsa (la macchina virtuale).</span><span class="sxs-lookup"><span data-stu-id="c6664-207">**Name**: The name of the resource (the virtual machine name).</span></span>
 * <span data-ttu-id="c6664-208">**Nome utente e password** o **Chiave pubblica SSH**: immettere il nome utente e la password dell'utente creato durante il provisioning.</span><span class="sxs-lookup"><span data-stu-id="c6664-208">**Username and password** or **SSH public key**: Enter the username and password of the user that is created during the provisioning.</span></span> <span data-ttu-id="c6664-209">Per una macchina virtuale Linux, è possibile immettere la chiave pubblica Secure Shell (SSH) che si usa per accedere al computer.</span><span class="sxs-lookup"><span data-stu-id="c6664-209">For a Linux virtual machine, you can enter the public Secure Shell (SSH) key that you use to sign in to the machine.</span></span>
 * <span data-ttu-id="c6664-210">**Sottoscrizione**: selezionare la sottoscrizione che si vuole usare per effettuare il provisioning della nuova macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-210">**Subscription**: Select the subscription that you want to use to provision the new virtual machine.</span></span>
 * <span data-ttu-id="c6664-211">**Gruppo di risorse**: nome del gruppo di risorse per la VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-211">**Resource group**: The name of the resource group for the VM.</span></span> <span data-ttu-id="c6664-212">È possibile immettere il nome di un nuovo gruppo di risorse o il nome di uno già esistente.</span><span class="sxs-lookup"><span data-stu-id="c6664-212">You can enter either the name of a new resource group or the name of a resource group that already exists.</span></span>
 * <span data-ttu-id="c6664-213">**Percorso**: dove distribuire la nuova macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-213">**Location**: Where to deploy the new virtual machine.</span></span> <span data-ttu-id="c6664-214">Se si vuole connettere la macchina virtuale alla rete locale, verificare di selezionare il percorso della rete virtuale che connette Azure alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-214">If you want to connect the virtual machine to your on-premises network, make sure you select the location of the virtual network that connects Azure to your on-premises network.</span></span> <span data-ttu-id="c6664-215">Per altre informazioni, vedere [Rete di Microsoft Azure][planning-guide-microsoft-azure-networking] in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-215">For more information, see [Microsoft Azure networking][planning-guide-microsoft-azure-networking] in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide].</span></span>
2. <span data-ttu-id="c6664-216">**Dimensione**:</span><span class="sxs-lookup"><span data-stu-id="c6664-216">**Size**:</span></span>

     <span data-ttu-id="c6664-217">Per un elenco dei tipi di VM supportati, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="c6664-217">For a list of supported VM types, see SAP Note [1928533].</span></span> <span data-ttu-id="c6664-218">Assicurarsi di selezionare il tipo di VM corretto se si vuole usare Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-218">Be sure you select the correct VM type if you want to use Azure Premium Storage.</span></span> <span data-ttu-id="c6664-219">Non tutti i tipi di VM supportano Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="c6664-219">Not all VM types support Premium Storage.</span></span> <span data-ttu-id="c6664-220">Per altre informazioni, vedere [Archiviazione: Archiviazione di Microsoft Azure e dischi dati][planning-guide-storage-microsoft-azure-storage-and-data-disks] e [Archiviazione Premium di Azure][planning-guide-azure-premium-storage] in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-220">For more information, see [Storage: Microsoft Azure Storage and data disks][planning-guide-storage-microsoft-azure-storage-and-data-disks] and [Azure Premium Storage][planning-guide-azure-premium-storage] in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide].</span></span>

3. <span data-ttu-id="c6664-221">**Impostazioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-221">**Settings**:</span></span>
   * <span data-ttu-id="c6664-222">**Account di archiviazione**: selezionare un account di archiviazione esistente o crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="c6664-222">**Storage account**: Select an existing storage account or create a new one.</span></span> <span data-ttu-id="c6664-223">Non tutti i tipi di archiviazione funzionano per l'esecuzione di applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-223">Not all storage types work for running SAP applications.</span></span> <span data-ttu-id="c6664-224">Per altre informazioni sui tipi di Archiviazione, vedere [Archiviazione di Microsoft Azure][dbms-guide-2.3] in [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-224">For more information about storage types, see [Microsoft Azure Storage][dbms-guide-2.3] in [Azure Virtual Machines DBMS deployment for SAP on Linux][dbms-guide].</span></span>
   * <span data-ttu-id="c6664-225">**Rete virtuale** e **Subnet**: per integrare la macchina virtuale con la Intranet, selezionare la rete virtuale connessa alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-225">**Virtual network** and **Subnet**: To integrate the virtual machine with your intranet, select the virtual network that is connected to your on-premises network.</span></span>
   * <span data-ttu-id="c6664-226">**Indirizzo IP pubblico**: selezionare l'indirizzo IP pubblico che si vuole usare oppure immettere i parametri per crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="c6664-226">**Public IP address**: Select the public IP address that you want to use, or enter parameters to create a new public IP address.</span></span> <span data-ttu-id="c6664-227">È possibile usare un indirizzo IP pubblico per accedere alla macchina virtuale tramite Internet.</span><span class="sxs-lookup"><span data-stu-id="c6664-227">You can use a public IP address to access your virtual machine over the Internet.</span></span> <span data-ttu-id="c6664-228">Verificare anche di creare un gruppo di sicurezza di rete per proteggere l'accesso alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-228">Make sure that you also create a network security group to help secure access to your virtual machine.</span></span>
   * <span data-ttu-id="c6664-229">**Gruppo di sicurezza di rete**: per altre informazioni, vedere [Controllare il flusso del traffico di rete con i gruppi di sicurezza di rete][virtual-networks-nsg].</span><span class="sxs-lookup"><span data-stu-id="c6664-229">**Network security group**: For more information, see [Control network traffic flow with network security groups][virtual-networks-nsg].</span></span>
   * <span data-ttu-id="c6664-230">**Disponibilità**: selezionare un set di disponibilità oppure immettere i parametri per crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="c6664-230">**Availability**: Select an availability set, or enter the parameters to create a new availability set.</span></span> <span data-ttu-id="c6664-231">Per altre informazioni, vedere [Set di disponibilità di Azure][planning-guide-3.2.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-231">For more information, see [Azure availability sets][planning-guide-3.2.3].</span></span>
   * <span data-ttu-id="c6664-232">**Monitoraggio**: è possibile selezionare **Disabilita** per la diagnostica del monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-232">**Monitoring**: You can select **Disable** for monitoring diagnostics.</span></span> <span data-ttu-id="c6664-233">Viene abilitata automaticamente quando si eseguono i comandi per abilitare l'estensione di monitoraggio avanzato di Azure, come descritto in [Configurare il monitoraggio][deployment-guide-configure-monitoring-scenario-1].</span><span class="sxs-lookup"><span data-stu-id="c6664-233">It is enabled automatically when you run the commands to enable the Azure Enhanced Monitoring Extension, as described in [Configure monitoring][deployment-guide-configure-monitoring-scenario-1].</span></span>

4. <span data-ttu-id="c6664-234">**Riepilogo**:</span><span class="sxs-lookup"><span data-stu-id="c6664-234">**Summary**:</span></span>

  <span data-ttu-id="c6664-235">Riesaminare le selezioni e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6664-235">Review your selections, and then select **OK**.</span></span>

<span data-ttu-id="c6664-236">La macchina virtuale viene distribuita nel gruppo di risorse selezionato.</span><span class="sxs-lookup"><span data-stu-id="c6664-236">Your virtual machine is deployed in the resource group you selected.</span></span>

#### <a name="create-a-virtual-machine-by-using-a-template"></a><span data-ttu-id="c6664-237">Creare una macchina virtuale usando un modello</span><span class="sxs-lookup"><span data-stu-id="c6664-237">Create a virtual machine by using a template</span></span>
<span data-ttu-id="c6664-238">È possibile creare una macchina virtuale usando uno dei modelli SAP pubblicati nel [repository di GitHub azure-quickstart-templates][azure-quickstart-templates-github].</span><span class="sxs-lookup"><span data-stu-id="c6664-238">You can create a virtual machine by using one of the SAP templates published in the [azure-quickstart-templates GitHub repository][azure-quickstart-templates-github].</span></span> <span data-ttu-id="c6664-239">È anche possibile creare una macchina virtuale manualmente usando il [portale di Azure][virtual-machines-windows-tutorial], [PowerShell][virtual-machines-ps-create-preconfigure-windows-resource-manager-vms] o l'[interfaccia della riga di comando di Azure][virtual-machines-linux-tutorial].</span><span class="sxs-lookup"><span data-stu-id="c6664-239">You also can manually create a virtual machine by using the [Azure portal][virtual-machines-windows-tutorial], [PowerShell][virtual-machines-ps-create-preconfigure-windows-resource-manager-vms], or [Azure CLI][virtual-machines-linux-tutorial].</span></span>

* <span data-ttu-id="c6664-240">[**Modello per configurazione a due livelli (una sola macchina virtuale)** (sap-2-tier-marketplace-image)][sap-templates-2-tier-marketplace-image]</span><span class="sxs-lookup"><span data-stu-id="c6664-240">[**Two-tier configuration (only one virtual machine) template** (sap-2-tier-marketplace-image)][sap-templates-2-tier-marketplace-image]</span></span>

  <span data-ttu-id="c6664-241">Per creare un sistema a due livelli usando una sola macchina virtuale, usare questo modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-241">To create a two-tier system by using only one virtual machine, use this template.</span></span>
* <span data-ttu-id="c6664-242">[**Modello per configurazione a tre livelli (più macchine virtuali)** (sap-3-tier-marketplace-image)][sap-templates-3-tier-marketplace-image]</span><span class="sxs-lookup"><span data-stu-id="c6664-242">[**Three-tier configuration (multiple virtual machines) template** (sap-3-tier-marketplace-image)][sap-templates-3-tier-marketplace-image]</span></span>

  <span data-ttu-id="c6664-243">Per creare un sistema a tre livelli usando più macchine virtuali, usare questo modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-243">To create a three-tier system by using multiple virtual machines, use this template.</span></span>

<span data-ttu-id="c6664-244">Nel portale di Azure immettere i parametri seguenti per il modello:</span><span class="sxs-lookup"><span data-stu-id="c6664-244">In the Azure portal, enter the following parameters for the template:</span></span>

1. <span data-ttu-id="c6664-245">**Nozioni di base**:</span><span class="sxs-lookup"><span data-stu-id="c6664-245">**Basics**:</span></span>
  * <span data-ttu-id="c6664-246">**Sottoscrizione**: sottoscrizione da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-246">**Subscription**: The subscription to use to deploy the template.</span></span>
  * <span data-ttu-id="c6664-247">**Gruppo di risorse**: gruppo di risorse da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-247">**Resource group**: The resource group to use to deploy the template.</span></span> <span data-ttu-id="c6664-248">È possibile creare un nuovo gruppo di risorse o selezionarne uno esistente nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6664-248">You can create a new resource group, or you can select an existing resource group in the subscription.</span></span>
  * <span data-ttu-id="c6664-249">**Percorso**: dove distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-249">**Location**: Where to deploy the template.</span></span> <span data-ttu-id="c6664-250">Se si seleziona un gruppo di risorse esistente, viene usato il percorso di tale gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6664-250">If you selected an existing resource group, the location of that resource group is used.</span></span>

2. <span data-ttu-id="c6664-251">**Impostazioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-251">**Settings**:</span></span>
  * <span data-ttu-id="c6664-252">**ID sistema SAP**: ID del sistema SAP (SID).</span><span class="sxs-lookup"><span data-stu-id="c6664-252">**SAP System ID**: The SAP System ID (SID).</span></span>
  * <span data-ttu-id="c6664-253">**Tipo di sistema operativo**: sistema operativo che si vuole distribuire, ad esempio, Windows Server 2012 R2, SUSE Linux Enterprise Server 12 (SLES 12) o Red Hat Enterprise Linux 7.2 (RHEL 7.2).</span><span class="sxs-lookup"><span data-stu-id="c6664-253">**OS type**: The operating system you want to deploy, for example, Windows Server 2012 R2, SUSE Linux Enterprise Server 12 (SLES 12), or Red Hat Enterprise Linux 7.2 (RHEL 7.2).</span></span>

    <span data-ttu-id="c6664-254">L'elenco predefinito non visualizza tutti i sistemi operativi supportati.</span><span class="sxs-lookup"><span data-stu-id="c6664-254">The default list view does not show all supported operating systems.</span></span> <span data-ttu-id="c6664-255">Selezionare **Visualizza tutto** per un elenco completo.</span><span class="sxs-lookup"><span data-stu-id="c6664-255">Select **see all** for a full list.</span></span> <span data-ttu-id="c6664-256">Per altre informazioni sui sistemi operativi supportati per la distribuzione di software SAP, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="c6664-256">For more information about supported operating systems for SAP software deployment, see SAP Note [1928533].</span></span>
  * <span data-ttu-id="c6664-257">**Dimensioni del sistema SAP**: dimensioni del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-257">**SAP system size**: The size of the SAP system.</span></span>

    <span data-ttu-id="c6664-258">Numero di SAPS forniti dal nuovo sistema.</span><span class="sxs-lookup"><span data-stu-id="c6664-258">The number of SAPS the new system provides.</span></span> <span data-ttu-id="c6664-259">Se non si è certi del numero di SAPS necessari per il sistema, chiedere all'integratore di sistemi o al partner tecnologico SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-259">If you are not sure how many SAPS the system requires, ask your SAP Technology Partner or System Integrator.</span></span>
  * <span data-ttu-id="c6664-260">**Disponibilità del sistema** (solo per il modello a tre livelli): disponibilità del sistema.</span><span class="sxs-lookup"><span data-stu-id="c6664-260">**System availability** (three-tier template only): The system availability.</span></span>

    <span data-ttu-id="c6664-261">Selezionare **HA** per una configurazione adatta a un'installazione a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="c6664-261">Select **HA** for a configuration that is suitable for a high-availability installation.</span></span> <span data-ttu-id="c6664-262">Vengono creati due server di database e due server per ABAP SAP Central Services (ASCS).</span><span class="sxs-lookup"><span data-stu-id="c6664-262">Two database servers and two servers for ABAP SAP Central Services (ASCS) are created.</span></span>
  * <span data-ttu-id="c6664-263">**Tipo di archiviazione** (solo per il modello a due livelli): tipo di risorsa di archiviazione da usare.</span><span class="sxs-lookup"><span data-stu-id="c6664-263">**Storage type** (two-tier template only): The type of storage to use.</span></span>

    <span data-ttu-id="c6664-264">Per i sistemi più grandi, è consigliabile usare Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-264">For larger systems, we highly recommend using Azure Premium Storage.</span></span> <span data-ttu-id="c6664-265">Per altre informazioni sui tipi di archiviazione, vedere queste risorse:</span><span class="sxs-lookup"><span data-stu-id="c6664-265">For more information about storage types, see these resources:</span></span>
      * <span data-ttu-id="c6664-266">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194] (Uso dell'archiviazione unità SSD di Azure Premium per l'istanza DBMS di SAP)</span><span class="sxs-lookup"><span data-stu-id="c6664-266">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194]</span></span>
      * <span data-ttu-id="c6664-267">[Archiviazione di Microsoft Azure][dbms-guide-2.3] in [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-267">[Microsoft Azure Storage][dbms-guide-2.3] in [Azure Virtual Machines DBMS deployment for SAP on Linux][dbms-guide]</span></span>
      * <span data-ttu-id="c6664-268">[Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure][storage-premium-storage-preview-portal]</span><span class="sxs-lookup"><span data-stu-id="c6664-268">[Premium Storage: High-performance storage for Azure Virtual Machine workloads][storage-premium-storage-preview-portal]</span></span>
      * <span data-ttu-id="c6664-269">[Introduzione ad Archiviazione di Microsoft Azure][storage-introduction]</span><span class="sxs-lookup"><span data-stu-id="c6664-269">[Introduction to Microsoft Azure Storage][storage-introduction]</span></span>
  * <span data-ttu-id="c6664-270">**Nome utente amministratore** e **Password amministratore**: nome utente e password dell'amministratore.</span><span class="sxs-lookup"><span data-stu-id="c6664-270">**Admin username** and **Admin password**: A username and password.</span></span>
    <span data-ttu-id="c6664-271">Viene creato un nuovo utente, per l'accesso alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-271">A new user is created, for signing in to the virtual machine.</span></span>
  * <span data-ttu-id="c6664-272">**Subnet nuova o esistente**: determina se vengono create una nuova rete virtuale e una nuova subnet o viene usata una subnet esistente.</span><span class="sxs-lookup"><span data-stu-id="c6664-272">**New or existing subnet**: Determines whether a new virtual network and subnet are  created or an existing subnet is used.</span></span> <span data-ttu-id="c6664-273">Se è già presente una rete virtuale connessa alla rete locale, selezionare **Esistente**.</span><span class="sxs-lookup"><span data-stu-id="c6664-273">If you already have a virtual network that is connected to your on-premises network, select **Existing**.</span></span>
  * <span data-ttu-id="c6664-274">**ID subnet**: ID della subnet a cui si connetteranno le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6664-274">**Subnet ID**: The ID of the subnet the virtual machines will connect to.</span></span> <span data-ttu-id="c6664-275">Selezionare la subnet della rete virtuale Azure ExpressRoute o VPN da usare per connettere la macchina virtuale alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-275">Select the subnet of your virtual private network (VPN) or Azure ExpressRoute virtual network to use to connect the virtual machine to your on-premises network.</span></span> <span data-ttu-id="c6664-276">L'ID in genere è simile al seguente: /subscriptions/&lt;ID sottoscrizione>/resourceGroups/&lt;nome gruppo di risorse>/providers/Microsoft.Network/virtualNetworks/&lt;nome rete virtuale>/subnets/&lt;nome subnet></span><span class="sxs-lookup"><span data-stu-id="c6664-276">The ID usually looks like this: /subscriptions/&lt;subscription id>/resourceGroups/&lt;resource group name>/providers/Microsoft.Network/virtualNetworks/&lt;virtual network name>/subnets/&lt;subnet name></span></span>

3. <span data-ttu-id="c6664-277">**Condizioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-277">**Terms and conditions**:</span></span>  
    <span data-ttu-id="c6664-278">Riesaminare e accettare le note legali.</span><span class="sxs-lookup"><span data-stu-id="c6664-278">Review and accept the legal terms.</span></span>

4.  <span data-ttu-id="c6664-279">Selezionare **Acquisto**.</span><span class="sxs-lookup"><span data-stu-id="c6664-279">Select **Purchase**.</span></span>

<span data-ttu-id="c6664-280">Quando si usa un'immagine di Azure Marketplace, per impostazione predefinita viene distribuito l'agente di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-280">The Azure VM Agent is deployed by default when you use an image from the Azure Marketplace.</span></span>

#### <a name="configure-proxy-settings"></a><span data-ttu-id="c6664-281">Configurare le impostazioni proxy</span><span class="sxs-lookup"><span data-stu-id="c6664-281">Configure proxy settings</span></span>
<span data-ttu-id="c6664-282">A seconda della configurazione della rete locale, potrebbe essere necessario configurare il proxy nella VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-282">Depending on how your on-premises network is configured, you might need to set up the proxy on your VM.</span></span> <span data-ttu-id="c6664-283">Se la VM è connessa alla rete locale tramite VPN o ExpressRoute, la VM potrebbe non riuscire ad accedere a Internet e non riuscirà a scaricare le estensioni necessarie o a raccogliere i dati di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-283">If your VM is connected to your on-premises network via VPN or ExpressRoute, the VM might not be able to access the Internet, and won't be able to download the required extensions or collect monitoring data.</span></span> <span data-ttu-id="c6664-284">Per altre informazioni, vedere [Configurare il proxy][deployment-guide-configure-proxy].</span><span class="sxs-lookup"><span data-stu-id="c6664-284">For more information, see [Configure the proxy][deployment-guide-configure-proxy].</span></span>

#### <a name="join-a-domain-windows-only"></a><span data-ttu-id="c6664-285">Aggiungere a un dominio (solo per Windows)</span><span class="sxs-lookup"><span data-stu-id="c6664-285">Join a domain (Windows only)</span></span>
<span data-ttu-id="c6664-286">Se la distribuzione di Azure è connessa a un'istanza di DNS o di Active Directory locale tramite una connessione VPN da sito a sito di Azure o ExpressRoute (questa connessione è detta *cross-premise* in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide]), è previsto che la VM sia aggiunta a un dominio locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-286">If your Azure deployment is connected to an on-premises Active Directory or DNS instance via an Azure site-to-site VPN connection or ExpressRoute (this is called *cross-premises* in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide]), it is expected that the VM is joining an on-premises domain.</span></span> <span data-ttu-id="c6664-287">Per altre informazioni sulle considerazioni relative a questa attività, vedere [Aggiungere una VM a un dominio locale (solo per Windows)][deployment-guide-4.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-287">For more information about considerations for this task, see [Join a VM to an on-premises domain (Windows only)][deployment-guide-4.3].</span></span>

#### <span data-ttu-id="c6664-288"><a name="ec323ac3-1de9-4c3a-b770-4ff701def65b"></a>Configurare il monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-288"><a name="ec323ac3-1de9-4c3a-b770-4ff701def65b"></a>Configure monitoring</span></span>
<span data-ttu-id="c6664-289">Assicurarsi che l'ambiente supporti SAP, configurare l'estensione di monitoraggio di Azure per SAP come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-289">To be sure your environment supports SAP, set up the Azure Monitoring Extension for SAP as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span> <span data-ttu-id="c6664-290">Controllare i prerequisiti per il monitoraggio di SAP e le versioni minime obbligatorie del kernel SAP e dell'agente host SAP nelle risorse elencate in [Risorse SAP][deployment-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-290">Check the prerequisites for SAP monitoring, and required minimum versions of SAP Kernel and SAP Host Agent, in the resources listed in [SAP resources][deployment-guide-2.2].</span></span>

#### <a name="monitoring-check"></a><span data-ttu-id="c6664-291">Controllo del monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-291">Monitoring check</span></span>
<span data-ttu-id="c6664-292">Controllare se il monitoraggio funziona, come descritto in [Controlli e risoluzione dei problemi per la configurazione del monitoraggio end-to-end][deployment-guide-troubleshooting-chapter].</span><span class="sxs-lookup"><span data-stu-id="c6664-292">Check whether monitoring is working, as described in [Checks and troubleshooting for setting up end-to-end monitoring][deployment-guide-troubleshooting-chapter].</span></span>

#### <a name="post-deployment-steps"></a><span data-ttu-id="c6664-293">Passaggi post-distribuzione</span><span class="sxs-lookup"><span data-stu-id="c6664-293">Post-deployment steps</span></span>
<span data-ttu-id="c6664-294">Dopo la creazione e la distribuzione della VM, è necessario installare i componenti software necessari nella VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-294">After you create the VM and the VM is deployed, you need to install the required software components in the VM.</span></span> <span data-ttu-id="c6664-295">Data la sequenza di distribuzione/installazione del software in questo tipo di distribuzione di VM, il software da installare deve essere già disponibile in Azure in un'altra VM o come disco collegabile</span><span class="sxs-lookup"><span data-stu-id="c6664-295">Because of the deployment/software installation sequence in this type of VM deployment, the software to be installed must already be available, either in Azure, on another VM, or as a disk that can be attached.</span></span> <span data-ttu-id="c6664-296">oppure considerare la possibilità di usare uno scenario cross-premise, in cui la connettività agli asset locali (condivisioni di installazione) è data per scontata.</span><span class="sxs-lookup"><span data-stu-id="c6664-296">Or, consider using a cross-premises scenario, in which connectivity to the on-premises assets (installation shares) is given.</span></span>

<span data-ttu-id="c6664-297">Dopo aver distribuito la VM in Azure, installare il software SAP nella VM con le stesse linee guida e gli stessi strumenti usati in un ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-297">After you deploy your VM in Azure, follow the same guidelines and tools to install the SAP software on your VM as you would in an on-premises environment.</span></span> <span data-ttu-id="c6664-298">Per installare il software SAP in una VM di Azure, sia SAP che Microsoft consigliano di caricare e archiviare il supporto di installazione SAP in dischi rigidi virtuali di Azure o di creare una VM di Azure che funge da file server contenente tutti i supporti di installazione SAP necessari.</span><span class="sxs-lookup"><span data-stu-id="c6664-298">To install SAP software on an Azure VM, both SAP and Microsoft recommend that you upload and store the SAP installation media on Azure VHDs, or that you create an Azure VM that works as a file server that has all the required SAP installation media.</span></span>

<span data-ttu-id="c6664-299">[comment]: <> (MSSedusch TODO why do we need to recommend a file management, for example, File Server or VHD? Is that so different from on-premises?)</span><span class="sxs-lookup"><span data-stu-id="c6664-299">[comment]: <> (MSSedusch TODO why do we need to recommend a file management, for example, File Server or VHD? Is that so different from on-premises?)</span></span>

### <span data-ttu-id="c6664-300"><a name="54a1fc6d-24fd-4feb-9c57-ac588a55dff2"></a>Scenario 2: Distribuzione di una VM con un'immagine personalizzata per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-300"><a name="54a1fc6d-24fd-4feb-9c57-ac588a55dff2"></a>Scenario 2: Deploying a VM with a custom image for SAP</span></span>
<span data-ttu-id="c6664-301">Poiché le diverse versioni di un sistema operativo o DBMS richiedono patch diverse, le immagini trovare in Azure Marketplace potrebbero non soddisfare tutte le esigenze.</span><span class="sxs-lookup"><span data-stu-id="c6664-301">Because different versions of an operating system or DBMS have different patch requirements, the images you find in the Azure Marketplace might not meet your needs.</span></span> <span data-ttu-id="c6664-302">È consigliabile invece creare una VM usando la propria immagine di VM del sistema operativo/DBMS, che sarà possibile distribuire di nuovo in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="c6664-302">You might instead want to create a VM by using your own OS/DBMS VM image, which you can deploy again later.</span></span>
<span data-ttu-id="c6664-303">La procedura per creare un'immagine privata per Linux è diversa da quella per crearne una per Windows.</span><span class="sxs-lookup"><span data-stu-id="c6664-303">You use different steps to create a private image for Linux than to create one for Windows.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="c6664-305">Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-305">Windows</span></span>
>
> <span data-ttu-id="c6664-306">Per preparare un'immagine Windows da poter usare per distribuire più macchine virtuali, è necessario eseguire l'astrazione o la generalizzazione delle impostazioni di Windows (come il nome host e il SID di Windows) nella VM locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-306">To prepare a Windows image that you can use to deploy multiple virtual machines, the Windows settings (like Windows SID and hostname) must be abstracted or generalized on the on-premises VM.</span></span> <span data-ttu-id="c6664-307">A tale scopo, è possibile usare [sysprep](https://msdn.microsoft.com/library/hh825084.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6664-307">You can use [sysprep](https://msdn.microsoft.com/library/hh825084.aspx) to do this.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="c6664-309">Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-309">Linux</span></span>
>
> <span data-ttu-id="c6664-310">Per preparare un'immagine Linux da poter usare per distribuire più macchine virtuali, è necessario eseguire l'astrazione o la generalizzazione di alcune impostazioni di Linux nella VM locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-310">To prepare a Linux image that you can use to deploy multiple virtual machines, some Linux settings must be abstracted or generalized on the on-premises VM.</span></span> <span data-ttu-id="c6664-311">A tale scopo, è possibile usare `waagent -deprovision`.</span><span class="sxs-lookup"><span data-stu-id="c6664-311">You can use `waagent -deprovision`  to do this.</span></span> <span data-ttu-id="c6664-312">Per altre informazioni, vedere [Acquisire una macchina virtuale Linux in esecuzione in Azure][virtual-machines-linux-capture-image] e [Guida dell'utente dell'agente Linux di Azure][virtual-machines-linux-agent-user-guide-command-line-options].</span><span class="sxs-lookup"><span data-stu-id="c6664-312">For more information, see [Capture a Linux virtual machine running on Azure][virtual-machines-linux-capture-image] and the [Azure Linux agent user guide][virtual-machines-linux-agent-user-guide-command-line-options].</span></span>
>
>

- - -
<span data-ttu-id="c6664-313">È possibile preparare e creare un'immagine personalizzata e quindi usarla per creare più VM nuove,</span><span class="sxs-lookup"><span data-stu-id="c6664-313">You can prepare and create a custom image, and then use it to create multiple new VMs.</span></span> <span data-ttu-id="c6664-314">come illustrato in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-314">This is described in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide].</span></span> <span data-ttu-id="c6664-315">Configurare il contenuto del database usando SAP Software Provisioning Manager per installare un nuovo sistema SAP (che ripristina un backup del database da un disco rigido virtuale collegato alla macchina virtuale) o ripristinando un backup del database direttamente da Archiviazione di Azure, se l'operazione è supportata dal sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="c6664-315">Set up your database content either by using SAP Software Provisioning Manager to install a new SAP system (restores a database backup from a VHD that's attached to the virtual machine) or by directly restoring a database backup from Azure storage, if your DBMS supports it.</span></span> <span data-ttu-id="c6664-316">Per altre informazioni, vedere [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="c6664-316">For more information, see [Azure Virtual Machines DBMS deployment for SAP on Linux][dbms-guide].</span></span> <span data-ttu-id="c6664-317">Se è già stato installato un sistema SAP nella macchina virtuale locale (soprattutto per sistemi a due livelli), è possibile adattare le impostazioni del sistema SAP dopo la distribuzione della macchina virtuale di Azure usando la procedura di ridenominazione del sistema supportata da SAP Software Provisioning Manager (nota SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="c6664-317">If you have already installed an SAP system on your on-premises VM (especially for two-tier systems), you can adapt the SAP system settings after the deployment of the Azure VM by using the System Rename procedure supported by SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="c6664-318">In caso contrario, è possibile installare il software SAP dopo la distribuzione della VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-318">Otherwise, you can install the SAP software after you deploy the Azure VM.</span></span>

<span data-ttu-id="c6664-319">Il diagramma di flusso seguente illustra la sequenza di passaggi specifica di SAP per distribuire una VM da un'immagine personalizzata:</span><span class="sxs-lookup"><span data-stu-id="c6664-319">The following flowchart shows the SAP-specific sequence of steps for deploying a VM from a custom image:</span></span>

![Diagramma di flusso della distribuzione di una VM per sistemi SAP con un'immagine di VM di marketplace privato][deployment-guide-figure-300]

#### <a name="create-the-virtual-machine"></a><span data-ttu-id="c6664-321">Creare la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="c6664-321">Create the virtual machine</span></span>
<span data-ttu-id="c6664-322">Per creare una distribuzione usando un'immagine del sistema operativo privata dal portale di Azure, usare uno dei modelli SAP seguenti.</span><span class="sxs-lookup"><span data-stu-id="c6664-322">To create a deployment by using a private OS image from the Azure portal, use one of the following SAP templates.</span></span> <span data-ttu-id="c6664-323">Questi modelli sono pubblicati nel [repository di GitHub azure-quickstart-templates][azure-quickstart-templates-github].</span><span class="sxs-lookup"><span data-stu-id="c6664-323">These templates are published in the [azure-quickstart-templates GitHub repository][azure-quickstart-templates-github].</span></span> <span data-ttu-id="c6664-324">È anche possibile creare una macchina virtuale manualmente usando [PowerShell][virtual-machines-upload-image-windows-resource-manager].</span><span class="sxs-lookup"><span data-stu-id="c6664-324">You also can manually create a virtual machine, by using [PowerShell][virtual-machines-upload-image-windows-resource-manager].</span></span>

* <span data-ttu-id="c6664-325">[**Modello per configurazione a due livelli (una sola macchina virtuale)** (sap-2-tier-user-image)][sap-templates-2-tier-user-image]</span><span class="sxs-lookup"><span data-stu-id="c6664-325">[**Two-tier configuration (only one virtual machine) template** (sap-2-tier-user-image)][sap-templates-2-tier-user-image]</span></span>

  <span data-ttu-id="c6664-326">Per creare un sistema a due livelli usando una sola macchina virtuale, usare questo modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-326">To create a two-tier system by using only one virtual machine, use this template.</span></span>
* <span data-ttu-id="c6664-327">[**Modello per configurazione a tre livelli (più macchine virtuali)** (sap-3-tier-user-image)][sap-templates-3-tier-user-image]</span><span class="sxs-lookup"><span data-stu-id="c6664-327">[**Three-tier configuration (multiple virtual machines) template** (sap-3-tier-user-image)][sap-templates-3-tier-user-image]</span></span>

  <span data-ttu-id="c6664-328">Per creare un sistema a tre livelli usando più macchine virtuali o l'immagine del sistema operativo, usare questo modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-328">To create a three-tier system by using multiple virtual machines or your own OS image, use this template.</span></span>

<span data-ttu-id="c6664-329">Nel portale di Azure immettere i parametri seguenti per il modello:</span><span class="sxs-lookup"><span data-stu-id="c6664-329">In the Azure portal, enter the following parameters for the template:</span></span>

1. <span data-ttu-id="c6664-330">**Nozioni di base**:</span><span class="sxs-lookup"><span data-stu-id="c6664-330">**Basics**:</span></span>
  * <span data-ttu-id="c6664-331">**Sottoscrizione**: sottoscrizione da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-331">**Subscription**: The subscription to use to deploy the template.</span></span>
  * <span data-ttu-id="c6664-332">**Gruppo di risorse**: gruppo di risorse da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-332">**Resource group**: The resource group to use to deploy the template.</span></span> <span data-ttu-id="c6664-333">È possibile creare un nuovo gruppo di risorse o selezionarne uno esistente nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6664-333">You can create a new resource group or select an existing resource group in the subscription.</span></span>
  * <span data-ttu-id="c6664-334">**Percorso**: dove distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-334">**Location**: Where to deploy the template.</span></span> <span data-ttu-id="c6664-335">Se si seleziona un gruppo di risorse esistente, viene usato il percorso di tale gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6664-335">If you selected an existing resource group, the location of that resource group is used.</span></span>
2. <span data-ttu-id="c6664-336">**Impostazioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-336">**Settings**:</span></span>
  * <span data-ttu-id="c6664-337">**ID sistema SAP**: ID del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-337">**SAP System ID**: The SAP System ID.</span></span>
  * <span data-ttu-id="c6664-338">**Tipo di sistema operativo**: tipo di sistema operativo da distribuire (Windows o Linux).</span><span class="sxs-lookup"><span data-stu-id="c6664-338">**OS type**: The operating system type you want to deploy (Windows or Linux).</span></span>
  * <span data-ttu-id="c6664-339">**Dimensioni del sistema SAP**: dimensioni del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-339">**SAP system size**: The size of the SAP system.</span></span>

    <span data-ttu-id="c6664-340">Numero di SAPS forniti dal nuovo sistema.</span><span class="sxs-lookup"><span data-stu-id="c6664-340">The number of SAPS the new system provides.</span></span> <span data-ttu-id="c6664-341">Se non si è certi del numero di SAPS necessari per il sistema, chiedere all'integratore di sistemi o al partner tecnologico SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-341">If you are not sure how many SAPS the system requires, ask your SAP Technology Partner or System Integrator.</span></span>
  * <span data-ttu-id="c6664-342">**Disponibilità del sistema** (solo per il modello a tre livelli): disponibilità del sistema.</span><span class="sxs-lookup"><span data-stu-id="c6664-342">**System availability** (three-tier template only): The system availability.</span></span>

    <span data-ttu-id="c6664-343">Selezionare **HA** per una configurazione adatta a un'installazione a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="c6664-343">Select **HA** for a configuration that is suitable for a high-availability installation.</span></span> <span data-ttu-id="c6664-344">Vengono creati due server di database e due server per ASCS.</span><span class="sxs-lookup"><span data-stu-id="c6664-344">Two database servers and two servers for ASCS are created.</span></span>
  * <span data-ttu-id="c6664-345">**Tipo di archiviazione** (solo per il modello a due livelli): tipo di risorsa di archiviazione da usare.</span><span class="sxs-lookup"><span data-stu-id="c6664-345">**Storage type** (two-tier template only): The type of storage to use.</span></span>

    <span data-ttu-id="c6664-346">Per i sistemi più grandi, è consigliabile usare Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-346">For larger systems, we highly recommend using Azure Premium Storage.</span></span> <span data-ttu-id="c6664-347">Per altre informazioni sui tipi di archiviazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-347">For more information about storage types, see the following resources:</span></span>
      * <span data-ttu-id="c6664-348">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194] (Uso dell'archiviazione unità SSD di Azure Premium per l'istanza DBMS di SAP)</span><span class="sxs-lookup"><span data-stu-id="c6664-348">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194]</span></span>
      * <span data-ttu-id="c6664-349">[Archiviazione di Microsoft Azure][dbms-guide-2.3] in [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-349">[Microsoft Azure Storage][dbms-guide-2.3] in [Azure Virtual Machines DBMS deployment for SAP on Linux][dbms-guide]</span></span>
      * <span data-ttu-id="c6664-350">[Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure][storage-premium-storage-preview-portal]</span><span class="sxs-lookup"><span data-stu-id="c6664-350">[Premium Storage: High-performance storage for Azure virtual machine workloads][storage-premium-storage-preview-portal]</span></span>
      * <span data-ttu-id="c6664-351">[Introduzione ad Archiviazione di Microsoft Azure][storage-introduction]</span><span class="sxs-lookup"><span data-stu-id="c6664-351">[Introduction to Microsoft Azure Storage][storage-introduction]</span></span>
  * <span data-ttu-id="c6664-352">**User Image VHD URI** (URI del disco rigido virtuale dell'immagine utente): URI del disco rigido virtuale dell'immagine del sistema operativo privata, ad esempio https://&lt;nomeaccount>.blob.core.windows.net/vhds/userimage.vhd.</span><span class="sxs-lookup"><span data-stu-id="c6664-352">**User image VHD URI**: The URI of the private OS image VHD, for example, https://&lt;accountname>.blob.core.windows.net/vhds/userimage.vhd.</span></span>
  * <span data-ttu-id="c6664-353">**User image storage account** (Account di archiviazione dell'immagine utente): nome dell'account di archiviazione in cui è archiviata l'immagine privata del sistema operativo, ad esempio &lt;nomeaccount> in https://&lt;nomeaccount>.blob.core.windows.net/vhds/userimage.vhd.</span><span class="sxs-lookup"><span data-stu-id="c6664-353">**User image storage account**: The name of the storage account where the private OS image is stored, for example, &lt;accountname> in https://&lt;accountname>.blob.core.windows.net/vhds/userimage.vhd.</span></span>
  * <span data-ttu-id="c6664-354">**Nome utente amministratore** e **Password amministratore**: nome utente e password dell'amministratore.</span><span class="sxs-lookup"><span data-stu-id="c6664-354">**Admin username** and **Admin password**: The username and password.</span></span>

    <span data-ttu-id="c6664-355">Viene creato un nuovo utente, per l'accesso alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-355">A new user is created, for signing in to the virtual machine.</span></span>
  * <span data-ttu-id="c6664-356">**Subnet nuova o esistente**: determina se vengono create una nuova rete virtuale e una nuova subnet o viene usata una subnet esistente.</span><span class="sxs-lookup"><span data-stu-id="c6664-356">**New or existing subnet**: Determines whether a new virtual network and subnet is created or an existing subnet is used.</span></span> <span data-ttu-id="c6664-357">Se è già presente una rete virtuale connessa alla rete locale, selezionare **Esistente**.</span><span class="sxs-lookup"><span data-stu-id="c6664-357">If you already have a virtual network that is connected to your on-premises network, select **Existing**.</span></span>
  * <span data-ttu-id="c6664-358">**ID subnet**: ID della subnet a cui si connetteranno le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6664-358">**Subnet ID**: The ID of the subnet to which the virtual machines will connect to.</span></span> <span data-ttu-id="c6664-359">Selezionare la subnet della rete virtuale ExpressRoute o VPN da usare per connettere la macchina virtuale alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-359">Select the subnet of your VPN or ExpressRoute virtual network to use to connect the virtual machine to your on-premises network.</span></span> <span data-ttu-id="c6664-360">L'ID in genere è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c6664-360">The ID usually looks like this:</span></span>

    <span data-ttu-id="c6664-361">/subscriptions/&lt;ID sottoscrizione>/resourceGroups/&lt;nome gruppo di risorse>/providers/Microsoft.Network/virtualNetworks/&lt;nome rete virtuale>/subnets/&lt;nome subnet></span><span class="sxs-lookup"><span data-stu-id="c6664-361">/subscriptions/&lt;subscription id>/resourceGroups/&lt;resource group name>/providers/Microsoft.Network/virtualNetworks/&lt;virtual network name>/subnets/&lt;subnet name></span></span>

3. <span data-ttu-id="c6664-362">**Condizioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-362">**Terms and conditions**:</span></span>  
    <span data-ttu-id="c6664-363">Riesaminare e accettare le note legali.</span><span class="sxs-lookup"><span data-stu-id="c6664-363">Review and accept the legal terms.</span></span>

4.  <span data-ttu-id="c6664-364">Selezionare **Acquisto**.</span><span class="sxs-lookup"><span data-stu-id="c6664-364">Select **Purchase**.</span></span>

#### <a name="install-the-vm-agent-linux-only"></a><span data-ttu-id="c6664-365">Installare l'agente di macchine virtuali (solo per Linux)</span><span class="sxs-lookup"><span data-stu-id="c6664-365">Install the VM Agent (Linux only)</span></span>
<span data-ttu-id="c6664-366">Per usare i modelli descritti nella sezione precedente, l'agente Linux deve essere già installato nell'immagine utente o la distribuzione avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="c6664-366">To use the templates described in the preceding section, the Linux Agent must already be installed in the user image, or the deployment will fail.</span></span> <span data-ttu-id="c6664-367">Scaricare e installare l'agente di macchine virtuali nell'immagine utente come descritto in [Scaricare, installare e abilitare l'agente di macchine virtuali di Azure][deployment-guide-4.4].</span><span class="sxs-lookup"><span data-stu-id="c6664-367">Download and install the VM Agent in the user image as described in [Download, install, and enable the Azure VM Agent][deployment-guide-4.4].</span></span> <span data-ttu-id="c6664-368">Se non si usano i modelli, si può anche installare l'agente di macchine virtuali in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="c6664-368">If you don’t use the templates, you also can install the VM Agent later.</span></span>

#### <a name="join-a-domain-windows-only"></a><span data-ttu-id="c6664-369">Aggiungere a un dominio (solo per Windows)</span><span class="sxs-lookup"><span data-stu-id="c6664-369">Join a domain (Windows only)</span></span>
<span data-ttu-id="c6664-370">Se la distribuzione di Azure è connessa a un'istanza di DNS o di Active Directory locale tramite una connessione VPN da sito a sito di Azure o Azure ExpressRoute (questa connessione è detta *cross-premise* in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide]), è previsto che la VM sia aggiunta a un dominio locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-370">If your Azure deployment is connected to an on-premises Active Directory or DNS instance via an Azure site-to-site VPN connection or Azure ExpressRoute (this is called *cross-premises* in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide]), it is expected that the VM is joining an on-premises domain.</span></span> <span data-ttu-id="c6664-371">Per altre informazioni sulle considerazioni relative a questo passaggio, vedere [Aggiungere una VM a un dominio locale (solo per Windows)][deployment-guide-4.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-371">For more information about considerations for this step, see [Join a VM to an on-premises domain (Windows only)][deployment-guide-4.3].</span></span>

#### <a name="configure-proxy-settings"></a><span data-ttu-id="c6664-372">Configurare le impostazioni proxy</span><span class="sxs-lookup"><span data-stu-id="c6664-372">Configure proxy settings</span></span>
<span data-ttu-id="c6664-373">A seconda della configurazione della rete locale, potrebbe essere necessario configurare il proxy nella VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-373">Depending on how your on-premises network is configured, you might need to set up the proxy on your VM.</span></span> <span data-ttu-id="c6664-374">Se la VM è connessa alla rete locale tramite VPN o ExpressRoute, la VM potrebbe non riuscire ad accedere a Internet e non riuscirà a scaricare le estensioni necessarie o a raccogliere i dati di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-374">If your VM is connected to your on-premises network via VPN or ExpressRoute, the VM might not be able to access the Internet, and won't be able to download the required extensions or collect monitoring data.</span></span> <span data-ttu-id="c6664-375">Per altre informazioni, vedere [Configurare il proxy][deployment-guide-configure-proxy].</span><span class="sxs-lookup"><span data-stu-id="c6664-375">For more information, see [Configure the proxy][deployment-guide-configure-proxy].</span></span>

#### <a name="configure-monitoring"></a><span data-ttu-id="c6664-376">Configurare il monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-376">Configure monitoring</span></span>
<span data-ttu-id="c6664-377">Assicurarsi che l'ambiente supporti SAP, configurare l'estensione di monitoraggio di Azure per SAP come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-377">To be sure your environment supports SAP, set up the Azure Monitoring Extension for SAP as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span> <span data-ttu-id="c6664-378">Controllare i prerequisiti per il monitoraggio di SAP e le versioni minime obbligatorie del kernel SAP e dell'agente host SAP nelle risorse elencate in [Risorse SAP][deployment-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-378">Check the prerequisites for SAP monitoring, and required minimum versions of SAP Kernel and SAP Host Agent, in the resources listed in [SAP resources][deployment-guide-2.2].</span></span>

#### <a name="monitoring-check"></a><span data-ttu-id="c6664-379">Controllo del monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-379">Monitoring check</span></span>
<span data-ttu-id="c6664-380">Controllare se il monitoraggio funziona, come descritto in [Controlli e risoluzione dei problemi per la configurazione del monitoraggio end-to-end][deployment-guide-troubleshooting-chapter].</span><span class="sxs-lookup"><span data-stu-id="c6664-380">Check whether monitoring is working, as described in [Checks and troubleshooting for setting up end-to-end monitoring][deployment-guide-troubleshooting-chapter].</span></span>




### <span data-ttu-id="c6664-381"><a name="a9a60133-a763-4de8-8986-ac0fa33aa8c1"></a>Scenario 3: Spostamento di una VM locale tramite un disco rigido virtuale di Azure non generalizzato con SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-381"><a name="a9a60133-a763-4de8-8986-ac0fa33aa8c1"></a>Scenario 3: Moving an on-premises VM by using a non-generalized Azure VHD with SAP</span></span>
<span data-ttu-id="c6664-382">In questo scenario si pianifica lo spostamento di un sistema SAP specifico da un ambiente locale ad Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-382">In this scenario, you plan to move a specific SAP system from an on-premises environment to Azure.</span></span> <span data-ttu-id="c6664-383">È possibile eseguire questa operazione caricando in Azure il disco rigido virtuale contenente il sistema operativo, i file binari SAP e infine i file binari DBMS, nonché i dischi rigidi virtuali con i file di dati e di log del sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="c6664-383">You can do this by uploading the VHD that has the OS, the SAP binaries, and eventually the DBMS binaries, plus the VHDs with the data and log files of the DBMS, to Azure.</span></span> <span data-ttu-id="c6664-384">A differenza dello scenario descritto in [Scenario 2: Distribuzione di una VM con un'immagine personalizzata per SAP][deployment-guide-3.3], in questo caso, il nome host, il SID SAP e gli account utente SAP nella VM di Azure vengono mantenuti perché sono stati configurati nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-384">Unlike the scenario described in [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3], in this case, you keep the hostname, SAP SID, and SAP user accounts in the Azure VM, because they were configured in the on-premises environment.</span></span> <span data-ttu-id="c6664-385">Non è necessario generalizzare il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="c6664-385">You do not need to generalize the OS.</span></span> <span data-ttu-id="c6664-386">Questo scenario si applica molto spesso agli scenari cross-premise in cui parte del panorama applicativo SAP viene eseguita in locale e parte in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-386">This scenario applies most often to cross-premises scenarios where part of the SAP landscape runs on-premises and part of it runs on Azure.</span></span>

<span data-ttu-id="c6664-387">In questo scenario l'agente di macchine virtuali non viene installato automaticamente durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c6664-387">In this scenario, the VM Agent is not automatically installed during deployment.</span></span> <span data-ttu-id="c6664-388">Poiché l'agente di macchine virtuali e l'estensione di monitoraggio avanzato di Azure per SAP sono necessari per eseguire SAP, è necessario scaricare, installare e abilitare entrambi i componenti manualmente dopo avere creato la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-388">Because the VM Agent and the Azure Enhanced Monitoring Extension for SAP required for to run SAP, you need to download, install, and enable both components manually after you create the virtual machine.</span></span>

<span data-ttu-id="c6664-389">Per altre informazioni sull'agente di macchine virtuali di Azure, vedere le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="c6664-389">For more information about the Azure VM Agent, see the following resources.</span></span>

<span data-ttu-id="c6664-390">[comment]: <> (MSSedusch TODO Update Windows Link below)</span><span class="sxs-lookup"><span data-stu-id="c6664-390">[comment]: <> (MSSedusch TODO Update Windows Link below)</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="c6664-392">Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-392">Windows</span></span>
>
> <span data-ttu-id="c6664-393"><http://blogs.msdn.com/b/wats/archive/2014/02/17/bginfo-guest-agent-extension-for-azure-vms.aspx></span><span class="sxs-lookup"><span data-stu-id="c6664-393"><http://blogs.msdn.com/b/wats/archive/2014/02/17/bginfo-guest-agent-extension-for-azure-vms.aspx></span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="c6664-395">Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-395">Linux</span></span>
>
> <span data-ttu-id="c6664-396">[Guida dell'utente dell'agente Linux di Azure][virtual-machines-linux-agent-user-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-396">[Azure Linux Agent User Guide][virtual-machines-linux-agent-user-guide]</span></span>
>
>

- - -

<span data-ttu-id="c6664-397">Il diagramma di flusso seguente illustra la sequenza di passaggi per spostare una VM locale usando un disco rigido virtuale di Azure non generalizzato:</span><span class="sxs-lookup"><span data-stu-id="c6664-397">The following flowchart shows the sequence of steps for moving an on-premises VM by using a non-generalized Azure VHD:</span></span>

![Diagramma di flusso della distribuzione di una VM per sistemi SAP con un disco della VM][deployment-guide-figure-400]

<span data-ttu-id="c6664-399">Presumendo che il disco sia già caricato e definito in Azure (vedere [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide]), eseguire le attività descritte nelle sezioni successive.</span><span class="sxs-lookup"><span data-stu-id="c6664-399">Assuming that the disk is already uploaded and defined in Azure (see [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide]), do the tasks described in the next few sections.</span></span>

#### <a name="create-a-virtual-machine"></a><span data-ttu-id="c6664-400">Creare una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="c6664-400">Create a virtual machine</span></span>
<span data-ttu-id="c6664-401">Per creare una distribuzione usando un disco del sistema operativo privato tramite il portale di Azure, usare il modello SAP pubblicato nel [repository azure-quickstart-templates di GitHub][azure-quickstart-templates-github].</span><span class="sxs-lookup"><span data-stu-id="c6664-401">To create a deployment by using a private OS disk through the Azure portal, use the SAP template published in the [azure-quickstart-templates GitHub repository][azure-quickstart-templates-github].</span></span> <span data-ttu-id="c6664-402">È anche possibile creare una macchina virtuale manualmente usando PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c6664-402">You also can manually create a virtual machine, by using PowerShell.</span></span>

* <span data-ttu-id="c6664-403">[**Modello per configurazione a due livelli (una sola macchina virtuale)** (sap-2-tier-user-disk)][sap-templates-2-tier-os-disk]</span><span class="sxs-lookup"><span data-stu-id="c6664-403">[**Two-tier configuration (only one virtual machine) template** (sap-2-tier-user-disk)][sap-templates-2-tier-os-disk]</span></span>

  <span data-ttu-id="c6664-404">Per creare un sistema a due livelli usando una sola macchina virtuale, usare questo modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-404">To create a two-tier system by using only one virtual machine, use this template.</span></span>

<span data-ttu-id="c6664-405">Nel portale di Azure immettere i parametri seguenti per il modello:</span><span class="sxs-lookup"><span data-stu-id="c6664-405">In the Azure portal, enter the following parameters for the template:</span></span>

1. <span data-ttu-id="c6664-406">**Nozioni di base**:</span><span class="sxs-lookup"><span data-stu-id="c6664-406">**Basics**:</span></span>
  * <span data-ttu-id="c6664-407">**Sottoscrizione**: sottoscrizione da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-407">**Subscription**: The subscription to use to deploy the template.</span></span>
  * <span data-ttu-id="c6664-408">**Gruppo di risorse**: gruppo di risorse da usare per distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-408">**Resource group**: The resource group to use to deploy the template.</span></span> <span data-ttu-id="c6664-409">È possibile creare un nuovo gruppo di risorse o selezionarne uno esistente nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6664-409">You can create a new resource group or select an existing resource group in the subscription.</span></span>
  * <span data-ttu-id="c6664-410">**Percorso**: dove distribuire il modello.</span><span class="sxs-lookup"><span data-stu-id="c6664-410">**Location**: Where to deploy the template.</span></span> <span data-ttu-id="c6664-411">Se si seleziona un gruppo di risorse esistente, viene usato il percorso di tale gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6664-411">If you selected an existing resource group, the location of that resource group is used.</span></span>
2. <span data-ttu-id="c6664-412">**Impostazioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-412">**Settings**:</span></span>
  * <span data-ttu-id="c6664-413">**ID sistema SAP**: ID del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-413">**SAP System ID**: The SAP System ID.</span></span>
  * <span data-ttu-id="c6664-414">**Tipo di sistema operativo**: tipo di sistema operativo da distribuire (Windows o Linux).</span><span class="sxs-lookup"><span data-stu-id="c6664-414">**OS type**: The operating system type you want to deploy (Windows or Linux).</span></span>
  * <span data-ttu-id="c6664-415">**Dimensioni del sistema SAP**: dimensioni del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-415">**SAP system size**: The size of the SAP system.</span></span>

    <span data-ttu-id="c6664-416">Numero di SAPS forniti dal nuovo sistema.</span><span class="sxs-lookup"><span data-stu-id="c6664-416">The number of SAPS the new system provides.</span></span> <span data-ttu-id="c6664-417">Se non si è certi del numero di SAPS necessari per il sistema, chiedere all'integratore di sistemi o al partner tecnologico SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-417">If you are not sure how many SAPS the system requires, ask your SAP Technology Partner or System Integrator.</span></span>
  * <span data-ttu-id="c6664-418">**Tipo di archiviazione** (solo per il modello a due livelli): tipo di risorsa di archiviazione da usare.</span><span class="sxs-lookup"><span data-stu-id="c6664-418">**Storage type** (two-tier template only): The type of storage to use.</span></span>

    <span data-ttu-id="c6664-419">Per i sistemi più grandi, è consigliabile usare Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-419">For larger systems, we highly recommend using Azure Premium Storage.</span></span> <span data-ttu-id="c6664-420">Per altre informazioni sui tipi di archiviazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-420">For more information about storage types, see the following resources:</span></span>
      * <span data-ttu-id="c6664-421">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194] (Uso dell'archiviazione unità SSD di Azure Premium per l'istanza DBMS di SAP)</span><span class="sxs-lookup"><span data-stu-id="c6664-421">[Use of Azure Premium SSD Storage for SAP DBMS Instance][2367194]</span></span>
      * <span data-ttu-id="c6664-422">[Archiviazione di Microsoft Azure][dbms-guide-2.3] in [Distribuzione DBMS di Macchine virtuali di Azure per SAP in Linux][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="c6664-422">[Microsoft Azure Storage][dbms-guide-2.3] in [Azure Virtual Machine DBMS deployment for SAP on Linux][dbms-guide]</span></span>
      * <span data-ttu-id="c6664-423">[Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure][storage-premium-storage-preview-portal]</span><span class="sxs-lookup"><span data-stu-id="c6664-423">[Premium Storage: High-performance storage for Azure Virtual Machine workloads][storage-premium-storage-preview-portal]</span></span>
      * <span data-ttu-id="c6664-424">[Introduzione ad Archiviazione di Microsoft Azure][storage-introduction]</span><span class="sxs-lookup"><span data-stu-id="c6664-424">[Introduction to Microsoft Azure Storage][storage-introduction]</span></span>
  * <span data-ttu-id="c6664-425">**OS disk VHD URI** (URI del disco rigido virtuale del disco del sistema operativo): URI del disco del sistema operativo privato, ad esempio https://&lt;nomeaccount>.blob.core.windows.net/vhds/osdisk.vhd.</span><span class="sxs-lookup"><span data-stu-id="c6664-425">**OS disk VHD URI**: The URI of the private OS disk, for example, https://&lt;accountname>.blob.core.windows.net/vhds/osdisk.vhd.</span></span>
  * <span data-ttu-id="c6664-426">**Subnet nuova o esistente**: determina se vengono create una nuova rete virtuale e una nuova subnet o viene usata una subnet esistente.</span><span class="sxs-lookup"><span data-stu-id="c6664-426">**New or existing subnet**: Determines whether a new virtual network and subnet are created, or an existing subnet is used.</span></span> <span data-ttu-id="c6664-427">Se è già presente una rete virtuale connessa alla rete locale, selezionare **Esistente**.</span><span class="sxs-lookup"><span data-stu-id="c6664-427">If you already have a virtual network that is connected to your on-premises network, select **Existing**.</span></span>
  * <span data-ttu-id="c6664-428">**ID subnet**: ID della subnet a cui si connetteranno le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6664-428">**Subnet ID**: The ID of the subnet to which the virtual machines will connect to.</span></span> <span data-ttu-id="c6664-429">Selezionare la subnet della rete virtuale Azure ExpressRoute o VPN da usare per connettere la macchina virtuale alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-429">Select the subnet of your VPN or Azure ExpressRoute virtual network to use to connect the virtual machine to your on-premises network.</span></span> <span data-ttu-id="c6664-430">L'ID in genere è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c6664-430">The ID usually looks like this:</span></span>

    <span data-ttu-id="c6664-431">/subscriptions/&lt;ID sottoscrizione>/resourceGroups/&lt;nome gruppo di risorse>/providers/Microsoft.Network/virtualNetworks/&lt;nome rete virtuale>/subnets/&lt;nome subnet></span><span class="sxs-lookup"><span data-stu-id="c6664-431">/subscriptions/&lt;subscription id>/resourceGroups/&lt;resource group name>/providers/Microsoft.Network/virtualNetworks/&lt;virtual network name>/subnets/&lt;subnet name></span></span>

3. <span data-ttu-id="c6664-432">**Condizioni**:</span><span class="sxs-lookup"><span data-stu-id="c6664-432">**Terms and conditions**:</span></span>  
    <span data-ttu-id="c6664-433">Riesaminare e accettare le note legali.</span><span class="sxs-lookup"><span data-stu-id="c6664-433">Review and accept the legal terms.</span></span>

4.  <span data-ttu-id="c6664-434">Selezionare **Acquisto**.</span><span class="sxs-lookup"><span data-stu-id="c6664-434">Select **Purchase**.</span></span>

#### <a name="install-the-vm-agent"></a><span data-ttu-id="c6664-435">Installare l'agente di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="c6664-435">Install the VM Agent</span></span>
<span data-ttu-id="c6664-436">Per usare i modelli descritti nella sezione precedente, l'agente di macchine virtuali deve essere installato nel disco del sistema operativo o la distribuzione avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="c6664-436">To use the templates described in the preceding section, the VM Agent must be installed on the OS disk, or the deployment will fail.</span></span> <span data-ttu-id="c6664-437">Scaricare e installare l'agente di macchine virtuali nella VM come descritto in [Scaricare, installare e abilitare l'agente di macchine virtuali di Azure][deployment-guide-4.4].</span><span class="sxs-lookup"><span data-stu-id="c6664-437">Download and install the VM Agent in the VM, as described in [Download, install, and enable the Azure VM Agent][deployment-guide-4.4].</span></span>

<span data-ttu-id="c6664-438">Se non si usano i modelli descritti nella sezione precedente, si può anche installare l'agente di macchine virtuali in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="c6664-438">If you don’t use the templates described in the preceding section, you can also install the VM Agent afterwards.</span></span>

#### <a name="join-a-domain-windows-only"></a><span data-ttu-id="c6664-439">Aggiungere a un dominio (solo per Windows)</span><span class="sxs-lookup"><span data-stu-id="c6664-439">Join a domain (Windows only)</span></span>
<span data-ttu-id="c6664-440">Se la distribuzione di Azure è connessa a un'istanza di DNS o di Active Directory locale tramite una connessione VPN da sito a sito di Azure o ExpressRoute (questa connessione è detta *cross-premise* in [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide]), è previsto che la VM sia aggiunta a un dominio locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-440">If your Azure deployment is connected to an on-premises Active Directory or DNS instance via an Azure site-to-site VPN connection or ExpressRoute (this is called *cross-premises* in [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide]), it is expected that the VM is joining an on-premises domain.</span></span> <span data-ttu-id="c6664-441">Per altre informazioni sulle considerazioni relative a questa attività, vedere [Aggiungere una VM a un dominio locale (solo per Windows)][deployment-guide-4.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-441">For more information about considerations for this task, see [Join a VM to an on-premises domain (Windows only)][deployment-guide-4.3].</span></span>

#### <a name="configure-proxy-settings"></a><span data-ttu-id="c6664-442">Configurare le impostazioni proxy</span><span class="sxs-lookup"><span data-stu-id="c6664-442">Configure proxy settings</span></span>
<span data-ttu-id="c6664-443">A seconda della configurazione della rete locale, potrebbe essere necessario configurare il proxy nella VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-443">Depending on how your on-premises network is configured, you might need to set up the proxy on your VM.</span></span> <span data-ttu-id="c6664-444">Se la VM è connessa alla rete locale tramite VPN o ExpressRoute, la VM potrebbe non riuscire ad accedere a Internet e non riuscirà a scaricare le estensioni necessarie o a raccogliere i dati di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-444">If your VM is connected to your on-premises network via VPN or ExpressRoute, the VM might not be able to access the Internet, and won't be able to download the required extensions or collect monitoring data.</span></span> <span data-ttu-id="c6664-445">Per altre informazioni, vedere [Configurare il proxy][deployment-guide-configure-proxy].</span><span class="sxs-lookup"><span data-stu-id="c6664-445">For more information, see [Configure the proxy][deployment-guide-configure-proxy].</span></span>

#### <a name="configure-monitoring"></a><span data-ttu-id="c6664-446">Configurare il monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-446">Configure monitoring</span></span>
<span data-ttu-id="c6664-447">Assicurarsi che l'ambiente supporti SAP, configurare l'estensione di monitoraggio di Azure per SAP come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-447">To be sure your environment supports SAP, set up the Azure Monitoring Extension for SAP as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span> <span data-ttu-id="c6664-448">Controllare i prerequisiti per il monitoraggio di SAP e le versioni minime obbligatorie del kernel SAP e dell'agente host SAP nelle risorse elencate in [Risorse SAP][deployment-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-448">Check the prerequisites for SAP monitoring, and required minimum versions of SAP Kernel and SAP Host Agent, in the resources listed in [SAP resources][deployment-guide-2.2].</span></span>

#### <a name="monitoring-check"></a><span data-ttu-id="c6664-449">Controllo del monitoraggio</span><span class="sxs-lookup"><span data-stu-id="c6664-449">Monitoring check</span></span>
<span data-ttu-id="c6664-450">Controllare se il monitoraggio funziona, come descritto in [Controlli e risoluzione dei problemi per la configurazione del monitoraggio end-to-end][deployment-guide-troubleshooting-chapter].</span><span class="sxs-lookup"><span data-stu-id="c6664-450">Check whether monitoring is working, as described in [Checks and troubleshooting for setting up end-to-end monitoring][deployment-guide-troubleshooting-chapter].</span></span>

## <a name="update-the-monitoring-configuration-for-sap"></a><span data-ttu-id="c6664-451">Aggiornare la configurazione di monitoraggio per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-451">Update the monitoring configuration for SAP</span></span>
<span data-ttu-id="c6664-452">Aggiornare la configurazione di monitoraggio di SAP negli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-452">Update the SAP monitoring configuration in any of the following scenarios:</span></span>
* <span data-ttu-id="c6664-453">Il team congiunto Microsoft/SAP estende le funzionalità di monitoraggio e richiede più o meno contatori.</span><span class="sxs-lookup"><span data-stu-id="c6664-453">The joint Microsoft/SAP team extends the monitoring capabilities and requests more or fewer counters.</span></span>
* <span data-ttu-id="c6664-454">Microsoft introduce una nuova versione dell'infrastruttura di Azure sottostante che fornisce i dati di monitoraggio e l'estensione di monitoraggio avanzato di Azure per SAP deve essere adattata a tali modifiche.</span><span class="sxs-lookup"><span data-stu-id="c6664-454">Microsoft introduces a new version of the underlying Azure infrastructure that delivers the monitoring data, and the Azure Enhanced Monitoring Extension for SAP needs to be adapted to those changes.</span></span>
* <span data-ttu-id="c6664-455">Si montano altri dischi rigidi virtuali nella macchina virtuale di Azure o si rimuove un disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-455">You mount additional VHDs to your Azure VM or you remove a VHD.</span></span> <span data-ttu-id="c6664-456">In questo scenario aggiornare la raccolta dei dati correlati all'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-456">In this scenario, update the collection of storage-related data.</span></span> <span data-ttu-id="c6664-457">Se si modifica la configurazione aggiungendo o eliminando endpoint o assegnando un indirizzo IP a una VM, ciò non influisce sulla configurazione di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-457">Changing your configuration by adding or deleting endpoints or by assigning IP addresses to a VM does not affect the monitoring configuration.</span></span>
* <span data-ttu-id="c6664-458">Si modificano le dimensioni della macchina virtuale di Azure, ad esempio dalla dimensione A5 a qualsiasi altra dimensione di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-458">You change the size of your Azure VM, for example, from size A5 to any other VM size.</span></span>
* <span data-ttu-id="c6664-459">Si aggiungono nuove interfacce di rete alla VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-459">You add new network interfaces to your Azure VM.</span></span>

<span data-ttu-id="c6664-460">Per aggiornare le impostazioni di monitoraggio, aggiornare l'infrastruttura di monitoraggio seguendo la procedura illustrata in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-460">To update monitoring settings, update the monitoring infrastructure by following the steps in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span>

## <a name="detailed-tasks-for-sap-software-deployment-on-a-windows-vm"></a><span data-ttu-id="c6664-461">Attività dettagliate per la distribuzione del software SAP in una VM Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-461">Detailed tasks for SAP software deployment on a Windows VM</span></span>
<span data-ttu-id="c6664-462">Questa sezione contiene i passaggi dettagliati per eseguire attività specifiche durante il processo di configurazione e distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c6664-462">This section has detailed steps for doing specific tasks in the configuration and deployment process.</span></span>

### <span data-ttu-id="c6664-463"><a name="604bcec2-8b6e-48d2-a944-61b0f5dee2f7"></a>Distribuire i cmdlet di Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="c6664-463"><a name="604bcec2-8b6e-48d2-a944-61b0f5dee2f7"></a>Deploy Azure PowerShell cmdlets</span></span>
1.  <span data-ttu-id="c6664-464">Andare alla pagina [Download di Microsoft Azure](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="c6664-464">Go to [Microsoft Azure Downloads](https://azure.microsoft.com/downloads/).</span></span>
2.  <span data-ttu-id="c6664-465">In **Strumenti da riga di comando**, in **PowerShell** selezionare **Windows - Installazione**.</span><span class="sxs-lookup"><span data-stu-id="c6664-465">Under **Command-line tools**, under **PowerShell**, select **Windows install**.</span></span>
3.  <span data-ttu-id="c6664-466">Nella finestra di dialogo Microsoft Download Manager, per il file scaricato (ad esempio, WindowsAzurePowershellGet.3f.3f.3fnew.exe), selezionare **Esegui**.</span><span class="sxs-lookup"><span data-stu-id="c6664-466">In the Microsoft Download Manager dialog box, for the downloaded file (for example, WindowsAzurePowershellGet.3f.3f.3fnew.exe), select **Run**.</span></span>
4.  <span data-ttu-id="c6664-467">Per eseguire l'Installazione guidata piattaforma Web Microsoft, selezionare **Sì**.</span><span class="sxs-lookup"><span data-stu-id="c6664-467">To run Microsoft Web Platform Installer (Microsoft Web PI), select **Yes**.</span></span>
5.  <span data-ttu-id="c6664-468">Viene visualizzata una pagina simile a questa:</span><span class="sxs-lookup"><span data-stu-id="c6664-468">A page that looks like this appears:</span></span>

  <span data-ttu-id="c6664-469">![Pagina di installazione dei cmdlet di Azure PowerShell][deployment-guide-figure-500]<a name="figure-5"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-469">![Installation page for Azure PowerShell cmdlets][deployment-guide-figure-500]<a name="figure-5"></a></span></span>

6.  <span data-ttu-id="c6664-470">Selezionare **Installa** e quindi accettare le Condizioni di licenza software Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c6664-470">Select **Install**, and then accept the Microsoft Software License Terms.</span></span>
7.  <span data-ttu-id="c6664-471">Azure PowerShell viene installato.</span><span class="sxs-lookup"><span data-stu-id="c6664-471">PowerShell is installed.</span></span> <span data-ttu-id="c6664-472">Selezionare **Fine** per chiudere l'installazione guidata.</span><span class="sxs-lookup"><span data-stu-id="c6664-472">Select **Finish** to close the installation wizard.</span></span>

<span data-ttu-id="c6664-473">Controllare spesso la disponibilità di aggiornamenti per i cmdlet di PowerShell che in genere vengono aggiornati ogni mese.</span><span class="sxs-lookup"><span data-stu-id="c6664-473">Check frequently for updates to the PowerShell cmdlets, which usually are updated monthly.</span></span> <span data-ttu-id="c6664-474">Il modo più semplice per verificare la disponibilità di aggiornamenti consiste nell'eseguire i passaggi di installazione precedenti fino alla pagina di installazione illustrata nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="c6664-474">The easiest way to check for updates is to do the preceding installation steps, up to the installation page shown in step 5.</span></span> <span data-ttu-id="c6664-475">La data di uscita e il numero di versione dei cmdlet sono inclusi nella pagina illustrata nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="c6664-475">The release date and release number of the cmdlets are included on the page shown in step 5.</span></span> <span data-ttu-id="c6664-476">Se non diversamente indicato nella nota SAP [1928533] o nella nota SAP [2015553], è consigliabile usare la versione più recente dei cmdlet di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c6664-476">Unless stated otherwise in SAP Note [1928533] or SAP Note [2015553], we recommend that you work with the latest version of Azure PowerShell cmdlets.</span></span>

<span data-ttu-id="c6664-477">Per controllare la versione dei cmdlet di Azure PowerShell installati nel computer, eseguire questo comando di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="c6664-477">To check the version of the Azure PowerShell cmdlets that are installed on your computer, run this PowerShell command:</span></span>
```powershell
Import-Module Azure
(Get-Module Azure).Version
```
<span data-ttu-id="c6664-478">Il risultato sarà analogo a questo:</span><span class="sxs-lookup"><span data-stu-id="c6664-478">The result looks like this:</span></span>

<span data-ttu-id="c6664-479">![Risultato del controllo della versione dei cmdlet di Azure PowerShell][deployment-guide-figure-600]
<a name="figure-6"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-479">![Result of Azure PowerShell cmdlet version check][deployment-guide-figure-600]
<a name="figure-6"></a></span></span>

<span data-ttu-id="c6664-480">Se la versione dei cmdlet di Azure installata nel computer è la versione corrente, viene indicato nella prima pagina dell'installazione guidata dall'aggiunta di **(Installed)** (Installato) al titolo del prodotto. Vedere lo screenshot seguente.</span><span class="sxs-lookup"><span data-stu-id="c6664-480">If the Azure cmdlet version installed on your computer is the current version, the first page of the installation wizard indicates it by adding **(Installed)** to the product title (see the following screenshot).</span></span> <span data-ttu-id="c6664-481">I cmdlet di Azure PowerShell vengono aggiornati.</span><span class="sxs-lookup"><span data-stu-id="c6664-481">Your PowerShell Azure cmdlets are up-to-date.</span></span> <span data-ttu-id="c6664-482">Per chiudere l'installazione guidata, selezionare **Esci**.</span><span class="sxs-lookup"><span data-stu-id="c6664-482">To close the installation wizard, select **Exit**.</span></span>

<span data-ttu-id="c6664-483">![Pagina di installazione dei cmdlet di Azure PowerShell che indica che è installata la versione più recente dei cmdlet di Azure PowerShell][deployment-guide-figure-700]
<a name="figure-7"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-483">![Installation page for Azure PowerShell cmdlets indicating that the most recent version of Azure PowerShell cmdlets are installed][deployment-guide-figure-700]
<a name="figure-7"></a></span></span>

### <span data-ttu-id="c6664-484"><a name="1ded9453-1330-442a-86ea-e0fd8ae8cab3"></a>Distribuire l'interfaccia della riga di comando di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-484"><a name="1ded9453-1330-442a-86ea-e0fd8ae8cab3"></a>Deploy Azure CLI</span></span>
1.  <span data-ttu-id="c6664-485">Andare alla pagina [Download di Microsoft Azure](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="c6664-485">Go to [Microsoft Azure Downloads](https://azure.microsoft.com/downloads/).</span></span>
2.  <span data-ttu-id="c6664-486">In **Strumenti da riga di comando**, in **Interfaccia della riga di comando di Azure** selezionare il collegamento **Installazione** per il sistema operativo in uso.</span><span class="sxs-lookup"><span data-stu-id="c6664-486">Under **Command-line tools**, under **Azure command-line interface**, select the **Install** link for your operating system.</span></span>
3.  <span data-ttu-id="c6664-487">Nella finestra di dialogo Microsoft Download Manager, per il file scaricato (ad esempio, WindowsAzureXPlatCLI.3f.3f.3fnew.exe), selezionare **Esegui**.</span><span class="sxs-lookup"><span data-stu-id="c6664-487">In the Microsoft Download Manager dialog box, for the downloaded file (for example, WindowsAzureXPlatCLI.3f.3f.3fnew.exe), select **Run**.</span></span>
4.  <span data-ttu-id="c6664-488">Per eseguire l'Installazione guidata piattaforma Web Microsoft, selezionare **Sì**.</span><span class="sxs-lookup"><span data-stu-id="c6664-488">To run Microsoft Web Platform Installer (Microsoft Web PI), select **Yes**.</span></span>
5.  <span data-ttu-id="c6664-489">Viene visualizzata una pagina simile a questa:</span><span class="sxs-lookup"><span data-stu-id="c6664-489">A page that looks like this appears:</span></span>

  <span data-ttu-id="c6664-490">![Pagina di installazione dei cmdlet di Azure PowerShell][deployment-guide-figure-500]<a name="figure-5"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-490">![Installation page for Azure PowerShell cmdlets][deployment-guide-figure-500]<a name="figure-5"></a></span></span>

6.  <span data-ttu-id="c6664-491">Selezionare **Installa** e quindi accettare le Condizioni di licenza software Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c6664-491">Select **Install**, and then accept the Microsoft Software License Terms.</span></span>
7.  <span data-ttu-id="c6664-492">L'interfaccia della riga di comando di Azure viene installata.</span><span class="sxs-lookup"><span data-stu-id="c6664-492">Azure CLI is installed.</span></span> <span data-ttu-id="c6664-493">Selezionare **Fine** per chiudere l'installazione guidata.</span><span class="sxs-lookup"><span data-stu-id="c6664-493">Select **Finish** to close the installation wizard.</span></span>

<span data-ttu-id="c6664-494">Verificare spesso la disponibilità di aggiornamenti per l'interfaccia della riga di comando di Azure, che in genere viene aggiornata ogni mese.</span><span class="sxs-lookup"><span data-stu-id="c6664-494">Check frequently for updates to Azure CLI, which usually is updated monthly.</span></span> <span data-ttu-id="c6664-495">Il modo più semplice per verificare la disponibilità di aggiornamenti consiste nell'eseguire i passaggi di installazione precedenti fino alla pagina di installazione illustrata nel passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="c6664-495">The easiest way to check for updates is to do the preceding installation steps, up to the installation page shown in step 5.</span></span>


<span data-ttu-id="c6664-496">Per controllare la versione dell'interfaccia della riga di comando di Azure installata nel computer, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="c6664-496">To check the version of Azure CLI that is installed on your computer, run this command:</span></span>
```
azure --version
```

<span data-ttu-id="c6664-497">Il risultato sarà analogo a questo:</span><span class="sxs-lookup"><span data-stu-id="c6664-497">The result looks like this:</span></span>

<span data-ttu-id="c6664-498">![Risultato del controllo della versione dell'interfaccia della riga di comando di Azure][deployment-guide-figure-760]
 <a name="0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-498">![Result of Azure CLI version check][deployment-guide-figure-760]
<a name="0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda"></a></span></span>

### <span data-ttu-id="c6664-499"><a name="31d9ecd6-b136-4c73-b61e-da4a29bbc9cc"></a>Aggiungere una VM a un dominio locale (solo per Windows)</span><span class="sxs-lookup"><span data-stu-id="c6664-499"><a name="31d9ecd6-b136-4c73-b61e-da4a29bbc9cc"></a>Join a VM to an on-premises domain (Windows only)</span></span>
<span data-ttu-id="c6664-500">Se si distribuiscono VM SAP in uno scenario cross-premise in cui Active Directory e DNS locali sono estesi in Azure, è previsto che le VM vengano aggiunte a un dominio locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-500">If you deploy SAP VMs in a cross-premises scenario, where on-premises Active Directory and DNS are extended in Azure, it is expected that the VMs are joining an on-premises domain.</span></span> <span data-ttu-id="c6664-501">La procedura dettagliata eseguita per aggiungere una VM a un dominio locale e il software necessario per fare parte di un dominio locale variano a seconda del cliente.</span><span class="sxs-lookup"><span data-stu-id="c6664-501">The detailed steps you take to join a VM to an on-premises domain, and the additional software required to be a member of an on-premises domain, varies by customer.</span></span> <span data-ttu-id="c6664-502">In genere, per aggiungere una VM a un dominio locale, è necessario installare altro software, ad esempio software antimalware e software per il backup o il monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-502">Usually, to join a VM to an on-premises domain, you need to install additional software, like antimalware software, and backup or monitoring software.</span></span>

<span data-ttu-id="c6664-503">In questo scenario, è anche necessario verificare che, se vengono forzate impostazioni proxy Internet quando una VM viene aggiunta a un dominio nell'ambiente in uso, l'account di sistema locale di Windows (S-1-5-18) nella VM guest abbia le stesse impostazioni proxy.</span><span class="sxs-lookup"><span data-stu-id="c6664-503">In this scenario, you also need to make sure that if Internet proxy settings are forced when a VM joins a domain in your environment, the Windows Local System Account (S-1-5-18) in the Guest VM has the same proxy settings.</span></span> <span data-ttu-id="c6664-504">L'opzione più semplice consiste nel forzare il proxy usando i Criteri di gruppo di un dominio che si applicano ai sistemi nel dominio.</span><span class="sxs-lookup"><span data-stu-id="c6664-504">The easiest option is to force the proxy by using a domain Group Policy, which applies to systems in the domain.</span></span>

### <span data-ttu-id="c6664-505"><a name="c7cbb0dc-52a4-49db-8e03-83e7edc2927d"></a>Scaricare, installare e abilitare l'agente di macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-505"><a name="c7cbb0dc-52a4-49db-8e03-83e7edc2927d"></a>Download, install, and enable the Azure VM Agent</span></span>
<span data-ttu-id="c6664-506">Per le macchine virtuali distribuite da un'immagine del sistema operativo non generalizzata (ad esempio un'immagine non originata nell'Utilità preparazione sistema, o sysprep), è necessario scaricare, installare e abilitare manualmente l'agente di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-506">For virtual machines that are deployed from an OS image that is not generalized (for example, an image that doesn't originate in the Windows System Preparation, or sysprep, tool), you need to manually download, install, and enable the Azure VM Agent.</span></span>

<span data-ttu-id="c6664-507">Se si distribuisce una VM da Azure Marketplace, questo passaggio non è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="c6664-507">If you deploy a VM from the Azure Marketplace, this step is not required.</span></span> <span data-ttu-id="c6664-508">Le immagini di Azure Marketplace hanno già l'agente di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-508">Images from the Azure Marketplace already have the Azure VM Agent.</span></span>

#### <span data-ttu-id="c6664-509"><a name="b2db5c9a-a076-42c6-9835-16945868e866"></a>Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-509"><a name="b2db5c9a-a076-42c6-9835-16945868e866"></a>Windows</span></span>
1.  <span data-ttu-id="c6664-510">Scaricare l'agente di macchine virtuali di Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-510">Download the Azure VM Agent:</span></span>
  1.  <span data-ttu-id="c6664-511">Scaricare il [pacchetto di installazione dell'agente di macchine virtuali di Azure](https://go.microsoft.com/fwlink/?LinkId=394789).</span><span class="sxs-lookup"><span data-stu-id="c6664-511">Download the [Azure VM Agent installer package](https://go.microsoft.com/fwlink/?LinkId=394789).</span></span>
  2.  <span data-ttu-id="c6664-512">Archiviare il pacchetto MSI dell'agente di macchine virtuali in locale in un personal computer o in un server.</span><span class="sxs-lookup"><span data-stu-id="c6664-512">Store the VM Agent MSI package locally on a personal computer or server.</span></span>
2.  <span data-ttu-id="c6664-513">Installare l'agente di macchine virtuali di Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-513">Install the Azure VM Agent:</span></span>
  1.  <span data-ttu-id="c6664-514">Connettersi alla VM di Azure distribuita usando Remote Desktop Protocol (RDP).</span><span class="sxs-lookup"><span data-stu-id="c6664-514">Connect to the deployed Azure VM by using Remote Desktop Protocol (RDP).</span></span>
  2.  <span data-ttu-id="c6664-515">Aprire una finestra di Esplora risorse nella macchina virtuale e quindi selezionare la directory di destinazione per il file MSI dell'agente di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6664-515">Open a Windows Explorer window on the VM and select the target directory for the MSI file of the VM Agent.</span></span>
  3.  <span data-ttu-id="c6664-516">Trascinare il file MSI di installazione dell'agente di macchine virtuali di Azure dal server/computer locale alla directory di destinazione dell'agente di macchine virtuali nella VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-516">Drag the Azure VM Agent Installer MSI file from your local computer/server to the target directory of the VM Agent on the VM.</span></span>
  4.  <span data-ttu-id="c6664-517">Fare doppio clic sul file MSI nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-517">Double-click the MSI file on the VM.</span></span>
3.  <span data-ttu-id="c6664-518">Per le macchine virtuali aggiunte a domini locali, verificare che le eventuali impostazioni di proxy Internet si applichino anche all'account di sistema locale di Windows (S-1-5-18) nella macchina virtuale, come descritto in [Configurare il proxy][deployment-guide-configure-proxy].</span><span class="sxs-lookup"><span data-stu-id="c6664-518">For VMs that are joined to on-premises domains, make sure that eventual Internet proxy settings also apply to the Windows Local System account (S-1-5-18) in the VM, as described in [Configure the proxy][deployment-guide-configure-proxy].</span></span> <span data-ttu-id="c6664-519">L'agente di macchine virtuali viene eseguito in questo contesto e deve potersi connettere ad Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-519">The VM Agent runs in this context and needs to be able to connect to Azure.</span></span>

<span data-ttu-id="c6664-520">Non è necessario l'intervento dell'utente per aggiornare l'agente di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-520">No user interaction is required to update the Azure VM Agent.</span></span> <span data-ttu-id="c6664-521">L'agente di macchine virtuali viene aggiornato automaticamente e non è necessario riavviare la VM.</span><span class="sxs-lookup"><span data-stu-id="c6664-521">The VM Agent is automatically updated, and does not require a VM restart.</span></span>

#### <span data-ttu-id="c6664-522"><a name="6889ff12-eaaf-4f3c-97e1-7c9edc7f7542"></a>Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-522"><a name="6889ff12-eaaf-4f3c-97e1-7c9edc7f7542"></a>Linux</span></span>
<span data-ttu-id="c6664-523">Usare i comandi seguenti per installare l'agente di macchine virtuali per Linux:</span><span class="sxs-lookup"><span data-stu-id="c6664-523">Use the following commands to install the VM Agent for Linux:</span></span>

* <span data-ttu-id="c6664-524">**SUSE Linux Enterprise Server (SLES)**</span><span class="sxs-lookup"><span data-stu-id="c6664-524">**SUSE Linux Enterprise Server (SLES)**</span></span>

  ```
  sudo zypper install WALinuxAgent
  ```

* <span data-ttu-id="c6664-525">**Red Hat Enterprise Linux (RHEL)**</span><span class="sxs-lookup"><span data-stu-id="c6664-525">**Red Hat Enterprise Linux (RHEL)**</span></span>

  ```
  sudo yum install WALinuxAgent
  ```

<span data-ttu-id="c6664-526">Se l'agente è già installato, per aggiornare l'Agente Linux di Azure, eseguire i passaggi descritti in [Aggiornare l'agente Linux di Azure in una macchina virtuale alla versione più recente da GitHub][virtual-machines-linux-update-agent].</span><span class="sxs-lookup"><span data-stu-id="c6664-526">If the agent is already installed, to update the Azure Linux Agent, do the steps described in [Update the Azure Linux Agent on a VM to the latest version from GitHub][virtual-machines-linux-update-agent].</span></span>

### <span data-ttu-id="c6664-527"><a name="baccae00-6f79-4307-ade4-40292ce4e02d"></a>Configurare il proxy</span><span class="sxs-lookup"><span data-stu-id="c6664-527"><a name="baccae00-6f79-4307-ade4-40292ce4e02d"></a>Configure the proxy</span></span>
<span data-ttu-id="c6664-528">I passaggi eseguiti per configurare il proxy in Windows sono diversi da quelli necessari per configurare il proxy in Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-528">The steps you take to configure the proxy in Windows are different from the way you configure the proxy in Linux.</span></span>

#### <a name="windows"></a><span data-ttu-id="c6664-529">Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-529">Windows</span></span>
<span data-ttu-id="c6664-530">Le impostazioni proxy devono essere configurate correttamente perché l'account di sistema locale possa accedere a Internet.</span><span class="sxs-lookup"><span data-stu-id="c6664-530">Proxy settings must be set up correctly for the Local System account to access the Internet.</span></span> <span data-ttu-id="c6664-531">Se le impostazioni proxy non sono impostate con Criteri di gruppo, si possono configurare per l'account di sistema locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-531">If your proxy settings are not set by Group Policy, you can configure the settings for the Local System account.</span></span>

1. <span data-ttu-id="c6664-532">Fare clic sul pulsante **Start**, immettere **gpedit.msc** e quindi premere **INVIO**.</span><span class="sxs-lookup"><span data-stu-id="c6664-532">Go to **Start**, enter **gpedit.msc**, and then select **Enter**.</span></span>
2. <span data-ttu-id="c6664-533">Selezionare **Configurazione computer** > **Modelli amministrativi** > **Componenti di Windows** > **Internet Explorer**.</span><span class="sxs-lookup"><span data-stu-id="c6664-533">Select **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Internet Explorer**.</span></span> <span data-ttu-id="c6664-534">Verificare che l'impostazione **Basa impostazioni proxy sul computer (non sull'utente)** sia disabilitata o non configurata.</span><span class="sxs-lookup"><span data-stu-id="c6664-534">Make sure that the setting **Make proxy settings per-machine (rather than per-user)** is disabled or not configured.</span></span>
3. <span data-ttu-id="c6664-535">Nel **Pannello di controllo** andare a **Centro connessioni di rete e condivisione** > **Opzioni Internet**.</span><span class="sxs-lookup"><span data-stu-id="c6664-535">In **Control Panel**, go to **Network and Sharing Center** > **Internet Options**.</span></span>
4. <span data-ttu-id="c6664-536">Nella scheda **Connessioni** selezionare il pulsante **Impostazioni LAN**.</span><span class="sxs-lookup"><span data-stu-id="c6664-536">On the **Connections** tab, select the **LAN settings** button.</span></span>
5. <span data-ttu-id="c6664-537">Deselezionare la casella di controllo **Rileva automaticamente impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="c6664-537">Clear the **Automatically detect settings** check box.</span></span>
6. <span data-ttu-id="c6664-538">Selezionare la casella di controllo **Usa un server di proxy per la rete LAN** e quindi immettere porta e indirizzo del proxy.</span><span class="sxs-lookup"><span data-stu-id="c6664-538">Select the **Use a proxy server for your LAN** check box, and then enter the proxy address and port.</span></span>
7. <span data-ttu-id="c6664-539">Selezionare il pulsante **Advanced** (Avanzate).</span><span class="sxs-lookup"><span data-stu-id="c6664-539">Select the **Advanced** button.</span></span>
8. <span data-ttu-id="c6664-540">Nella casella **Eccezioni** immettere l'indirizzo IP **168.63.129.16**.</span><span class="sxs-lookup"><span data-stu-id="c6664-540">In the **Exceptions** box, enter the IP address **168.63.129.16**.</span></span> <span data-ttu-id="c6664-541">Selezionare **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6664-541">Select **OK**.</span></span>


#### <a name="linux"></a><span data-ttu-id="c6664-542">Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-542">Linux</span></span>
<span data-ttu-id="c6664-543">Configurare il proxy corretto nel file di configurazione dell'agente guest di Microsoft Azure, disponibile in \\etc\\waagent.conf.</span><span class="sxs-lookup"><span data-stu-id="c6664-543">Configure the correct proxy in the configuration file of the Microsoft Azure Guest Agent, which is located at \\etc\\waagent.conf.</span></span>

<span data-ttu-id="c6664-544">Impostare i parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-544">Set the following parameters:</span></span>

1.  <span data-ttu-id="c6664-545">**Host proxy HTTP**.</span><span class="sxs-lookup"><span data-stu-id="c6664-545">**HTTP proxy host**.</span></span> <span data-ttu-id="c6664-546">Impostarlo, ad esempio, su **proxy.corp.local**.</span><span class="sxs-lookup"><span data-stu-id="c6664-546">For example, set it to **proxy.corp.local**.</span></span>
  ```
  HttpProxy.Host=<proxy host>

  ```
2.  <span data-ttu-id="c6664-547">**Porta proxy HTTP**.</span><span class="sxs-lookup"><span data-stu-id="c6664-547">**HTTP proxy port**.</span></span> <span data-ttu-id="c6664-548">Impostarla, ad esempio, su **80**.</span><span class="sxs-lookup"><span data-stu-id="c6664-548">For example, set it to **80**.</span></span>
  ```
  HttpProxy.Port=<port of the proxy host>

  ```
3.  <span data-ttu-id="c6664-549">Riavviare l'agente.</span><span class="sxs-lookup"><span data-stu-id="c6664-549">Restart the agent.</span></span>

  ```
  sudo service waagent restart
  ```

<span data-ttu-id="c6664-550">Le impostazioni proxy in \\etc\\waagent.conf si applicano anche alle estensioni di VM necessarie.</span><span class="sxs-lookup"><span data-stu-id="c6664-550">The proxy settings in \\etc\\waagent.conf also apply to the required VM extensions.</span></span> <span data-ttu-id="c6664-551">Se si vogliono usare i repository di Azure, verificare che il traffico verso i repository non attraversi la Intranet locale.</span><span class="sxs-lookup"><span data-stu-id="c6664-551">If you want to use the Azure repositories, make sure that the traffic to these repositories is not going through your on-premises intranet.</span></span> <span data-ttu-id="c6664-552">Se sono state create route definite dall'utente per abilitare il tunneling forzato, verificare di aggiungere una route che indirizza il traffico verso i repository direttamente in Internet e non tramite la connessione VPN da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="c6664-552">If you created user-defined routes to enable forced tunneling, make sure that you add a route that routes traffic to the repositories directly to the Internet, and not through your site-to-site VPN connection.</span></span>

* <span data-ttu-id="c6664-553">**SLES**</span><span class="sxs-lookup"><span data-stu-id="c6664-553">**SLES**</span></span>

  <span data-ttu-id="c6664-554">È anche possibile aggiungere route per gli indirizzi IP elencati in \\etc\\regionserverclnt.cfg.</span><span class="sxs-lookup"><span data-stu-id="c6664-554">You also need to add routes for the IP addresses listed in \\etc\\regionserverclnt.cfg.</span></span> <span data-ttu-id="c6664-555">La figura seguente mostra un esempio:</span><span class="sxs-lookup"><span data-stu-id="c6664-555">The following figure shows an example:</span></span>

  ![Tunneling forzato][deployment-guide-figure-50]


* <span data-ttu-id="c6664-557">**RHEL**</span><span class="sxs-lookup"><span data-stu-id="c6664-557">**RHEL**</span></span>

  <span data-ttu-id="c6664-558">È necessario anche aggiungere route per gli indirizzi IP degli host elencati in \\etc\\yum.repos.d\\rhui-load-balancers.</span><span class="sxs-lookup"><span data-stu-id="c6664-558">You also need to add routes for the IP addresses of the hosts listed in \\etc\\yum.repos.d\\rhui-load-balancers.</span></span> <span data-ttu-id="c6664-559">Per un esempio, vedere la figura precedente.</span><span class="sxs-lookup"><span data-stu-id="c6664-559">For an example, see the preceding figure.</span></span>

<span data-ttu-id="c6664-560">Per altre informazioni sulle route definite dall'utente, vedere [Route definite dall'utente e inoltro IP][virtual-networks-udr-overview].</span><span class="sxs-lookup"><span data-stu-id="c6664-560">For more information about user-defined routes, see [User-defined routes and IP forwarding][virtual-networks-udr-overview].</span></span>

### <span data-ttu-id="c6664-561"><a name="d98edcd3-f2a1-49f7-b26a-07448ceb60ca"></a>Configurare l'estensione di monitoraggio avanzato di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-561"><a name="d98edcd3-f2a1-49f7-b26a-07448ceb60ca"></a>Configure the Azure Enhanced Monitoring Extension for SAP</span></span>
<span data-ttu-id="c6664-562">Dopo avere preparato la VM come descritto in [Scenari di distribuzione di VM per SAP in Azure][deployment-guide-3], l'agente di macchine virtuali di Azure è installato nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6664-562">When you've prepared the VM as described in [Deployment scenarios of VMs for SAP on Azure][deployment-guide-3], the Azure VM Agent is installed on the virtual machine.</span></span> <span data-ttu-id="c6664-563">Il passaggio successivo consiste nel distribuire l'estensione di monitoraggio avanzato di Azure per SAP, disponibile nel repository di estensioni di Azure nei data center di Azure globali.</span><span class="sxs-lookup"><span data-stu-id="c6664-563">The next step is to deploy the Azure Enhanced Monitoring Extension for SAP, which is available in the Azure Extension Repository in the global Azure datacenters.</span></span> <span data-ttu-id="c6664-564">Per altre informazioni, vedere [Pianificazione e implementazione di Macchine virtuali di Azure per SAP in Linux][planning-guide-9.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-564">For more information, see [Azure Virtual Machines planning and implementation for SAP on Linux][planning-guide-9.1].</span></span>

<span data-ttu-id="c6664-565">Per installare e configurare l'estensione di monitoraggio avanzato di Azure per SAP, è possibile usare PowerShell o l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-565">You can use PowerShell or Azure CLI to install and configure the Azure Enhanced Monitoring Extension for SAP.</span></span> <span data-ttu-id="c6664-566">Per installare l'estensione in una VM Windows o Linux usando un computer Windows, vedere [Azure PowerShell][deployment-guide-4.5.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-566">To install the extension on a Windows or Linux VM by using a Windows machine, see [Azure PowerShell][deployment-guide-4.5.1].</span></span> <span data-ttu-id="c6664-567">Per installare l'estensione in una VM Linux usando un desktop Linux, vedere [Interfaccia della riga di comando di Azure][deployment-guide-4.5.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-567">To install the extension on a Linux VM by using a Linux desktop, see [Azure CLI][deployment-guide-4.5.2].</span></span>

#### <span data-ttu-id="c6664-568"><a name="987cf279-d713-4b4c-8143-6b11589bb9d4"></a>Azure PowerShell per VM Linux e Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-568"><a name="987cf279-d713-4b4c-8143-6b11589bb9d4"></a>Azure PowerShell for Linux and Windows VMs</span></span>
<span data-ttu-id="c6664-569">Per installare l'estensione di monitoraggio avanzato di Azure per SAP usando PowerShell:</span><span class="sxs-lookup"><span data-stu-id="c6664-569">To install the Azure Enhanced Monitoring Extension for SAP by using PowerShell:</span></span>

1. <span data-ttu-id="c6664-570">Verificare di aver installato l'ultima versione dei cmdlet di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c6664-570">Make sure that you have installed the latest version of the Azure PowerShell cmdlet.</span></span> <span data-ttu-id="c6664-571">Per altre informazioni, vedere [Distribuzione di cmdlet di Azure PowerShell][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-571">For more information, see [Deploying Azure PowerShell cmdlets][deployment-guide-4.1].</span></span>  
2. <span data-ttu-id="c6664-572">Eseguire il cmdlet di PowerShell seguente.</span><span class="sxs-lookup"><span data-stu-id="c6664-572">Run the following PowerShell cmdlet.</span></span>
  <span data-ttu-id="c6664-573">Per un elenco degli ambienti disponibili, eseguire `commandlet Get-AzureRmEnvironment`.</span><span class="sxs-lookup"><span data-stu-id="c6664-573">For a list of available environments, run `commandlet Get-AzureRmEnvironment`.</span></span> <span data-ttu-id="c6664-574">Per usare il cloud pubblico di Azure, l'ambiente è **AzureCloud**.</span><span class="sxs-lookup"><span data-stu-id="c6664-574">If you want to use public Azure, your environment is **AzureCloud**.</span></span> <span data-ttu-id="c6664-575">Per Azure in Cina, selezionare **AzureChinaCloud**.</span><span class="sxs-lookup"><span data-stu-id="c6664-575">For Azure in China, select **AzureChinaCloud**.</span></span>


      ```powershell
      $env = Get-AzureRmEnvironment -Name <name of the environment>
      Login-AzureRmAccount -Environment $env
      Set-AzureRmContext -SubscriptionName <subscription name>

      Set-AzureRmVMAEMExtension -ResourceGroupName <resource group name> -VMName <virtual machine name>
      ```

<span data-ttu-id="c6664-576">Dopo che si sono immessi i dati dell'account e si è identificata la macchina virtuale di Azure, lo script distribuisce le estensioni necessarie e abilita le funzionalità obbligatorie.</span><span class="sxs-lookup"><span data-stu-id="c6664-576">After you enter your account data and identify the Azure virtual machine, the script deploys the required extensions and enables the required features.</span></span> <span data-ttu-id="c6664-577">Ciò può richiedere alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="c6664-577">This can take several minutes.</span></span>
<span data-ttu-id="c6664-578">Per altre informazioni su `Set-AzureRmVMAEMExtension`, vedere [Set-AzureRmVMAEMExtension][msdn-set-azurermvmaemextension].</span><span class="sxs-lookup"><span data-stu-id="c6664-578">For more information about `Set-AzureRmVMAEMExtension`, see [Set-AzureRmVMAEMExtension][msdn-set-azurermvmaemextension].</span></span>

![Esecuzione corretta del cmdlet di Azure specifico di SAP Set-AzureRmVMAEMExtension][deployment-guide-figure-900]

<span data-ttu-id="c6664-580">La configurazione `Set-AzureRmVMAEMExtension` esegue tutti i passaggi per configurare il monitoraggio dell'host per SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-580">The `Set-AzureRmVMAEMExtension` configuration does all the steps to configure host monitoring for SAP.</span></span>

<span data-ttu-id="c6664-581">L'output dello script include le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-581">The script output includes the following information:</span></span>

* <span data-ttu-id="c6664-582">Conferma che il monitoraggio per il disco rigido virtuale di base (con il sistema operativo) e tutti i dischi rigidi virtuali aggiuntivi montati nella VM è stato definito.</span><span class="sxs-lookup"><span data-stu-id="c6664-582">Confirmation that monitoring for the base VHD (with the OS) and all additional VHDs mounted to the VM has been configured.</span></span>
* <span data-ttu-id="c6664-583">I due messaggi successivi confermano la configurazione delle metriche di archiviazione per uno specifico account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-583">The next two messages confirm the configuration of Storage Metrics for a specific storage account.</span></span>
* <span data-ttu-id="c6664-584">Una riga dell'output contiene lo stato dell'aggiornamento effettivo della configurazione di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-584">One line of output gives the status of the actual update of the monitoring configuration.</span></span>
* <span data-ttu-id="c6664-585">Un'altra riga dell'output conferma che la configurazione è stata distribuita o aggiornata.</span><span class="sxs-lookup"><span data-stu-id="c6664-585">Another line of output confirms that the configuration has been deployed or updated.</span></span>
* <span data-ttu-id="c6664-586">L'ultima riga dell'output è informativa.</span><span class="sxs-lookup"><span data-stu-id="c6664-586">The last line of output is informational.</span></span> <span data-ttu-id="c6664-587">Visualizza le opzioni per il test della configurazione di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="c6664-587">It shows your options for testing the monitoring configuration.</span></span>

<span data-ttu-id="c6664-588">Per verificare che tutti i passaggi del monitoraggio avanzato di Azure siano stati completati e che l'infrastruttura di Azure fornisca i dati necessari, procedere con il controllo dello stato di preparazione dell'estensione di monitoraggio avanzato di Azure per SAP, come descritto in [Controllo dello stato di preparazione del monitoraggio avanzato di Azure per SAP][deployment-guide-5.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-588">To check that all steps of Azure Enhanced Monitoring have been executed successfully, and that the Azure Infrastructure provides the necessary data, proceed with the readiness check for the Azure Enhanced Monitoring Extension for SAP, as described in [Readiness check for Azure Enhanced Monitoring for SAP][deployment-guide-5.1].</span></span> <span data-ttu-id="c6664-589">Attendere da 15 a 30 minuti mentre Diagnostica di Azure raccoglie i dati pertinenti.</span><span class="sxs-lookup"><span data-stu-id="c6664-589">Wait 15-30 minutes for Azure Diagnostics to collect the relevant data.</span></span>

#### <span data-ttu-id="c6664-590"><a name="408f3779-f422-4413-82f8-c57a23b4fc2f"></a>Interfaccia della riga di comando di Azure per VM Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-590"><a name="408f3779-f422-4413-82f8-c57a23b4fc2f"></a>Azure CLI for Linux VMs</span></span>
<span data-ttu-id="c6664-591">Per installare l'estensione di monitoraggio avanzato di Azure per SAP usando l'interfaccia della riga di comando di Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-591">To install the Azure Enhanced Monitoring Extension for SAP by using Azure CLI:</span></span>

1. <span data-ttu-id="c6664-592">Installare l'interfaccia della riga di comando di Azure come descritto in [Installare l'interfaccia della riga di comando di Azure][azure-cli].</span><span class="sxs-lookup"><span data-stu-id="c6664-592">Install Azure CLI, as described in [Install the Azure CLI][azure-cli].</span></span>
2. <span data-ttu-id="c6664-593">Accedere con l'account Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-593">Sign in with your Azure account:</span></span>

  ```
  azure login
  ```

3. <span data-ttu-id="c6664-594">Passare alla modalità Azure Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="c6664-594">Switch to Azure Resource Manager mode:</span></span>

  ```
  azure config mode arm
  ```

4. <span data-ttu-id="c6664-595">Abilitare il monitoraggio avanzato di Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-595">Enable Azure Enhanced Monitoring:</span></span>

  ```
  azure vm enable-aem <resource-group-name> <vm-name>
  ```

5. <span data-ttu-id="c6664-596">Verificare che l'estensione di monitoraggio avanzato di Azure sia attiva nella VM di Linux Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-596">Verify that the Azure Enhanced Monitoring Extension is active on the Azure Linux VM.</span></span> <span data-ttu-id="c6664-597">Controllare se il file \\var\\lib\\AzureEnhancedMonitor\\PerfCounters esiste.</span><span class="sxs-lookup"><span data-stu-id="c6664-597">Check whether the file \\var\\lib\\AzureEnhancedMonitor\\PerfCounters exists.</span></span> <span data-ttu-id="c6664-598">Se esiste, al prompt dei comandi eseguire questo comando per visualizzare le informazioni raccolte dal monitoraggio avanzato di Azure:</span><span class="sxs-lookup"><span data-stu-id="c6664-598">If it exists, at a command prompt, run this command to display information collected by the Azure Enhanced Monitor:</span></span>
```
cat /var/lib/AzureEnhancedMonitor/PerfCounters
```

<span data-ttu-id="c6664-599">L'output è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c6664-599">The output looks like this:</span></span>
```
2;cpu;Current Hw Frequency;;0;2194.659;MHz;60;1444036656;saplnxmon;
2;cpu;Max Hw Frequency;;0;2194.659;MHz;0;1444036656;saplnxmon;
…
…
```

## <span data-ttu-id="c6664-600"><a name="564adb4f-5c95-4041-9616-6635e83a810b"></a>Controlli e risoluzione dei problemi per il monitoraggio end-to-end</span><span class="sxs-lookup"><span data-stu-id="c6664-600"><a name="564adb4f-5c95-4041-9616-6635e83a810b"></a>Checks and troubleshooting for end-to-end monitoring</span></span>
<span data-ttu-id="c6664-601">Al termine della distribuzione della VM di Azure e della configurazione dell'infrastruttura di monitoraggio di Azure pertinente, verificare se tutti i componenti dell'estensione di monitoraggio avanzato di Azure funzionano come previsto.</span><span class="sxs-lookup"><span data-stu-id="c6664-601">After you have deployed your Azure VM and set up the relevant Azure monitoring infrastructure, check whether all the components of the Azure Enhanced Monitoring Extension are working as expected.</span></span>

<span data-ttu-id="c6664-602">Eseguire il controllo dello stato di preparazione dell'estensione di monitoraggio avanzato di Azure per SAP come descritto in [Controllo dello stato di preparazione dell'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-5.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-602">Run the readiness check for the Azure Enhanced Monitoring Extension for SAP as described in [Readiness check for the Azure Enhanced Monitoring Extension for SAP][deployment-guide-5.1].</span></span> <span data-ttu-id="c6664-603">Se tutti i risultati dei controlli dello stato di preparazione sono positivi e tutti i contatori delle prestazioni pertinenti sono funzionanti, significa che il monitoraggio di Azure è stato configurato correttamente.</span><span class="sxs-lookup"><span data-stu-id="c6664-603">If all readiness check results are positive and all relevant performance counters appear OK, Azure monitoring successfully set up.</span></span> <span data-ttu-id="c6664-604">È possibile passare all'installazione dell'agente host SAP come descritto nelle note SAP in [Risorse SAP][deployment-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-604">You can proceed with the installation of SAP Host Agent described in the SAP Notes in [SAP resources][deployment-guide-2.2].</span></span> <span data-ttu-id="c6664-605">Se il controllo dello stato di preparazione indica che alcuni contatori non sono presenti, eseguire il controllo dell'integrità dell'infrastruttura di monitoraggio di Azure come descritto in [Controllo dell'integrità della configurazione dell'infrastruttura di monitoraggio di Azure][deployment-guide-5.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-605">If the readiness check indicates that counters are missing, run the health check for the Azure monitoring infrastructure, as described in [Health check for Azure monitoring infrastructure configuration][deployment-guide-5.2].</span></span> <span data-ttu-id="c6664-606">Per altre opzioni di risoluzione dei problemi, vedere [Risoluzione dei problemi di monitoraggio di Azure per SAP][deployment-guide-5.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-606">For more troubleshooting options, see [Troubleshooting Azure monitoring for SAP][deployment-guide-5.3].</span></span>

### <span data-ttu-id="c6664-607"><a name="bb61ce92-8c5c-461f-8c53-39f5e5ed91f2"></a>Controllo dello stato di preparazione dell'estensione di monitoraggio avanzato di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-607"><a name="bb61ce92-8c5c-461f-8c53-39f5e5ed91f2"></a>Readiness check for the Azure Enhanced Monitoring Extension for SAP</span></span>
<span data-ttu-id="c6664-608">Questo controllo verifica che tutte le metriche delle prestazioni che vengono visualizzate nell'applicazione SAP provengano dall'infrastruttura di monitoraggio di Azure sottostante.</span><span class="sxs-lookup"><span data-stu-id="c6664-608">This check makes sure that all performance metrics that appear inside your SAP application are provided by the underlying Azure monitoring infrastructure.</span></span>

#### <a name="run-the-readiness-check-on-a-windows-vm"></a><span data-ttu-id="c6664-609">Eseguire il controllo dello stato di preparazione in una VM Windows</span><span class="sxs-lookup"><span data-stu-id="c6664-609">Run the readiness check on a Windows VM</span></span>

1.  <span data-ttu-id="c6664-610">Accedere alla macchina virtuale Azure. Non è necessario usare un account amministratore.</span><span class="sxs-lookup"><span data-stu-id="c6664-610">Sign in to the Azure virtual machine (using an admin account is not necessary).</span></span>
2.  <span data-ttu-id="c6664-611">Aprire una finestra del prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="c6664-611">Open a Command Prompt window.</span></span>
3.  <span data-ttu-id="c6664-612">Al prompt dei comandi sostituire la directory con la cartella di installazione dell'estensione di monitoraggio avanzato di Azure per SAP: C:\\Packages\\Plugins\\Microsoft.AzureCAT.AzureEnhancedMonitoring.AzureCATExtensionHandler\\&lt;versione>\\drop</span><span class="sxs-lookup"><span data-stu-id="c6664-612">At the command prompt, change the directory to the installation folder of the Azure Enhanced Monitoring Extension for SAP: C:\\Packages\\Plugins\\Microsoft.AzureCAT.AzureEnhancedMonitoring.AzureCATExtensionHandler\\&lt;version>\\drop</span></span>

  <span data-ttu-id="c6664-613">La *versione* nel percorso dell'estensione di monitoraggio può variare.</span><span class="sxs-lookup"><span data-stu-id="c6664-613">The *version* in the path to the monitoring extension might vary.</span></span> <span data-ttu-id="c6664-614">Se nella cartella di installazione risultano presenti cartelle per più versioni dell'estensione di monitoraggio, controllare la configurazione del servizio di Windows AzureEnhancedMonitoring e quindi passare alla cartella indicata come *Percorso file eseguibile*.</span><span class="sxs-lookup"><span data-stu-id="c6664-614">If you see folders for multiple versions of the monitoring extension in the installation folder, check the configuration of the AzureEnhancedMonitoring Windows service, and then switch to the folder indicated as *Path to executable*.</span></span>

  ![Proprietà del servizio che esegue l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-figure-1000]

4.  <span data-ttu-id="c6664-616">Al prompt dei comandi eseguire **azperflib.exe** senza alcun parametro.</span><span class="sxs-lookup"><span data-stu-id="c6664-616">At the command prompt, run **azperflib.exe** without any parameters.</span></span>

  > [!NOTE]
  > <span data-ttu-id="c6664-617">Azperflib.exe viene eseguito in ciclo e aggiorna i contatori raccolti ogni 60 secondi.</span><span class="sxs-lookup"><span data-stu-id="c6664-617">Azperflib.exe runs in a loop and updates the collected counters every 60 seconds.</span></span> <span data-ttu-id="c6664-618">Per terminare il ciclo, chiudere la finestra del prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="c6664-618">To end the loop, close the Command Prompt window.</span></span>
  >
  >

<span data-ttu-id="c6664-619">Se l'estensione di monitoraggio avanzato di Azure non è installata o il servizio AzureEnhancedMonitoring non è in esecuzione, l'estensione non è stata configurata correttamente.</span><span class="sxs-lookup"><span data-stu-id="c6664-619">If the Azure Enhanced Monitoring Extension is not installed, or the AzureEnhancedMonitoring service is not running, the extension has not been configured correctly.</span></span> <span data-ttu-id="c6664-620">Per informazioni dettagliate su come distribuire l'estensione, vedere [Risoluzione dei problemi dell'infrastruttura di monitoraggio di Azure per SAP][deployment-guide-5.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-620">For detailed information about how to deploy the extension, see [Troubleshooting the Azure monitoring infrastructure for SAP][deployment-guide-5.3].</span></span>

##### <a name="check-the-output-of-azperflibexe"></a><span data-ttu-id="c6664-621">Controllare l'output di azperflib.exe</span><span class="sxs-lookup"><span data-stu-id="c6664-621">Check the output of azperflib.exe</span></span>
<span data-ttu-id="c6664-622">L'output di azperflib.exe visualizza tutti i contatori delle prestazioni di Azure popolati per SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-622">Azperflib.exe output shows all populated Azure performance counters for SAP.</span></span> <span data-ttu-id="c6664-623">Alla fine dell'elenco dei contatori raccolti un riepilogo e un indicatore di integrità indicano lo stato del monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-623">At the bottom of the list of collected counters, a summary and health indicator show the status of Azure monitoring.</span></span>

<span data-ttu-id="c6664-624">![Output del controllo di integrità eseguito con azperflib.exe che indica che non sono presenti problemi][deployment-guide-figure-1100]
<a name="figure-11"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-624">![Output of health check by executing azperflib.exe, which indicates that no problems exist][deployment-guide-figure-1100]
<a name="figure-11"></a></span></span>

<span data-ttu-id="c6664-625">Controllare il risultato restituito per l'output **Counters total**, segnalato come vuoto, e per **Health status**, visualizzati nella figura precedente.</span><span class="sxs-lookup"><span data-stu-id="c6664-625">Check the result returned for the **Counters total** output, which is reported as empty, and for **Health status**, shown in the preceding figure.</span></span>

<span data-ttu-id="c6664-626">Interpretare i valori dei risultati come segue:</span><span class="sxs-lookup"><span data-stu-id="c6664-626">Interpret the resulting values as follows:</span></span>

| <span data-ttu-id="c6664-627">Valori dei risultati di azperflib.exe</span><span class="sxs-lookup"><span data-stu-id="c6664-627">Azperflib.exe result values</span></span> | <span data-ttu-id="c6664-628">Stato di integrità del monitoraggio di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-628">Azure monitoring health status</span></span> |
| --- | --- |
| <span data-ttu-id="c6664-629">**API Calls - not available**</span><span class="sxs-lookup"><span data-stu-id="c6664-629">**API Calls - not available**</span></span> | <span data-ttu-id="c6664-630">I contatori che non sono disponibili possono essere non applicabili alla configurazione della macchina virtuale oppure sono errori.</span><span class="sxs-lookup"><span data-stu-id="c6664-630">Counters that are not available might be either not applicable to the virtual machine configuration, or are errors.</span></span> <span data-ttu-id="c6664-631">Vedere **Health status**.</span><span class="sxs-lookup"><span data-stu-id="c6664-631">See **Health status**.</span></span> |
| <span data-ttu-id="c6664-632">**Counters total - empty**</span><span class="sxs-lookup"><span data-stu-id="c6664-632">**Counters total - empty**</span></span> |<span data-ttu-id="c6664-633">Possono essere vuoti i due contatori relativi all'archiviazione di Azure seguenti:</span><span class="sxs-lookup"><span data-stu-id="c6664-633">The following two Azure storage counters can be empty:</span></span> <ul><li><span data-ttu-id="c6664-634">Storage Read Op Latency Server msec</span><span class="sxs-lookup"><span data-stu-id="c6664-634">Storage Read Op Latency Server msec</span></span></li><li><span data-ttu-id="c6664-635">Storage Read Op Latency E2E msec</span><span class="sxs-lookup"><span data-stu-id="c6664-635">Storage Read Op Latency E2E msec</span></span></li></ul><span data-ttu-id="c6664-636">Tutti gli altri contatori devono avere valori.</span><span class="sxs-lookup"><span data-stu-id="c6664-636">All other counters must have values.</span></span> |
| <span data-ttu-id="c6664-637">**Health status**</span><span class="sxs-lookup"><span data-stu-id="c6664-637">**Health status**</span></span> |<span data-ttu-id="c6664-638">È positivo solo se lo stato restituito è **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6664-638">Only OK if return status shows **OK**.</span></span> |
| <span data-ttu-id="c6664-639">**Diagnostica**</span><span class="sxs-lookup"><span data-stu-id="c6664-639">**Diagnostics**</span></span> |<span data-ttu-id="c6664-640">Informazioni dettagliate sullo stato di integrità.</span><span class="sxs-lookup"><span data-stu-id="c6664-640">Detailed information about health status.</span></span> |

<span data-ttu-id="c6664-641">Se il valore di **Health status** non è **OK**, seguire le istruzioni in [Controllo dell'integrità della configurazione dell'infrastruttura di monitoraggio di Azure][deployment-guide-5.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-641">If the **Health status** value is not **OK**, follow the instructions in [Health check for Azure monitoring infrastructure configuration][deployment-guide-5.2].</span></span>

#### <a name="run-the-readiness-check-on-a-linux-vm"></a><span data-ttu-id="c6664-642">Eseguire il controllo dello stato di preparazione in una VM Linux</span><span class="sxs-lookup"><span data-stu-id="c6664-642">Run the readiness check on a Linux VM</span></span>

1.  <span data-ttu-id="c6664-643">Connettersi alla macchina virtuale di Azure usando SSH.</span><span class="sxs-lookup"><span data-stu-id="c6664-643">Connect to the Azure Virtual Machine by using SSH.</span></span>

2.  <span data-ttu-id="c6664-644">Controllare l'output dell'estensione di monitoraggio avanzato di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-644">Check the output of the Azure Enhanced Monitoring Extension.</span></span>

  <span data-ttu-id="c6664-645">a.</span><span class="sxs-lookup"><span data-stu-id="c6664-645">a.</span></span>  <span data-ttu-id="c6664-646">Eseguire `more /var/lib/AzureEnhancedMonitor/PerfCounters`</span><span class="sxs-lookup"><span data-stu-id="c6664-646">Run `more /var/lib/AzureEnhancedMonitor/PerfCounters`</span></span>

   <span data-ttu-id="c6664-647">**Risultato previsto**: restituisce un elenco di contatori delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="c6664-647">**Expected result**: Returns list of performance counters.</span></span> <span data-ttu-id="c6664-648">Il file non deve essere vuoto.</span><span class="sxs-lookup"><span data-stu-id="c6664-648">The file should not be empty.</span></span>

 <span data-ttu-id="c6664-649">b.</span><span class="sxs-lookup"><span data-stu-id="c6664-649">b.</span></span> <span data-ttu-id="c6664-650">Eseguire `cat /var/lib/AzureEnhancedMonitor/PerfCounters | grep Error`</span><span class="sxs-lookup"><span data-stu-id="c6664-650">Run `cat /var/lib/AzureEnhancedMonitor/PerfCounters | grep Error`</span></span>

   <span data-ttu-id="c6664-651">**Risultato previsto**: restituisce una riga in cui l'errore è **none**, ad esempio **3;config;Error;;0;0;none;0;1456416792;tst-servercs;**</span><span class="sxs-lookup"><span data-stu-id="c6664-651">**Expected result**: Returns one line where the error is **none**, for example, **3;config;Error;;0;0;none;0;1456416792;tst-servercs;**</span></span>

  <span data-ttu-id="c6664-652">c.</span><span class="sxs-lookup"><span data-stu-id="c6664-652">c.</span></span> <span data-ttu-id="c6664-653">Eseguire `more /var/lib/AzureEnhancedMonitor/LatestErrorRecord`</span><span class="sxs-lookup"><span data-stu-id="c6664-653">Run `more /var/lib/AzureEnhancedMonitor/LatestErrorRecord`</span></span>

    <span data-ttu-id="c6664-654">**Risultato previsto**: viene restituito come vuoto o non esiste.</span><span class="sxs-lookup"><span data-stu-id="c6664-654">**Expected result**: Returns as empty or does not exist.</span></span>

<span data-ttu-id="c6664-655">Se il controllo precedente non è riuscito, eseguire questi controlli aggiuntivi:</span><span class="sxs-lookup"><span data-stu-id="c6664-655">If the preceding check was not successful, run these additional checks:</span></span>

1.  <span data-ttu-id="c6664-656">Verificare che waagent sia installato e abilitato.</span><span class="sxs-lookup"><span data-stu-id="c6664-656">Make sure that the waagent is installed and enabled.</span></span>

  <span data-ttu-id="c6664-657">a.</span><span class="sxs-lookup"><span data-stu-id="c6664-657">a.</span></span>  <span data-ttu-id="c6664-658">Eseguire `sudo ls -al /var/lib/waagent/`</span><span class="sxs-lookup"><span data-stu-id="c6664-658">Run `sudo ls -al /var/lib/waagent/`</span></span>

      <span data-ttu-id="c6664-659">**Risultato previsto**: elenca il contenuto della directory waagent.</span><span class="sxs-lookup"><span data-stu-id="c6664-659">**Expected result**: Lists the content of the waagent directory.</span></span>

  <span data-ttu-id="c6664-660">b.</span><span class="sxs-lookup"><span data-stu-id="c6664-660">b.</span></span>  <span data-ttu-id="c6664-661">Eseguire `ps -ax | grep waagent`</span><span class="sxs-lookup"><span data-stu-id="c6664-661">Run `ps -ax | grep waagent`</span></span>

   <span data-ttu-id="c6664-662">**Risultato previsto**: visualizza una voce simile a `python /usr/sbin/waagent -daemon`</span><span class="sxs-lookup"><span data-stu-id="c6664-662">**Expected result**: Displays one entry similar to: `python /usr/sbin/waagent -daemon`</span></span>

2. <span data-ttu-id="c6664-663">Verificare che l'estensione di diagnostica per Linux sia installata e abilitata.</span><span class="sxs-lookup"><span data-stu-id="c6664-663">Make sure that the Linux Diagnostic Extension is installed and enabled.</span></span>

  <span data-ttu-id="c6664-664">a.</span><span class="sxs-lookup"><span data-stu-id="c6664-664">a.</span></span>  <span data-ttu-id="c6664-665">Eseguire `sudo sh -c 'ls -al /var/lib/waagent/Microsoft.OSTCExtensions.LinuxDiagnostic-'`</span><span class="sxs-lookup"><span data-stu-id="c6664-665">Run `sudo sh -c 'ls -al /var/lib/waagent/Microsoft.OSTCExtensions.LinuxDiagnostic-'`</span></span>

   <span data-ttu-id="c6664-666">**Risultato previsto**: elenca il contenuto della directory dell'estensione di diagnostica per Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-666">**Expected result**: Lists the content of the Linux Diagnostic Extension directory.</span></span>

 <span data-ttu-id="c6664-667">b.</span><span class="sxs-lookup"><span data-stu-id="c6664-667">b.</span></span> <span data-ttu-id="c6664-668">Eseguire `ps -ax | grep diagnostic`</span><span class="sxs-lookup"><span data-stu-id="c6664-668">Run `ps -ax | grep diagnostic`</span></span>

   <span data-ttu-id="c6664-669">**Risultato previsto**: visualizza una voce simile a `python /var/lib/waagent/Microsoft.OSTCExtensions.LinuxDiagnostic-2.0.92/diagnostic.py -daemon`</span><span class="sxs-lookup"><span data-stu-id="c6664-669">**Expected result**: Displays one entry similar to: `python /var/lib/waagent/Microsoft.OSTCExtensions.LinuxDiagnostic-2.0.92/diagnostic.py -daemon`</span></span>

3.   <span data-ttu-id="c6664-670">Verificare che l'estensione di monitoraggio avanzato di Azure sia installata e in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="c6664-670">Make sure that the Azure Enhanced Monitoring Extension is installed and running.</span></span>

  <span data-ttu-id="c6664-671">a.</span><span class="sxs-lookup"><span data-stu-id="c6664-671">a.</span></span>  <span data-ttu-id="c6664-672">Eseguire `sudo sh -c 'ls -al /var/lib/waagent/Microsoft.OSTCExtensions.AzureEnhancedMonitorForLinux-/'`</span><span class="sxs-lookup"><span data-stu-id="c6664-672">Run `sudo sh -c 'ls -al /var/lib/waagent/Microsoft.OSTCExtensions.AzureEnhancedMonitorForLinux-/'`</span></span>

    <span data-ttu-id="c6664-673">**Risultato previsto**: elenca il contenuto della directory dell'estensione di monitoraggio avanzato di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-673">**Expected result**: Lists the content of the Azure Enhanced Monitoring Extension directory.</span></span>

  <span data-ttu-id="c6664-674">b.</span><span class="sxs-lookup"><span data-stu-id="c6664-674">b.</span></span> <span data-ttu-id="c6664-675">Eseguire `ps -ax | grep AzureEnhanced`</span><span class="sxs-lookup"><span data-stu-id="c6664-675">Run `ps -ax | grep AzureEnhanced`</span></span>

     <span data-ttu-id="c6664-676">**Risultato previsto**: visualizza una voce simile a `python /var/lib/waagent/Microsoft.OSTCExtensions.AzureEnhancedMonitorForLinux-2.0.0.2/handler.py daemon`</span><span class="sxs-lookup"><span data-stu-id="c6664-676">**Expected result**: Displays one entry similar to: `python /var/lib/waagent/Microsoft.OSTCExtensions.AzureEnhancedMonitorForLinux-2.0.0.2/handler.py daemon`</span></span>

3. <span data-ttu-id="c6664-677">Installare l'agente host SAP come descritto nella nota SAP [1031096] e controllare l'output di `saposcol`.</span><span class="sxs-lookup"><span data-stu-id="c6664-677">Install SAP Host Agent as described in SAP Note [1031096], and check the output of `saposcol`.</span></span>

  <span data-ttu-id="c6664-678">a.</span><span class="sxs-lookup"><span data-stu-id="c6664-678">a.</span></span>  <span data-ttu-id="c6664-679">Eseguire `/usr/sap/hostctrl/exe/saposcol -d`</span><span class="sxs-lookup"><span data-stu-id="c6664-679">Run `/usr/sap/hostctrl/exe/saposcol -d`</span></span>

  <span data-ttu-id="c6664-680">b.</span><span class="sxs-lookup"><span data-stu-id="c6664-680">b.</span></span>  <span data-ttu-id="c6664-681">Eseguire `dump ccm`</span><span class="sxs-lookup"><span data-stu-id="c6664-681">Run `dump ccm`</span></span>

  <span data-ttu-id="c6664-682">c.</span><span class="sxs-lookup"><span data-stu-id="c6664-682">c.</span></span>  <span data-ttu-id="c6664-683">Controllare se la metrica **Virtualization_Configuration\Enhanced Monitoring Access** è **true**.</span><span class="sxs-lookup"><span data-stu-id="c6664-683">Check whether the **Virtualization_Configuration\Enhanced Monitoring Access** metric is **true**.</span></span>

<span data-ttu-id="c6664-684">Se è già installato un server applicazioni SAP NetWeaver ABAP, aprire la transazione ST06 e controllare se il monitoraggio avanzato è abilitato.</span><span class="sxs-lookup"><span data-stu-id="c6664-684">If you already have an SAP NetWeaver ABAP application server installed, open transaction ST06 and check whether enhanced monitoring is enabled.</span></span>

<span data-ttu-id="c6664-685">Se uno di questi controlli non riesce e per informazioni dettagliate su come ridistribuire l'estensione, vedere [Risoluzione dei problemi dell'infrastruttura di monitoraggio di Azure per SAP][deployment-guide-5.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-685">If any of these checks fail, and for detailed information about how to redeploy the extension, see [Troubleshooting the Azure monitoring infrastructure for SAP][deployment-guide-5.3].</span></span>

### <span data-ttu-id="c6664-686"><a name="e2d592ff-b4ea-4a53-a91a-e5521edb6cd1"></a>Controllo dell'integrità della configurazione dell'infrastruttura di monitoraggio di Azure</span><span class="sxs-lookup"><span data-stu-id="c6664-686"><a name="e2d592ff-b4ea-4a53-a91a-e5521edb6cd1"></a>Health check for the Azure monitoring infrastructure configuration</span></span>
<span data-ttu-id="c6664-687">Se alcuni dati di monitoraggio non vengono forniti correttamente come indicato nel test descritto in [Controllo dello stato di preparazione del monitoraggio avanzato di Azure per SAP][deployment-guide-5.1], eseguire il cmdlet `Test-AzureRmVMAEMExtension` per controllare se l'infrastruttura di monitoraggio di Azure e l'estensione di monitoraggio per SAP sono configurate correttamente.</span><span class="sxs-lookup"><span data-stu-id="c6664-687">If some of the monitoring data is not delivered correctly as indicated by the test described in [Readiness check for Azure Enhanced Monitoring for SAP][deployment-guide-5.1], run the `Test-AzureRmVMAEMExtension` cmdlet to check whether the Azure monitoring infrastructure and the monitoring extension for SAP are configured correctly.</span></span>

1.  <span data-ttu-id="c6664-688">Verificare di aver installato l'ultima versione del cmdlet di Azure PowerShell come descritto in [Distribuzione dei cmdlet di Azure PowerShell][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="c6664-688">Make sure that you have installed the latest version of the Azure PowerShell cmdlet, as described in [Deploying Azure PowerShell cmdlets][deployment-guide-4.1].</span></span>
2.  <span data-ttu-id="c6664-689">Eseguire il cmdlet di PowerShell seguente.</span><span class="sxs-lookup"><span data-stu-id="c6664-689">Run the following PowerShell cmdlet.</span></span> <span data-ttu-id="c6664-690">Per un elenco degli ambienti disponibili, eseguire il cmdlet `Get-AzureRmEnvironment`.</span><span class="sxs-lookup"><span data-stu-id="c6664-690">For a list of available environments, run the cmdlet `Get-AzureRmEnvironment`.</span></span> <span data-ttu-id="c6664-691">Per usare Azure pubblico, selezionare l'ambiente **AzureCloud**.</span><span class="sxs-lookup"><span data-stu-id="c6664-691">To use public Azure, select the **AzureCloud** environment.</span></span> <span data-ttu-id="c6664-692">Per Azure in Cina, selezionare **AzureChinaCloud**.</span><span class="sxs-lookup"><span data-stu-id="c6664-692">For Azure in China, select **AzureChinaCloud**.</span></span>
  ```powershell
  $env = Get-AzureRmEnvironment -Name <name of the environment>
  Login-AzureRmAccount -Environment $env
  Set-AzureRmContext -SubscriptionName <subscription name>
  Test-AzureRmVMAEMExtension -ResourceGroupName <resource group name> -VMName <virtual machine name>
  ```

3.  <span data-ttu-id="c6664-693">Immettere i dati dell'account e identificare la macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-693">Enter your account data and identify the Azure virtual machine.</span></span>

  ![Pagina di input del cmdlet di Azure specifico di SAP Test-VMConfigForSAP_GUI][deployment-guide-figure-1200]

4. <span data-ttu-id="c6664-695">Lo script testa la configurazione della macchina virtuale selezionata.</span><span class="sxs-lookup"><span data-stu-id="c6664-695">The script tests the configuration of the virtual machine you select.</span></span>

  ![Output di un test riuscito dell'infrastruttura di monitoraggio di Azure per SAP][deployment-guide-figure-1300]

<span data-ttu-id="c6664-697">Verificare che il risultato di ogni controllo dell'integrità sia **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6664-697">Make sure that every health check result is **OK**.</span></span> <span data-ttu-id="c6664-698">Se alcuni controlli non indicano **OK**, eseguire il cmdlet di aggiornamento come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-698">If some checks do not display **OK**, run the update cmdlet as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span> <span data-ttu-id="c6664-699">Attendere 15 minuti e ripetere i controlli descritti in [Controllo dello stato di preparazione del monitoraggio avanzato di Azure per SAP][deployment-guide-5.1] e [Controllo dell'integrità della configurazione dell'infrastruttura di monitoraggio di Azure][deployment-guide-5.2].</span><span class="sxs-lookup"><span data-stu-id="c6664-699">Wait 15 minutes, and repeat the checks described in [Readiness check for Azure Enhanced Monitoring for SAP][deployment-guide-5.1] and [Health check for Azure Monitoring Infrastructure Configuration][deployment-guide-5.2].</span></span> <span data-ttu-id="c6664-700">Se i controlli segnalano ancora un problema con alcuni o tutti i contatori, vedere [Risoluzione dei problemi dell'infrastruttura di monitoraggio di Azure per SAP][deployment-guide-5.3].</span><span class="sxs-lookup"><span data-stu-id="c6664-700">If the checks still indicate a problem with some or all counters, see [Troubleshooting the Azure monitoring infrastructure for SAP][deployment-guide-5.3].</span></span>

### <span data-ttu-id="c6664-701"><a name="fe25a7da-4e4e-4388-8907-8abc2d33cfd8"></a>Risoluzione dei problemi dell'infrastruttura di monitoraggio di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="c6664-701"><a name="fe25a7da-4e4e-4388-8907-8abc2d33cfd8"></a>Troubleshooting the Azure monitoring infrastructure for SAP</span></span>

#### <a name="windowslogowindows-azure-performance-counters-do-not-show-up-at-all"></a>![Windows][Logo_Windows] <span data-ttu-id="c6664-703">I contatori delle prestazioni di Azure non vengono visualizzati</span><span class="sxs-lookup"><span data-stu-id="c6664-703">Azure performance counters do not show up at all</span></span>
<span data-ttu-id="c6664-704">Il servizio di Windows AzureEnhancedMonitoring raccoglie le metriche delle prestazioni in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-704">The AzureEnhancedMonitoring Windows service collects performance metrics in Azure.</span></span> <span data-ttu-id="c6664-705">Se il servizio non è stato installato correttamente o non è in esecuzione nella VM, non può essere raccolta alcuna metrica delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="c6664-705">If the service has not been installed correctly or if it is not running in your VM, no performance metrics can be collected.</span></span>

##### <a name="the-installation-directory-of-the-azure-enhanced-monitoring-extension-is-empty"></a><span data-ttu-id="c6664-706">La directory di installazione dell'estensione di monitoraggio avanzato di Azure è vuota</span><span class="sxs-lookup"><span data-stu-id="c6664-706">The installation directory of the Azure Enhanced Monitoring Extension is empty</span></span>

###### <a name="issue"></a><span data-ttu-id="c6664-707">Problema</span><span class="sxs-lookup"><span data-stu-id="c6664-707">Issue</span></span>
<span data-ttu-id="c6664-708">La directory di installazione C:\\Packages\\Plugins\\Microsoft.AzureCAT.AzureEnhancedMonitoring.AzureCATExtensionHandler\\&lt;versione>\\drop è vuota.</span><span class="sxs-lookup"><span data-stu-id="c6664-708">The installation directory C:\\Packages\\Plugins\\Microsoft.AzureCAT.AzureEnhancedMonitoring.AzureCATExtensionHandler\\&lt;version>\\drop is empty.</span></span>

###### <a name="solution"></a><span data-ttu-id="c6664-709">Soluzione</span><span class="sxs-lookup"><span data-stu-id="c6664-709">Solution</span></span>
<span data-ttu-id="c6664-710">L'estensione non è installata.</span><span class="sxs-lookup"><span data-stu-id="c6664-710">The extension is not installed.</span></span> <span data-ttu-id="c6664-711">Determinare se si tratta di un problema del proxy (come descritto prima).</span><span class="sxs-lookup"><span data-stu-id="c6664-711">Determine whether this is a proxy issue (as described earlier).</span></span> <span data-ttu-id="c6664-712">Potrebbe essere necessario riavviare il computer o eseguire di nuovo lo script di configurazione `Set-AzureRmVMAEMExtension`.</span><span class="sxs-lookup"><span data-stu-id="c6664-712">You might need to restart the machine or rerun the `Set-AzureRmVMAEMExtension` configuration script.</span></span>

##### <a name="service-for-azure-enhanced-monitoring-does-not-exist"></a><span data-ttu-id="c6664-713">Il servizio per il monitoraggio avanzato di Azure non esiste</span><span class="sxs-lookup"><span data-stu-id="c6664-713">Service for Azure Enhanced Monitoring does not exist</span></span>

###### <a name="issue"></a><span data-ttu-id="c6664-714">Problema</span><span class="sxs-lookup"><span data-stu-id="c6664-714">Issue</span></span>
<span data-ttu-id="c6664-715">Il servizio di Windows AzureEnhancedMonitoring non esiste.</span><span class="sxs-lookup"><span data-stu-id="c6664-715">The AzureEnhancedMonitoring Windows service does not exist.</span></span>

<span data-ttu-id="c6664-716">L'output di azperflib.exe genera un errore:</span><span class="sxs-lookup"><span data-stu-id="c6664-716">Azperflib.exe output throws an error:</span></span>

<span data-ttu-id="c6664-717">![Esecuzione di azperflib.exe che indica che il servizio dell'estensione di monitoraggio avanzato di Azure per SAP non è in esecuzione][deployment-guide-figure-1400]
 <a name="figure-14"></a></span><span class="sxs-lookup"><span data-stu-id="c6664-717">![Execution of azperflib.exe indicates that the service of the Azure Enhanced Monitoring Extension for SAP is not running][deployment-guide-figure-1400]
<a name="figure-14"></a></span></span>

###### <a name="solution"></a><span data-ttu-id="c6664-718">Soluzione</span><span class="sxs-lookup"><span data-stu-id="c6664-718">Solution</span></span>
<span data-ttu-id="c6664-719">Se il servizio non esiste, l'estensione di monitoraggio avanzato di Azure per SAP non è stata installata correttamente.</span><span class="sxs-lookup"><span data-stu-id="c6664-719">If the service does not exist, the Azure Enhanced Monitoring Extension for SAP has not been installed correctly.</span></span> <span data-ttu-id="c6664-720">Ridistribuire l'estensione usando la procedura descritta per lo scenario di distribuzione specifico in [Scenari di distribuzione di VM per SAP in Azure][deployment-guide-3].</span><span class="sxs-lookup"><span data-stu-id="c6664-720">Redeploy the extension by using the steps described for your deployment scenario in [Deployment scenarios of VMs for SAP in Azure][deployment-guide-3].</span></span>

<span data-ttu-id="c6664-721">Dopo avere distribuito l'estensione, dopo un'ora controllare di nuovo se i contatori delle prestazioni di Azure sono presenti nella VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-721">After you deploy the extension, after one hour, check again whether the Azure performance counters are provided in the Azure VM.</span></span>

##### <a name="service-for-azure-enhanced-monitoring-exists-but-fails-to-start"></a><span data-ttu-id="c6664-722">Il servizio per il monitoraggio avanzato di Azure esiste ma non si avvia</span><span class="sxs-lookup"><span data-stu-id="c6664-722">Service for Azure Enhanced Monitoring exists, but fails to start</span></span>

###### <a name="issue"></a><span data-ttu-id="c6664-723">Problema</span><span class="sxs-lookup"><span data-stu-id="c6664-723">Issue</span></span>
<span data-ttu-id="c6664-724">Il servizio di Windows AzureEnhancedMonitoring esiste ed è abilitato, ma non si avvia.</span><span class="sxs-lookup"><span data-stu-id="c6664-724">The AzureEnhancedMonitoring Windows service exists and is enabled, but fails to start.</span></span> <span data-ttu-id="c6664-725">Per altre informazioni, controllare il log eventi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-725">For more information, check the application event log.</span></span>

###### <a name="solution"></a><span data-ttu-id="c6664-726">Soluzione</span><span class="sxs-lookup"><span data-stu-id="c6664-726">Solution</span></span>
<span data-ttu-id="c6664-727">La configurazione non è corretta.</span><span class="sxs-lookup"><span data-stu-id="c6664-727">The configuration is incorrect.</span></span> <span data-ttu-id="c6664-728">Riavviare l'estensione di monitoraggio per la VM, come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-728">Restart the monitoring extension for the VM, as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span>

#### <a name="windowslogowindows-some-azure-performance-counters-are-missing"></a>![Windows][Logo_Windows] <span data-ttu-id="c6664-730">Alcuni contatori delle prestazioni di Azure non sono presenti</span><span class="sxs-lookup"><span data-stu-id="c6664-730">Some Azure performance counters are missing</span></span>
<span data-ttu-id="c6664-731">Il servizio di Windows AzureEnhancedMonitoring raccoglie le metriche delle prestazioni in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-731">The AzureEnhancedMonitoring Windows service collects performance metrics in Azure.</span></span> <span data-ttu-id="c6664-732">Il servizio ottiene dati da più origini.</span><span class="sxs-lookup"><span data-stu-id="c6664-732">The service gets data from several sources.</span></span> <span data-ttu-id="c6664-733">Alcuni dati di configurazione vengono raccolti in locale e alcune metriche delle prestazioni vengono lette da Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-733">Some configuration data is collected locally, and some performance metrics are read from Azure Diagnostics.</span></span> <span data-ttu-id="c6664-734">Vengono usati contatori di archiviazione dalla registrazione a livello di sottoscrizione di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-734">Storage counters are used from your logging on the storage subscription level.</span></span>

<span data-ttu-id="c6664-735">Se la soluzione indicata nella nota SAP [1999351] non risolve il problema, eseguire di nuovo lo script di configurazione `Set-AzureRmVMAEMExtension`.</span><span class="sxs-lookup"><span data-stu-id="c6664-735">If troubleshooting by using SAP Note [1999351] doesn't resolve the issue, rerun the `Set-AzureRmVMAEMExtension` configuration script.</span></span> <span data-ttu-id="c6664-736">Potrebbe essere necessario attendere un'ora perché i contatori relativi all'analisi dell'archiviazione o alla diagnostica non possono essere creati subito dopo essere stati abilitati.</span><span class="sxs-lookup"><span data-stu-id="c6664-736">You might have to wait an hour because storage analytics or diagnostics counters might not be created immediately after they are enabled.</span></span> <span data-ttu-id="c6664-737">Se il problema persiste, inviare un messaggio all'assistenza clienti SAP in merito al componente BC-OP-NT-AZR per Windows o al componente BC-OP-LNX-AZR per una macchina virtuale Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-737">If the problem persists, open an SAP customer support message on the component BC-OP-NT-AZR for Windows or BC-OP-LNX-AZR for a Linux virtual machine.</span></span>

#### <a name="linuxlogolinux-azure-performance-counters-do-not-show-up-at-all"></a>![Linux][Logo_Linux] <span data-ttu-id="c6664-739">I contatori delle prestazioni di Azure non vengono visualizzati</span><span class="sxs-lookup"><span data-stu-id="c6664-739">Azure performance counters do not show up at all</span></span>
<span data-ttu-id="c6664-740">Le metriche delle prestazioni in Azure vengono raccolte da un daemon.</span><span class="sxs-lookup"><span data-stu-id="c6664-740">Performance metrics in Azure are collected by a daemon.</span></span> <span data-ttu-id="c6664-741">Se il daemon non è in esecuzione, non può essere raccolta alcuna metrica delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="c6664-741">If the daemon is not running, no performance metrics can be collected.</span></span>

##### <a name="the-installation-directory-of-the-azure-enhanced-monitoring-extension-is-empty"></a><span data-ttu-id="c6664-742">La directory di installazione dell'estensione di monitoraggio avanzato di Azure è vuota</span><span class="sxs-lookup"><span data-stu-id="c6664-742">The installation directory of the Azure Enhanced Monitoring extension is empty</span></span>

###### <a name="issue"></a><span data-ttu-id="c6664-743">Problema</span><span class="sxs-lookup"><span data-stu-id="c6664-743">Issue</span></span>
<span data-ttu-id="c6664-744">La directory \\var\\lib\\waagent\\ non ha una sottodirectory per l'estensione di monitoraggio avanzato di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-744">The directory \\var\\lib\\waagent\\ does not have a subdirectory for the Azure Enhanced Monitoring extension.</span></span>

###### <a name="solution"></a><span data-ttu-id="c6664-745">Soluzione</span><span class="sxs-lookup"><span data-stu-id="c6664-745">Solution</span></span>
<span data-ttu-id="c6664-746">L'estensione non è installata.</span><span class="sxs-lookup"><span data-stu-id="c6664-746">The extension is not installed.</span></span> <span data-ttu-id="c6664-747">Determinare se si tratta di un problema del proxy (come descritto prima).</span><span class="sxs-lookup"><span data-stu-id="c6664-747">Determine whether this is a proxy issue (as described earlier).</span></span> <span data-ttu-id="c6664-748">Potrebbe essere necessario riavviare il computer e/o eseguire di nuovo lo script di configurazione `Set-AzureRmVMAEMExtension`.</span><span class="sxs-lookup"><span data-stu-id="c6664-748">You might need to restart the machine and/or rerun the `Set-AzureRmVMAEMExtension` configuration script.</span></span>

#### <a name="linuxlogolinux-some-azure-performance-counters-are-missing"></a>![Linux][Logo_Linux] <span data-ttu-id="c6664-750">Alcuni contatori delle prestazioni di Azure non sono presenti</span><span class="sxs-lookup"><span data-stu-id="c6664-750">Some Azure performance counters are missing</span></span>
<span data-ttu-id="c6664-751">Le metriche delle prestazioni in Azure vengono raccolte da un daemon, che ottiene i dati da diverse origini.</span><span class="sxs-lookup"><span data-stu-id="c6664-751">Performance metrics in Azure are collected by a daemon, which gets data from several sources.</span></span> <span data-ttu-id="c6664-752">Alcuni dati di configurazione vengono raccolti in locale e alcune metriche delle prestazioni vengono lette da Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6664-752">Some configuration data is collected locally, and some performance metrics are read from Azure Diagnostics.</span></span> <span data-ttu-id="c6664-753">I contatori di archiviazione provengono dai log nella sottoscrizione di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6664-753">Storage counters come from the logs in your storage subscription.</span></span>

<span data-ttu-id="c6664-754">Per un elenco completo e aggiornato dei problemi noti, vedere la nota SAP [1999351], che contiene informazioni aggiuntive sulla risoluzione dei problemi per il monitoraggio avanzato di Azure per SAP.</span><span class="sxs-lookup"><span data-stu-id="c6664-754">For a complete and up-to-date list of known issues, see SAP Note [1999351], which has additional troubleshooting information for Enhanced Azure Monitoring for SAP.</span></span>

<span data-ttu-id="c6664-755">Se la soluzione indicata nella nota SAP [1999351] non risolve il problema, eseguire di nuovo lo script di configurazione `Set-AzureRmVMAEMExtension` come descritto in [Configurare l'estensione di monitoraggio avanzato di Azure per SAP][deployment-guide-4.5].</span><span class="sxs-lookup"><span data-stu-id="c6664-755">If troubleshooting by using SAP Note [1999351] does not resolve the issue, rerun the `Set-AzureRmVMAEMExtension` configuration script as described in [Configure the Azure Enhanced Monitoring Extension for SAP][deployment-guide-4.5].</span></span> <span data-ttu-id="c6664-756">Potrebbe essere necessario attendere un'ora perché i contatori relativi all'analisi dell'archiviazione o alla diagnostica non possono essere creati subito dopo essere stati abilitati.</span><span class="sxs-lookup"><span data-stu-id="c6664-756">You might have to wait for an hour because storage analytics or diagnostics counters might not be created immediately after they are enabled.</span></span> <span data-ttu-id="c6664-757">Se il problema persiste, inviare un messaggio all'assistenza clienti SAP in merito al componente BC-OP-NT-AZR per Windows o al componente BC-OP-LNX-AZR per una macchina virtuale Linux.</span><span class="sxs-lookup"><span data-stu-id="c6664-757">If the problem persists, open an SAP customer support message on the component BC-OP-NT-AZR for Windows or BC-OP-LNX-AZR for a Linux virtual machine.</span></span>
