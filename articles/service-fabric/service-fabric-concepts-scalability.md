---
title: "Scalabilità dei servizi di Service Fabric | Documentazione Microsoft"
description: Illustra come scalare i servizi di Service Fabric
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: ed324f23-242f-47b7-af1a-e55c839e7d5d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: e2dd48341499b18ebd1433611063746e95a5ac62
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="scaling-in-service-fabric"></a><span data-ttu-id="8e88f-103">Scalabilità in Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8e88f-103">Scaling in Service Fabric</span></span>
<span data-ttu-id="8e88f-104">Azure Service Fabric semplifica la creazione di applicazioni scalabili gestendo i servizi, le partizioni e le repliche nei nodi di un cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-104">Azure Service Fabric makes it easy to build scalable applications by managing the services, partitions, and replicas on the nodes of a cluster.</span></span> <span data-ttu-id="8e88f-105">L'esecuzione di molti carichi di lavoro sullo stesso hardware determina il massimo utilizzo delle risorse, ma offre anche la flessibilità in termini di scelta di come scalare i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8e88f-105">Running many workloads on the same hardware enables maximum resource utilization, but also provides flexibility in terms of how you choose to scale your workloads.</span></span> 

<span data-ttu-id="8e88f-106">Esistono vari modi per impostare la scalabilità in Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="8e88f-106">Scaling in Service Fabric is accomplished several different ways:</span></span>

1. <span data-ttu-id="8e88f-107">Implementazione della scalabilità tramite creazione o rimozione di istanze del servizio senza stato</span><span class="sxs-lookup"><span data-stu-id="8e88f-107">Scaling by creating or removing stateless service instances</span></span>
2. <span data-ttu-id="8e88f-108">Implementazione della scalabilità tramite creazione o rimozione di nuovi servizi denominati</span><span class="sxs-lookup"><span data-stu-id="8e88f-108">Scaling by creating or removing new named services</span></span>
3. <span data-ttu-id="8e88f-109">Implementazione della scalabilità tramite creazione o rimozione di nuove istanze dell'applicazione denominate</span><span class="sxs-lookup"><span data-stu-id="8e88f-109">Scaling by creating or removing new named application instances</span></span>
4. <span data-ttu-id="8e88f-110">Implementazione della scalabilità tramite utilizzo di servizi partizionati</span><span class="sxs-lookup"><span data-stu-id="8e88f-110">Scaling by using partitioned services</span></span>
5. <span data-ttu-id="8e88f-111">Implementazione della scalabilità tramite aggiunta e rimozione di nodi dal cluster</span><span class="sxs-lookup"><span data-stu-id="8e88f-111">Scaling by adding and removing nodes from the cluster</span></span> 
6. <span data-ttu-id="8e88f-112">Implementazione della scalabilità tramite metriche di Gestione risorse cluster</span><span class="sxs-lookup"><span data-stu-id="8e88f-112">Scaling by using Cluster Resource Manager metrics</span></span>

## <a name="scaling-by-creating-or-removing-stateless-service-instances"></a><span data-ttu-id="8e88f-113">Implementazione della scalabilità tramite creazione o rimozione di istanze del servizio senza stato</span><span class="sxs-lookup"><span data-stu-id="8e88f-113">Scaling by creating or removing stateless service instances</span></span>
<span data-ttu-id="8e88f-114">Uno dei modi più semplici per scalare all'interno di Service Fabric usa i servizi senza stato.</span><span class="sxs-lookup"><span data-stu-id="8e88f-114">One of the simplest ways to scale within Service Fabric works with stateless services.</span></span> <span data-ttu-id="8e88f-115">Quando si crea un servizio senza stato, è possibile definire un oggetto `InstanceCount`.</span><span class="sxs-lookup"><span data-stu-id="8e88f-115">When you create a stateless service, you get a chance to define an `InstanceCount`.</span></span> <span data-ttu-id="8e88f-116">L'oggetto `InstanceCount` definisce il numero di copie in esecuzione del codice del servizio che viene creato all'avvio del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-116">`InstanceCount` defines how many running copies of that service's code are created when the service starts up.</span></span> <span data-ttu-id="8e88f-117">Si supponga, ad esempio, che il cluster contenga 100 nodi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-117">Let's say, for example, that there are 100 nodes in the cluster.</span></span> <span data-ttu-id="8e88f-118">Si supponga anche che venga creato un servizio con un oggetto `InstanceCount` impostato su 10.</span><span class="sxs-lookup"><span data-stu-id="8e88f-118">Let's also say that a service is created with an `InstanceCount` of 10.</span></span> <span data-ttu-id="8e88f-119">Durante il runtime, queste 10 copie in esecuzione del codice potrebbero diventare tutte troppo occupate oppure non esserlo a sufficienza.</span><span class="sxs-lookup"><span data-stu-id="8e88f-119">During runtime, those 10 running copies of the code could all become too busy (or could be not busy enough).</span></span> <span data-ttu-id="8e88f-120">Un modo per scalare il carico di lavoro consiste nel modificare il numero di istanze.</span><span class="sxs-lookup"><span data-stu-id="8e88f-120">One way to scale that workload is to change the number of instances.</span></span> <span data-ttu-id="8e88f-121">Alcuni frammenti di codice di monitoraggio o di gestione potrebbero, ad esempio, modificare il numero esistente di istanze in 50, o in 5, a seconda che il carico di lavoro debba essere scalato orizzontale o verticalmente in base al carico.</span><span class="sxs-lookup"><span data-stu-id="8e88f-121">For example, some piece of monitoring or management code can change the existing number of instances to 50, or to 5, depending on whether the workload needs to scale in or out based on the load.</span></span> 

<span data-ttu-id="8e88f-122">C#:</span><span class="sxs-lookup"><span data-stu-id="8e88f-122">C#:</span></span>

```csharp
StatelessServiceUpdateDescription updateDescription = new StatelessServiceUpdateDescription(); 
updateDescription.InstanceCount = 50;
await fabricClient.ServiceManager.UpdateServiceAsync(new Uri("fabric:/app/service"), updateDescription);
```

<span data-ttu-id="8e88f-123">Powershell:</span><span class="sxs-lookup"><span data-stu-id="8e88f-123">Powershell:</span></span>

```posh
Update-ServiceFabricService -Stateless -ServiceName $serviceName -InstanceCount 50
```
### <a name="using-dynamic-instance-count"></a><span data-ttu-id="8e88f-124">Utilizzo del numero delle istanze dinamico</span><span class="sxs-lookup"><span data-stu-id="8e88f-124">Using Dynamic Instance Count</span></span>
<span data-ttu-id="8e88f-125">In particolare per i servizi senza stato, Service Fabric offre un modo automatico per modificare il numero delle istanze.</span><span class="sxs-lookup"><span data-stu-id="8e88f-125">Specifically for stateless services, Service Fabric offers an automatic way to change the instance count.</span></span> <span data-ttu-id="8e88f-126">Il servizio può così scalare dinamicamente con il numero di nodi disponibili.</span><span class="sxs-lookup"><span data-stu-id="8e88f-126">This allows the service to scale dynamically with the number of nodes that are available.</span></span> <span data-ttu-id="8e88f-127">Per applicare questo comportamento, si imposta il numero delle istanze su -1.</span><span class="sxs-lookup"><span data-stu-id="8e88f-127">The way to opt into this behavior is to set the instance count = -1.</span></span> <span data-ttu-id="8e88f-128">L'istruzione InstanceCount = -1 indica a Service Fabric di eseguire il servizio senza stato in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="8e88f-128">InstanceCount = -1 is an instruction to Service Fabric that says "Run this stateless service on every node."</span></span> <span data-ttu-id="8e88f-129">Se il numero di nodi cambia, Service Fabric cambia automaticamente il numero delle istanze di conseguenza, assicurandosi che il servizio sia in esecuzione in tutti i nodi validi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-129">If the number of nodes changes, Service Fabric automatically changes the instance count to match, ensuring that the service is running on all valid nodes.</span></span> 

<span data-ttu-id="8e88f-130">C#:</span><span class="sxs-lookup"><span data-stu-id="8e88f-130">C#:</span></span>

```csharp
StatelessServiceDescription serviceDescription = new StatelessServiceDescription();
//Set other service properties necessary for creation....
serviceDescription.InstanceCount = -1;
await fc.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="8e88f-131">Powershell:</span><span class="sxs-lookup"><span data-stu-id="8e88f-131">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName -Stateless -PartitionSchemeSingleton -InstanceCount "-1"
```

## <a name="scaling-by-creating-or-removing-new-named-services"></a><span data-ttu-id="8e88f-132">Implementazione della scalabilità tramite creazione o rimozione di nuovi servizi denominati</span><span class="sxs-lookup"><span data-stu-id="8e88f-132">Scaling by creating or removing new named services</span></span>
<span data-ttu-id="8e88f-133">Un'istanza del servizio denominata è un'istanza specifica di un tipo di servizio (vedere l'articolo [Ciclo di vita dell'applicazione Service Fabric](service-fabric-application-lifecycle.md)) all'interno di un'istanza dell'applicazione denominata nel cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-133">A named service instance is a specific instance of a service type (see [Service Fabric application life cycle](service-fabric-application-lifecycle.md)) within some named application instance in the cluster.</span></span> 

<span data-ttu-id="8e88f-134">È possibile creare o rimuovere nuove istanze del servizio denominate man mano che aumenta o diminuisce l'utilizzo dei servizi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-134">New named service instances can be created (or removed) as services become more or less busy.</span></span> <span data-ttu-id="8e88f-135">In questo modo le richieste possono essere distribuite tra più istanze del servizio, con conseguente riduzione del carico sui servizi esistenti.</span><span class="sxs-lookup"><span data-stu-id="8e88f-135">This allows requests to be spread across more service instances, usually allowing load on existing services to decrease.</span></span> <span data-ttu-id="8e88f-136">Quando si creano i servizi, Gestione risorse cluster di Service Fabric li inserisce nel cluster secondo una modalità distribuita.</span><span class="sxs-lookup"><span data-stu-id="8e88f-136">When creating services, the Service Fabric Cluster Resource Manager places the services in the cluster in a distributed fashion.</span></span> <span data-ttu-id="8e88f-137">Le decisioni precise vengono gestite dalle [metriche](service-fabric-cluster-resource-manager-metrics.md) nel cluster e da altre regole di posizionamento.</span><span class="sxs-lookup"><span data-stu-id="8e88f-137">The exact decisions are governed by the [metrics](service-fabric-cluster-resource-manager-metrics.md) in the cluster and other placement rules.</span></span> <span data-ttu-id="8e88f-138">Esistono vari modi per creare i servizi, ma i più comuni prevedono azioni amministrative, ad esempio un utente che chiama l'oggetto [`New-ServiceFabricService`](https://docs.microsoft.com/en-us/powershell/module/servicefabric/new-servicefabricservice?view=azureservicefabricps) o la chiamata di codice [`CreateServiceAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.fabric.fabricclient.servicemanagementclient.createserviceasync?view=azure-dotnet).</span><span class="sxs-lookup"><span data-stu-id="8e88f-138">Services can be created several different ways, but the most common are either through administrative actions like someone calling [`New-ServiceFabricService`](https://docs.microsoft.com/en-us/powershell/module/servicefabric/new-servicefabricservice?view=azureservicefabricps), or by code calling [`CreateServiceAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.fabric.fabricclient.servicemanagementclient.createserviceasync?view=azure-dotnet).</span></span> <span data-ttu-id="8e88f-139">L'oggetto `CreateServiceAsync` può persino essere chiamato all'interno di altri servizi in esecuzione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-139">`CreateServiceAsync` can even be called from within other services running in the cluster.</span></span>

<span data-ttu-id="8e88f-140">La creazione dinamica dei servizi può essere usata in tutti i tipi di scenari ed è un criterio di uso comune.</span><span class="sxs-lookup"><span data-stu-id="8e88f-140">Creating services dynamically can be used in all sorts of scenarios, and is a common pattern.</span></span> <span data-ttu-id="8e88f-141">Si consideri ad esempio un servizio con stato che rappresenta uno specifico flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8e88f-141">For example, consider a stateful service that represents a particular workflow.</span></span> <span data-ttu-id="8e88f-142">Le chiamate che rappresentano il lavoro vengono presentate al servizio e questo esegue i passaggi per tale flusso di lavoro e ne registra lo stato.</span><span class="sxs-lookup"><span data-stu-id="8e88f-142">Calls representing work are going to show up to this service, and this service is going to execute the steps to that workflow and record progress.</span></span> 

<span data-ttu-id="8e88f-143">In che modo si potrebbe scalare questo servizio specifico?</span><span class="sxs-lookup"><span data-stu-id="8e88f-143">How would you make this particular service scale?</span></span> <span data-ttu-id="8e88f-144">Il servizio potrebbe essere multi-tenant in qualche forma e accettare le chiamate nonché avviare i passaggi per varie istanze dello stesso flusso di lavoro in una sola volta.</span><span class="sxs-lookup"><span data-stu-id="8e88f-144">The service could be multi-tenant in some form, and accept calls and kick off steps for many different instances of the same workflow all at once.</span></span> <span data-ttu-id="8e88f-145">Con questa soluzione, tuttavia, il codice diventa più complesso, poiché ora deve occuparsi di molte istanze diverse dello stesso flusso di lavoro, tutte in fasi diverse e derivanti da clienti diversi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-145">However, that can make the code more complex, since now it has to worry about many different instances of the same workflow, all at different stages and from different customers.</span></span> <span data-ttu-id="8e88f-146">La gestione di più flussi di lavoro alla volta, inoltre, non risolve il problema della scalabilità.</span><span class="sxs-lookup"><span data-stu-id="8e88f-146">Also, handling multiple workflows at the same time doesn't solve the scale problem.</span></span> <span data-ttu-id="8e88f-147">Il servizio arriverà infatti ad un certo punto in cui consumerà troppe risorse per un computer specifico.</span><span class="sxs-lookup"><span data-stu-id="8e88f-147">This is because at some point this service will consume too many resources to fit on a particular machine.</span></span> <span data-ttu-id="8e88f-148">Molti servizi che non sono creati fin dall'inizio con questo criterio sono inoltre soggetti a problemi legati ad alcuni colli di bottiglia intrinseci o a rallentamento del codice.</span><span class="sxs-lookup"><span data-stu-id="8e88f-148">Many services not built for this pattern in the first place also experience difficulty due to some inherent bottleneck or slowdown in their code.</span></span> <span data-ttu-id="8e88f-149">Questi tipi di problemi impediscono anche la corretta esecuzione del servizio quando il numero dei flussi di lavoro simultanei controllati dal servizio aumenta.</span><span class="sxs-lookup"><span data-stu-id="8e88f-149">These types of issues cause the service not to work as well when the number of concurrent workflows it is tracking gets larger.</span></span>  

<span data-ttu-id="8e88f-150">Una soluzione consiste nel creare un'istanza di questo servizio per ogni istanza diversa del flusso di lavoro che si desidera controllare. Questo criterio è un'ottima soluzione e funziona sia con i servizi con stato che con quelli senza stato.</span><span class="sxs-lookup"><span data-stu-id="8e88f-150">A solution is to create an instance of this service for every different instance of the workflow you want to track. This is a great pattern and works whether the service is stateless or stateful.</span></span> <span data-ttu-id="8e88f-151">Perché questo criterio funzioni, di solito è presente un altro servizio che agisce da "servizio gestione dei carichi di lavoro".</span><span class="sxs-lookup"><span data-stu-id="8e88f-151">For this pattern to work, there's usually another service that acts as a "Workload Manager Service".</span></span> <span data-ttu-id="8e88f-152">Il compito di questo servizio è ricevere le richieste e indirizzarle ad altri servizi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-152">The job of this service is to receive requests and to route those requests to other services.</span></span> <span data-ttu-id="8e88f-153">Il servizio gestione può creare dinamicamente un'istanza del servizio del carico di lavoro quando riceve il messaggio e successivamente passare le richieste al servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-153">The manager can dynamically create an instance of the workload service when it receives the message, and then pass on requests to those services.</span></span> <span data-ttu-id="8e88f-154">Il servizio gestione può anche ricevere i callback quando un determinato servizio del flusso di lavoro completa il processo.</span><span class="sxs-lookup"><span data-stu-id="8e88f-154">The manager service could also receive callbacks when a given workflow service completes its job.</span></span> <span data-ttu-id="8e88f-155">Quando il servizio gestione riceve questi callback, può eliminare l'istanza del servizio del flusso di lavoro o conservarla se prevede altre chiamate.</span><span class="sxs-lookup"><span data-stu-id="8e88f-155">When the manager receives these callbacks it could delete that instance of the workflow service, or leave it if more calls are expected.</span></span> 

<span data-ttu-id="8e88f-156">Nelle sue versioni avanzate, questo tipo di servizio gestione può addirittura creare pool dei servizi che gestisce.</span><span class="sxs-lookup"><span data-stu-id="8e88f-156">Advanced versions of this type of manager can even create pools of the services that it manages.</span></span> <span data-ttu-id="8e88f-157">Il pool aiuta ad assicurare che una nuova richiesta in arrivo non debba attendere l'avvio da parte del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-157">The pool helps ensure that when a new request comes in it doesn't have to wait for the service to spin up.</span></span> <span data-ttu-id="8e88f-158">Il servizio gestione, invece, può semplicemente selezionare un servizio del flusso di lavoro che non è attualmente occupato dal pool o instradare in modo casuale.</span><span class="sxs-lookup"><span data-stu-id="8e88f-158">Instead, the manager can just pick a workflow service that is not currently busy from the pool, or route randomly.</span></span> <span data-ttu-id="8e88f-159">La disponibilità continua di un pool di servizi velocizza la gestione di nuove richieste, in quanto si riducono le probabilità che la richiesta debba attendere l'avvio di un nuovo servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-159">Keeping a pool of services available makes handling new requests faster, since it is less likely that the request has to wait for a new service to be spun up.</span></span> <span data-ttu-id="8e88f-160">La creazione di nuovi servizi è rapida, ma non è libera o immediata.</span><span class="sxs-lookup"><span data-stu-id="8e88f-160">Creating new services is quick, but not free or instantaneous.</span></span> <span data-ttu-id="8e88f-161">Il pool aiuta a ridurre al minimo la quantità di tempo che la richiesta deve attendere prima di essere elaborata dal servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-161">The pool helps minimize the amount of time the request has to wait before being serviced.</span></span> <span data-ttu-id="8e88f-162">Questo modello basato sul servizio gestione e sul pool viene usato spesso quando i tempi di risposta sono un aspetto molto importante.</span><span class="sxs-lookup"><span data-stu-id="8e88f-162">You'll often see this manager and pool pattern when response times matter the most.</span></span> <span data-ttu-id="8e88f-163">L'accodamento della richiesta e la creazione del servizio in background e _quindi_ il relativo passaggio rappresentano un altro criterio di gestione di uso comune, come pure la creazione e l'eliminazione di servizi basati su alcune verifiche della quantità di lavoro che il servizio ha attualmente in sospeso.</span><span class="sxs-lookup"><span data-stu-id="8e88f-163">Queuing the request and creating the service in the background and _then_ passing it on is also a popular manager pattern, as is creating and deleting services based on some tracking of the amount of work that service currently has pending.</span></span> 

## <a name="scaling-by-creating-or-removing-new-named-application-instances"></a><span data-ttu-id="8e88f-164">Implementazione della scalabilità tramite creazione o rimozione di nuove istanze dell'applicazione denominate</span><span class="sxs-lookup"><span data-stu-id="8e88f-164">Scaling by creating or removing new named application instances</span></span>
<span data-ttu-id="8e88f-165">La creazione e l'eliminazione di intere istanze dell'applicazione è simile al criterio di creazione ed eliminazione di servizi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-165">Creating and deleting whole application instances is similar to the pattern of creating and deleting services.</span></span> <span data-ttu-id="8e88f-166">Questo criterio si basa sull'esistenza di un servizio gestione che prende le decisioni in base alle richieste che vede e alle informazioni che riceve dagli altri servizi nel cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-166">For this pattern, there's some manager service that is making the decision based on the requests that it is seeing and the information it is receiving from the other services inside the cluster.</span></span> 

<span data-ttu-id="8e88f-167">Quando è preferibile usare la creazione di una nuova istanza dell'applicazione denominata al posto della creazione di una nuova istanza del servizio denominata in un'applicazione già esistente?</span><span class="sxs-lookup"><span data-stu-id="8e88f-167">When should creating a new named application instance be used instead of creating a new named service instances in some already existing application?</span></span> <span data-ttu-id="8e88f-168">Esistono alcuni casi in cui questa soluzione è preferibile:</span><span class="sxs-lookup"><span data-stu-id="8e88f-168">There's a few cases:</span></span>

  * <span data-ttu-id="8e88f-169">La nuova istanza dell'applicazione è adatta a un cliente che necessita che il codice venga eseguito con alcune specifiche impostazioni di sicurezza e di identità.</span><span class="sxs-lookup"><span data-stu-id="8e88f-169">The new application instance is for a customer whose code needs to run under some particular identity or security settings.</span></span>
    * <span data-ttu-id="8e88f-170">Service Fabric consente di definire pacchetti di codice diversi da eseguire con identità specifiche.</span><span class="sxs-lookup"><span data-stu-id="8e88f-170">Service Fabric allows defining different code packages to run under particular identities.</span></span> <span data-ttu-id="8e88f-171">Per avviare lo stesso pacchetto di codice con identità diverse, è necessario che le attivazioni si verifichino in istanze dell'applicazione diverse.</span><span class="sxs-lookup"><span data-stu-id="8e88f-171">In order to launch the same code package under different identities, the activations need to occur in different application instances.</span></span> <span data-ttu-id="8e88f-172">Si consideri il caso in cui sono presenti carichi di lavoro distribuiti di un cliente esistente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-172">Consider a case where you have an existing customer's workloads deployed.</span></span> <span data-ttu-id="8e88f-173">È possibile eseguire questi carichi con un'identità specifica in modo da poterne monitorare e controllare l'accesso ad altre risorse, ad esempio database remoti o altri sistemi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-173">These may be running under a particular identity so you can monitor and control their access to other resources, such as remote databases or other systems.</span></span> <span data-ttu-id="8e88f-174">In questo caso, quando un nuovo cliente si iscrive, è probabile che non si desideri attivare il codice nello stesso contesto (spazio del processo).</span><span class="sxs-lookup"><span data-stu-id="8e88f-174">In this case, when a new customer signs up, you probably don't want to activate their code in the same context (process space).</span></span> <span data-ttu-id="8e88f-175">Sebbene possibile, questo rende più difficile al codice operare all'interno del contesto di una specifica identità.</span><span class="sxs-lookup"><span data-stu-id="8e88f-175">While you could, this makes it harder for your service code to act within the context of a particular identity.</span></span> <span data-ttu-id="8e88f-176">È necessario in genere disporre di ulteriore codice per la gestione della sicurezza, dell'isolamento e delle identità.</span><span class="sxs-lookup"><span data-stu-id="8e88f-176">You typically must have more security, isolation, and identity management code.</span></span> <span data-ttu-id="8e88f-177">Invece di usare istanze del servizio denominate diverse nella stessa istanza dell'applicazione e pertanto nello stesso spazio di processo, è possibile usare istanze dell'applicazione Service Fabric denominate diverse.</span><span class="sxs-lookup"><span data-stu-id="8e88f-177">Instead of using different named service instances within the same application instance and hence the same process space, you can use different named Service Fabric Application instances.</span></span> <span data-ttu-id="8e88f-178">In questo modo diventa più semplice definire contesti di identità diversi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-178">This makes it easier to define different identity contexts.</span></span>
  * <span data-ttu-id="8e88f-179">La nuova istanza dell'applicazione funge da mezzo di configurazione</span><span class="sxs-lookup"><span data-stu-id="8e88f-179">The new application instance also serves as a means of configuration</span></span>
    * <span data-ttu-id="8e88f-180">Per impostazione predefinita, tutte le istanze del servizio denominate di un tipo di servizio specifico all'interno di un'istanza dell'applicazione vengono eseguite nello stesso processo in un determinato nodo.</span><span class="sxs-lookup"><span data-stu-id="8e88f-180">By default, all of the named service instances of a particular service type within an application instance will run in the same process on a given node.</span></span> <span data-ttu-id="8e88f-181">Ciò significa che, sebbene sia possibile configurare ogni istanza del servizio in modo diverso, si tratta di un approccio complicato.</span><span class="sxs-lookup"><span data-stu-id="8e88f-181">What this means is that while you can configure each service instance differently, doing so is complicated.</span></span> <span data-ttu-id="8e88f-182">I servizi devono disporre di un token da usare per cercare la propria configurazione all'interno di un pacchetto di configurazioni.</span><span class="sxs-lookup"><span data-stu-id="8e88f-182">Services must have some token they use to look up their config within a configuration package.</span></span> <span data-ttu-id="8e88f-183">Il token è in genere semplicemente il nome del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-183">Usually this is just the service's name.</span></span> <span data-ttu-id="8e88f-184">Questo approccio va bene, ma associa la configurazione ai nomi delle singole istanze del servizio denominate all'interno di tale istanza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8e88f-184">This works fine, but it couples the configuration to the names of the individual named service instances within that application instance.</span></span> <span data-ttu-id="8e88f-185">Questa situazione può generare confusione e risultare difficile da gestire perché la configurazione è normalmente un artefatto della fase di progettazione con valori specifici dell'istanza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8e88f-185">This can be confusing and hard to manage since configuration is normally a design time artifact with application instance specific values.</span></span> <span data-ttu-id="8e88f-186">La creazione di più servizi prevede sempre vari aggiornamenti dell'applicazione per modificare le informazioni all'interno dei pacchetti di configurazione o per distribuirne di nuovi, in modo che i nuovi servizi possano cercare le informazioni specifiche che li riguardano.</span><span class="sxs-lookup"><span data-stu-id="8e88f-186">Creating more services always means more application upgrades to change the information within the config packages or to deploy new ones so that the new services can look up their specific information.</span></span> <span data-ttu-id="8e88f-187">È spesso più facile creare un'istanza dell'applicazione denominata completamente nuova</span><span class="sxs-lookup"><span data-stu-id="8e88f-187">It's often easier to create a whole new named application instance.</span></span> <span data-ttu-id="8e88f-188">e quindi usare i parametri dell'applicazione per impostare la configurazione necessaria per i servizi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-188">Then you can use the application parameters to set whatever configuration is necessary for the services.</span></span> <span data-ttu-id="8e88f-189">In questo modo tutti i servizi che vengono creati all'interno dell'istanza dell'applicazione denominata possono ereditare le impostazioni della configurazione specifica.</span><span class="sxs-lookup"><span data-stu-id="8e88f-189">This way all of the services that are created within that named application instance can inherit particular configuration settings.</span></span> <span data-ttu-id="8e88f-190">Invece di avere, ad esempio, un unico file di configurazione con le impostazioni e le personalizzazioni per ogni cliente, ad esempio segreti o limiti di risorse per cliente, si dispone di un'istanza dell'applicazione diversa per ogni cliente in cui queste impostazioni sono ignorate.</span><span class="sxs-lookup"><span data-stu-id="8e88f-190">For example, instead of having a single configuration file with the settings and customizations for every customer, such as secrets or per customer resource limits, you'd instead have a different application instance for each customer with these settings overridden.</span></span> 
  * <span data-ttu-id="8e88f-191">La nuova applicazione funge da limite per l'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="8e88f-191">The new application serves as an upgrade boundary</span></span>
    * <span data-ttu-id="8e88f-192">All'interno di Service Fabric le diverse istanze dell'applicazione denominate fungono da limiti per l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="8e88f-192">Within Service Fabric, different named application instances serve as boundaries for upgrade.</span></span> <span data-ttu-id="8e88f-193">Un aggiornamento di un'istanza dell'applicazione denominata non influirà sul codice in esecuzione in un'altra istanza dell'applicazione denominata.</span><span class="sxs-lookup"><span data-stu-id="8e88f-193">An upgrade of one named application instance will not impact the code that another named application instance is running.</span></span> <span data-ttu-id="8e88f-194">Le diverse applicazioni finiranno con l'eseguire versioni diverse dello stesso codice negli stessi nodi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-194">The different applications will end up running different versions of the same code on the same nodes.</span></span> <span data-ttu-id="8e88f-195">Questo può essere un fattore da considerare quando occorre prendere una decisione sull'implementazione della scalabilità perché è possibile scegliere se il nuovo codice deve seguire o meno gli stessi aggiornamenti di un altro servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-195">This can be a factor when you need to make a scaling decision because you can choose whether the new code should follow the same upgrades as another service or not.</span></span> <span data-ttu-id="8e88f-196">Si supponga, ad esempio, che arrivi una chiamata al servizio gestione che deve scalare i carichi di lavoro di un determinato cliente tramite la creazione e l'eliminazione dinamiche dei servizi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-196">For example, say that a call arrives at the manager service that is responsible for scaling a particular customer's workloads by creating and deleting services dynamically.</span></span> <span data-ttu-id="8e88f-197">In questo caso, tuttavia, la chiamata riguarda un carico di lavoro associato a un _nuovo_ cliente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-197">In this case however, the call is for a workload associated with a _new_ customer.</span></span> <span data-ttu-id="8e88f-198">La maggior parte dei clienti preferisce essere isolata dagli altri clienti non solo per i motivi di sicurezza e di configurazione spiegati in precedenza, ma perché l'isolamento offre maggiore flessibilità in termini di esecuzione di versioni specifiche del software e di scelta del periodo ideale per l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="8e88f-198">Most customers like being isolated from each other not just for the security and configuration reasons listed previously, but because it provides more flexibility in terms of running specific versions of the software and choosing when they get upgraded.</span></span> <span data-ttu-id="8e88f-199">È anche possibile creare una nuova istanza dell'applicazione e crearvi il servizio semplicemente per partizionare ulteriormente la quantità di servizi che saranno interessati da ogni aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="8e88f-199">You may also create a new application instance and create the service there simply to further partition the amount of your services that any one upgrade will touch.</span></span> <span data-ttu-id="8e88f-200">L'uso di istanze dell'applicazione separate offre maggiore granularità quando si eseguono gli aggiornamenti dell'applicazione e consente di usare i test A/B e le distribuzioni Blue/Green.</span><span class="sxs-lookup"><span data-stu-id="8e88f-200">Separate application instances provide greater granularity when doing application upgrades, and also enable A/B testing and Blue/Green deployments.</span></span> 
  * <span data-ttu-id="8e88f-201">L'istanza dell'applicazione esistente è completa</span><span class="sxs-lookup"><span data-stu-id="8e88f-201">The existing application instance is full</span></span>
    * <span data-ttu-id="8e88f-202">In Service Fabric la [capacità dell'applicazione](service-fabric-cluster-resource-manager-application-groups.md) è un concetto che può essere usato per controllare la quantità di risorse disponibili per istanze dell'applicazione specifiche.</span><span class="sxs-lookup"><span data-stu-id="8e88f-202">In Service Fabric, [application capacity](service-fabric-cluster-resource-manager-application-groups.md) is a concept that you can use to control the amount of resources available for particular application instances.</span></span> <span data-ttu-id="8e88f-203">Si può ad esempio decidere che, per scalare un determinato servizio, si debba creare un'altra istanza.</span><span class="sxs-lookup"><span data-stu-id="8e88f-203">For example, you may decide that a given service needs to have another instance created in order to scale.</span></span> <span data-ttu-id="8e88f-204">Questa istanza dell'applicazione è tuttavia fuori dalla capacità di una determinata metrica.</span><span class="sxs-lookup"><span data-stu-id="8e88f-204">However, this application instance is out of capacity for a certain metric.</span></span> <span data-ttu-id="8e88f-205">Se a questo cliente o carico di lavoro specifico devono essere concesse ancora altre risorse, è possibile aumentare la capacità esistente per l'applicazione o creare una nuova applicazione.</span><span class="sxs-lookup"><span data-stu-id="8e88f-205">If this particular customer or workload should still be granted more resources, then you could either increase the existing capacity for that application or create a new application.</span></span> 

## <a name="scaling-at-the-partition-level"></a><span data-ttu-id="8e88f-206">Implementazione della scalabilità a livello di partizione</span><span class="sxs-lookup"><span data-stu-id="8e88f-206">Scaling at the partition level</span></span>
<span data-ttu-id="8e88f-207">Service Fabric supporta il partizionamento.</span><span class="sxs-lookup"><span data-stu-id="8e88f-207">Service Fabric supports partitioning.</span></span> <span data-ttu-id="8e88f-208">Il partizionamento suddivide un servizio in più sezioni logiche e fisiche, ognuna delle quali opera in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-208">Partitioning splits a service into several logical and physical sections, each of which operates independently.</span></span> <span data-ttu-id="8e88f-209">Ciò è utile con i servizi con stato, poiché nessun set di repliche deve gestire tutte le chiamate e manipolare tutto lo stato in una sola volta.</span><span class="sxs-lookup"><span data-stu-id="8e88f-209">This is useful with stateful services, since no one set of replicas has to handle all the calls and manipulate all of the state at once.</span></span> <span data-ttu-id="8e88f-210">L'articolo relativo alla [panoramica del partizionamento](service-fabric-concepts-partitioning.md) include informazioni relative ai tipi di schemi di partizionamento supportati.</span><span class="sxs-lookup"><span data-stu-id="8e88f-210">The [partitioning overview](service-fabric-concepts-partitioning.md) provides information on the types of partitioning schemes that are supported.</span></span> <span data-ttu-id="8e88f-211">Le repliche di ogni partizione vengono distribuite tra i nodi in un cluster, distribuendo così il carico del servizio e assicurando che né il servizio nel suo complesso né le partizioni includano un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="8e88f-211">The replicas of each partition are spread across the nodes in a cluster, distributing that service's load and ensuring that neither the service as a whole or any partition has a single point of failure.</span></span> 

<span data-ttu-id="8e88f-212">Si consideri un servizio che usa lo schema di partizionamento con intervallo con una chiave inferiore uguale a 0, una chiave superiore uguale a 99 e quattro partizioni.</span><span class="sxs-lookup"><span data-stu-id="8e88f-212">Consider a service that uses a ranged partitioning scheme with a low key of 0, a high key of 99, and a partition count of 4.</span></span> <span data-ttu-id="8e88f-213">In un cluster a tre nodi il servizio potrebbe avere un layout con quattro repliche che condividono le risorse in ogni nodo, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="8e88f-213">In a three-node cluster, the service might be laid out with four replicas that share the resources on each node as shown here:</span></span>

<span data-ttu-id="8e88f-214"><center>
![Layout delle partizioni con tre nodi](./media/service-fabric-concepts-scalability/layout-three-nodes.png)
</center></span><span class="sxs-lookup"><span data-stu-id="8e88f-214"><center>
![Partition layout with three nodes](./media/service-fabric-concepts-scalability/layout-three-nodes.png)
</center></span></span>

<span data-ttu-id="8e88f-215">Se si aumenta il numero dei nodi, Service Fabric sposta nei nuovi nodi alcune delle repliche esistenti.</span><span class="sxs-lookup"><span data-stu-id="8e88f-215">If you increase the number of nodes, Service Fabric will move some of the existing replicas there.</span></span> <span data-ttu-id="8e88f-216">Si supponga, ad esempio, che il numero di nodi aumenti a quattro e che le repliche vengano ridistribuite.</span><span class="sxs-lookup"><span data-stu-id="8e88f-216">For example, let's say the number of nodes increases to four and the replicas get redistributed.</span></span> <span data-ttu-id="8e88f-217">Il servizio dispone a questo punto di tre repliche in esecuzione in ogni nodo, ognuna appartenente a partizioni diverse.</span><span class="sxs-lookup"><span data-stu-id="8e88f-217">Now the service now has three replicas running on each node, each belonging to different partitions.</span></span> <span data-ttu-id="8e88f-218">Si ottiene così un utilizzo ottimale delle risorse in quanto il nuovo nodo non è ad accesso sporadico.</span><span class="sxs-lookup"><span data-stu-id="8e88f-218">This allows better resource utilization since the new node isn't cold.</span></span> <span data-ttu-id="8e88f-219">Si ottiene di solito anche un miglioramento delle prestazioni poiché ogni servizio dispone di più risorse.</span><span class="sxs-lookup"><span data-stu-id="8e88f-219">Typically, it also improves performance as each service has more resources available to it.</span></span>

<span data-ttu-id="8e88f-220"><center>
![Layout delle partizioni con quattro nodi](./media/service-fabric-concepts-scalability/layout-four-nodes.png)
</center></span><span class="sxs-lookup"><span data-stu-id="8e88f-220"><center>
![Partition layout with four nodes](./media/service-fabric-concepts-scalability/layout-four-nodes.png)
</center></span></span>

## <a name="scaling-by-using-the-service-fabric-cluster-resource-manager-and-metrics"></a><span data-ttu-id="8e88f-221">Implementazione della scalabilità tramite l'utilizzo di Gestione risorse cluster di Service Fabric e di metriche</span><span class="sxs-lookup"><span data-stu-id="8e88f-221">Scaling by using the Service Fabric Cluster Resource Manager and metrics</span></span>
<span data-ttu-id="8e88f-222">Le [metriche](service-fabric-cluster-resource-manager-metrics.md) indicano il modo in cui i servizi esprimono il consumo di risorse a Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8e88f-222">[Metrics](service-fabric-cluster-resource-manager-metrics.md) are how services express their resource consumption to Service Fabric.</span></span> <span data-ttu-id="8e88f-223">L'uso delle metriche offre a Gestione risorse cluster la possibilità di riorganizzare e ottimizzare il layout del cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-223">Using metrics gives the Cluster Resource Manager an opportunity to reorganize and optimize the layout of the cluster.</span></span> <span data-ttu-id="8e88f-224">Nel cluster potrebbero, ad esempio, essere presenti molte risorse, ma non essere allocate ai servizi che svolgono attualmente il lavoro.</span><span class="sxs-lookup"><span data-stu-id="8e88f-224">For example, there may be plenty of resources in the cluster, but they might not be allocated to the services that are currently doing work.</span></span> <span data-ttu-id="8e88f-225">L'utilizzo delle metriche consente a Gestione risorse cluster di riorganizzare il cluster in modo da garantire che i servizi abbiano accesso alle risorse disponibili.</span><span class="sxs-lookup"><span data-stu-id="8e88f-225">Using metrics allows the Cluster Resource Manager to reorganize the cluster to ensure that services have access to the available resources.</span></span> 


## <a name="scaling-by-adding-and-removing-nodes-from-the-cluster"></a><span data-ttu-id="8e88f-226">Implementazione della scalabilità tramite aggiunta e rimozione di nodi dal cluster</span><span class="sxs-lookup"><span data-stu-id="8e88f-226">Scaling by adding and removing nodes from the cluster</span></span> 
<span data-ttu-id="8e88f-227">Un'altra opzione per la scalabilità con Service Fabric consiste nel modificare le dimensioni del cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-227">Another option for scaling with Service Fabric is to change the size of the cluster.</span></span> <span data-ttu-id="8e88f-228">Modificare le dimensioni del cluster significa aggiungere o rimuovere nodi per uno o più tipi di nodo nel cluster.</span><span class="sxs-lookup"><span data-stu-id="8e88f-228">Changing the size of the cluster means adding or removing nodes for one or more of the node types in the cluster.</span></span> <span data-ttu-id="8e88f-229">Si consideri, ad esempio, il caso in cui tutti i nodi del cluster sono attivi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-229">For example, consider a case where all of the nodes in the cluster are hot.</span></span> <span data-ttu-id="8e88f-230">Le risorse del cluster sono quindi quasi tutte usate.</span><span class="sxs-lookup"><span data-stu-id="8e88f-230">This means that the cluster's resources are almost all consumed.</span></span> <span data-ttu-id="8e88f-231">In questo caso, aggiungere altri nodi al cluster è il modo migliore per applicare la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="8e88f-231">In this case, adding more nodes to the cluster is the best way to scale.</span></span> <span data-ttu-id="8e88f-232">Dopo che i nuovi nodi sono stati aggiunti al cluster, Gestione risorse cluster di Service Fabric sposta alcuni servizi nei nuovi nodi, riducendo il carico totale sui nodi esistenti.</span><span class="sxs-lookup"><span data-stu-id="8e88f-232">Once the new nodes join the cluster the Service Fabric Cluster Resource Manager moves services to them, resulting in less total load on the existing nodes.</span></span> <span data-ttu-id="8e88f-233">Per i servizi senza stato con numero di istanze = -1, vengono create automaticamente più istanze del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-233">For stateless services with instance count = -1, more service instances are automatically created.</span></span> <span data-ttu-id="8e88f-234">Alcune chiamate possono così spostarsi dai nodi esistenti a quelli nuovi.</span><span class="sxs-lookup"><span data-stu-id="8e88f-234">This allows some calls to move from the existing nodes to the new nodes.</span></span> 

<span data-ttu-id="8e88f-235">L'aggiunta e la rimozione di nodi nel cluster può essere eseguita tramite il modulo PowerShell di Azure Resource Manager di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8e88f-235">Adding and removing nodes to the cluster can be accomplished via the Service Fabric Azure Resource Manager PowerShell module.</span></span>

```posh
Add-AzureRmServiceFabricNode -ResourceGroupName $resourceGroupName -Name $clusterResourceName -NodeType $nodeTypeName  -NumberOfNodesToAdd 5 
Remove-AzureRmServiceFabricNode -ResourceGroupName $resourceGroupName -Name $clusterResourceName -NodeType $nodeTypeName -NumberOfNodesToRemove 5
```

## <a name="putting-it-all-together"></a><span data-ttu-id="8e88f-236">Riassumendo</span><span class="sxs-lookup"><span data-stu-id="8e88f-236">Putting it all together</span></span>
<span data-ttu-id="8e88f-237">Si prendano ora tutti i concetti discussi qui e li si applichi a un esempio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-237">Let's take all the ideas that we've discussed here and talk through an example.</span></span> <span data-ttu-id="8e88f-238">Si consideri l'esempio seguente: si intende creare un servizio di rubrica, contenente nomi e informazioni sui contatti.</span><span class="sxs-lookup"><span data-stu-id="8e88f-238">Consider the following service: you are trying to build a service that acts as an address book, holding on to names and contact information.</span></span> 

<span data-ttu-id="8e88f-239">Emergono subito alcune domande in merito alla scalabilità: quanti utenti useranno il servizio?</span><span class="sxs-lookup"><span data-stu-id="8e88f-239">Right up front you have a bunch of questions related to scale: How many users are you going to have?</span></span> <span data-ttu-id="8e88f-240">Quanti contatti archivierà ogni singolo utente?</span><span class="sxs-lookup"><span data-stu-id="8e88f-240">How many contacts will each user store?</span></span> <span data-ttu-id="8e88f-241">È difficile stabilire subito questi aspetti durante la creazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-241">Trying to figure this all out when you are standing up your service for the first time is difficult.</span></span> <span data-ttu-id="8e88f-242">Si supponga di voler iniziare con un unico servizio statico con un numero di partizioni specifico.</span><span class="sxs-lookup"><span data-stu-id="8e88f-242">Let's say you were going to go with a single static service with a specific partition count.</span></span> <span data-ttu-id="8e88f-243">Scegliere la partizione sbagliata potrebbe portare a problemi di scalabilità futuri.</span><span class="sxs-lookup"><span data-stu-id="8e88f-243">The consequences of picking the wrong partition count could cause you to have scale issues later.</span></span> <span data-ttu-id="8e88f-244">Allo stesso modo, anche se si seleziona il numero corretto, si potrebbe non disporre di tutte le informazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="8e88f-244">Similarly, even if you pick the right count you might not have all the information you need.</span></span> <span data-ttu-id="8e88f-245">È, ad esempio, necessario decidere in anticipo anche le dimensioni del cluster, sia in termini di numero di nodi che di dimensioni.</span><span class="sxs-lookup"><span data-stu-id="8e88f-245">For example, you also have to decide the size of the cluster up front, both in terms of the number of nodes and their sizes.</span></span> <span data-ttu-id="8e88f-246">È in genere difficile prevedere il numero di risorse che un servizio userà nell'arco della sua esistenza.</span><span class="sxs-lookup"><span data-stu-id="8e88f-246">It's usually hard to predict how many resources a service is going to consume over its lifetime.</span></span> <span data-ttu-id="8e88f-247">Può inoltre essere difficile sapere a priori il modello di traffico che il servizio vedrà effettivamente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-247">It can also be hard to know ahead of time the traffic pattern that the service actually sees.</span></span> <span data-ttu-id="8e88f-248">Gli utenti potrebbero, ad esempio, aggiungere e rimuovere i propri contatti come prima cosa al mattino oppure il traffico potrebbe essere distribuito uniformemente nell'arco della giornata.</span><span class="sxs-lookup"><span data-stu-id="8e88f-248">For example, maybe people add and remove their contacts only first thing in the morning, or maybe it's distributed evenly over the course of the day.</span></span> <span data-ttu-id="8e88f-249">In base al tipo di traffico potrebbe essere necessario aumentare e ridurre le risorse in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="8e88f-249">Based on this you might need to scale out and in dynamically.</span></span> <span data-ttu-id="8e88f-250">Si può forse imparare a prevedere quando sarà necessario aumentare o ridurre, ma in ogni caso sarà probabilmente necessario adottare una soluzione a seconda dei cambiamenti nel consumo di risorse da parte del servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-250">Maybe you can learn to predict when you're going to need to scale out and in, but either way you're probably going to need to react to changing resource consumption by your service.</span></span> <span data-ttu-id="8e88f-251">Ciò può richiedere la modifica delle dimensioni del cluster per offrire ulteriori risorse quando la riorganizzazione dell'utilizzo delle risorse esistenti non è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-251">This can involve changing the size of the cluster in order to provide more resources when reorganizing use of existing resources isn't enough.</span></span> 

<span data-ttu-id="8e88f-252">Perché mai scegliere uno schema a partizione singola per tutti gli utenti?</span><span class="sxs-lookup"><span data-stu-id="8e88f-252">But why even try to pick a single partition scheme out for all users?</span></span> <span data-ttu-id="8e88f-253">Perché limitarsi a un servizio e a un cluster statico?</span><span class="sxs-lookup"><span data-stu-id="8e88f-253">Why limit yourself to one service and one static cluster?</span></span> <span data-ttu-id="8e88f-254">La situazione reale è di solito più dinamica.</span><span class="sxs-lookup"><span data-stu-id="8e88f-254">The real situation is usually more dynamic.</span></span> 

<span data-ttu-id="8e88f-255">Quando si compila per scalare, considerare il modello dinamico seguente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-255">When building for scale, consider the following dynamic pattern.</span></span> <span data-ttu-id="8e88f-256">Potrebbe essere necessario adattarlo alla propria situazione:</span><span class="sxs-lookup"><span data-stu-id="8e88f-256">You may need to adapt it to your situation:</span></span>

1. <span data-ttu-id="8e88f-257">Invece di tentare di selezionare in anticipo uno schema di partizionamento per tutti gli utenti, creare un "servizio gestione".</span><span class="sxs-lookup"><span data-stu-id="8e88f-257">Instead of trying to pick a partitioning scheme for everyone up front, build a "manager service".</span></span>
2. <span data-ttu-id="8e88f-258">Il compito del servizio gestione è analizzare le informazioni del cliente quando quest'ultimo si iscrive al servizio.</span><span class="sxs-lookup"><span data-stu-id="8e88f-258">The job of the manager service is to look at customer information when they sign up for your service.</span></span> <span data-ttu-id="8e88f-259">In base a tali informazioni, il servizio gestione crea un'istanza del servizio archiviazione-contatti _effettivo_ _solo per quel cliente_.</span><span class="sxs-lookup"><span data-stu-id="8e88f-259">Then depending on that information the manager service create an instance of your _actual_ contact-storage service _just for that customer_.</span></span> <span data-ttu-id="8e88f-260">Se il cliente richiede una configurazione, un isolamento o aggiornamenti specifici, si può anche decidere di avviare un'istanza dell'applicazione per questo cliente.</span><span class="sxs-lookup"><span data-stu-id="8e88f-260">If they require particular configuration, isolation, or upgrades, you can also decide to spin up an Application instance for this customer.</span></span> 

<span data-ttu-id="8e88f-261">Questo modello di creazione dinamico offre molti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="8e88f-261">This dynamic creation pattern many benefits:</span></span>

  - <span data-ttu-id="8e88f-262">Non si tenterà di indovinare in anticipo il numero di partizioni corretto per tutti gli utenti o di creare un unico servizio che è di per sé scalabile all'infinito.</span><span class="sxs-lookup"><span data-stu-id="8e88f-262">You're not trying to guess the correct partition count for all users up front or build a single service that is infinitely scalable all on its own.</span></span> 
  - <span data-ttu-id="8e88f-263">I diversi utenti non dovranno avere lo stesso numero di partizioni, numero di repliche, vincoli di posizionamento, metriche, carichi predefiniti, nomi di servizio, impostazioni DNS o qualunque delle altre proprietà specificate a livello di servizio o di applicazione.</span><span class="sxs-lookup"><span data-stu-id="8e88f-263">Different users don't have to have the same partition count, replica count, placement constraints, metrics, default loads, service names, dns settings, or any of the other properties specified at the service or application level.</span></span> 
  - <span data-ttu-id="8e88f-264">Si ottiene una segmentazione dei dati aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="8e88f-264">You gain additional data segmentation.</span></span> <span data-ttu-id="8e88f-265">Ogni cliente dispone della propria copia del servizio</span><span class="sxs-lookup"><span data-stu-id="8e88f-265">Each customer has their own copy of the service</span></span>
    - <span data-ttu-id="8e88f-266">Ogni servizio del cliente può essere configurato in maniera diversa, con più o meno risorse, partizioni o repliche in base alle necessità e alla scalabilità prevista.</span><span class="sxs-lookup"><span data-stu-id="8e88f-266">Each customer service can be configured differently and granted more or fewer resources, with more or fewer partitions or replicas as necessary based on their expected scale.</span></span>
      - <span data-ttu-id="8e88f-267">Si supponga, ad esempio, che il cliente abbia pagato per il livello "Gold", che gli consente di ottenere più repliche o un numero superiore di partizioni e potenzialmente risorse dedicate ai servizi attraverso metriche e funzionalità di applicazione.</span><span class="sxs-lookup"><span data-stu-id="8e88f-267">For example, say the customer paid for the "Gold" tier - they could get more replicas or greater partition count, and potentially resources dedicated to their services via metrics and application capacities.</span></span>
      - <span data-ttu-id="8e88f-268">Si supponga in alternativa che il cliente abbia indicato che il numero di contatti necessari è "ridotto", quindi ottiene solo alcune partizioni oppure può addirittura essere inserito in un pool di servizi condiviso con altri clienti.</span><span class="sxs-lookup"><span data-stu-id="8e88f-268">Or say they provided information indicating the number of contacts they needed was "Small" - they would get only a few partitions, or could even be put into a shared service pool with other customers.</span></span>
  - <span data-ttu-id="8e88f-269">Non si esegue una serie di istanze del servizio o repliche mentre si attende l'arrivo dei clienti</span><span class="sxs-lookup"><span data-stu-id="8e88f-269">You're not running a bunch of service instances or replicas while you're waiting for customers to show up</span></span>
  - <span data-ttu-id="8e88f-270">Se un cliente lascia il servizio, la rimozione delle informazioni dal servizio è facile quanto fare eliminare dal servizio gestione il servizio o l'applicazione creata.</span><span class="sxs-lookup"><span data-stu-id="8e88f-270">If a customer ever leaves, then removing their information from your service is as simple as having the manager delete that service or application that it created.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8e88f-271">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8e88f-271">Next steps</span></span>
<span data-ttu-id="8e88f-272">Per altre informazioni sui concetti relativi a Service Fabric, vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="8e88f-272">For more information on Service Fabric concepts, see the following articles:</span></span>

* [<span data-ttu-id="8e88f-273">Disponibilità dei servizi di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8e88f-273">Availability of Service Fabric services</span></span>](service-fabric-availability-services.md)
* [<span data-ttu-id="8e88f-274">Partizionamento dei servizi di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8e88f-274">Partitioning Service Fabric services</span></span>](service-fabric-concepts-partitioning.md)
