---
title: "Set di disponibilità per macchine virtuali Linux in Azure | Microsoft Docs"
description: "Informazioni sulle principali linee guida di progettazione e implementazione per la distribuzione dei set di disponibilità nei servizi di infrastruttura di Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 24f1d91c-8cc0-4251-bb67-ac4c4c37e8cd
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c5fad478a8fbbdeef2fe72f0b8f2ebe32852bbc5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-availability-sets-guidelines-for-linux-vms"></a><span data-ttu-id="7f5ea-103">Linee guida per i set di disponibilità di Azure per macchine virtuali Linux</span><span class="sxs-lookup"><span data-stu-id="7f5ea-103">Azure availability sets guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="7f5ea-104">Questo articolo è incentrato sulla comprensione dei passaggi di pianificazione necessari per i set di disponibilità per garantire che le applicazioni rimangano accessibili in caso di eventi pianificati o non pianificati.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-104">This article focuses on understanding the required planning steps for availability sets to ensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="7f5ea-105">Linee guida di implementazione per i set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="7f5ea-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="7f5ea-106">Decisioni:</span><span class="sxs-lookup"><span data-stu-id="7f5ea-106">Decisions:</span></span>

* <span data-ttu-id="7f5ea-107">Quanti set di disponibilità sono necessari per i diversi ruoli e livelli nell’infrastruttura dell'applicazione?</span><span class="sxs-lookup"><span data-stu-id="7f5ea-107">How many availability sets do you need for the various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="7f5ea-108">Attività:</span><span class="sxs-lookup"><span data-stu-id="7f5ea-108">Tasks:</span></span>

* <span data-ttu-id="7f5ea-109">Definire il numero di macchine virtuali in ogni livello dell'applicazione desiderata.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-109">Define the number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="7f5ea-110">Determinare se è necessario modificare il numero di domini di errore o aggiornamento da usare per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-110">Determine if you need to adjust the number of fault or update domains to be used for your application.</span></span>
* <span data-ttu-id="7f5ea-111">Definire i set di disponibilità richiesti tramite la convenzione di denominazione scelta e le macchine virtuali che vi risiederanno.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-111">Define the required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="7f5ea-112">Una macchina virtuale può risiedere soltanto in un set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-112">A VM can only reside in one availability set.</span></span> 

## <a name="availability-sets"></a><span data-ttu-id="7f5ea-113">Set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="7f5ea-113">Availability sets</span></span>
<span data-ttu-id="7f5ea-114">Azure consente di inserire le macchine virtuali in un gruppo logico, definito set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-114">In Azure, virtual machines (VMs) can be placed in to a logical grouping called an availability set.</span></span> <span data-ttu-id="7f5ea-115">Quando si creano macchine virtuali all'interno di un set di disponibilità, la piattaforma Azure ne distribuirà il posizionamento nell'infrastruttura sottostante.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-115">When you create VMs within an availability set, the Azure platform distributes the placement of those VMs across the underlying infrastructure.</span></span> <span data-ttu-id="7f5ea-116">Nel caso di un evento di manutenzione pianificato sulla piattaforma di Azure o di un errore dell'hardware o dell'infrastruttura sottostante, l'uso di set di disponibilità assicura che almeno una macchina virtuale rimanga in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-116">Should there be a planned maintenance event to the Azure platform or an underlying hardware / infrastructure fault, the use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="7f5ea-117">La procedura consigliata prevede che le applicazioni non risiedano in una singola macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="7f5ea-118">Un set di disponibilità contenente un'unica macchina virtuale non può offrire alcuna protezione da eventi pianificati o non pianificati nella piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within the Azure platform.</span></span> <span data-ttu-id="7f5ea-119">Il [Contratto di servizio di Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) richiede la presenza di due o più macchine virtuali nell'ambito di un set di disponibilità per consentire la distribuzione delle macchine virtuali nell'infrastruttura sottostante.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-119">The [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set to allow the distribution of VMs across the underlying infrastructure.</span></span> <span data-ttu-id="7f5ea-120">Se si usa [Archiviazione Premium di Azure](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), il Contratto di servizio di Azure si applica a un'unica macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), the Azure SLA applies to a single VM.</span></span>

<span data-ttu-id="7f5ea-121">In Azure, l'infrastruttura sottostante è suddivisa in più cluster hardware.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-121">The underlying infrastructure in Azure is divided in to multiple hardware clusters.</span></span> <span data-ttu-id="7f5ea-122">Ogni cluster hardware può supportare una gamma di dimensioni delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="7f5ea-123">Un set di disponibilità può essere ospitato solo in un singolo cluster hardware in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="7f5ea-124">L'intervallo di dimensioni delle macchine virtuali che possono esistere in un singolo set di disponibilità è quindi limitato all'intervallo di dimensioni delle macchine virtuali supportate dal cluster hardware.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-124">Therefore, the range of VM sizes that can exist in a single availability set is limited to the range of VM sizes supported by the hardware cluster.</span></span> <span data-ttu-id="7f5ea-125">Il cluster hardware per il set di disponibilità è selezionato quando viene distribuita la prima macchina virtuale nel set o quando si avvia la prima macchina virtuale in un set di disponibilità dove tutte le macchine si trovano al momento nello stato arrestato-deallocato.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-125">The hardware cluster for the availability set is selected when the first VM in the availability set is deployed or when starting the first VM in an availability set where all VMs are currently in the stopped-deallocated state.</span></span> <span data-ttu-id="7f5ea-126">È possibile usare il comando di interfaccia della riga di comando seguente per determinare l'intervallo di dimensioni delle macchine virtuali disponibili per un set di disponibilità: "az vm list-sizes --location \<string\>"</span><span class="sxs-lookup"><span data-stu-id="7f5ea-126">The following CLI command can be used to determine the range of VM sizes available for an availability set: “az vm list-sizes --location \<string\>”</span></span>

<span data-ttu-id="7f5ea-127">Ogni cluster hardware è suddiviso in più domini di aggiornamento e domini di errore.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-127">Each hardware cluster is divided in to multiple update domains and fault domains.</span></span> <span data-ttu-id="7f5ea-128">Tali domini sono definiti in base agli host che condividono un ciclo di aggiornamento comune o un'infrastruttura fisica simile, ad esempio quella di alimentazione e rete.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="7f5ea-129">Azure distribuirà automaticamente le macchine virtuali in un set di disponibilità nell'ambito dei domini per garantire la disponibilità e la tolleranza di errore.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-129">Azure automatically distributes your VMs within an availability set across domains to maintain availability and fault tolerance.</span></span> <span data-ttu-id="7f5ea-130">A seconda della dimensione dell'applicazione e del numero di macchine virtuali all'interno di un set di disponibilità, è possibile modificare il numero di domini che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-130">Depending on the size of your application and the number of VMs within an availability set, you can adjust the number of domains you wish to use.</span></span> <span data-ttu-id="7f5ea-131">Altre informazioni su [gestione della disponibilità e uso dei domini di aggiornamento e di errore](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="7f5ea-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="7f5ea-132">Quando si progetta l'infrastruttura dell'applicazione, pianificare anche i livelli applicazione da usare.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-132">When designing your application infrastructure, plan out the application tiers to use.</span></span> <span data-ttu-id="7f5ea-133">Raggruppare nei set di disponibilità le macchine virtuali che svolgono la stessa funzione, creando ad esempio un set di disponibilità per le macchine virtuali front-end che eseguono Apache o nginx.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-133">Group VMs that serve the same purpose in to availability sets, such as an availability set for your front-end VMs running nginx or Apache.</span></span> <span data-ttu-id="7f5ea-134">Creare un set di disponibilità distinto per le macchine virtuali back-end che eseguono MongoDB o MySQL.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-134">Create a separate availability set for your back-end VMs running MongoDB or MySQL.</span></span> <span data-ttu-id="7f5ea-135">L'obiettivo è garantire che ogni componente dell'applicazione sia protetto da un set di disponibilità e che almeno un'istanza rimanga sempre in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-135">The goal is to ensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="7f5ea-136">In ogni livello di applicazione è possibile usare servizi di bilanciamento del carico a supporto di un set di disponibilità, per garantire che il traffico venga sempre indirizzato a un'istanza in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-136">Load balancers can be utilized in front of each application tier to work alongside an availability set and ensure traffic can always be routed to a running instance.</span></span> <span data-ttu-id="7f5ea-137">Senza bilanciamento del carico, le macchine virtuali possono restare in esecuzione durante gli eventi di manutenzione pianificata e non pianificata, ma gli utenti finali potrebbero non essere in grado di risolvere i problemi se la macchina virtuale primaria non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able to resolve them if the primary VM is unavailable.</span></span>

<span data-ttu-id="7f5ea-138">Progettare l'applicazione per la disponibilità elevata a livello di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7f5ea-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="7f5ea-139">La procedura consigliata consiste nell'[usare Managed Disks per le macchine virtuali in un set di disponibilità](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="7f5ea-139">The best practice is to [use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="7f5ea-140">Se si usano macchine virtuali con dischi non gestiti, è fortemente consigliabile [convertire le macchine virtuali nel set di disponibilità per l'uso di Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="7f5ea-140">If you are currently using unmanaged disks, we highly recommend you to [convert VMs in Availability Set to use Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7f5ea-141">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="7f5ea-141">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

