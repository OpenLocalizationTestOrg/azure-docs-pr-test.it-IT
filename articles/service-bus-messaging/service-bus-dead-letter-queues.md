---
title: le code di messaggi non recapitabili Bus aaaService | Documenti Microsoft
description: Panoramica delle code dei messaggi non recapitabili del bus di servizio Azure
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 68b2aa38-dba7-491a-9c26-0289bc15d397
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/17/2017
ms.author: clemensv;sethm
ms.openlocfilehash: 1638272085b8a3a59e8814f6f943caee35a2bfdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="overview-of-service-bus-dead-letter-queues"></a><span data-ttu-id="8bc67-103">Panoramica delle code dei messaggi non recapitabili del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="8bc67-103">Overview of Service Bus dead-letter queues</span></span>

<span data-ttu-id="8bc67-104">Le code del bus di servizio e le sottoscrizioni dell'argomento includono una coda secondaria chiamata *coda di messaggi non recapitabili* (DLQ, Dead-Letter Queue).</span><span class="sxs-lookup"><span data-stu-id="8bc67-104">Service Bus queues and topic subscriptions provide a secondary sub-queue, called a *dead-letter queue* (DLQ).</span></span> <span data-ttu-id="8bc67-105">coda di messaggi non recapitabili Hello non è necessario toobe creati in modo esplicito e non può essere eliminato o in caso contrario gestito indipendentemente dall'entità principale hello.</span><span class="sxs-lookup"><span data-stu-id="8bc67-105">hello dead-letter queue does not need toobe explicitly created and cannot be deleted or otherwise managed independent of hello main entity.</span></span>

<span data-ttu-id="8bc67-106">Questo articolo descrive le code dei messaggi non recapitabili nel bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="8bc67-106">This article discusses dead-letter queues in Azure Service Bus.</span></span> <span data-ttu-id="8bc67-107">Gran parte della discussione hello è illustrata hello [esempio recapitabili](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) su GitHub.</span><span class="sxs-lookup"><span data-stu-id="8bc67-107">Much of hello discussion is illustrated by hello [Dead-Letter Queues sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) on GitHub.</span></span>
 
## <a name="hello-dead-letter-queue"></a><span data-ttu-id="8bc67-108">coda di messaggi non recapitabili Hello</span><span class="sxs-lookup"><span data-stu-id="8bc67-108">hello dead-letter queue</span></span>

<span data-ttu-id="8bc67-109">scopo di Hello della coda di messaggi non recapitabili hello è toohold messaggi che non possono essere recapitati tooany ricevitore o i messaggi che non è stato possibile elaborare.</span><span class="sxs-lookup"><span data-stu-id="8bc67-109">hello purpose of hello dead-letter queue is toohold messages that cannot be delivered tooany receiver, or messages that could not be processed.</span></span> <span data-ttu-id="8bc67-110">I messaggi possono essere rimosse da DLQ hello e controllati.</span><span class="sxs-lookup"><span data-stu-id="8bc67-110">Messages can then be removed from hello DLQ and inspected.</span></span> <span data-ttu-id="8bc67-111">Un'applicazione potrebbe, con l'aiuto di un operatore, correggere i problemi e inviare nuovamente il messaggio hello, registrare hello fatto che si è verificato un errore e intraprendere l'azione correttiva.</span><span class="sxs-lookup"><span data-stu-id="8bc67-111">An application might, with help of an operator, correct issues and resubmit hello message, log hello fact that there was an error, and take corrective action.</span></span> 

<span data-ttu-id="8bc67-112">Da una prospettiva di API e il protocollo, hello DLQ è principalmente simile tooany altra coda, ad eccezione del fatto che i messaggi possono essere inviati solo mediante i movimenti di messaggi non recapitabili hello dell'entità padre hello.</span><span class="sxs-lookup"><span data-stu-id="8bc67-112">From an API and protocol perspective, hello DLQ is mostly similar tooany other queue, except that messages can only be submitted via hello dead-letter gesture of hello parent entity.</span></span> <span data-ttu-id="8bc67-113">Inoltre, il parametro time-to-live non viene rispettato e non è possibile impostare come non recapitabile un messaggio di una coda DLQ.</span><span class="sxs-lookup"><span data-stu-id="8bc67-113">In addition, time-to-live is not observed, and you can't dead-letter a message from a DLQ.</span></span> <span data-ttu-id="8bc67-114">coda di messaggi non recapitabili Hello supporta operazioni transazionali e il recapito di blocco di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="8bc67-114">hello dead-letter queue fully supports peek-lock delivery and transactional operations.</span></span>

<span data-ttu-id="8bc67-115">Si noti che non vi sia alcuna pulizia automatica di hello DLQ.</span><span class="sxs-lookup"><span data-stu-id="8bc67-115">Note that there is no automatic cleanup of hello DLQ.</span></span> <span data-ttu-id="8bc67-116">I messaggi rimangono nella hello DLQ fino a quando non è in modo esplicito recuperarli da DLQ hello e chiamare [complete ()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) nel messaggio non recapitabile hello.</span><span class="sxs-lookup"><span data-stu-id="8bc67-116">Messages remain in hello DLQ until you explicitly retrieve them from hello DLQ and call [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) on hello dead-letter message.</span></span>

## <a name="moving-messages-toohello-dlq"></a><span data-ttu-id="8bc67-117">Lo spostamento di messaggi toohello DLQ</span><span class="sxs-lookup"><span data-stu-id="8bc67-117">Moving messages toohello DLQ</span></span>

<span data-ttu-id="8bc67-118">Esistono diverse attività di Service Bus che causano tooget messaggi inserito toohello DLQ all'interno di hello motore di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="8bc67-118">There are several activities in Service Bus that cause messages tooget pushed toohello DLQ from within hello messaging engine itself.</span></span> <span data-ttu-id="8bc67-119">Un'applicazione in modo esplicito anche possibile spostare messaggi toohello DLQ.</span><span class="sxs-lookup"><span data-stu-id="8bc67-119">An application can also explicitly move messages toohello DLQ.</span></span> 

<span data-ttu-id="8bc67-120">Come messaggio hello viene spostato dal broker hello, due proprietà vengono aggiunti toohello messaggio come broker hello chiama la versione di hello interna [dei messaggi non recapitabili](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) metodo sul messaggio hello: `DeadLetterReason` e `DeadLetterErrorDescription`.</span><span class="sxs-lookup"><span data-stu-id="8bc67-120">As hello message gets moved by hello broker, two properties are added toohello message as hello broker calls its internal version of hello [DeadLetter](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) method on hello message: `DeadLetterReason` and `DeadLetterErrorDescription`.</span></span>

<span data-ttu-id="8bc67-121">Le applicazioni possono definire i propri codici per hello `DeadLetterReason` proprietà, ma hello sistema set hello seguenti valori.</span><span class="sxs-lookup"><span data-stu-id="8bc67-121">Applications can define their own codes for hello `DeadLetterReason` property, but hello system sets hello following values.</span></span>

| <span data-ttu-id="8bc67-122">Condizione</span><span class="sxs-lookup"><span data-stu-id="8bc67-122">Condition</span></span> | <span data-ttu-id="8bc67-123">DeadLetterReason</span><span class="sxs-lookup"><span data-stu-id="8bc67-123">DeadLetterReason</span></span> | <span data-ttu-id="8bc67-124">DeadLetterErrorDescription</span><span class="sxs-lookup"><span data-stu-id="8bc67-124">DeadLetterErrorDescription</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8bc67-125">Sempre</span><span class="sxs-lookup"><span data-stu-id="8bc67-125">Always</span></span> |<span data-ttu-id="8bc67-126">HeaderSizeExceeded</span><span class="sxs-lookup"><span data-stu-id="8bc67-126">HeaderSizeExceeded</span></span> |<span data-ttu-id="8bc67-127">Hello dimensioni per il flusso è stato superato.</span><span class="sxs-lookup"><span data-stu-id="8bc67-127">hello size quota for this stream has been exceeded.</span></span> |
| <span data-ttu-id="8bc67-128">!TopicDescription.</span><span class="sxs-lookup"><span data-stu-id="8bc67-128">!TopicDescription.</span></span><br /><span data-ttu-id="8bc67-129">EnableFilteringMessagesBeforePublishing e SubscriptionDescription.</span><span class="sxs-lookup"><span data-stu-id="8bc67-129">EnableFilteringMessagesBeforePublishing and SubscriptionDescription.</span></span><br /><span data-ttu-id="8bc67-130">EnableDeadLetteringOnFilterEvaluationExceptions</span><span class="sxs-lookup"><span data-stu-id="8bc67-130">EnableDeadLetteringOnFilterEvaluationExceptions</span></span> |<span data-ttu-id="8bc67-131">exception.GetType().Name</span><span class="sxs-lookup"><span data-stu-id="8bc67-131">exception.GetType().Name</span></span> |<span data-ttu-id="8bc67-132">exception.Message</span><span class="sxs-lookup"><span data-stu-id="8bc67-132">exception.Message</span></span> |
| <span data-ttu-id="8bc67-133">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="8bc67-133">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="8bc67-134">TTLExpiredException</span><span class="sxs-lookup"><span data-stu-id="8bc67-134">TTLExpiredException</span></span> |<span data-ttu-id="8bc67-135">messaggio Hello scaduta e è stato recapitabile.</span><span class="sxs-lookup"><span data-stu-id="8bc67-135">hello message expired and was dead lettered.</span></span> |
| <span data-ttu-id="8bc67-136">SubscriptionDescription.RequiresSession</span><span class="sxs-lookup"><span data-stu-id="8bc67-136">SubscriptionDescription.RequiresSession</span></span> |<span data-ttu-id="8bc67-137">L'ID sessione ha valore null.</span><span class="sxs-lookup"><span data-stu-id="8bc67-137">Session id is null.</span></span> |<span data-ttu-id="8bc67-138">L'entità attivata dalla sessione non consente il recapito di un messaggio il cui identificatore di sessione è null.</span><span class="sxs-lookup"><span data-stu-id="8bc67-138">Session enabled entity doesn't allow a message whose session identifier is null.</span></span> |
| <span data-ttu-id="8bc67-139">!dead letter queue</span><span class="sxs-lookup"><span data-stu-id="8bc67-139">!dead letter queue</span></span> |<span data-ttu-id="8bc67-140">MaxTransferHopCountExceeded</span><span class="sxs-lookup"><span data-stu-id="8bc67-140">MaxTransferHopCountExceeded</span></span> |<span data-ttu-id="8bc67-141">Null</span><span class="sxs-lookup"><span data-stu-id="8bc67-141">Null</span></span> |
| <span data-ttu-id="8bc67-142">Configurazione esplicita di messaggio non recapitabile da parte dell'applicazione </span><span class="sxs-lookup"><span data-stu-id="8bc67-142">Application explicit dead lettering</span></span> |<span data-ttu-id="8bc67-143">Specificato dall'applicazione</span><span class="sxs-lookup"><span data-stu-id="8bc67-143">Specified by application</span></span> |<span data-ttu-id="8bc67-144">Specificato dall'applicazione</span><span class="sxs-lookup"><span data-stu-id="8bc67-144">Specified by application</span></span> |

## <a name="exceeding-maxdeliverycount"></a><span data-ttu-id="8bc67-145">Superamento di MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="8bc67-145">Exceeding MaxDeliveryCount</span></span>
<span data-ttu-id="8bc67-146">Code e sottoscrizioni hanno una [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) e [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) proprietà hello; rispettivamente il valore predefinito è 10.</span><span class="sxs-lookup"><span data-stu-id="8bc67-146">Queues and subscriptions each have a [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) and [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) property respectively; hello default value is 10.</span></span> <span data-ttu-id="8bc67-147">Ogni volta che un messaggio è stato recapitato in un blocco ([Receivemode](/dotnet/api/microsoft.servicebus.messaging.receivemode)), ma è stato uno in modo esplicito il blocco di hello scaduto, del messaggio hello o abbandonata [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) è incrementato.</span><span class="sxs-lookup"><span data-stu-id="8bc67-147">Whenever a message has been delivered under a lock ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), but has been either explicitly abandoned or hello lock has expired, hello message's [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is incremented.</span></span> <span data-ttu-id="8bc67-148">Quando [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) supera [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), il messaggio hello viene spostata toohello DLQ, specificando hello `MaxDeliveryCountExceeded` codice motivo.</span><span class="sxs-lookup"><span data-stu-id="8bc67-148">When [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) exceeds [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), hello message is moved toohello DLQ, specifying hello `MaxDeliveryCountExceeded` reason code.</span></span>

<span data-ttu-id="8bc67-149">Non è possibile disabilitare questo comportamento, ma è possibile impostare [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa numero di dimensioni molto grandi.</span><span class="sxs-lookup"><span data-stu-id="8bc67-149">This behavior cannot be disabled, but you can set [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa very large number.</span></span>

## <a name="exceeding-timetolive"></a><span data-ttu-id="8bc67-150">Superamento di TimeToLive</span><span class="sxs-lookup"><span data-stu-id="8bc67-150">Exceeding TimeToLive</span></span>
<span data-ttu-id="8bc67-151">Quando hello [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) o [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) impostata troppo**true** (valore predefinito di hello è **false**), tutti i messaggi scaduti vengono spostato toohello DLQ, specificando hello `TTLExpiredException` codice motivo.</span><span class="sxs-lookup"><span data-stu-id="8bc67-151">When hello [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) or [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) property is set too**true** (hello default is **false**), all expiring messages are moved toohello DLQ, specifying hello  `TTLExpiredException` reason code.</span></span>

<span data-ttu-id="8bc67-152">Si noti che i messaggi scaduti vengono eliminati solo e pertanto spostato toohello DLQ quando è presente almeno un destinatario active pull nella coda principale hello o nella sottoscrizione; Questo comportamento è da progettazione.</span><span class="sxs-lookup"><span data-stu-id="8bc67-152">Note that expired messages are only purged and therefore moved toohello DLQ when there is at least one active receiver pulling on hello main queue or subscription; that behavior is by design.</span></span>

## <a name="errors-while-processing-subscription-rules"></a><span data-ttu-id="8bc67-153">Errori durante l'elaborazione di regole di sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="8bc67-153">Errors while processing subscription rules</span></span>
<span data-ttu-id="8bc67-154">Quando hello [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) proprietà è abilitata per una sottoscrizione, eventuali errori che si verificano durante l'esecuzione di regola di filtro di una sottoscrizione SQL vengono acquisite in hello DLQ insieme a hello danneggiata di messaggio.</span><span class="sxs-lookup"><span data-stu-id="8bc67-154">When hello [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) property is enabled for a subscription, any errors that occur while a subscription's SQL filter rule executes are captured in hello DLQ along with hello offending message.</span></span>

## <a name="application-level-dead-lettering"></a><span data-ttu-id="8bc67-155">Definizione di messaggi non recapitabili a livello di applicazione</span><span class="sxs-lookup"><span data-stu-id="8bc67-155">Application-level dead-lettering</span></span>
<span data-ttu-id="8bc67-156">In toohello fornita dal sistema mancato recapito dei messaggi non recapitabili funzionalità aggiuntive, le applicazioni possono utilizzare messaggi inaccettabili hello DLQ tooexplicitly rifiuto.</span><span class="sxs-lookup"><span data-stu-id="8bc67-156">In addition toohello system-provided dead-lettering features, applications can use hello DLQ tooexplicitly reject unacceptable messages.</span></span> <span data-ttu-id="8bc67-157">Ciò può includere i messaggi che non possono essere elaborati correttamente a causa di ordinamento tooany di errore di sistema, i messaggi contenenti payload in formato non valido o che l'autenticazione non riesce quando viene utilizzato un schema di sicurezza a livello di messaggio.</span><span class="sxs-lookup"><span data-stu-id="8bc67-157">This may include messages that cannot be properly processed due tooany sort of system issue, messages that hold malformed payloads, or messages that fail authentication when some message-level security scheme is used.</span></span>

## <a name="dead-lettering-in-forwardto-or-sendvia-scenarios"></a><span data-ttu-id="8bc67-158">Messaggi non recapitabili negli scenari ForwardTo o SendVia</span><span class="sxs-lookup"><span data-stu-id="8bc67-158">Dead-lettering in ForwardTo or SendVia scenarios</span></span>

<span data-ttu-id="8bc67-159">I messaggi verranno inviati toohello trasferimento non recapitabili in hello seguenti condizioni:</span><span class="sxs-lookup"><span data-stu-id="8bc67-159">Messages will be sent toohello transfer dead-letter queue under hello following conditions:</span></span>

- <span data-ttu-id="8bc67-160">Un messaggio passa attraverso più di 3 code o argomenti che sono [concatenati](service-bus-auto-forwarding.md).</span><span class="sxs-lookup"><span data-stu-id="8bc67-160">A message passes through more than 3 queues or topics that are [chained together](service-bus-auto-forwarding.md).</span></span>
- <span data-ttu-id="8bc67-161">argomento o coda di destinazione di Hello è disabilitato o eliminato.</span><span class="sxs-lookup"><span data-stu-id="8bc67-161">hello destination queue or topic is disabled or deleted.</span></span>
- <span data-ttu-id="8bc67-162">coda di destinazione Hello o un argomento supera le dimensioni massime entità hello.</span><span class="sxs-lookup"><span data-stu-id="8bc67-162">hello destination queue or topic exceeds hello maximum entity size.</span></span>

<span data-ttu-id="8bc67-163">tooretrieve questi messaggi recapitabile dei messaggi non recapitabili, è possibile creare un ricevitore di hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) metodo di utilità.</span><span class="sxs-lookup"><span data-stu-id="8bc67-163">tooretrieve these dead-lettered messages, you can create a receiver using hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) utility method.</span></span>

## <a name="example"></a><span data-ttu-id="8bc67-164">Esempio</span><span class="sxs-lookup"><span data-stu-id="8bc67-164">Example</span></span>
<span data-ttu-id="8bc67-165">Hello frammento di codice seguente crea un ricevitore del messaggio.</span><span class="sxs-lookup"><span data-stu-id="8bc67-165">hello following code snippet creates a message receiver.</span></span> <span data-ttu-id="8bc67-166">In hello ricezione ciclo per la coda principale hello, codice hello recupera il messaggio hello con [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), che richiede hello broker tooinstantly restituito qualsiasi messaggio disponibile o tooreturn con nessun risultato.</span><span class="sxs-lookup"><span data-stu-id="8bc67-166">In hello receive loop for hello main queue, hello code retrieves hello message with [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), which asks hello broker tooinstantly return any message readily available, or tooreturn with no result.</span></span> <span data-ttu-id="8bc67-167">Se il codice hello riceve un messaggio, immediatamente Ignora, che viene incrementato hello `DeliveryCount`.</span><span class="sxs-lookup"><span data-stu-id="8bc67-167">If hello code receives a message, it immediately abandons it, which increments hello  `DeliveryCount`.</span></span> <span data-ttu-id="8bc67-168">Una volta sistema hello Sposta toohello messaggio hello DLQ, coda principale hello è vuota e hello viene chiusa ciclo, come [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) restituisce **null**.</span><span class="sxs-lookup"><span data-stu-id="8bc67-168">Once hello system moves hello message toohello DLQ, hello main queue is empty and hello loop exits, as [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returns **null**.</span></span>

```csharp
var receiver = await receiverFactory.CreateMessageReceiverAsync(queueName, ReceiveMode.PeekLock);
while(true)
{
    var msg = await receiver.ReceiveAsync(TimeSpan.Zero);
    if (msg != null)
    {
        Console.WriteLine("Picked up message; DeliveryCount {0}", msg.DeliveryCount);
        await msg.AbandonAsync();
    }
    else
    {
        break;
    }
}
```

## <a name="next-steps"></a><span data-ttu-id="8bc67-169">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8bc67-169">Next steps</span></span>
<span data-ttu-id="8bc67-170">Vedere i seguenti articoli per ulteriori informazioni sulle code Service Bus hello:</span><span class="sxs-lookup"><span data-stu-id="8bc67-170">See hello following articles for more information about Service Bus queues:</span></span>

* [<span data-ttu-id="8bc67-171">Introduzione alle code del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="8bc67-171">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="8bc67-172">Analogie e differenze tra le code di Azure e le code del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="8bc67-172">Azure Queues and Service Bus queues compared</span></span>](service-bus-azure-and-service-bus-queues-compared-contrasted.md)

