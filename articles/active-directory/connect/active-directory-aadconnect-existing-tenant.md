---
title: "Azure AD Connect: Quando è già presente Azure AD | Documentazione Microsoft"
description: Questo argomento viene descritto come toouse connettersi quando si dispone di un tenant Azure AD.
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f7b166e9e85c1f03330e8e0074d4afa4036738c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="dd70c-103">Azure AD Connect con un tenant esistente</span><span class="sxs-lookup"><span data-stu-id="dd70c-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="dd70c-104">La maggior parte degli argomenti sulle hello come Azure AD Connect toouse si presuppone che si avvia con Azure un nuovo tenant di Active Directory e che nessun utente o gli altri oggetti.</span><span class="sxs-lookup"><span data-stu-id="dd70c-104">Most of hello topics for how toouse Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="dd70c-105">Ma se è stata avviata con un tenant di Azure AD viene popolato con gli utenti e altri oggetti e si decide toouse Connetti, quindi in questo argomento viene automaticamente.</span><span class="sxs-lookup"><span data-stu-id="dd70c-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want toouse Connect, then this topic is for you.</span></span>

## <a name="hello-basics"></a><span data-ttu-id="dd70c-106">Nozioni di base Hello</span><span class="sxs-lookup"><span data-stu-id="dd70c-106">hello basics</span></span>
<span data-ttu-id="dd70c-107">Un oggetto in Azure AD è essere controllato in locale o cloud hello (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="dd70c-107">An object in Azure AD is either mastered in hello cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="dd70c-108">Per un singolo oggetto non è possibile gestire alcuni attributi in locale e altri attributi in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="dd70c-109">Ogni oggetto dispone di un flag che indica dove hello oggetto gestito.</span><span class="sxs-lookup"><span data-stu-id="dd70c-109">Each object has a flag indicating where hello object is managed.</span></span>

<span data-ttu-id="dd70c-110">È possibile gestire alcuni utenti locali e altri in cloud hello.</span><span class="sxs-lookup"><span data-stu-id="dd70c-110">You can manage some users on-premises and other in hello cloud.</span></span> <span data-ttu-id="dd70c-111">Uno scenario comune per questa configurazione è un'azienda con una combinazione di contabili e addetti alla vendita.</span><span class="sxs-lookup"><span data-stu-id="dd70c-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="dd70c-112">Hello lavoratori accounting dispongano di un locale non sono account di Active Directory, ma i lavoratori vendita hello, hanno un account di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-112">hello accounting workers have an on-premises AD account, but hello sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="dd70c-113">Alcuni utenti verranno gestiti in locale, alcuni in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="dd70c-114">Se è stata avviata toomanage utenti in Azure AD che sono presenti anche in AD locale e successivamente si desidera toouse Connetti, quindi sono disponibili alcuni altri problemi, che è necessario tooconsider.</span><span class="sxs-lookup"><span data-stu-id="dd70c-114">If you started toomanage users in Azure AD that are also in on-premises AD and later want toouse Connect, then there are some additional concerns you need tooconsider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="dd70c-115">Eseguire la sincronizzazione con gli utenti esistenti in Azure AD</span><span class="sxs-lookup"><span data-stu-id="dd70c-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="dd70c-116">Quando si installa Azure AD Connect e si avvia la sincronizzazione, hello servizio di sincronizzazione di Azure AD (in Azure AD) esegue un controllo per ogni nuovo oggetto e tentare toofind un toomatch oggetto esistente.</span><span class="sxs-lookup"><span data-stu-id="dd70c-116">When you install Azure AD Connect and you start synchronizing, hello Azure AD sync service (in Azure AD) does a check on every new object and try toofind an existing object toomatch.</span></span> <span data-ttu-id="dd70c-117">Vengono usati tre attributi per questo processo: **userPrincipalName**, **proxyAddresses** e **sourceAnchor**/**immutableID**.</span><span class="sxs-lookup"><span data-stu-id="dd70c-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="dd70c-118">Una corrispondenza per **userPrincipalName** e **proxyAddresses** è nota come **corrispondenza flessibile**.</span><span class="sxs-lookup"><span data-stu-id="dd70c-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="dd70c-119">Una corrispondenza per **sourceAnchor** è nota come **corrispondenza rigida**.</span><span class="sxs-lookup"><span data-stu-id="dd70c-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="dd70c-120">Per hello **proxyAddresses** solo hello valore con attributo **SMTP:**, che è l'indirizzo di posta elettronica primario hello, viene utilizzato per la valutazione di hello.</span><span class="sxs-lookup"><span data-stu-id="dd70c-120">For hello **proxyAddresses** attribute only hello value with **SMTP:**, that is hello primary email address, is used for hello evaluation.</span></span>

<span data-ttu-id="dd70c-121">corrispondenza Hello viene valutata solo per i nuovi oggetti provenienti da Connect.</span><span class="sxs-lookup"><span data-stu-id="dd70c-121">hello match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="dd70c-122">Se si modifica un oggetto esistente in modo che corrisponda a uno di questi attributi, verrà visualizzato un errore.</span><span class="sxs-lookup"><span data-stu-id="dd70c-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="dd70c-123">Se AD Azure rileva un oggetto in cui i valori di attributo hello sono hello lo stesso per un oggetto provenienti dalla connessione e che è già presente in Azure AD, quindi hello oggetto in Azure AD viene preso in carico da Connect.</span><span class="sxs-lookup"><span data-stu-id="dd70c-123">If Azure AD finds an object where hello attribute values are hello same for an object coming from Connect and that it is already present in Azure AD, then hello object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="dd70c-124">Hello in precedenza oggetto gestito cloud viene contrassegnata come gestite in locale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-124">hello previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="dd70c-125">Tutti gli attributi in Azure AD con un valore in locale Active Directory vengono sovrascritti con valore locale hello.</span><span class="sxs-lookup"><span data-stu-id="dd70c-125">All attributes in Azure AD with a value in on-premises AD are overwritten with hello on-premises value.</span></span> <span data-ttu-id="dd70c-126">Hello eccezione è quando un attributo dispone di un **NULL** valore locale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-126">hello exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="dd70c-127">In questo caso, il valore di hello in Azure AD continuerà, ma può comunque modificarla solo locale toosomething else.</span><span class="sxs-lookup"><span data-stu-id="dd70c-127">In this case, hello value in Azure AD remains, but you can still only change it on-premises toosomething else.</span></span>

> [!WARNING]
> <span data-ttu-id="dd70c-128">Poiché tutti gli attributi in Azure Active Directory vengono sovrascritti dal valore locale hello toobe, assicurarsi di avere dei dati in locale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-128">Since all attributes in Azure AD are going toobe overwritten by hello on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="dd70c-129">Se ad esempio un indirizzo e-mail è stato gestito solo in Office 365, ma non è stato aggiornato nell'istanza di Active Directory Domain Services locale, i valori di Azure AD/Office 365 non presenti in Active Directory Domain Services andranno persi.</span><span class="sxs-lookup"><span data-stu-id="dd70c-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dd70c-130">Se si usa la sincronizzazione delle password, che viene sempre utilizzata dalle impostazioni express, quindi password hello in Azure AD viene sovrascritto con password hello in locale Active Directory.</span><span class="sxs-lookup"><span data-stu-id="dd70c-130">If you use password sync, which is always used by express settings, then hello password in Azure AD is overwritten with hello password in on-premises AD.</span></span> <span data-ttu-id="dd70c-131">Se gli utenti sono utilizzati toomanage password diverse, è necessario tooinform dopo aver installato Connect che devono usare hello password locale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-131">If your users are used toomanage different passwords, then you need tooinform them that they should use hello on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="dd70c-132">la sezione precedente di hello e di avviso da considerare nella pianificazione.</span><span class="sxs-lookup"><span data-stu-id="dd70c-132">hello previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="dd70c-133">Se sono state apportate numerose modifiche in Azure AD non verranno aggiornate locale di dominio Active Directory, è necessario tooplan per la modalità di dominio Active Directory con hello toopopulate i valori aggiornati prima di sincronizzare gli oggetti con Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="dd70c-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need tooplan for how toopopulate AD DS with hello updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="dd70c-134">Se gli oggetti con una corrispondenza di soft corrisposto hello **sourceAnchor** viene aggiunto un oggetto toohello in Azure AD una disco rigida corrispondenza può essere utilizzato in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="dd70c-134">If you matched your objects with a soft-match, then hello **sourceAnchor** is added toohello object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="dd70c-135">Differenza tra corrispondenza rigida e corrispondenza flessibile</span><span class="sxs-lookup"><span data-stu-id="dd70c-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="dd70c-136">Per una nuova installazione di Connect, non esiste alcuna differenza pratica tra corrispondenza flessibile e corrispondenza rigida.</span><span class="sxs-lookup"><span data-stu-id="dd70c-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="dd70c-137">differenza Hello è in una situazione di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="dd70c-137">hello difference is in a disaster recovery situation.</span></span> <span data-ttu-id="dd70c-138">Se si è perso il server con Azure AD Connect, è possibile reinstallare una nuova istanza senza perdere i dati.</span><span class="sxs-lookup"><span data-stu-id="dd70c-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="dd70c-139">Un oggetto con un attributo sourceAnchor viene inviato tooConnect durante l'installazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-139">An object with a sourceAnchor is sent tooConnect during initial install.</span></span> <span data-ttu-id="dd70c-140">Hello corrispondenza può quindi essere valutata dal client di hello (Azure AD Connect), che è molto più veloce rispetto a tale stesso hello in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-140">hello match can then be evaluated by hello client (Azure AD Connect), which is a lot faster than doing hello same in Azure AD.</span></span> <span data-ttu-id="dd70c-141">Una corrispondenza rigida viene valutata sia da Connect che da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="dd70c-142">Una corrispondenza flessibile viene valutata solo da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="dd70c-143">Oggetti diversi dagli utenti</span><span class="sxs-lookup"><span data-stu-id="dd70c-143">Other objects than users</span></span>
<span data-ttu-id="dd70c-144">Gli utenti dispongono in genere userPrincipalName sia proxyAddresses, semplificando la corrispondenza di hello.</span><span class="sxs-lookup"><span data-stu-id="dd70c-144">Users usually have both userPrincipalName and proxyAddresses, making hello match easy.</span></span> <span data-ttu-id="dd70c-145">Altri oggetti, ad esempio i gruppi di sicurezza, non hanno tuttavia questi attributi.</span><span class="sxs-lookup"><span data-stu-id="dd70c-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="dd70c-146">In questo caso, può trovare solo in caso di corrispondenza di disco rigida utilizzando hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="dd70c-146">In this case, you can only match on a hard match using hello sourceAnchor.</span></span> <span data-ttu-id="dd70c-147">Hello sourceAnchor è sempre hello Base64 convertito **objectGUID** locale, pertanto è necessario aggiornare il valore di hello in Azure AD quando è necessario toomatch di due oggetti.</span><span class="sxs-lookup"><span data-stu-id="dd70c-147">hello sourceAnchor is always hello Base64 converted **objectGUID** on-premises, so you must update hello value in Azure AD when you need two objects toomatch.</span></span> <span data-ttu-id="dd70c-148">Hello sourceAnchor o immutableID può essere aggiornata solo con PowerShell e non tramite i portali di hello.</span><span class="sxs-lookup"><span data-stu-id="dd70c-148">hello sourceAnchor/immutableID can only be updated with PowerShell and not through hello portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="dd70c-149">Creare una nuova istanza di Active Directory locale dai dati di Azure AD</span><span class="sxs-lookup"><span data-stu-id="dd70c-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="dd70c-150">Alcuni clienti iniziano con una soluzione solo cloud con Azure AD e non hanno un'istanza di AD locale.</span><span class="sxs-lookup"><span data-stu-id="dd70c-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="dd70c-151">In un secondo momento si desidera tooconsume alle risorse locali e toobuild un locale di Active Directory in base ai dati di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-151">Later they want tooconsume on-premises resources and want toobuild an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="dd70c-152">Azure AD Connect non potrà essere utile per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="dd70c-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="dd70c-153">Non è possibile creare gli utenti locali e non dispone di qualsiasi toohello di possibilità tooset hello password locale corrisponde a quella di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="dd70c-153">It does not create users on-premises and it does not have any ability tooset hello password on-premises toohello same as in Azure AD.</span></span>

<span data-ttu-id="dd70c-154">Se l'unico motivo hello perché si prevede di tooadd locale AD è toosupport LOB (Line-of-Business apps), quindi considerare forse toouse [servizi di dominio di Azure AD](../../active-directory-domain-services/index.md) invece.</span><span class="sxs-lookup"><span data-stu-id="dd70c-154">If hello only reason why you plan tooadd on-premises AD is toosupport LOBs (Line-of-Business apps), then maybe you should consider toouse [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dd70c-155">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="dd70c-155">Next steps</span></span>
<span data-ttu-id="dd70c-156">Altre informazioni su [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="dd70c-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
