---
title: messaggistica aaaUnderstand IoT Hub Azure cloud a dispositivo | Documenti Microsoft
description: Guida per sviluppatori - come toouse cloud a dispositivo messaggistica con l'IoT Hub. Include informazioni sul ciclo di vita del messaggio hello e opzioni di configurazione.
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 5c747b50163873d823556a8baa769c4b8f7f8c44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="send-cloud-to-device-messages-from-iot-hub"></a><span data-ttu-id="7abb5-104">Inviare messaggi da cloud a dispositivo dall'hub IoT</span><span class="sxs-lookup"><span data-stu-id="7abb5-104">Send cloud-to-device messages from IoT Hub</span></span>

<span data-ttu-id="7abb5-105">toosend notifiche unidirezionale toohello dispositivo app dal back-end soluzione, inviare messaggi di cloud di dispositivi per dal dispositivo tooyour hub IoT.</span><span class="sxs-lookup"><span data-stu-id="7abb5-105">toosend one-way notifications toohello device app from your solution back end, send cloud-to-devices messages from your IoT hub tooyour device.</span></span> <span data-ttu-id="7abb5-106">Per una descrizione delle altre opzioni da cloud a dispositivo supportate dall'hub IoT, vedere [Indicazioni sulle comunicazioni da cloud a dispositivo][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="7abb5-106">For a discussion of other cloud-to-devices options supported by IoT Hub, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="7abb5-107">È possibile inviare messaggi da cloud a dispositivo tramite un endpoint per il servizio (**/messages/servicebound**).</span><span class="sxs-lookup"><span data-stu-id="7abb5-107">You send cloud-to-device messages through a service-facing endpoint (**/messages/devicebound**).</span></span> <span data-ttu-id="7abb5-108">Un dispositivo riceve quindi messaggi hello tramite un endpoint specifico del dispositivo (**/devices/ {deviceId} / messaggi/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="7abb5-108">A device then receives hello messages through a device-specific endpoint (**/devices/{deviceId}/messages/devicebound**).</span></span>

<span data-ttu-id="7abb5-109">Ogni messaggio cloud a dispositivo indirizzata a un singolo dispositivo, l'impostazione hello **a** proprietà troppo**/devices/ {deviceId} / messaggi/devicebound**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-109">Each cloud-to-device message is targeted at a single device by setting hello **to** property too**/devices/{deviceId}/messages/devicebound**.</span></span>

<span data-ttu-id="7abb5-110">Ogni coda di dispositivo può contenere un massimo di 50 messaggi da cloud a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-110">Each device queue holds at most 50 cloud-to-device messages.</span></span> <span data-ttu-id="7abb5-111">Tentativo di ulteriori messaggi toohello toosend stesso dispositivo genera un errore.</span><span class="sxs-lookup"><span data-stu-id="7abb5-111">Trying toosend more messages toohello same device results in an error.</span></span>

## <a name="hello-cloud-to-device-message-lifecycle"></a><span data-ttu-id="7abb5-112">ciclo di vita del cloud a dispositivo messaggio Hello</span><span class="sxs-lookup"><span data-stu-id="7abb5-112">hello cloud-to-device message lifecycle</span></span>

<span data-ttu-id="7abb5-113">recapito dei messaggi at-least-once tooguarantee, IoT Hub persiste cloud a dispositivo messaggi nelle code per ogni dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-113">tooguarantee at-least-once message delivery, IoT Hub persists cloud-to-device messages in per-device queues.</span></span> <span data-ttu-id="7abb5-114">I dispositivi in modo esplicito devono riconoscere *completamento* per tooremove IoT Hub dalla coda di hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-114">Devices must explicitly acknowledge *completion* for IoT Hub tooremove them from hello queue.</span></span> <span data-ttu-id="7abb5-115">Questo approccio garantisce la resilienza rispetto a errori di connettività e del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-115">This approach guarantees resiliency against connectivity and device failures.</span></span>

<span data-ttu-id="7abb5-116">Hello diagramma seguente mostra un grafico sullo stato del ciclo di vita hello per un messaggio da cloud a dispositivo nell'IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7abb5-116">hello following diagram shows hello lifecycle state graph for a cloud-to-device message in IoT Hub.</span></span>

![Ciclo di vita dei messaggi da cloud a dispositivo][img-lifecycle]

<span data-ttu-id="7abb5-118">Quando hello servizio IoT Hub invia un messaggio tooa dispositivo, per il servizio hello Imposta stato del messaggio hello troppo**accodati**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-118">When hello IoT Hub service sends a message tooa device, hello service sets hello message state too**Enqueued**.</span></span> <span data-ttu-id="7abb5-119">Quando un dispositivo richiede troppo*ricezione* un messaggio, l'IoT Hub *blocchi* messaggio hello (impostando lo stato di hello troppo**invisibile**), che consente di altri thread nella hello dispositivo toostart ricezione di altri messaggi.</span><span class="sxs-lookup"><span data-stu-id="7abb5-119">When a device wants too*receive* a message, IoT Hub *locks* hello message (by setting hello state too**Invisible**), which allows other threads on hello device toostart receiving other messages.</span></span> <span data-ttu-id="7abb5-120">Quando un thread dispositivo hello di un messaggio al termine dell'elaborazione notifica all'IoT Hub da *completamento* messaggio hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-120">When a device thread completes hello processing of a message, it notifies IoT Hub by *completing* hello message.</span></span> <span data-ttu-id="7abb5-121">IoT Hub quindi imposta lo stato di hello troppo**completato**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-121">IoT Hub then sets hello state too**Completed**.</span></span>

<span data-ttu-id="7abb5-122">Un dispositivo può anche scegliere di:</span><span class="sxs-lookup"><span data-stu-id="7abb5-122">A device can also choose to:</span></span>

* <span data-ttu-id="7abb5-123">*Rifiutare* messaggio hello, causando l'IoT Hub tooset è toohello **superato** stato.</span><span class="sxs-lookup"><span data-stu-id="7abb5-123">*Reject* hello message, which causes IoT Hub tooset it toohello **Deadlettered** state.</span></span> <span data-ttu-id="7abb5-124">I dispositivi che si connettono tramite il protocollo MQTT hello Impossibile rifiutare i messaggi da cloud a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-124">Devices that connect over hello MQTT protocol cannot reject cloud-to-device messages.</span></span>
* <span data-ttu-id="7abb5-125">*Abbandonare* messaggio hello, causando l'IoT Hub messaggio hello tooput nuovamente nella coda di hello, con stato hello impostato troppo**accodati**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-125">*Abandon* hello message, which causes IoT Hub tooput hello message back in hello queue, with hello state set too**Enqueued**.</span></span>

<span data-ttu-id="7abb5-126">Un thread potrebbe non riuscire tooprocess un messaggio senza notifiche all'IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7abb5-126">A thread could fail tooprocess a message without notifying IoT Hub.</span></span> <span data-ttu-id="7abb5-127">Messaggi automaticamente in questo caso, eseguire la transizione da hello **invisibile** stato nascosto toohello **accodati** stato dopo un *timeout di visibilità (o blocco)*.</span><span class="sxs-lookup"><span data-stu-id="7abb5-127">In this case, messages automatically transition from hello **Invisible** state back toohello **Enqueued** state after a *visibility (or lock) timeout*.</span></span> <span data-ttu-id="7abb5-128">il valore predefinito Hello di questo timeout è un minuto.</span><span class="sxs-lookup"><span data-stu-id="7abb5-128">hello default value of this timeout is one minute.</span></span>

<span data-ttu-id="7abb5-129">Un messaggio può eseguire la transizione tra hello **accodati** e **invisibile** stati, hello al massimo, numero di volte specificato in hello **max consegne** proprietà IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7abb5-129">A message can transition between hello **Enqueued** and **Invisible** states for, at most, hello number of times specified in hello **max delivery count** property on IoT Hub.</span></span> <span data-ttu-id="7abb5-130">Dopo che il numero di transizioni, IoT Hub Imposta stato hello del messaggio hello troppo**superato**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-130">After that number of transitions, IoT Hub sets hello state of hello message too**Deadlettered**.</span></span> <span data-ttu-id="7abb5-131">Analogamente, l'IoT Hub consente di impostare hello stato di un messaggio troppo**superato** dopo la scadenza (vedere [ora toolive][lnk-ttl]).</span><span class="sxs-lookup"><span data-stu-id="7abb5-131">Similarly, IoT Hub sets hello state of a message too**Deadlettered** after its expiration time (see [Time toolive][lnk-ttl]).</span></span>

<span data-ttu-id="7abb5-132">Hello [come toosend cloud a dispositivo messaggi con l'IoT Hub] [ lnk-c2d-tutorial] Mostra come i messaggi da cloud a dispositivo toosend da hello cloud e ricevano in un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-132">hello [How toosend cloud-to-device messages with IoT Hub][lnk-c2d-tutorial] shows you how toosend cloud-to-device messages from hello cloud and receive them on a device.</span></span>

<span data-ttu-id="7abb5-133">In genere, un dispositivo quando verrà completato un messaggio da cloud a dispositivo hello perdita del messaggio hello non influisce sulla logica dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-133">Typically, a device completes a cloud-to-device message when hello loss of hello message does not affect hello application logic.</span></span> <span data-ttu-id="7abb5-134">Quando ad esempio, dispositivo hello è resa persistente in locale il contenuto del messaggio hello o è stata completata con un'operazione.</span><span class="sxs-lookup"><span data-stu-id="7abb5-134">For example, when hello device has persisted hello message content locally or has successfully executed an operation.</span></span> <span data-ttu-id="7abb5-135">messaggio Hello Impossibile contengono anche informazioni temporanee, il cui perdita non influirebbe funzionalità hello di un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-135">hello message could also carry transient information, whose loss would not impact hello functionality of hello application.</span></span> <span data-ttu-id="7abb5-136">In alcuni casi, per l'attività a esecuzione prolungata, è possibile completare messaggio hello del cloud a dispositivo dopo la persistenza hello descrizione dell'attività nell'archivio locale.</span><span class="sxs-lookup"><span data-stu-id="7abb5-136">Sometimes, for long-running tasks, you can complete hello cloud-to-device message after persisting hello task description in local storage.</span></span> <span data-ttu-id="7abb5-137">È quindi possibile notificare hello soluzione back-end con uno o più messaggi da dispositivo a cloud in varie fasi di avanzamento dell'attività hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-137">Then you can notify hello solution back end with one or more device-to-cloud messages at various stages of progress of hello task.</span></span>

## <a name="message-expiration-time-toolive"></a><span data-ttu-id="7abb5-138">Scadenza del messaggio (ora toolive)</span><span class="sxs-lookup"><span data-stu-id="7abb5-138">Message expiration (time toolive)</span></span>

<span data-ttu-id="7abb5-139">Ogni messaggio da cloud a dispositivo ha una scadenza.</span><span class="sxs-lookup"><span data-stu-id="7abb5-139">Every cloud-to-device message has an expiration time.</span></span> <span data-ttu-id="7abb5-140">Questa volta viene impostata dal servizio hello (in hello **ExpiryTimeUtc** proprietà), o dall'IoT Hub utilizzando hello predefinita *ora toolive* specificato come una proprietà dell'IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7abb5-140">This time is set either by hello service (in hello **ExpiryTimeUtc** property), or by IoT Hub using hello default *time toolive* specified as an IoT Hub property.</span></span> <span data-ttu-id="7abb5-141">Vedere [Opzioni di configurazione da cloud a dispositivo][lnk-c2d-configuration].</span><span class="sxs-lookup"><span data-stu-id="7abb5-141">See [Cloud-to-device configuration options][lnk-c2d-configuration].</span></span>

<span data-ttu-id="7abb5-142">Un vantaggio di tootake modo comune di scadenza del messaggio e di evitare l'invio di messaggi toodisconnected dispositivi, è tooset toolive valori di ora breve.</span><span class="sxs-lookup"><span data-stu-id="7abb5-142">A common way tootake advantage of message expiration and avoid sending messages toodisconnected devices, is tooset short time toolive values.</span></span> <span data-ttu-id="7abb5-143">Questo approccio consente di ottenere hello stesso risultato a quella di stato di connessione del dispositivo hello, pur essendo più efficiente.</span><span class="sxs-lookup"><span data-stu-id="7abb5-143">This approach achieves hello same result as maintaining hello device connection state, while being more efficient.</span></span> <span data-ttu-id="7abb5-144">Quando si richiede l'acknowledgement dei messaggi, l'IoT Hub notifica quali dispositivi sono in grado di tooreceive messaggi e i dispositivi che non sono in linea o non sono riuscita.</span><span class="sxs-lookup"><span data-stu-id="7abb5-144">When you request message acknowledgements, IoT Hub notifies you which devices are able tooreceive messages, and which devices are not online or have failed.</span></span>

## <a name="message-feedback"></a><span data-ttu-id="7abb5-145">Commenti sui messaggi</span><span class="sxs-lookup"><span data-stu-id="7abb5-145">Message feedback</span></span>

<span data-ttu-id="7abb5-146">Quando si invia un messaggio da cloud a dispositivo, il servizio hello può richiedere il recapito di hello del feedback per ogni messaggio riguardanti hello stato finale di tale messaggio.</span><span class="sxs-lookup"><span data-stu-id="7abb5-146">When you send a cloud-to-device message, hello service can request hello delivery of per-message feedback regarding hello final state of that message.</span></span>

| <span data-ttu-id="7abb5-147">Proprietà Ack</span><span class="sxs-lookup"><span data-stu-id="7abb5-147">Ack property</span></span> | <span data-ttu-id="7abb5-148">Comportamento</span><span class="sxs-lookup"><span data-stu-id="7abb5-148">Behavior</span></span> |
| ------------ | -------- |
| <span data-ttu-id="7abb5-149">**positive**</span><span class="sxs-lookup"><span data-stu-id="7abb5-149">**positive**</span></span> | <span data-ttu-id="7abb5-150">IoT Hub genera un messaggio di commenti e suggerimenti, se e solo se il messaggio da cloud a dispositivo hello raggiunto hello **completato** stato.</span><span class="sxs-lookup"><span data-stu-id="7abb5-150">IoT Hub generates a feedback message if, and only if, hello cloud-to-device message reached hello **Completed** state.</span></span> |
| <span data-ttu-id="7abb5-151">**negative**</span><span class="sxs-lookup"><span data-stu-id="7abb5-151">**negative**</span></span> | <span data-ttu-id="7abb5-152">IoT Hub genera un messaggio di commenti e suggerimenti, se e solo se, messaggio hello del cloud a dispositivo raggiunge hello **superato** stato.</span><span class="sxs-lookup"><span data-stu-id="7abb5-152">IoT Hub generates a feedback message, if and only if, hello cloud-to-device message reaches hello **Deadlettered** state.</span></span> |
| <span data-ttu-id="7abb5-153">**full**</span><span class="sxs-lookup"><span data-stu-id="7abb5-153">**full**</span></span>     | <span data-ttu-id="7abb5-154">L'hub IoT genera un messaggio di commenti in entrambi i casi.</span><span class="sxs-lookup"><span data-stu-id="7abb5-154">IoT Hub generates a feedback message in either case.</span></span> |

<span data-ttu-id="7abb5-155">Se **Ack** è **completo**e non ricevi un messaggio di commenti e suggerimenti, significa che tale messaggio hello del feedback è scaduto.</span><span class="sxs-lookup"><span data-stu-id="7abb5-155">If **Ack** is **full**, and you don't receive a feedback message, it means that hello feedback message expired.</span></span> <span data-ttu-id="7abb5-156">servizio Hello non è possibile sapere quale messaggio originale toohello verificato anomalo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-156">hello service can't know what happened toohello original message.</span></span> <span data-ttu-id="7abb5-157">In pratica, un servizio deve garantire che sia possibile elaborare i commenti e suggerimenti hello prima della scadenza.</span><span class="sxs-lookup"><span data-stu-id="7abb5-157">In practice, a service should ensure that it can process hello feedback before it expires.</span></span> <span data-ttu-id="7abb5-158">l'ora di scadenza massimo Hello è due giorni, che consente una notevole quantità di tempo tooget hello servizio eseguire di nuovo se si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="7abb5-158">hello maximum expiry time is two days, which allows plenty of time tooget hello service running again if a failure occurs.</span></span>

<span data-ttu-id="7abb5-159">Come illustrato nella sezione [Endpoint][lnk-endpoints], l'hub IoT recapita commenti sotto forma di messaggi tramite un endpoint per servizio (**/messages/servicebound/feedback**).</span><span class="sxs-lookup"><span data-stu-id="7abb5-159">As explained in [Endpoints][lnk-endpoints], IoT Hub delivers feedback through a service-facing endpoint (**/messages/servicebound/feedback**) as messages.</span></span> <span data-ttu-id="7abb5-160">Hello semantica per la ricezione di commenti e suggerimenti hello uguale a quello di messaggi da cloud a dispositivo e avere hello stesso [ciclo di vita del messaggio][lnk-lifecycle].</span><span class="sxs-lookup"><span data-stu-id="7abb5-160">hello semantics for receiving feedback are hello same as for cloud-to-device messages, and have hello same [Message lifecycle][lnk-lifecycle].</span></span> <span data-ttu-id="7abb5-161">Quando possibile, messaggi di feedback viene eseguita in batch in un singolo messaggio, con hello seguente formato:</span><span class="sxs-lookup"><span data-stu-id="7abb5-161">Whenever possible, message feedback is batched in a single message, with hello following format:</span></span>

| <span data-ttu-id="7abb5-162">Proprietà</span><span class="sxs-lookup"><span data-stu-id="7abb5-162">Property</span></span>     | <span data-ttu-id="7abb5-163">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7abb5-163">Description</span></span> |
| ------------ | ----------- |
| <span data-ttu-id="7abb5-164">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="7abb5-164">EnqueuedTime</span></span> | <span data-ttu-id="7abb5-165">Timestamp che indica quando è stato creato il messaggio hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-165">Timestamp indicating when hello message was created.</span></span> |
| <span data-ttu-id="7abb5-166">UserId</span><span class="sxs-lookup"><span data-stu-id="7abb5-166">UserId</span></span>       | `{iot hub name}` |
| <span data-ttu-id="7abb5-167">ContentType</span><span class="sxs-lookup"><span data-stu-id="7abb5-167">ContentType</span></span>  | `application/vnd.microsoft.iothub.feedback.json` |

<span data-ttu-id="7abb5-168">corpo Hello è una matrice JSON serializzato di record, ciascuno con hello le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="7abb5-168">hello body is a JSON-serialized array of records, each with hello following properties:</span></span>

| <span data-ttu-id="7abb5-169">Proprietà</span><span class="sxs-lookup"><span data-stu-id="7abb5-169">Property</span></span>           | <span data-ttu-id="7abb5-170">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7abb5-170">Description</span></span> |
| ------------------ | ----------- |
| <span data-ttu-id="7abb5-171">EnqueuedTimeUtc</span><span class="sxs-lookup"><span data-stu-id="7abb5-171">EnqueuedTimeUtc</span></span>    | <span data-ttu-id="7abb5-172">Timestamp che indica quando si è verificato il risultato di hello del messaggio hello.</span><span class="sxs-lookup"><span data-stu-id="7abb5-172">Timestamp indicating when hello outcome of hello message happened.</span></span> <span data-ttu-id="7abb5-173">Ad esempio, hello periferica completato o messaggio hello è scaduto.</span><span class="sxs-lookup"><span data-stu-id="7abb5-173">For example, hello device completed or hello message expired.</span></span> |
| <span data-ttu-id="7abb5-174">OriginalMessageId</span><span class="sxs-lookup"><span data-stu-id="7abb5-174">OriginalMessageId</span></span>  | <span data-ttu-id="7abb5-175">**MessageId** toowhich cloud a dispositivo messaggio hello queste informazioni di commenti e suggerimenti si riferiscano.</span><span class="sxs-lookup"><span data-stu-id="7abb5-175">**MessageId** of hello cloud-to-device message toowhich this feedback information relates.</span></span> |
| <span data-ttu-id="7abb5-176">StatusCode</span><span class="sxs-lookup"><span data-stu-id="7abb5-176">StatusCode</span></span>         | <span data-ttu-id="7abb5-177">Stringa obbligatoria.</span><span class="sxs-lookup"><span data-stu-id="7abb5-177">Required string.</span></span> <span data-ttu-id="7abb5-178">Usato nei messaggi con commenti generati dall'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="7abb5-178">Used in feedback messages generated by IoT Hub.</span></span> <br/> <span data-ttu-id="7abb5-179">'Operazione riuscita'</span><span class="sxs-lookup"><span data-stu-id="7abb5-179">'Success'</span></span> <br/> <span data-ttu-id="7abb5-180">'Scaduto'</span><span class="sxs-lookup"><span data-stu-id="7abb5-180">'Expired'</span></span> <br/> <span data-ttu-id="7abb5-181">'Numero di distribuzioni superato'</span><span class="sxs-lookup"><span data-stu-id="7abb5-181">'DeliveryCountExceeded'</span></span> <br/> <span data-ttu-id="7abb5-182">'Rifiutato'</span><span class="sxs-lookup"><span data-stu-id="7abb5-182">'Rejected'</span></span> <br/> <span data-ttu-id="7abb5-183">'Eliminato definitivamente'</span><span class="sxs-lookup"><span data-stu-id="7abb5-183">'Purged'</span></span> |
| <span data-ttu-id="7abb5-184">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7abb5-184">Description</span></span>        | <span data-ttu-id="7abb5-185">Valori stringa per **StatusCode**.</span><span class="sxs-lookup"><span data-stu-id="7abb5-185">String values for **StatusCode**.</span></span> |
| <span data-ttu-id="7abb5-186">deviceId</span><span class="sxs-lookup"><span data-stu-id="7abb5-186">DeviceId</span></span>           | <span data-ttu-id="7abb5-187">**DeviceId** del dispositivo di destinazione hello di toowhich cloud a dispositivo messaggio hello si riferisce questo frammento di commenti e suggerimenti.</span><span class="sxs-lookup"><span data-stu-id="7abb5-187">**DeviceId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |
| <span data-ttu-id="7abb5-188">DeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="7abb5-188">DeviceGenerationId</span></span> | <span data-ttu-id="7abb5-189">**DeviceGenerationId** del dispositivo di destinazione hello di toowhich cloud a dispositivo messaggio hello si riferisce questo frammento di commenti e suggerimenti.</span><span class="sxs-lookup"><span data-stu-id="7abb5-189">**DeviceGenerationId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |

<span data-ttu-id="7abb5-190">servizio Hello è necessario specificare un **MessageId** per hello cloud a dispositivo messaggio toocorrelate in grado di toobe il feedback con messaggio originale.</span><span class="sxs-lookup"><span data-stu-id="7abb5-190">hello service must specify a **MessageId** for hello cloud-to-device message toobe able toocorrelate its feedback with hello original message.</span></span>

<span data-ttu-id="7abb5-191">Hello esempio seguente viene illustrato hello corpo di un messaggio di commenti e suggerimenti.</span><span class="sxs-lookup"><span data-stu-id="7abb5-191">hello following example shows hello body of a feedback message.</span></span>

```json
[
  {
    "OriginalMessageId": "0987654321",
    "EnqueuedTimeUtc": "2015-07-28T16:24:48.789Z",
    "StatusCode": 0,
    "Description": "Success",
    "DeviceId": "123",
    "DeviceGenerationId": "abcdefghijklmnopqrstuvwxyz"
  },
  {
    ...
  },
  ...
]
```

## <a name="cloud-to-device-configuration-options"></a><span data-ttu-id="7abb5-192">Opzioni di configurazione da cloud a dispositivo</span><span class="sxs-lookup"><span data-stu-id="7abb5-192">Cloud-to-device configuration options</span></span>

<span data-ttu-id="7abb5-193">Ogni hub IoT espone hello le opzioni di configurazione per la messaggistica cloud a dispositivo seguenti:</span><span class="sxs-lookup"><span data-stu-id="7abb5-193">Each IoT hub exposes hello following configuration options for cloud-to-device messaging:</span></span>

| <span data-ttu-id="7abb5-194">Proprietà</span><span class="sxs-lookup"><span data-stu-id="7abb5-194">Property</span></span>                  | <span data-ttu-id="7abb5-195">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7abb5-195">Description</span></span> | <span data-ttu-id="7abb5-196">Intervallo e valore predefinito</span><span class="sxs-lookup"><span data-stu-id="7abb5-196">Range and default</span></span> |
| ------------------------- | ----------- | ----------------- |
| <span data-ttu-id="7abb5-197">defaultTtlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="7abb5-197">defaultTtlAsIso8601</span></span>       | <span data-ttu-id="7abb5-198">Durata (TTL) predefinita per messaggi da cloud a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7abb5-198">Default TTL for cloud-to-device messages.</span></span> | <span data-ttu-id="7abb5-199">Intervallo ISO_8601 backup too2D (minimo 1 minuto).</span><span class="sxs-lookup"><span data-stu-id="7abb5-199">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="7abb5-200">Predefinito: 1 ora.</span><span class="sxs-lookup"><span data-stu-id="7abb5-200">Default: 1 hour.</span></span> |
| <span data-ttu-id="7abb5-201">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="7abb5-201">maxDeliveryCount</span></span>          | <span data-ttu-id="7abb5-202">Numero massimo di recapiti per code da cloud a dispositivo per i singoli dispositivi.</span><span class="sxs-lookup"><span data-stu-id="7abb5-202">Maximum delivery count for cloud-to-device per-device queues.</span></span> | <span data-ttu-id="7abb5-203">1 too100.</span><span class="sxs-lookup"><span data-stu-id="7abb5-203">1 too100.</span></span> <span data-ttu-id="7abb5-204">Predefinito: 10.</span><span class="sxs-lookup"><span data-stu-id="7abb5-204">Default: 10.</span></span> |
| <span data-ttu-id="7abb5-205">feedback.ttlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="7abb5-205">feedback.ttlAsIso8601</span></span>     | <span data-ttu-id="7abb5-206">Conservazione per messaggi con commenti diretti al servizio.</span><span class="sxs-lookup"><span data-stu-id="7abb5-206">Retention for service-bound feedback messages.</span></span> | <span data-ttu-id="7abb5-207">Intervallo ISO_8601 backup too2D (minimo 1 minuto).</span><span class="sxs-lookup"><span data-stu-id="7abb5-207">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="7abb5-208">Predefinito: 1 ora.</span><span class="sxs-lookup"><span data-stu-id="7abb5-208">Default: 1 hour.</span></span> |
| <span data-ttu-id="7abb5-209">feedback.maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="7abb5-209">feedback.maxDeliveryCount</span></span> |<span data-ttu-id="7abb5-210">Numero massimo di recapiti per la coda di commenti.</span><span class="sxs-lookup"><span data-stu-id="7abb5-210">Maximum delivery count for feedback queue.</span></span> | <span data-ttu-id="7abb5-211">1 too100.</span><span class="sxs-lookup"><span data-stu-id="7abb5-211">1 too100.</span></span> <span data-ttu-id="7abb5-212">Predefinito: 100.</span><span class="sxs-lookup"><span data-stu-id="7abb5-212">Default: 100.</span></span> |

<span data-ttu-id="7abb5-213">Per ulteriori informazioni su come tooset queste opzioni di configurazione, vedere [hub IoT creare][lnk-portal].</span><span class="sxs-lookup"><span data-stu-id="7abb5-213">For more information about how tooset these configuration options, see [Create IoT hubs][lnk-portal].</span></span>

## <a name="next-steps"></a><span data-ttu-id="7abb5-214">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="7abb5-214">Next steps</span></span>

<span data-ttu-id="7abb5-215">Per informazioni sul SDK di hello è possibile utilizzare i messaggi da cloud a dispositivo tooreceive, vedere [Azure IoT SDK][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="7abb5-215">For information about hello SDKs you can use tooreceive cloud-to-device messages, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="7abb5-216">tootry out la ricezione di messaggi da cloud a dispositivo, vedere hello [inviare cloud a dispositivo] [ lnk-c2d-tutorial] esercitazione.</span><span class="sxs-lookup"><span data-stu-id="7abb5-216">tootry out receiving cloud-to-device messages, see hello [Send cloud-to-device][lnk-c2d-tutorial] tutorial.</span></span>

[img-lifecycle]: ./media/iot-hub-devguide-messages-c2d/lifecycle.png

[lnk-portal]: iot-hub-create-through-portal.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-ttl]: #message-expiration-time-to-live
[lnk-c2d-configuration]: #cloud-to-device-configuration-options
[lnk-lifecycle]: #message-lifecycle
[lnk-c2d-tutorial]: iot-hub-csharp-csharp-c2d.md
