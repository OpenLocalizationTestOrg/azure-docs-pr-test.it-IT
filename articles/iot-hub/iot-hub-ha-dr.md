---
title: "ripristino di emergenza e disponibilità elevato IoT Hub aaaAzure | Documenti Microsoft"
description: "Vengono descritte le funzionalità Azure e l'IoT Hub hello che consentono di toobuild soluzioni a disponibilità elevata a Azure IoT con funzionalità di ripristino di emergenza."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="5be05-103">Disponibilità elevata e ripristino di emergenza dell'hub IoT</span><span class="sxs-lookup"><span data-stu-id="5be05-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="5be05-104">Come un servizio di Azure IoT Hub fornisce disponibilità elevata (HA) utilizzando ridondanze a livello di area di Azure hello, senza operazioni aggiuntive richieste dalla soluzione hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="5be05-105">piattaforma Microsoft Azure Hello include anche funzionalità toohelp la compilazione delle soluzioni con funzionalità di ripristino di emergenza di emergenza o di disponibilità tra più aree.</span><span class="sxs-lookup"><span data-stu-id="5be05-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="5be05-106">Se si desidera globale tooprovide, la disponibilità elevata per i dispositivi o utenti, tra più aree di progettazione e preparare le soluzioni tootake sfruttare queste funzionalità di ripristino di emergenza di Azure.</span><span class="sxs-lookup"><span data-stu-id="5be05-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="5be05-107">articolo Hello [informazioni tecniche sulla continuità aziendale Azure](../resiliency/resiliency-technical-guidance.md) vengono descritte le funzionalità predefinite hello in Azure per la continuità aziendale e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="5be05-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="5be05-108">Hello [il ripristino di emergenza e disponibilità elevata per applicazioni Azure] [ Disaster recovery and high availability for Azure applications] documento fornisce indicazioni sull'architettura sulle strategie per applicazioni Azure tooachieve a disponibilità elevata e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="5be05-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="5be05-109">Ripristino di emergenza dell'hub IoT di Azure</span><span class="sxs-lookup"><span data-stu-id="5be05-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="5be05-110">In aggiunta a disponibilità elevata toointra area, IoT Hub implementi meccanismi di failover per il ripristino di emergenza che non richiedono alcun intervento da parte dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="5be05-111">Ripristino di emergenza Hub IoT automatico viene avviato e ha un obiettivo del tempo di ripristino (RTO) di 2-26 ore e hello seguenti obiettivi punto di ripristino (RPO).</span><span class="sxs-lookup"><span data-stu-id="5be05-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="5be05-112">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="5be05-112">Functionality</span></span> | <span data-ttu-id="5be05-113">RPO</span><span class="sxs-lookup"><span data-stu-id="5be05-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="5be05-114">Disponibilità del servizio per le operazioni del Registro di sistema e di comunicazione</span><span class="sxs-lookup"><span data-stu-id="5be05-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="5be05-115">Possibile perdita di CName</span><span class="sxs-lookup"><span data-stu-id="5be05-115">Possible CName loss</span></span> |
| <span data-ttu-id="5be05-116">Dati sull'identità nel registro delle identità</span><span class="sxs-lookup"><span data-stu-id="5be05-116">Identity data in identity registry</span></span> |<span data-ttu-id="5be05-117">Perdita di dati da 0 a 5 minuti</span><span class="sxs-lookup"><span data-stu-id="5be05-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="5be05-118">Messaggi da dispositivo a cloud</span><span class="sxs-lookup"><span data-stu-id="5be05-118">Device-to-cloud messages</span></span> |<span data-ttu-id="5be05-119">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="5be05-119">All unread messages are lost</span></span> |
| <span data-ttu-id="5be05-120">Messaggi di monitoraggio delle operazioni</span><span class="sxs-lookup"><span data-stu-id="5be05-120">Operations monitoring messages</span></span> |<span data-ttu-id="5be05-121">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="5be05-121">All unread messages are lost</span></span> |
| <span data-ttu-id="5be05-122">Messaggi da cloud a dispositivo</span><span class="sxs-lookup"><span data-stu-id="5be05-122">Cloud-to-device messages</span></span> |<span data-ttu-id="5be05-123">Perdita di dati da 0 a 5 minuti</span><span class="sxs-lookup"><span data-stu-id="5be05-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="5be05-124">Coda di commenti da cloud a dispositivo</span><span class="sxs-lookup"><span data-stu-id="5be05-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="5be05-125">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="5be05-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="5be05-126">Failover di area con l'hub IoT</span><span class="sxs-lookup"><span data-stu-id="5be05-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="5be05-127">Trattare di topologie di distribuzione nelle soluzioni IoT è di fuori ambito hello di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="5be05-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="5be05-128">Hello descritti hello *internazionali failover* modello di distribuzione allo scopo hello di elevata disponibilità e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="5be05-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="5be05-129">In un modello di failover regionale, hello soluzione back-end esegue principalmente nel percorso di un Data Center e un hub IoT secondario e un back-end vengono distribuiti in un'altra posizione Data Center.</span><span class="sxs-lookup"><span data-stu-id="5be05-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="5be05-130">Se l'hub IoT hello in Data Center principale hello subisce un'interruzione o viene interrotta la connettività di rete hello dal Data Center principale hello dispositivo toohello.</span><span class="sxs-lookup"><span data-stu-id="5be05-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="5be05-131">I dispositivi usano un endpoint del servizio secondario quando non è raggiungibile gateway primario hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="5be05-132">Con una capacità di failover tra più aree, disponibilità di una soluzione hello possono essere migliorate oltre hello un'elevata disponibilità una singola area.</span><span class="sxs-lookup"><span data-stu-id="5be05-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="5be05-133">In generale, tooimplement un modello di failover di area con l'IoT Hub, sono necessari i seguenti elementi di hello:</span><span class="sxs-lookup"><span data-stu-id="5be05-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="5be05-134">**Un hub IoT e un dispositivo logica di routing secondario**: nel caso di hello di un'interruzione del servizio nell'area primaria, i dispositivi è necessario avviare connessione area secondaria di tooyour.</span><span class="sxs-lookup"><span data-stu-id="5be05-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="5be05-135">Natura hello in grado di riconoscere lo stato della maggior parte dei servizi interessati, è comune per processo di failover tra area hello tootrigger amministratori soluzione.</span><span class="sxs-lookup"><span data-stu-id="5be05-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="5be05-136">Hello migliore modo toocommunicate hello nuovo endpoint toodevices, mantenendo il controllo del processo di hello è toohave li controllare regolarmente un *concierge* servizio endpoint attivo corrente hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="5be05-137">Hello concierge servizio può essere un'applicazione web che viene replicata e mantenuta raggiungibile utilizzando tecniche di reindirizzamento di DNS (ad esempio, usando [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="5be05-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="5be05-138">**La replica del Registro di sistema di identità** -toobe utilizzabile, hub IoT secondario hello deve contenere tutte le identità del dispositivo che è possono connettere la soluzione toohello.</span><span class="sxs-lookup"><span data-stu-id="5be05-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="5be05-139">soluzione Hello deve mantenere i backup di replica geografica delle identità del dispositivo e caricarli hub IoT secondario toohello prima di passare l'endpoint attivo di hello per i dispositivi hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="5be05-140">funzionalità di esportazione identità dispositivo Hello dell'IoT Hub è utile in questo contesto.</span><span class="sxs-lookup"><span data-stu-id="5be05-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="5be05-141">Per altre informazioni, vedere la [Guida per gli sviluppatori dell'hub IoT: registro delle identità][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="5be05-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="5be05-142">**L'unione logica** : se area primaria hello diventa nuovamente disponibile, tutti hello stato e dati che sono stati creati nel sito secondario hello devono essere migrati toohello indietro di area primaria.</span><span class="sxs-lookup"><span data-stu-id="5be05-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="5be05-143">Questo stato e i dati si riferisce principalmente toodevice identità e i metadati dell'applicazione, che devono essere unito con l'hub IoT hello primario e di altri archivi di specifiche dell'applicazione nell'area primaria hello.</span><span class="sxs-lookup"><span data-stu-id="5be05-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="5be05-144">toosimplify questo passaggio, è consigliabile utilizzare operazioni idempotente.</span><span class="sxs-lookup"><span data-stu-id="5be05-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="5be05-145">Operazioni idempotente di ridurre al minimo hello effetti collaterali da eventuale distribuzione uniforme di hello degli eventi e dai duplicati o in ordine recapito dei messaggi di eventi.</span><span class="sxs-lookup"><span data-stu-id="5be05-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="5be05-146">Inoltre, la logica dell'applicazione hello deve essere progettato tootolerate potenziali incoerenze o "leggermente" lo stato di Data.</span><span class="sxs-lookup"><span data-stu-id="5be05-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="5be05-147">Questa situazione può verificarsi a causa di toohello ulteriore tempo impiegato per il sistema hello troppo "correzione" in base agli obiettivi punto di ripristino (RPO).</span><span class="sxs-lookup"><span data-stu-id="5be05-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="5be05-148">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="5be05-148">Next steps</span></span>
<span data-ttu-id="5be05-149">Seguire questi toolearn collegamenti ulteriori informazioni sull'IoT Hub di Azure:</span><span class="sxs-lookup"><span data-stu-id="5be05-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="5be05-150">[Introduzione agli hub IoT (esercitazione)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="5be05-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="5be05-151">[Che cos'è l'hub IoT di Azure?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="5be05-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
