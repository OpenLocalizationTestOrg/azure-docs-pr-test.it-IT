---
title: Backup di Azure per carichi di lavoro SQL Server con il server di Backup di Azure | Documentazione Microsoft
description: Introduzione al backup dei database SQL Server tramite il server di Backup di Azure
services: backup
documentationcenter: 
author: pvrk
manager: Shivamg
editor: 
ms.assetid: c8b1f7ec-26b1-4ef0-a3f2-91aec959daea
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: pullabhk
ms.openlocfilehash: 2af9ebaa8f52690ed63406cbd85b77544d2d900d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="back-up-sql-server-to-azure-with-azure-backup-server"></a><span data-ttu-id="9039d-103">Eseguire il backup di SQL Server in Azure con il server di Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="9039d-103">Back up SQL Server to Azure With Azure Backup Server</span></span>
<span data-ttu-id="9039d-104">Questo articolo descrive la procedura di configurazione per il backup dei database SQL Server mediante il server di Backup di Microsoft Azure (MABS).</span><span class="sxs-lookup"><span data-stu-id="9039d-104">This article leads you through the configuration steps for backup of SQL Server databases using Microsoft Azure Backup Server (MABS).</span></span>

<span data-ttu-id="9039d-105">La gestione delle operazioni di backup del database SQL server in Azure e di ripristino da Azure prevede tre passaggi:</span><span class="sxs-lookup"><span data-stu-id="9039d-105">The management of SQL Server database backup to Azure and recovery from Azure involves three steps:</span></span>

1. <span data-ttu-id="9039d-106">Creare un criterio di backup per proteggere i database SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-106">Create a backup policy to protect SQL Server databases to Azure.</span></span>
2. <span data-ttu-id="9039d-107">Creare copie di backup su richiesta in Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-107">Create on-demand backup copies to Azure.</span></span>
3. <span data-ttu-id="9039d-108">Ripristinare il database da Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-108">Recover the database from Azure.</span></span>

## <a name="before-you-start"></a><span data-ttu-id="9039d-109">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="9039d-109">Before you start</span></span>
<span data-ttu-id="9039d-110">Prima di iniziare, assicurarsi di avere [installato e preparato il server di Backup di Azure](backup-azure-microsoft-azure-backup.md).</span><span class="sxs-lookup"><span data-stu-id="9039d-110">Before you begin, ensure that you have [installed and prepared the Azure Backup Server](backup-azure-microsoft-azure-backup.md).</span></span>

## <a name="create-a-backup-policy-to-protect-sql-server-databases-to-azure"></a><span data-ttu-id="9039d-111">Creare un criterio di backup per proteggere i database SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-111">Create a backup policy to protect SQL Server databases to Azure</span></span>
1. <span data-ttu-id="9039d-112">Nell'interfaccia utente del server di Backup di Azure fare clic sull'area di lavoro **Protezione**.</span><span class="sxs-lookup"><span data-stu-id="9039d-112">On the Azure Backup Server UI, click the **Protection** workspace.</span></span>
2. <span data-ttu-id="9039d-113">Nella barra degli strumenti, fare clic su **Nuovo** per creare un nuovo gruppo di protezione.</span><span class="sxs-lookup"><span data-stu-id="9039d-113">On the tool ribbon, click **New** to create a new protection group.</span></span>

    ![Creazione di un gruppo di protezione](./media/backup-azure-backup-sql/protection-group.png)
3. <span data-ttu-id="9039d-115">MABS mostra la schermata iniziale con le istruzioni per creare un **gruppo protezione dati**.</span><span class="sxs-lookup"><span data-stu-id="9039d-115">MABS shows the start screen with the guidance on creating a **Protection Group**.</span></span> <span data-ttu-id="9039d-116">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-116">Click **Next**.</span></span>
4. <span data-ttu-id="9039d-117">Selezione dei **Server**.</span><span class="sxs-lookup"><span data-stu-id="9039d-117">Select **Servers**.</span></span>

    ![Selezione del tipo di gruppo di protezione "Server"](./media/backup-azure-backup-sql/pg-servers.png)
5. <span data-ttu-id="9039d-119">Espandere la macchina del server SQL in cui sono presenti i database da includere nel backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-119">Expand the SQL Server machine where the databases to be backed up are present.</span></span> <span data-ttu-id="9039d-120">MABS mostra diverse origini dati di cui è possibile eseguire il backup in quel server.</span><span class="sxs-lookup"><span data-stu-id="9039d-120">MABS shows various data sources that can be backed up from that server.</span></span> <span data-ttu-id="9039d-121">Espandere **Tutti i server SQL** e selezionare i database (in questo caso sono stati selezionati ReportServer$MSDPM2012 e ReportServer$MSDPM2012TempDB) di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-121">Expand the **All SQL Shares** and select the databases (in this case we selected ReportServer$MSDPM2012 and ReportServer$MSDPM2012TempDB) to be backed up.</span></span> <span data-ttu-id="9039d-122">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-122">Click **Next**.</span></span>

    ![Selezione del database SQL](./media/backup-azure-backup-sql/pg-databases.png)
6. <span data-ttu-id="9039d-124">Specificare un nome per il gruppo di protezione e selezionare la casella di controllo **Desidero la protezione dati online** .</span><span class="sxs-lookup"><span data-stu-id="9039d-124">Provide a name for the protection group and select the **I want online Protection** checkbox.</span></span>

    ![Metodo di protezione dei dati - disco a breve termine e online in Azure](./media/backup-azure-backup-sql/pg-name.png)
7. <span data-ttu-id="9039d-126">Nella schermata **Specifica obiettivi a breve termine** includere gli input necessari per creare punti di backup sul disco.</span><span class="sxs-lookup"><span data-stu-id="9039d-126">In the **Specify Short-Term Goals** screen, include the necessary inputs to create backup points to disk.</span></span>

    <span data-ttu-id="9039d-127">Come si può vedere nell'immagine, il **Periodo di mantenimento dati** è impostato su *5 giorni* e la **Frequenza di sincronizzazione** è impostata su una volta ogni *15 minuti*, che corrisponde alla frequenza con cui viene eseguito il backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-127">Here we see that **Retention range** is set to *5 days*, **Synchronization frequency** is set to once every *15 minutes* which is the frequency at which backup is taken.</span></span> <span data-ttu-id="9039d-128">**Backup completo rapido** è impostato su *8.00 PM*.</span><span class="sxs-lookup"><span data-stu-id="9039d-128">**Express Full Backup** is set to *8:00 P.M*.</span></span>

    ![Obiettivi a breve termine](./media/backup-azure-backup-sql/pg-shortterm.png)

   > [!NOTE]
   > <span data-ttu-id="9039d-130">Alle 8.00 PM (secondo la schermata di input) viene creato un punto di backup ogni giorno con il trasferimento dei dati modificati rispetto al punto di backup delle 8.00 PM del giorno precedente.</span><span class="sxs-lookup"><span data-stu-id="9039d-130">At 8:00 PM (according to the screen input) a backup point is created every day by transferring the data that has been modified from the previous day’s 8:00 PM backup point.</span></span> <span data-ttu-id="9039d-131">Questo processo è detto **Backup completo rapido**.</span><span class="sxs-lookup"><span data-stu-id="9039d-131">This process is called **Express Full Backup**.</span></span> <span data-ttu-id="9039d-132">Mentre i log delle transazioni vengono sincronizzati ogni 15 minuti, se è necessario ripristinare il database alle 9.00 PM, il punto viene creato riproducendo i log dall'ultimo backup completo rapido (in questo caso le 8.00 PM).</span><span class="sxs-lookup"><span data-stu-id="9039d-132">While the transaction logs are synchronized every 15 minutes, if there is a need to recover the database at 9:00 PM – then the point is created by replaying the logs from the last express full backup point (8pm in this case).</span></span>
   >
   >

8. <span data-ttu-id="9039d-133">Fare clic su **Avanti**</span><span class="sxs-lookup"><span data-stu-id="9039d-133">Click **Next**</span></span>

    <span data-ttu-id="9039d-134">MABS mostra lo spazio di archiviazione complessivo e il potenziale utilizzo dello spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="9039d-134">MABS shows the overall storage space available and the potential disk space utilization.</span></span>

    ![Allocazione dei dischi](./media/backup-azure-backup-sql/pg-storage.png)

    <span data-ttu-id="9039d-136">Per impostazione predefinita, MABS crea un volume per origine dati (database SQL Server) che viene usato per la creazione della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="9039d-136">By default, MABS creates one volume per data source (SQL Server database) which is used for the initial backup copy.</span></span> <span data-ttu-id="9039d-137">Con questo approccio, il gestore dischi logici (LDM) limita la protezione MABS a 300 origini dati (database SQL Server).</span><span class="sxs-lookup"><span data-stu-id="9039d-137">Using this approach, the Logical Disk Manager (LDM) limits MABS protection to 300 data sources (SQL Server databases).</span></span> <span data-ttu-id="9039d-138">Per porre rimedio a questa limitazione, selezionare l'opzione **Condividi percorso dati nel pool di archiviazione DPM**.</span><span class="sxs-lookup"><span data-stu-id="9039d-138">To work around this limitation, select the **Co-locate data in DPM Storage Pool**, option.</span></span> <span data-ttu-id="9039d-139">Grazie a questa opzione, MABS usa un singolo volume per più origini dati, il che consente a MABS di proteggere fino a 2000 database SQL.</span><span class="sxs-lookup"><span data-stu-id="9039d-139">If you use this option, MABS uses a single volume for multiple data sources, which allows MABS to protect up to 2000 SQL databases.</span></span>

    <span data-ttu-id="9039d-140">Selezionando l'opzione **Aumenta automaticamente i volumi**, si consente a MABS di adeguare l'aumento del volume di backup all'aumento dei dati di produzione.</span><span class="sxs-lookup"><span data-stu-id="9039d-140">If **Automatically grow the volumes** option is selected, MABS can account for the increased backup volume as the production data grows.</span></span> <span data-ttu-id="9039d-141">Deselezionando l'opzione **Aumenta automaticamente i volumi**, MABS limiterà lo spazio di archiviazione di backup utilizzato per le origini dati nel gruppo protezione dati.</span><span class="sxs-lookup"><span data-stu-id="9039d-141">If **Automatically grow the volumes** option is not selected, MABS limits the backup storage used to the data sources in the protection group.</span></span>
9. <span data-ttu-id="9039d-142">Gli amministratori possono scegliere di trasferire manualmente il backup iniziale (fuori rete) per evitare la congestione della larghezza di banda oppure di trasferirlo in rete.</span><span class="sxs-lookup"><span data-stu-id="9039d-142">Administrators are given the choice of transferring this initial backup manually (off network) to avoid bandwidth congestion or over the network.</span></span> <span data-ttu-id="9039d-143">Possono anche configurare la data e l'ora di inizio del trasferimento.</span><span class="sxs-lookup"><span data-stu-id="9039d-143">They can also configure the time at which the initial transfer can happen.</span></span> <span data-ttu-id="9039d-144">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-144">Click **Next**.</span></span>

    ![Metodo di replica iniziale](./media/backup-azure-backup-sql/pg-manual.png)

    <span data-ttu-id="9039d-146">La copia di backup iniziale richiede il trasferimento dell'intera origine dati (database SQL Server) dal server di produzione (macchina SQL Server) a MABS.</span><span class="sxs-lookup"><span data-stu-id="9039d-146">The initial backup copy requires transfer of the entire data source (SQL Server database) from production server (SQL Server machine) to MABS.</span></span> <span data-ttu-id="9039d-147">Tali dati potrebbero essere di grandi dimensioni e trasferimento dei dati sulla rete potrebbe superare la larghezza di banda.</span><span class="sxs-lookup"><span data-stu-id="9039d-147">This data might be large, and transferring the data over the network could exceed bandwidth.</span></span> <span data-ttu-id="9039d-148">Per questo motivo, gli amministratori possono scegliere di trasferire il backup iniziale: **manualmente** (usando supporti rimovibili) per evitare la congestione della larghezza di banda o **automaticamente tramite la rete** (ad un orario specificato).</span><span class="sxs-lookup"><span data-stu-id="9039d-148">For this reason, administrators can choose to transfer the initial backup: **Manually** (using removable media) to avoid bandwidth congestion, or **Automatically over the network** (at a specified time).</span></span>

    <span data-ttu-id="9039d-149">Una volta completato il backup iniziale, quelli successivi saranno backup incrementali della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="9039d-149">Once the initial backup is complete, the rest of the backups are incremental backups on the initial backup copy.</span></span> <span data-ttu-id="9039d-150">I backup incrementali tendono a essere di piccole dimensioni e facilmente trasferibili sulla rete.</span><span class="sxs-lookup"><span data-stu-id="9039d-150">Incremental backups tend to be small and are easily transferred across the network.</span></span>
10. <span data-ttu-id="9039d-151">Scegliere quando si vuole eseguire la verifica della coerenza e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-151">Choose when you want the consistency check to run and click **Next**.</span></span>

    ![Verifica coerenza](./media/backup-azure-backup-sql/pg-consistent.png)

    <span data-ttu-id="9039d-153">MABS può eseguire una verifica di coerenza per controllare l'integrità del punto di backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-153">MABS can perform a consistency check to check the integrity of the backup point.</span></span> <span data-ttu-id="9039d-154">Calcola il checksum del file di backup nel server di produzione (macchina SQL Server in questo scenario) e i dati di cui è stato eseguito il backup per quel file in MABS.</span><span class="sxs-lookup"><span data-stu-id="9039d-154">It calculates the checksum of the backup file on the production server (SQL Server machine in this scenario) and the backed-up data for that file at MABS.</span></span> <span data-ttu-id="9039d-155">In caso di conflitto si presuppone che il file di backup in MABS sia danneggiato.</span><span class="sxs-lookup"><span data-stu-id="9039d-155">In the case of a conflict, it is assumed that the backed-up file at MABS is corrupt.</span></span> <span data-ttu-id="9039d-156">MABS corregge i dati di backup inviando i blocchi che equivalgono alla mancata corrispondenza del checksum.</span><span class="sxs-lookup"><span data-stu-id="9039d-156">MABS rectifies the backed-up data by sending the blocks corresponding to the checksum mismatch.</span></span> <span data-ttu-id="9039d-157">Poiché verifica coerenza è un'operazione con esigenze di prestazioni elevate, gli amministratori hanno la possibilità di scegliere se pianificarla o eseguirla automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9039d-157">As the consistency check is a performance-intensive operation, administrators have the option of scheduling the consistency check or running it automatically.</span></span>
11. <span data-ttu-id="9039d-158">Per specificare la protezione online delle origini dati, selezionare i database da proteggere in Azure e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-158">To specify online protection of the datasources, select the databases to be protected to Azure and click **Next**.</span></span>

    ![Selezione delle origini dati](./media/backup-azure-backup-sql/pg-sqldatabases.png)
12. <span data-ttu-id="9039d-160">Gli amministratori possono scegliere le pianificazioni di backup e i criteri di conservazione adatti a soddisfare i criteri dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="9039d-160">Administrators can choose backup schedules and retention policies that suit their organization policies.</span></span>

    ![Pianificazione e conservazione](./media/backup-azure-backup-sql/pg-schedule.png)

    <span data-ttu-id="9039d-162">In questo esempio i backup vengono eseguiti una volta al giorno alle 12.00 PM e alle 8.00 PM (parte in basso della schermata)</span><span class="sxs-lookup"><span data-stu-id="9039d-162">In this example, backups are taken once a day at 12:00 PM and 8 PM (bottom part of the screen)</span></span>

    > [!NOTE]
    > <span data-ttu-id="9039d-163">È consigliabile avere sul disco alcuni punti di ripristino a breve termine per un ripristino rapido.</span><span class="sxs-lookup"><span data-stu-id="9039d-163">It’s a good practice to have a few short-term recovery points on disk, for quick recovery.</span></span> <span data-ttu-id="9039d-164">Questi punti di ripristino vengono usati per il "ripristino operativo".</span><span class="sxs-lookup"><span data-stu-id="9039d-164">These recovery points are used for “operational recovery".</span></span> <span data-ttu-id="9039d-165">Azure è una posizione esterna ottimale con contratti di servizio più elevati e disponibilità garantita.</span><span class="sxs-lookup"><span data-stu-id="9039d-165">Azure serves as a good offsite location with higher SLAs and guaranteed availability.</span></span>
    >
    >

    <span data-ttu-id="9039d-166">**Procedura consigliata**: verificare che i backup di Azure siano pianificati dopo il completamento dei backup su disco locali con DPM.</span><span class="sxs-lookup"><span data-stu-id="9039d-166">**Best Practice**: Make sure that Azure Backups are scheduled after the completion of local disk backups using DPM.</span></span> <span data-ttu-id="9039d-167">Ciò consente di copiare in Azure il backup su disco più recente.</span><span class="sxs-lookup"><span data-stu-id="9039d-167">This enables the latest disk backup to be copied to Azure.</span></span>

13. <span data-ttu-id="9039d-168">Scegliere la pianificazione per i criteri di conservazione.</span><span class="sxs-lookup"><span data-stu-id="9039d-168">Choose the retention policy schedule.</span></span> <span data-ttu-id="9039d-169">Per informazioni dettagliate sul funzionamento dei criteri di conservazione, vedere l'articolo [Usare Backup di Azure per sostituire l'infrastruttura basata su nastro](backup-azure-backup-cloud-as-tape.md).</span><span class="sxs-lookup"><span data-stu-id="9039d-169">The details on how the retention policy works are provided at [Use Azure Backup to replace your tape infrastructure article](backup-azure-backup-cloud-as-tape.md).</span></span>

    ![Criteri di conservazione](./media/backup-azure-backup-sql/pg-retentionschedule.png)

    <span data-ttu-id="9039d-171">In questo esempio:</span><span class="sxs-lookup"><span data-stu-id="9039d-171">In this example:</span></span>

    * <span data-ttu-id="9039d-172">I backup vengono eseguiti una volta al giorno alle 12.00 PM e alle 8.00 PM (parte in basso della schermata) e vengono conservati per 180 giorni.</span><span class="sxs-lookup"><span data-stu-id="9039d-172">Backups are taken once a day at 12:00 PM and 8 PM (bottom part of the screen) and are retained for 180 days.</span></span>
    * <span data-ttu-id="9039d-173">Il backup di sabato alle ore 12:00 P.M.</span><span class="sxs-lookup"><span data-stu-id="9039d-173">The backup on Saturday at 12:00 P.M.</span></span> <span data-ttu-id="9039d-174">viene conservato per 104 settimane</span><span class="sxs-lookup"><span data-stu-id="9039d-174">is retained for 104 weeks</span></span>
    * <span data-ttu-id="9039d-175">Il backup dell'ultimo sabato alle 12.00 P.M.</span><span class="sxs-lookup"><span data-stu-id="9039d-175">The backup on Last Saturday at 12:00 P.M.</span></span> <span data-ttu-id="9039d-176">viene conservato per 60 mesi</span><span class="sxs-lookup"><span data-stu-id="9039d-176">is retained for 60 months</span></span>
    * <span data-ttu-id="9039d-177">Il backup dell'ultimo sabato di marzo alle 12.00 P.M.</span><span class="sxs-lookup"><span data-stu-id="9039d-177">The backup on Last Saturday of March at 12:00 P.M.</span></span> <span data-ttu-id="9039d-178">viene conservato per 10 anni</span><span class="sxs-lookup"><span data-stu-id="9039d-178">is retained for 10 years</span></span>
14. <span data-ttu-id="9039d-179">Fare clic su **Avanti** e selezionare l'opzione appropriata per il trasferimento in Azure della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="9039d-179">Click **Next** and select the appropriate option for transferring the initial backup copy to Azure.</span></span> <span data-ttu-id="9039d-180">È possibile scegliere **Automaticamente tramite la rete** o **Backup offline**.</span><span class="sxs-lookup"><span data-stu-id="9039d-180">You can choose **Automatically over the network** or **Offline Backup**.</span></span>

    * <span data-ttu-id="9039d-181">**automaticamente tramite la rete** i dati di backup vengono trasferiti in Azure in base alla pianificazione scelta per il backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-181">**Automatically over the network** transfers the backup data to Azure as per the schedule chosen for backup.</span></span>
    * <span data-ttu-id="9039d-182">Il funzionamento di **Backup offline** è descritto in [Flusso di lavoro di Backup offline in Backup di Azure](backup-azure-backup-import-export.md).</span><span class="sxs-lookup"><span data-stu-id="9039d-182">How **Offline Backup** works is explained at [Offline Backup workflow in Azure Backup](backup-azure-backup-import-export.md).</span></span>

    <span data-ttu-id="9039d-183">Scegliere il meccanismo di trasferimento pertinente per l'invio ad Azure della copia di backup iniziale e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-183">Choose the relevant transfer mechanism to send the initial backup copy to Azure and click **Next**.</span></span>
15. <span data-ttu-id="9039d-184">Dopo aver esaminato i dettagli dei criteri nella schermata **Riepilogo**, fare clic sul pulsante **Crea gruppo** per completare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9039d-184">Once you review the policy details in the **Summary** screen, click on the **Create group** button to complete the workflow.</span></span> <span data-ttu-id="9039d-185">È possibile fare clic sul pulsante **Chiudi** e monitorare l'avanzamento del processo nell'area di lavoro Monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="9039d-185">You can click the **Close** button and monitor the job progress in Monitoring workspace.</span></span>

    ![Creazione di un gruppo di protezione in corso](./media/backup-azure-backup-sql/pg-summary.png)

## <a name="on-demand-backup-of-a-sql-server-database"></a><span data-ttu-id="9039d-187">Backup su richiesta di un database SQL Server</span><span class="sxs-lookup"><span data-stu-id="9039d-187">On-demand backup of a SQL Server database</span></span>
<span data-ttu-id="9039d-188">Mentre nei passaggi precedenti sono stati creati i criteri di backup, un "punto di ripristino" viene creato solo quando si verifica il primo backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-188">While the previous steps created a backup policy, a “recovery point” is created only when the first backup occurs.</span></span> <span data-ttu-id="9039d-189">Anziché attendere l'avvio dell'Utilità di pianificazione, i passaggi seguenti attivano la creazione manuale di un punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9039d-189">Rather than waiting for the scheduler to kick in, the steps below trigger the creation of a recovery point manually.</span></span>

1. <span data-ttu-id="9039d-190">Prima di creare il punto di ripristino, attendere finché nello stato del gruppo di protezione non viene visualizzato **OK** per il database.</span><span class="sxs-lookup"><span data-stu-id="9039d-190">Wait until the protection group status shows **OK** for the database before creating the recovery point.</span></span>

    ![Membri del gruppo di protezione](./media/backup-azure-backup-sql/sqlbackup-recoverypoint.png)
2. <span data-ttu-id="9039d-192">Fare clic con il pulsante destro del mouse sul database e scegliere **Crea punto di ripristino**.</span><span class="sxs-lookup"><span data-stu-id="9039d-192">Right-click on the database and select **Create Recovery Point**.</span></span>

    ![Creazione di un punto di ripristino online](./media/backup-azure-backup-sql/sqlbackup-createrp.png)
3. <span data-ttu-id="9039d-194">Nel menu a discesa scegliere **Protezione dati online** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="9039d-194">Choose **Online Protection** in the drop-down menu and click **OK**.</span></span> <span data-ttu-id="9039d-195">Si avvia la creazione di un punto di ripristino in Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-195">This starts the creation of a recovery point in Azure.</span></span>

    ![Crea punto di ripristino](./media/backup-azure-backup-sql/sqlbackup-azure.png)
4. <span data-ttu-id="9039d-197">È possibile visualizzare l'avanzamento del processo nell'area di lavoro **Monitoraggio** , dove si vedrà un processo in corso come quello illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="9039d-197">You can view the job progress in the **Monitoring** workspace where you'll find an in progress job like the one depicted in the next figure.</span></span>

    ![Console di monitoraggio](./media/backup-azure-backup-sql/sqlbackup-monitoring.png)

## <a name="recover-a-sql-server-database-from-azure"></a><span data-ttu-id="9039d-199">Ripristinare un database SQL Server da Azure</span><span class="sxs-lookup"><span data-stu-id="9039d-199">Recover a SQL Server database from Azure</span></span>
<span data-ttu-id="9039d-200">I passaggi seguenti sono necessari per ripristinare un'entità protetta (database SQL Server) da Azure.</span><span class="sxs-lookup"><span data-stu-id="9039d-200">The following steps are required to recover a protected entity (SQL Server database) from Azure.</span></span>

1. <span data-ttu-id="9039d-201">Aprire la console di gestione del server DPM.</span><span class="sxs-lookup"><span data-stu-id="9039d-201">Open the DPM server Management Console.</span></span> <span data-ttu-id="9039d-202">Passare all'area di lavoro **Ripristino** dove si vedono i server di cui DPM ha eseguito il backup.</span><span class="sxs-lookup"><span data-stu-id="9039d-202">Navigate to **Recovery** workspace where you can see the servers backed up by DPM.</span></span> <span data-ttu-id="9039d-203">Passare al database necessario (in questo caso ReportServer$MSDPM2012).</span><span class="sxs-lookup"><span data-stu-id="9039d-203">Browse the required database (in this case ReportServer$MSDPM2012).</span></span> <span data-ttu-id="9039d-204">In **Ripristino da** selezionare un orario che termina con **Online**.</span><span class="sxs-lookup"><span data-stu-id="9039d-204">Select a **Recovery from** time which ends with **Online**.</span></span>

    ![Selezione di un punto di ripristino](./media/backup-azure-backup-sql/sqlbackup-restorepoint.png)
2. <span data-ttu-id="9039d-206">Fare clic con il pulsante destro del mouse sul nome del database e scegliere **Ripristina**.</span><span class="sxs-lookup"><span data-stu-id="9039d-206">Right-click the database name and click **Recover**.</span></span>

    ![Ripristino da Azure](./media/backup-azure-backup-sql/sqlbackup-recover.png)
3. <span data-ttu-id="9039d-208">DPM mostra i dettagli del punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9039d-208">DPM shows the details of the recovery point.</span></span> <span data-ttu-id="9039d-209">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-209">Click **Next**.</span></span> <span data-ttu-id="9039d-210">Per sovrascrivere il database, selezionare il tipo di ripristino **Ripristina nell'istanza originale di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="9039d-210">To overwrite the database, select the recovery type **Recover to original instance of SQL Server**.</span></span> <span data-ttu-id="9039d-211">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-211">Click **Next**.</span></span>

    ![Ripristino nel percorso originale](./media/backup-azure-backup-sql/sqlbackup-recoveroriginal.png)

    <span data-ttu-id="9039d-213">In questo esempio DPM consente il ripristino del database in un'altra istanza di SQL server o in una cartella di rete autonoma.</span><span class="sxs-lookup"><span data-stu-id="9039d-213">In this example, DPM allows recovery of the database to another SQL Server instance or to a standalone network folder.</span></span>
4. <span data-ttu-id="9039d-214">Nella schermata **Specifica opzioni di ripristino** è possibile selezionare le opzioni di ripristino, ad esempio Limitazione all'utilizzo della larghezza di banda per controllare la larghezza di banda usata dal processo di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9039d-214">In the **Specify Recovery options** screen, you can select the recovery options like Network bandwidth usage throttling to throttle the bandwidth used by recovery.</span></span> <span data-ttu-id="9039d-215">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="9039d-215">Click **Next**.</span></span>
5. <span data-ttu-id="9039d-216">Nella schermata **Riepilogo** vengono visualizzate le configurazioni di ripristino impostate finora.</span><span class="sxs-lookup"><span data-stu-id="9039d-216">In the **Summary** screen, you see all the recovery configurations provided so far.</span></span> <span data-ttu-id="9039d-217">Fare clic su **Ripristina**.</span><span class="sxs-lookup"><span data-stu-id="9039d-217">Click **Recover**.</span></span>

    <span data-ttu-id="9039d-218">In Stato ripristino è visualizzato il database in corso di ripristino.</span><span class="sxs-lookup"><span data-stu-id="9039d-218">The Recovery status shows the database being recovered.</span></span> <span data-ttu-id="9039d-219">È possibile fare clic **Chiudi** per chiudere la procedura guidata e visualizzare lo stato di avanzamento nell'area di lavoro **Monitoraggio**.</span><span class="sxs-lookup"><span data-stu-id="9039d-219">You can click **Close** to close the wizard and view the progress in the **Monitoring** workspace.</span></span>

    ![Avvio del processo di ripristino](./media/backup-azure-backup-sql/sqlbackup-recoverying.png)

    <span data-ttu-id="9039d-221">Al termine del ripristino, il database ripristinato sarà coerente con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9039d-221">Once the recovery is completed, the restored database is application consistent.</span></span>

### <a name="next-steps"></a><span data-ttu-id="9039d-222">Passaggi successivi:</span><span class="sxs-lookup"><span data-stu-id="9039d-222">Next Steps:</span></span>
<span data-ttu-id="9039d-223">[Domande frequenti su Backup di Azure](backup-azure-backup-faq.md)</span><span class="sxs-lookup"><span data-stu-id="9039d-223">•    [Azure Backup FAQ](backup-azure-backup-faq.md)</span></span>
