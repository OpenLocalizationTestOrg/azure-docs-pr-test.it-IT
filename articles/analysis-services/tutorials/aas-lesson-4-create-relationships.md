---
title: 'Esercitazione su Azure Analysis Services - Lezione 4: Creare relazioni | Microsoft Docs'
description: Descrive come creare relazioni nel progetto per l'esercitazione su Azure Analysis Services.
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: d79af3915c718a79f60e5f589527eb4c2ae8b367
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="8b267-103">Lezione 4: Creare relazioni</span><span class="sxs-lookup"><span data-stu-id="8b267-103">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="8b267-104">In questa lezione si verificheranno le relazioni create automaticamente quando sono stati importati i dati e si aggiungeranno nuove relazioni tra tabelle diverse.</span><span class="sxs-lookup"><span data-stu-id="8b267-104">In this lesson, you verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="8b267-105">Una relazione è una connessione tra due tabelle che stabilisce la modalità con cui devono essere correlati i dati in tali tabelle.</span><span class="sxs-lookup"><span data-stu-id="8b267-105">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="8b267-106">Ad esempio, la tabella DimProduct e la tabella DimProductSubcategory hanno una relazione basata sul fatto che ogni prodotto appartiene a una sottocategoria.</span><span class="sxs-lookup"><span data-stu-id="8b267-106">For example, the DimProduct table and the DimProductSubcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="8b267-107">Per altre informazioni, vedere [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular) (Relazioni).</span><span class="sxs-lookup"><span data-stu-id="8b267-107">To learn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="8b267-108">Tempo previsto per il completamento della lezione: **10 minuti**</span><span class="sxs-lookup"><span data-stu-id="8b267-108">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="8b267-109">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="8b267-109">Prerequisites</span></span>  
<span data-ttu-id="8b267-110">Questo argomento fa parte di un'esercitazione sulla creazione di modelli tabulari, con lezioni che è consigliabile completare nell'ordine indicato.</span><span class="sxs-lookup"><span data-stu-id="8b267-110">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="8b267-111">Prima di eseguire le attività in questa lezione, è necessario avere completato la lezione precedente: [Lezione 3: Contrassegnare come tabella data](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="8b267-111">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="8b267-112">Esaminare le relazioni esistenti e aggiungere nuove relazioni</span><span class="sxs-lookup"><span data-stu-id="8b267-112">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="8b267-113">Quando sono stati importati i dati usando Recupera dati, dal database AdventureWorksDW2014 si sono ottenute sette tabelle.</span><span class="sxs-lookup"><span data-stu-id="8b267-113">When you imported data by using Get Data, you got seven tables from the AdventureWorksDW2014 database.</span></span> <span data-ttu-id="8b267-114">In genere, quando si importano dati da un'origine relazionale, le relazioni esistenti vengono importate automaticamente insieme ai dati.</span><span class="sxs-lookup"><span data-stu-id="8b267-114">Generally, when you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="8b267-115">Tuttavia, prima di procedere alla creazione del modello è necessario verificare che le relazioni create tra le tabelle siano appropriate.</span><span class="sxs-lookup"><span data-stu-id="8b267-115">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="8b267-116">Per gli scopi di questa esercitazione vengono aggiunte tre nuove relazioni.</span><span class="sxs-lookup"><span data-stu-id="8b267-116">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="8b267-117">Per esaminare le relazioni esistenti</span><span class="sxs-lookup"><span data-stu-id="8b267-117">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="8b267-118">Fare clic sul menu **Modello** > **Vista modelli** > **Vista diagramma**.</span><span class="sxs-lookup"><span data-stu-id="8b267-118">Click the **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="8b267-119">La finestra di progettazione dei modelli viene ora aperta in Vista diagramma, ovvero un formato grafico in cui sono rappresentate tutte le tabelle importate, con linee tra di esse.</span><span class="sxs-lookup"><span data-stu-id="8b267-119">The model designer now appears in Diagram View, a graphical format displaying all the tables you imported with lines between them.</span></span> <span data-ttu-id="8b267-120">Le linee tra le tabelle indicano le relazioni create automaticamente al momento dell'importazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="8b267-120">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="8b267-122">Includere il maggior numero di tabelle possibile usando i controlli mini mappa nell'angolo inferiore destro della finestra di progettazione dei modelli.</span><span class="sxs-lookup"><span data-stu-id="8b267-122">Include as many of the tables as possible by using minimap controls in the lower-right corner of the model designer.</span></span> <span data-ttu-id="8b267-123">È anche possibile fare clic e trascinare le tabelle in posizioni diverse, avvicinandole o disponendole in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="8b267-123">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="8b267-124">Lo spostamento delle tabelle non influisce sulle relazioni già esistenti tra le tabelle.</span><span class="sxs-lookup"><span data-stu-id="8b267-124">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="8b267-125">Per visualizzare tutte le colonne in una determinata tabella, fare clic e trascinare un bordo della tabella per ingrandirla o ridurla.</span><span class="sxs-lookup"><span data-stu-id="8b267-125">To view all the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="8b267-126">Fare clic sulla linea continua tra la tabella **DimCustomer** e la tabella **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="8b267-126">Click the solid line between the **DimCustomer** table and the **DimGeography** table.</span></span> <span data-ttu-id="8b267-127">La linea continua tra queste due tabelle indica che questa relazione è attiva, vale a dire usata per impostazione predefinita durante il calcolo delle formule DAX.</span><span class="sxs-lookup"><span data-stu-id="8b267-127">The solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="8b267-128">Si noti che la colonna **GeographyKey** nella tabella **DimCustomer** e la colonna **GeographyKey** nella tabella **DimGeography** sono ora entrambe visualizzate all'interno di un riquadro.</span><span class="sxs-lookup"><span data-stu-id="8b267-128">Notice the **GeographyKey** column in the **DimCustomer** table and the **GeographyKey** column in the **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="8b267-129">Queste colonne vengono usate nella relazione.</span><span class="sxs-lookup"><span data-stu-id="8b267-129">These columns are used in the relationship.</span></span> <span data-ttu-id="8b267-130">Le proprietà della relazione sono ora visualizzate nella finestra **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="8b267-130">The relationship’s properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="8b267-131">Oltre a usare la finestra di progettazione dei modelli nella vista diagramma, è anche possibile usare la finestra di dialogo Gestisci relazioni per mostrare le relazioni tra tutte le tabelle in formato tabella.</span><span class="sxs-lookup"><span data-stu-id="8b267-131">In addition to using the model designer in diagram view, you can also use the Manage Relationships dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="8b267-132">In Esplora modelli tabulari fare clic con il pulsante destro del mouse su **Relazioni** > **Gestisci relazioni**.</span><span class="sxs-lookup"><span data-stu-id="8b267-132">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="8b267-133">Verificare che siano state create le relazioni seguenti al momento dell'importazione di ogni tabella dal database AdventureWorksDW:</span><span class="sxs-lookup"><span data-stu-id="8b267-133">Verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="8b267-134">Attivo</span><span class="sxs-lookup"><span data-stu-id="8b267-134">Active</span></span>|<span data-ttu-id="8b267-135">Table</span><span class="sxs-lookup"><span data-stu-id="8b267-135">Table</span></span>|<span data-ttu-id="8b267-136">Tabella di ricerca correlata</span><span class="sxs-lookup"><span data-stu-id="8b267-136">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="8b267-137">Sì</span><span class="sxs-lookup"><span data-stu-id="8b267-137">Yes</span></span>|<span data-ttu-id="8b267-138">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-138">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="8b267-139">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-139">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="8b267-140">Sì</span><span class="sxs-lookup"><span data-stu-id="8b267-140">Yes</span></span>|<span data-ttu-id="8b267-141">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-141">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="8b267-142">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-142">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="8b267-143">Sì</span><span class="sxs-lookup"><span data-stu-id="8b267-143">Yes</span></span>|<span data-ttu-id="8b267-144">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-144">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="8b267-145">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-145">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="8b267-146">Sì</span><span class="sxs-lookup"><span data-stu-id="8b267-146">Yes</span></span>|<span data-ttu-id="8b267-147">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-147">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="8b267-148">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-148">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="8b267-149">Sì</span><span class="sxs-lookup"><span data-stu-id="8b267-149">Yes</span></span>|<span data-ttu-id="8b267-150">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-150">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="8b267-151">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="8b267-151">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="8b267-152">Se mancano alcune relazioni, verificare che il modello includa le tabelle seguenti: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory e FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="8b267-152">If any of the relationships are missing, verify that your model includes the following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="8b267-153">Se si importano tabelle dalla stessa connessione origine dati in momenti distinti, tutte le relazioni tra tali tabelle non vengono create e devono essere create manualmente.</span><span class="sxs-lookup"><span data-stu-id="8b267-153">If tables from the same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="8b267-154">Dettagli del diagramma e delle relazioni</span><span class="sxs-lookup"><span data-stu-id="8b267-154">Take a closer look</span></span>
<span data-ttu-id="8b267-155">Nella vista diagramma è possibile notare la presenza di una freccia, un asterisco e un numero sulle linee che mostrano la relazione tra le tabelle.</span><span class="sxs-lookup"><span data-stu-id="8b267-155">In Diagram View, notice an arrow, an asterisk, and a number on the lines that show the relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="8b267-157">La freccia indica la direzione del filtro,</span><span class="sxs-lookup"><span data-stu-id="8b267-157">The arrow shows the filter direction.</span></span> <span data-ttu-id="8b267-158">l'asterisco indica che la tabella rappresenta il lato "molti" nella cardinalità della relazione e il numero uno indica che la tabella corrisponde al lato "uno" della relazione.</span><span class="sxs-lookup"><span data-stu-id="8b267-158">The asterisk shows this table is the many side in the relationship's cardinality, and the one shows this table is the one side of the relationship.</span></span> <span data-ttu-id="8b267-159">Se è necessario modificare una relazione, ad esempio cambiare la direzione del filtro o la cardinalità della relazione, fare doppio clic sulla linea della relazione per aprire la finestra di dialogo Modifica relazione.</span><span class="sxs-lookup"><span data-stu-id="8b267-159">If you need to edit a relationship; for example, change the relationship's filter direction or cardinality, double-click the relationship line to open the Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="8b267-161">Queste funzionalità sono pensate per la modellazione avanzata dei dati ed esulano dagli scopi di questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="8b267-161">These features are meant for advanced data modeling and are outside the scope of this tutorial.</span></span> <span data-ttu-id="8b267-162">Per altre informazioni, vedere [Filtri incrociati bidirezionali per i modelli tabulari in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="8b267-162">To learn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="8b267-163">In alcuni casi, potrebbe essere necessario creare relazioni aggiuntive tra le tabelle nel modello per supportare una determinata logica di business.</span><span class="sxs-lookup"><span data-stu-id="8b267-163">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="8b267-164">Per questa esercitazione, è necessario creare tre relazioni aggiuntive tra la tabella FactInternetSales e la tabella DimDate.</span><span class="sxs-lookup"><span data-stu-id="8b267-164">For this tutorial, you need to create three additional relationships between the FactInternetSales table and the DimDate table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="8b267-165">Per aggiungere nuove relazioni tra le tabelle</span><span class="sxs-lookup"><span data-stu-id="8b267-165">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="8b267-166">Nella finestra di progettazione dei modelli, nella tabella **FactInternetSales** fare clic sulla colonna **OrderDate** e tenere premuto, trascinare il cursore sulla colonna **Date** nella tabella **DimDate** e quindi rilasciare.</span><span class="sxs-lookup"><span data-stu-id="8b267-166">In the model designer, in the **FactInternetSales** table, click, and hold on the **OrderDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="8b267-167">Verrà visualizzata una linea continua che indica che è stata creata una relazione attiva tra la colonna **OrderDate** nella tabella **FactInternetSales** e la colonna **Date** nella tabella **Date**.</span><span class="sxs-lookup"><span data-stu-id="8b267-167">A solid line appears showing you have created an active relationship between the **OrderDate** column in the **Internet Sales** table, and the **Date** column in the **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="8b267-169">Quando si creano nuove relazioni, la cardinalità e la direzione di filtro tra la tabella primaria e la tabella di ricerca correlata vengono selezionate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="8b267-169">When creating relationships, the cardinality and filter direction between the primary table and the related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="8b267-170">Nella tabella **FactInternetSales** fare clic sulla colonna **DueDate** e tenere premuto, trascinare il cursore fino alla colonna **Date** nella tabella **DimDate** e quindi rilasciare.</span><span class="sxs-lookup"><span data-stu-id="8b267-170">In the **FactInternetSales** table, click and hold on the **DueDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="8b267-171">Verrà visualizzata una linea punteggiata che indica che è stata creata una relazione inattiva tra la colonna **DueDate** nella tabella **FactInternetSales** e la colonna **Date** nella tabella **DimDate**.</span><span class="sxs-lookup"><span data-stu-id="8b267-171">A dotted line appears showing you have created an inactive relationship between the **DueDate** column in the **FactInternetSales** table, and the **Date** column in the **DimDate** table.</span></span> <span data-ttu-id="8b267-172">È possibile creare più relazioni tra le tabelle, ma può essere attiva una sola relazione alla volta.</span><span class="sxs-lookup"><span data-stu-id="8b267-172">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="8b267-173">Le relazioni inattive possono essere rese attive eseguire aggregazioni speciali in espressioni DAX personalizzate.</span><span class="sxs-lookup"><span data-stu-id="8b267-173">Inactive relationships can be made active to perform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="8b267-174">Creare infine un'ultima relazione.</span><span class="sxs-lookup"><span data-stu-id="8b267-174">Finally, create one more relationship.</span></span> <span data-ttu-id="8b267-175">Nella tabella **FactInternetSales** fare clic sulla colonna **ShipDate** e tenere premuto, trascinare il cursore fino alla colonna **Date** nella tabella **DimDate** e quindi rilasciare.</span><span class="sxs-lookup"><span data-stu-id="8b267-175">In the **FactInternetSales** table, click and hold on the **ShipDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="8b267-177">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8b267-177">What's next?</span></span>
<span data-ttu-id="8b267-178">[Lezione 5: Creare colonne calcolate](../tutorials/aas-lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="8b267-178">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
