---
title: esecuzione di aaaRunbook in automazione di Azure | Documenti Microsoft
description: "Vengono descritti dettagliatamente hello della modalità di elaborazione di un runbook in automazione di Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: bdb535675443353d44640bc7773de3f9dac5e42c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="7b708-103">Esecuzione di runbook in Automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="7b708-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="7b708-104">Quando si avvia un runbook in Automazione di Azure, viene creato un processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="7b708-105">Un processo è una singola istanza di esecuzione di un runbook.</span><span class="sxs-lookup"><span data-stu-id="7b708-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="7b708-106">Un thread di lavoro è di automazione di Azure assegnato toorun ogni processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-106">An Azure Automation worker is assigned toorun each job.</span></span> <span data-ttu-id="7b708-107">I computer di lavoro sono condivisi da più account Azure, mentre i processi di account di automazione diversi sono isolati l'uno dall'altro.</span><span class="sxs-lookup"><span data-stu-id="7b708-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="7b708-108">Non si dispone del controllo sulla richiesta di hello servizi quali lavoro per il processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-108">You do not have control over which worker services hello request for your job.</span></span>  <span data-ttu-id="7b708-109">In un singolo runbook possono venire eseguiti più processi contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="7b708-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="7b708-110">Quando si visualizza l'elenco di hello di runbook nel portale di Azure hello, elenca lo stato di hello di tutti i processi che sono stati avviati per ogni runbook.</span><span class="sxs-lookup"><span data-stu-id="7b708-110">When you view hello list of runbooks in hello Azure portal, it lists hello status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="7b708-111">È possibile visualizzare l'elenco di hello di processi per ogni runbook in stato di ogni hello tootrack dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="7b708-111">You can view hello list of jobs for each runbook in order tootrack hello status of each.</span></span> <span data-ttu-id="7b708-112">Per una descrizione di hello diversi stati del processo, vedere [gli stati del processo](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="7b708-112">For a description of hello different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="7b708-113">Hello diagramma seguente viene illustrato hello del ciclo di vita di un processo del runbook per [runbook grafici](automation-runbook-types.md#graphical-runbooks) e [runbook del flusso di lavoro di PowerShell](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7b708-113">hello following diagram shows hello lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Stati del processo - Flusso di lavoro PowerShell](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="7b708-115">Hello diagramma seguente viene illustrato hello del ciclo di vita di un processo del runbook per [runbook PowerShell](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7b708-115">hello following diagram shows hello lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Stati del processo - Script PowerShell](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="7b708-117">I processi hanno accesso tooyour Azure risorse eseguendo un tooyour connessione sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="7b708-117">Your jobs have access tooyour Azure resources by making a connection tooyour Azure subscription.</span></span> <span data-ttu-id="7b708-118">Solo hanno accesso tooresources nel data center se tali risorse sono accessibili dal cloud pubblico hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-118">They only have access tooresources in your data center if those resources are accessible from hello public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="7b708-119">Stati dei processi</span><span class="sxs-lookup"><span data-stu-id="7b708-119">Job statuses</span></span>
<span data-ttu-id="7b708-120">Hello nella tabella seguente descrive hello diversi stati possibili per un processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-120">hello following table describes hello different statuses that are possible for a job.</span></span>

| <span data-ttu-id="7b708-121">Stato</span><span class="sxs-lookup"><span data-stu-id="7b708-121">Status</span></span> | <span data-ttu-id="7b708-122">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7b708-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="7b708-123">Completed</span><span class="sxs-lookup"><span data-stu-id="7b708-123">Completed</span></span> |<span data-ttu-id="7b708-124">processo di Hello è stato completato.</span><span class="sxs-lookup"><span data-stu-id="7b708-124">hello job completed successfully.</span></span> |
| <span data-ttu-id="7b708-125">Operazione non riuscita</span><span class="sxs-lookup"><span data-stu-id="7b708-125">Failed</span></span> |<span data-ttu-id="7b708-126">Per [runbook grafici e flusso di lavoro PowerShell](automation-runbook-types.md), hello runbook non è stato possibile toocompile.</span><span class="sxs-lookup"><span data-stu-id="7b708-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), hello runbook failed toocompile.</span></span>  <span data-ttu-id="7b708-127">Per [runbook Script di PowerShell](automation-runbook-types.md), hello runbook non è stato possibile toostart o processo hello ha rilevato un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="7b708-127">For [PowerShell Script runbooks](automation-runbook-types.md), hello runbook failed toostart or hello job encountered an exception.</span></span> |
| <span data-ttu-id="7b708-128">Failed, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="7b708-128">Failed, waiting for resources</span></span> |<span data-ttu-id="7b708-129">Hello processo non riuscito perché ha raggiunto hello [condivisione equa](#fairshare) limitare a tre volte e avviato da hello stesso checkpoint o dall'hello ora di inizio del runbook hello ogni.</span><span class="sxs-lookup"><span data-stu-id="7b708-129">hello job failed because it reached hello [fair share](#fairshare) limit three times and started from hello same checkpoint or from hello start of hello runbook each time.</span></span> |
| <span data-ttu-id="7b708-130">Queued</span><span class="sxs-lookup"><span data-stu-id="7b708-130">Queued</span></span> |<span data-ttu-id="7b708-131">processo Hello è in attesa di risorse in un toocome di lavoro di automazione disponibili in modo che può essere avviato.</span><span class="sxs-lookup"><span data-stu-id="7b708-131">hello job is waiting for resources on an Automation worker toocome available so that it can be started.</span></span> |
| <span data-ttu-id="7b708-132">Avvio in corso</span><span class="sxs-lookup"><span data-stu-id="7b708-132">Starting</span></span> |<span data-ttu-id="7b708-133">processo di Hello è stato assegnato il lavoro tooa e sistema hello è in corso di hello di avvio.</span><span class="sxs-lookup"><span data-stu-id="7b708-133">hello job has been assigned tooa worker, and hello system is in hello process of starting it.</span></span> |
| <span data-ttu-id="7b708-134">Resuming</span><span class="sxs-lookup"><span data-stu-id="7b708-134">Resuming</span></span> |<span data-ttu-id="7b708-135">sistema Hello è in corso di hello di riprendere il processo di hello dopo la sospensione.</span><span class="sxs-lookup"><span data-stu-id="7b708-135">hello system is in hello process of resuming hello job after it was suspended.</span></span> |
| <span data-ttu-id="7b708-136">In esecuzione</span><span class="sxs-lookup"><span data-stu-id="7b708-136">Running</span></span> |<span data-ttu-id="7b708-137">il processo di Hello è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7b708-137">hello job is running.</span></span> |
| <span data-ttu-id="7b708-138">Running, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="7b708-138">Running, waiting for resources</span></span> |<span data-ttu-id="7b708-139">Hello processo è stato scaricato perché ha raggiunto hello [condivisione equa](#fairshare) limite.</span><span class="sxs-lookup"><span data-stu-id="7b708-139">hello job has been unloaded because it reached hello [fair share](#fairshare) limit.</span></span> <span data-ttu-id="7b708-140">Riprende a breve dall'ultimo checkpoint.</span><span class="sxs-lookup"><span data-stu-id="7b708-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="7b708-141">Arrestato</span><span class="sxs-lookup"><span data-stu-id="7b708-141">Stopped</span></span> |<span data-ttu-id="7b708-142">il processo di Hello è stato arrestato dall'utente hello prima del completamento.</span><span class="sxs-lookup"><span data-stu-id="7b708-142">hello job was stopped by hello user before it was completed.</span></span> |
| <span data-ttu-id="7b708-143">Arresto in corso</span><span class="sxs-lookup"><span data-stu-id="7b708-143">Stopping</span></span> |<span data-ttu-id="7b708-144">sistema Hello è in corso di hello di arrestare il processo di hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-144">hello system is in hello process of stopping hello job.</span></span> |
| <span data-ttu-id="7b708-145">Suspended</span><span class="sxs-lookup"><span data-stu-id="7b708-145">Suspended</span></span> |<span data-ttu-id="7b708-146">il processo di Hello è stato sospeso dall'utente hello, dal sistema hello o da un comando nel runbook hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-146">hello job was suspended by hello user, by hello system, or by a command in hello runbook.</span></span> <span data-ttu-id="7b708-147">Un processo sospeso può essere riavviato e ripreso dall'ultimo checkpoint o dall'inizio di hello di hello runbook se non dispone di checkpoint.</span><span class="sxs-lookup"><span data-stu-id="7b708-147">A job that is suspended can be started again and resume from its last checkpoint or from hello beginning of hello runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="7b708-148">Hello runbook verrà sospeso dal sistema hello solo quando si verifica un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="7b708-148">hello runbook will only be suspended by hello system when an exception occurs.</span></span> <span data-ttu-id="7b708-149">Per impostazione predefinita, ErrorActionPreference è troppo**continua**, vale a dire che il processo di hello rimangano in esecuzione in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="7b708-149">By default, ErrorActionPreference is set too**Continue**, meaning that hello job keeps running on an error.</span></span> <span data-ttu-id="7b708-150">Se questa variabile di preferenza è impostata troppo**arrestare**, quindi sospende il processo di hello in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="7b708-150">If this preference variable is set too**Stop**, then hello job suspends on an error.</span></span>  <span data-ttu-id="7b708-151">Si applica troppo[runbook grafici e flusso di lavoro PowerShell](automation-runbook-types.md) solo.</span><span class="sxs-lookup"><span data-stu-id="7b708-151">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="7b708-152">Suspending</span><span class="sxs-lookup"><span data-stu-id="7b708-152">Suspending</span></span> |<span data-ttu-id="7b708-153">sistema Hello sta tentando di processo hello toosuspend richiesta hello dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-153">hello system is attempting toosuspend hello job at hello request of hello user.</span></span> <span data-ttu-id="7b708-154">Hello runbook deve raggiungere il checkpoint successivo prima di poter essere sospeso.</span><span class="sxs-lookup"><span data-stu-id="7b708-154">hello runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="7b708-155">Se ha già superato l'ultimo checkpoint, il processo viene completato prima di poter essere sospeso.</span><span class="sxs-lookup"><span data-stu-id="7b708-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="7b708-156">Si applica troppo[runbook grafici e flusso di lavoro PowerShell](automation-runbook-types.md) solo.</span><span class="sxs-lookup"><span data-stu-id="7b708-156">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-hello-azure-portal"></a><span data-ttu-id="7b708-157">Visualizzazione stato del processo da hello portale di Azure</span><span class="sxs-lookup"><span data-stu-id="7b708-157">Viewing job status from hello Azure portal</span></span>
<span data-ttu-id="7b708-158">È possibile visualizzare lo stato di riepilogo di tutti i processi runbook o esaminare i dettagli di un processo specifico del runbook nel portale di Azure hello o dalla configurazione dell'integrazione con lo stato del processo runbook tooforward dell'area di lavoro Analitica di Log di Microsoft Operations Management Suite (OMS) e flussi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="7b708-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in hello Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace tooforward runbook job status and job streams.</span></span>  <span data-ttu-id="7b708-159">Per ulteriori informazioni sull'integrazione con Analitica di Log di OMS, vedere [inoltra lo stato del processo e i flussi di lavoro da automazione tooLog Analitica (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="7b708-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="7b708-160">Riepilogo dei processi del Runbook di Automazione</span><span class="sxs-lookup"><span data-stu-id="7b708-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="7b708-161">In hello a destra dell'account di automazione selezionato, è possibile visualizzare un riepilogo di tutti i processi del runbook hello per un account di automazione selezionato in **statistiche** riquadro.</span><span class="sxs-lookup"><span data-stu-id="7b708-161">On hello right of your selected Automation account, you can see a summary of all of hello runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="7b708-162">![Riquadro Statistiche processi](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="7b708-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="7b708-163">Questo riquadro Visualizza un numero e la rappresentazione grafica hello lo stato del processo per tutti i processi eseguiti.</span><span class="sxs-lookup"><span data-stu-id="7b708-163">This tile displays a count and graphical representation of hello job status for all jobs executed.</span></span>  

<span data-ttu-id="7b708-164">Fare clic sul riquadro hello presenta hello **processi** pannello, che include un elenco riepilogativo di tutti i processi eseguiti, con stato, l'esecuzione del processo e ora di inizio e completamento.</span><span class="sxs-lookup"><span data-stu-id="7b708-164">Clicking on hello tile presents hello **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="7b708-165">![Pannello dei processi di account di Automazione](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7b708-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="7b708-166">È possibile filtrare l'elenco di hello dei processi selezionando **filtrare i processi** e filtrare in un runbook specifico, lo stato del processo o dall'elenco a discesa hello, hello toosearch intervallo di data/ora all'interno.</span><span class="sxs-lookup"><span data-stu-id="7b708-166">You can filter hello list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from hello drop-down list, hello date/time range toosearch within.</span></span><br><br> <span data-ttu-id="7b708-167">![Filtrare lo stato dei processi](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="7b708-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="7b708-168">In alternativa, è possibile visualizzare i dettagli di riepilogo di processo per un runbook specifico, selezionare runbook dal hello **runbook** pannello nell'account di automazione e quindi seleziona hello **processi** riquadro.</span><span class="sxs-lookup"><span data-stu-id="7b708-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="7b708-169">Questa operazione presenta hello **processi** pannello e da qui è possibile fare clic su hello processo record tooview dettagli e l'output.</span><span class="sxs-lookup"><span data-stu-id="7b708-169">This presents hello **Jobs** blade, and from there you can click on hello job record tooview its detail and output.</span></span><br><br> <span data-ttu-id="7b708-170">![Pannello dei processi di account di Automazione](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7b708-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="7b708-171">Riepilogo dei processi</span><span class="sxs-lookup"><span data-stu-id="7b708-171">Job Summary</span></span>
<span data-ttu-id="7b708-172">È possibile visualizzare un elenco di tutti i processi di hello che sono stati creati per un determinato runbook e il relativo stato più recente.</span><span class="sxs-lookup"><span data-stu-id="7b708-172">You can view a list of all of hello jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="7b708-173">È possibile filtrare l'elenco per lo stato del processo e hello intervallo di date per hello ultima modifica toohello processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-173">You can filter this list by job status and hello range of dates for hello last change toohello job.</span></span> <span data-ttu-id="7b708-174">tooview, output e le relative informazioni dettagliate, fare clic sul nome di hello di un processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-174">tooview its detailed information and output, click on hello name of a job.</span></span> <span data-ttu-id="7b708-175">Hello visualizzazione dettagliata del processo di hello include valori hello per i parametri del runbook hello che sono stati forniti toothat processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-175">hello detailed view of hello job includes hello values for hello runbook parameters that were provided toothat job.</span></span>

<span data-ttu-id="7b708-176">È possibile utilizzare hello seguendo i passaggi tooview hello i processi per un runbook.</span><span class="sxs-lookup"><span data-stu-id="7b708-176">You can use hello following steps tooview hello jobs for a runbook.</span></span>

1. <span data-ttu-id="7b708-177">Nel portale di Azure hello, selezionare **automazione** e quindi selezionare il nome di hello di un account di automazione.</span><span class="sxs-lookup"><span data-stu-id="7b708-177">In hello Azure portal, select **Automation** and then select hello name of an Automation account.</span></span>
2. <span data-ttu-id="7b708-178">Dall'hub hello, selezionare **runbook** e quindi su hello **runbook** pannello riepilogo, selezionare un runbook hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-178">From hello hub, select **Runbooks** and then on hello **Runbooks** blade select a runbook from hello list.</span></span>
3. <span data-ttu-id="7b708-179">Nel Pannello di hello per runbook hello selezionato, fare clic su hello **processi** riquadro.</span><span class="sxs-lookup"><span data-stu-id="7b708-179">On hello blade for hello selected runbook, click hello **Jobs** tile.</span></span>
4. <span data-ttu-id="7b708-180">Fare clic su uno dei processi di hello in elenco hello e nel pannello dettagli processo runbook di hello è possibile visualizzarne i dettagli e l'output.</span><span class="sxs-lookup"><span data-stu-id="7b708-180">Click on one of hello jobs in hello list and on hello runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="7b708-181">Recupero dello stato di un processo tramite Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="7b708-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="7b708-182">È possibile utilizzare hello [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) processi di hello tooretrieve creati per un runbook e hello dettagli di un processo specifico.</span><span class="sxs-lookup"><span data-stu-id="7b708-182">You can use hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobs created for a runbook and hello details of a particular job.</span></span> <span data-ttu-id="7b708-183">Se si avvia un runbook con Windows PowerShell con [inizio AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), quindi restituisce processo risultante hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns hello resulting job.</span></span> <span data-ttu-id="7b708-184">Utilizzare [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)tooget di Output di output di un processo.</span><span class="sxs-lookup"><span data-stu-id="7b708-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output tooget a job’s output.</span></span>

<span data-ttu-id="7b708-185">Hello comandi di esempio seguenti recuperare l'ultimo processo di hello per un runbook di esempio e visualizza il relativo stato, i valori hello forniti per i parametri di runbook hello e hello output dal processo hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-185">hello following sample commands retrieve hello last job for a sample runbook and displays its status, hello values provided for hello runbook parameters, and hello output from hello job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="7b708-186">condivisione equa</span><span class="sxs-lookup"><span data-stu-id="7b708-186">Fair share</span></span>
<span data-ttu-id="7b708-187">Nelle risorse di tooshare ordine tra tutti i runbook nel cloud hello, automazione di Azure verrà Scarica temporaneamente qualsiasi processo dopo che è in esecuzione per 3 ore.</span><span class="sxs-lookup"><span data-stu-id="7b708-187">In order tooshare resources among all runbooks in hello cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="7b708-188">Durante questo periodo, i processi per [runbook basati su PowerShell](automation-runbook-types.md#powershell-runbooks) vengono arrestati e non verranno riavviati.</span><span class="sxs-lookup"><span data-stu-id="7b708-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="7b708-189">Mostra lo stato di processo Hello **arrestato**.</span><span class="sxs-lookup"><span data-stu-id="7b708-189">hello job status shows **Stopped**.</span></span>  <span data-ttu-id="7b708-190">Questo tipo di runbook viene sempre riavviato dall'inizio hello poiché non supportano i checkpoint.</span><span class="sxs-lookup"><span data-stu-id="7b708-190">This type of runbook is always restarted from hello beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="7b708-191">[I runbook basati su Workflow-PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) verranno ripresi dall'ultimo [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="7b708-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="7b708-192">Dopo aver eseguito tre ore, il processo di runbook hello verrà sospeso dal servizio hello e il relativo stato viene **in esecuzione, in attesa di risorse**.</span><span class="sxs-lookup"><span data-stu-id="7b708-192">After running three hours, hello runbook job will be suspended by hello service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="7b708-193">Quando un ambiente sandbox diventa disponibile, hello runbook verrà riavviato automaticamente dal servizio di automazione hello e verrà ripreso dall'ultimo checkpoint hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-193">When a sandbox becomes available, hello runbook will be automatically restarted by hello Automation service and resumes from hello last checkpoint.</span></span>  <span data-ttu-id="7b708-194">Questo è il comportamento normale di Workflow-PowerShell per sospendere/riavviare.</span><span class="sxs-lookup"><span data-stu-id="7b708-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="7b708-195">Se runbook hello supera nuovamente tre ore della fase di esecuzione processo hello si ripete, i tempi di toothree.</span><span class="sxs-lookup"><span data-stu-id="7b708-195">If hello runbook again exceeds three hours of runtime, hello process repeats, up toothree times.</span></span>  <span data-ttu-id="7b708-196">Dopo il riavvio terzo hello, se runbook hello ancora non è stata completata in tre ore, quindi viene eseguito il processo di runbook hello e Mostra lo stato del processo hello **non riuscito, in attesa di risorse**.</span><span class="sxs-lookup"><span data-stu-id="7b708-196">After hello third restart, if hello runbook still has not completed in three hours, then hello runbook job is failed, and hello job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="7b708-197">In questo caso, si riceve hello con errore hello l'eccezione seguente.</span><span class="sxs-lookup"><span data-stu-id="7b708-197">In this case, you receive hello following exception with hello failure.</span></span>

<span data-ttu-id="7b708-198">*processo Hello non è possibile continuare l'esecuzione perché è stato rimosso ripetutamente da hello stesso checkpoint. Verificare che il runbook non esegua operazioni di lunga durata senza rendere persistente il proprio stato.*</span><span class="sxs-lookup"><span data-stu-id="7b708-198">*hello job cannot continue running because it was repeatedly evicted from hello same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="7b708-199">Si tratta di servizio di hello tooprotect esecuzione runbook indefinitamente senza essere completati, in quanto non sono in grado di toomake è toohello checkpoint successivo senza venire scaricati di nuovo.</span><span class="sxs-lookup"><span data-stu-id="7b708-199">This is tooprotect hello service from runbooks running indefinitely without completing, as they are not able toomake it toohello next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="7b708-200">Se non sono presenti checkpoint hello runbook o processo hello non ha raggiunto un primo checkpoint hello prima di essere scaricato, quindi viene riavviato dall'inizio hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-200">If hello runbook has no checkpoints or hello job had not reached hello first checkpoint before being unloaded, then it restarts from hello beginning.</span></span>  

<span data-ttu-id="7b708-201">Quando si crea un runbook, è necessario assicurarsi che toorun ora hello qualsiasi attività tra due checkpoint non superi di tre ore.</span><span class="sxs-lookup"><span data-stu-id="7b708-201">When you create a runbook, you should ensure that hello time toorun any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="7b708-202">Potrebbe essere necessario tooadd checkpoint tooyour runbook tooensure che non venga raggiunto questo limite di tre ore o suddividere prolungata operazioni in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7b708-202">You may need tooadd checkpoints tooyour runbook tooensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="7b708-203">Ad esempio, il runbook potrebbe eseguire una reindicizzazione su un database SQL di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="7b708-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="7b708-204">Se questa singola operazione non completata entro hello equo il limite di condivisione, quindi il processo di hello è scaricato e riavviato dall'inizio di hello.</span><span class="sxs-lookup"><span data-stu-id="7b708-204">If this single operation does not complete within hello fair share limit, then hello job are unloaded and restarted from hello beginning.</span></span> <span data-ttu-id="7b708-205">In questo caso, è necessario suddividere l'operazione di reindicizzazione hello in più passaggi, ad esempio la reindicizzazione di una tabella alla volta e quindi inserire un checkpoint dopo ogni operazione in modo che hello processo possa riprendere dopo hello ultima operazione toocomplete.</span><span class="sxs-lookup"><span data-stu-id="7b708-205">In this case, you should break up hello reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that hello job could resume after hello last operation toocomplete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7b708-206">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="7b708-206">Next steps</span></span>
* <span data-ttu-id="7b708-207">toolearn informazioni su hello diversi metodi che possono essere utilizzati toostart un runbook in automazione di Azure, vedere [avvio di un runbook in automazione di Azure](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="7b708-207">toolearn more about hello different methods that can be used toostart a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

