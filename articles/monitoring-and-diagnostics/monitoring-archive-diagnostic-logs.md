---
title: Archiviare i log di diagnostica di Azure | Microsoft Docs
description: Informazioni su come archiviare il log di diagnostica di Azure per la conservazione a lungo termine in un account di archiviazione.
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 3a55c73f-2ef3-45f3-8956-bcf9c0cb7e05
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/21/2017
ms.author: johnkem
ms.openlocfilehash: dbc5f89001dcb6cd1ab061cb0a9632e4e5d2c1c7
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="archive-azure-diagnostic-logs"></a><span data-ttu-id="bfc6e-103">Archiviare i log di diagnostica di Azure</span><span class="sxs-lookup"><span data-stu-id="bfc6e-103">Archive Azure Diagnostic Logs</span></span>
<span data-ttu-id="bfc6e-104">Questo articolo illustra come è possibile usare il portale di Azure, i cmdlet di PowerShell, l'interfaccia della riga di comando o l'API REST per archiviare i [log di diagnostica di Azure](monitoring-overview-of-diagnostic-logs.md) in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-104">In this article, we show how you can use the Azure portal, PowerShell Cmdlets, CLI, or REST API to archive your [Azure diagnostic logs](monitoring-overview-of-diagnostic-logs.md) in a storage account.</span></span> <span data-ttu-id="bfc6e-105">Questa opzione è utile per conservare i log di diagnostica con criteri di conservazione facoltativi per il controllo, l'analisi statica o il backup.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-105">This option is useful if you would like to retain your diagnostic logs with an optional retention policy for audit, static analysis, or backup.</span></span> <span data-ttu-id="bfc6e-106">L'account di archiviazione non deve trovarsi nella stessa sottoscrizione della risorsa che emette log, purché l'utente che configura l'impostazione abbia un accesso RBAC appropriato a entrambe le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-106">The storage account does not have to be in the same subscription as the resource emitting logs as long as the user who configures the setting has appropriate RBAC access to both subscriptions.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="bfc6e-107">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="bfc6e-107">Prerequisites</span></span>
<span data-ttu-id="bfc6e-108">Prima di iniziare, è necessario [creare un account di archiviazione](../storage/storage-create-storage-account.md) in cui archiviare i log di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-108">Before you begin, you need to [create a storage account](../storage/storage-create-storage-account.md) to which you can archive your diagnostic logs.</span></span> <span data-ttu-id="bfc6e-109">È consigliabile non usare un account di archiviazione esistente in cui sono archiviati altri dati non di monitoraggio, per poter controllare meglio l'accesso ai dati di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-109">We highly recommend that you do not use an existing storage account that has other, non-monitoring data stored in it so that you can better control access to monitoring data.</span></span> <span data-ttu-id="bfc6e-110">Se tuttavia in un account di archiviazione si archiviano anche il log attività e le metriche di diagnostica, può avere senso usare tale account di archiviazione anche per i log di diagnostica per tenere tutti i dati di monitoraggio in una posizione centrale.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-110">However, if you are also archiving your Activity Log and diagnostic metrics to a storage account, it may make sense to use that storage account for your diagnostic logs as well to keep all monitoring data in a central location.</span></span> <span data-ttu-id="bfc6e-111">L'account di archiviazione usato deve essere un account di archiviazione per utilizzo generico, non un account di archiviazione BLOB.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-111">The storage account you use must be a general purpose storage account, not a blob storage account.</span></span>

## <a name="diagnostic-settings"></a><span data-ttu-id="bfc6e-112">Impostazioni di diagnostica</span><span class="sxs-lookup"><span data-stu-id="bfc6e-112">Diagnostic settings</span></span>
<span data-ttu-id="bfc6e-113">Per archiviare i log di diagnostica usando uno dei metodi indicati di seguito, definire una **impostazione di diagnostica** per una risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-113">To archive your diagnostic logs using any of the methods below, you set a **diagnostic setting** for a particular resource.</span></span> <span data-ttu-id="bfc6e-114">Un'impostazione di diagnostica per una risorsa definisce le categorie dei log e di dati di metrica inviati a una destinazione (account di archiviazione, spazio dei nomi di Hub eventi o Log Analytics).</span><span class="sxs-lookup"><span data-stu-id="bfc6e-114">A diagnostic setting for a resource defines the categories of logs and metric data sent to a destination (storage account, Event Hubs namespace, or Log Analytics).</span></span> <span data-ttu-id="bfc6e-115">Definisce anche i criteri di conservazione (numero di giorni di conservazione) per gli eventi di ogni categoria di log e dati di metrica archiviati in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-115">It also defines the retention policy (number of days to retain) for events of each log category and metric data stored in a storage account.</span></span> <span data-ttu-id="bfc6e-116">Se un criterio di conservazione è impostato su zero, gli eventi per tale categoria di log vengono archiviati per un periodo illimitato (per sempre).</span><span class="sxs-lookup"><span data-stu-id="bfc6e-116">If a retention policy is set to zero, events for that log category are stored indefinitely (that is to say, forever).</span></span> <span data-ttu-id="bfc6e-117">Diversamente, un criterio di conservazione può essere qualsiasi numero di giorni compreso tra 1 e 2147483647.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-117">A retention policy can otherwise be any number of days between 1 and 2147483647.</span></span> <span data-ttu-id="bfc6e-118">[Altre informazioni sulle impostazioni di diagnostica sono disponibili qui](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings).</span><span class="sxs-lookup"><span data-stu-id="bfc6e-118">[You can read more about diagnostic settings here](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings).</span></span> <span data-ttu-id="bfc6e-119">I criteri di conservazione vengono applicati su base giornaliera. Al termine della giornata, i log relativi a tale giornata non rientrano quindi più nei criteri di conservazione e verranno eliminati.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-119">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy will be deleted.</span></span> <span data-ttu-id="bfc6e-120">Se, ad esempio, è presente un criterio di conservazione di un giorno, all'inizio della giornata attuale vengono eliminati i log relativi alla giornata precedente a ieri.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-120">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted</span></span>

## <a name="archive-diagnostic-logs-using-the-portal"></a><span data-ttu-id="bfc6e-121">Archiviare i log di diagnostica tramite il portale</span><span class="sxs-lookup"><span data-stu-id="bfc6e-121">Archive diagnostic logs using the portal</span></span>
1. <span data-ttu-id="bfc6e-122">Nel portale passare a Monitoraggio di Azure e fare clic su **Impostazioni di diagnostica**</span><span class="sxs-lookup"><span data-stu-id="bfc6e-122">In the portal, navigate to Azure Monitor and click on **Diagnostic Settings**</span></span>

    ![Sezione relativa al monitoraggio di Monitoraggio di Azure](media/monitoring-archive-diagnostic-logs/diagnostic-settings-blade.png)

2. <span data-ttu-id="bfc6e-124">Facoltativamente filtrare l'elenco in base al tipo di risorsa o al gruppo di risorse, quindi fare clic sulla risorsa per cui si vuole specificare un'impostazione di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-124">Optionally filter the list by resource group or resource type, then click on the resource for which you would like to set a diagnostic setting.</span></span>

3. <span data-ttu-id="bfc6e-125">Se non esiste un'impostazione sulla risorsa selezionata, viene chiesto di creare un'impostazione.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-125">If no settings exist on the resource you have selected, you are prompted to create a setting.</span></span> <span data-ttu-id="bfc6e-126">Fare clic su "Attiva diagnostica".</span><span class="sxs-lookup"><span data-stu-id="bfc6e-126">Click "Turn on diagnostics."</span></span>

   ![Aggiungi impostazione di diagnostica - Nessuna impostazione esistente](media/monitoring-archive-diagnostic-logs/diagnostic-settings-none.png)

   <span data-ttu-id="bfc6e-128">Se esistono già impostazioni sulla risorsa, verrò visualizzato un elenco di impostazioni già configurate per questa risorsa.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-128">If there are existing settings on the resource, you will see a list of settings already configured on this resource.</span></span> <span data-ttu-id="bfc6e-129">Fare clic su "Add diagnostic setting" (Aggiungi impostazione di diagnostica).</span><span class="sxs-lookup"><span data-stu-id="bfc6e-129">Click "Add diagnostic setting."</span></span>

   !["Add diagnostic setting" (Aggiungi impostazione di diagnostica) - impostazioni esistenti](media/monitoring-archive-diagnostic-logs/diagnostic-settings-multiple.png)

3. <span data-ttu-id="bfc6e-131">Assegnare un nome all'impostazione, selezionare la casella per **Esporta in Account di archiviazione**, quindi selezionare un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-131">Give your setting a name and check the box for **Export to Storage Account**, then select a storage account.</span></span> <span data-ttu-id="bfc6e-132">Facoltativamente, impostare un numero di giorni per la conservazione di questi log usando i dispositivi di scorrimento **Conservazione (giorni)** .</span><span class="sxs-lookup"><span data-stu-id="bfc6e-132">Optionally, set a number of days to retain these logs by using the **Retention (days)** sliders.</span></span> <span data-ttu-id="bfc6e-133">Se il valore di conservazione è zero giorni, i log vengono conservati all'infinito.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-133">A retention of zero days stores the logs indefinitely.</span></span>
   
   !["Add diagnostic setting" (Aggiungi impostazione di diagnostica) - impostazioni esistenti](media/monitoring-archive-diagnostic-logs/diagnostic-settings-configure.png)
    
4. <span data-ttu-id="bfc6e-135">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-135">Click **Save**.</span></span>

<span data-ttu-id="bfc6e-136">Dopo qualche istante, la nuova impostazione viene visualizzata nell'elenco delle impostazioni per questa risorsa e i log di diagnostica vengono archiviati in tale account di archiviazione non appena vengono generati nuovi dati di eventi.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-136">After a few moments, the new setting appears in your list of settings for this resource, and diagnostic logs are archived to that storage account as soon as new event data is generated.</span></span>

## <a name="archive-diagnostic-logs-via-azure-powershell"></a><span data-ttu-id="bfc6e-137">Archiviare i log di diagnostica tramite Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="bfc6e-137">Archive diagnostic logs via Azure PowerShell</span></span>
```
Set-AzureRmDiagnosticSetting -ResourceId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg -StorageAccountId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -Categories networksecuritygroupevent,networksecuritygrouprulecounter -Enabled $true -RetentionEnabled $true -RetentionInDays 90
```

| <span data-ttu-id="bfc6e-138">Proprietà</span><span class="sxs-lookup"><span data-stu-id="bfc6e-138">Property</span></span> | <span data-ttu-id="bfc6e-139">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bfc6e-139">Required</span></span> | <span data-ttu-id="bfc6e-140">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bfc6e-140">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bfc6e-141">ResourceId</span><span class="sxs-lookup"><span data-stu-id="bfc6e-141">ResourceId</span></span> |<span data-ttu-id="bfc6e-142">Sì</span><span class="sxs-lookup"><span data-stu-id="bfc6e-142">Yes</span></span> |<span data-ttu-id="bfc6e-143">ID risorsa della risorsa in cui si vuole definire un'impostazione di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-143">Resource ID of the resource on which you want to set a diagnostic setting.</span></span> |
| <span data-ttu-id="bfc6e-144">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="bfc6e-144">StorageAccountId</span></span> |<span data-ttu-id="bfc6e-145">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-145">No</span></span> |<span data-ttu-id="bfc6e-146">ID risorsa dell'account di archiviazione in cui devono essere salvati i log di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-146">Resource ID of the Storage Account to which Diagnostic Logs should be saved.</span></span> |
| <span data-ttu-id="bfc6e-147">Categorie</span><span class="sxs-lookup"><span data-stu-id="bfc6e-147">Categories</span></span> |<span data-ttu-id="bfc6e-148">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-148">No</span></span> |<span data-ttu-id="bfc6e-149">Elenco delimitato da virgole di categorie di log da abilitare.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-149">Comma-separated list of log categories to enable.</span></span> |
| <span data-ttu-id="bfc6e-150">Enabled</span><span class="sxs-lookup"><span data-stu-id="bfc6e-150">Enabled</span></span> |<span data-ttu-id="bfc6e-151">Sì</span><span class="sxs-lookup"><span data-stu-id="bfc6e-151">Yes</span></span> |<span data-ttu-id="bfc6e-152">Valore booleano che indica se la diagnostica viene abilitata o disabilitata per questa risorsa.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-152">Boolean indicating whether diagnostics are enabled or disabled on this resource.</span></span> |
| <span data-ttu-id="bfc6e-153">RetentionEnabled</span><span class="sxs-lookup"><span data-stu-id="bfc6e-153">RetentionEnabled</span></span> |<span data-ttu-id="bfc6e-154">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-154">No</span></span> |<span data-ttu-id="bfc6e-155">Valore booleano che indica se un criterio di conservazione è abilitato per questa risorsa.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-155">Boolean indicating if a retention policy are enabled on this resource.</span></span> |
| <span data-ttu-id="bfc6e-156">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="bfc6e-156">RetentionInDays</span></span> |<span data-ttu-id="bfc6e-157">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-157">No</span></span> |<span data-ttu-id="bfc6e-158">Numero di giorni per cui gli eventi devono essere conservati, compreso tra 1 e 2147483647.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-158">Number of days for which events should be retained between 1 and 2147483647.</span></span> <span data-ttu-id="bfc6e-159">Se il valore è zero, i log vengono conservati all'infinito.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-159">A value of zero stores the logs indefinitely.</span></span> |

## <a name="archive-diagnostic-logs-via-the-cross-platform-cli"></a><span data-ttu-id="bfc6e-160">Archiviare i log di diagnostica tramite l'interfaccia della riga di comando multipiattaforma</span><span class="sxs-lookup"><span data-stu-id="bfc6e-160">Archive diagnostic logs via the Cross-Platform CLI</span></span>
```
azure insights diagnostic set --resourceId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg --storageId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage –categories networksecuritygroupevent,networksecuritygrouprulecounter --enabled true
```

| <span data-ttu-id="bfc6e-161">Proprietà</span><span class="sxs-lookup"><span data-stu-id="bfc6e-161">Property</span></span> | <span data-ttu-id="bfc6e-162">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bfc6e-162">Required</span></span> | <span data-ttu-id="bfc6e-163">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bfc6e-163">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bfc6e-164">ResourceId</span><span class="sxs-lookup"><span data-stu-id="bfc6e-164">resourceId</span></span> |<span data-ttu-id="bfc6e-165">Sì</span><span class="sxs-lookup"><span data-stu-id="bfc6e-165">Yes</span></span> |<span data-ttu-id="bfc6e-166">ID risorsa della risorsa in cui si vuole definire un'impostazione di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-166">Resource ID of the resource on which you want to set a diagnostic setting.</span></span> |
| <span data-ttu-id="bfc6e-167">storageId</span><span class="sxs-lookup"><span data-stu-id="bfc6e-167">storageId</span></span> |<span data-ttu-id="bfc6e-168">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-168">No</span></span> |<span data-ttu-id="bfc6e-169">ID risorsa dell'account di archiviazione in cui devono essere salvati i log di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-169">Resource ID of the Storage Account to which diagnostic logs should be saved.</span></span> |
| <span data-ttu-id="bfc6e-170">Categorie</span><span class="sxs-lookup"><span data-stu-id="bfc6e-170">categories</span></span> |<span data-ttu-id="bfc6e-171">No</span><span class="sxs-lookup"><span data-stu-id="bfc6e-171">No</span></span> |<span data-ttu-id="bfc6e-172">Elenco delimitato da virgole di categorie di log da abilitare.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-172">Comma-separated list of log categories to enable.</span></span> |
| <span data-ttu-id="bfc6e-173">Enabled</span><span class="sxs-lookup"><span data-stu-id="bfc6e-173">enabled</span></span> |<span data-ttu-id="bfc6e-174">Sì</span><span class="sxs-lookup"><span data-stu-id="bfc6e-174">Yes</span></span> |<span data-ttu-id="bfc6e-175">Valore booleano che indica se la diagnostica viene abilitata o disabilitata per questa risorsa.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-175">Boolean indicating whether diagnostics are enabled or disabled on this resource.</span></span> |

## <a name="archive-diagnostic-logs-via-the-rest-api"></a><span data-ttu-id="bfc6e-176">Archiviare i log di diagnostica tramite l'API REST</span><span class="sxs-lookup"><span data-stu-id="bfc6e-176">Archive diagnostic logs via the REST API</span></span>
<span data-ttu-id="bfc6e-177">[Vedere questo documento](https://docs.microsoft.com/rest/api/monitor/servicediagnosticsettings) per informazioni su come è possibile configurare un'impostazione di diagnostica usando l'API REST di Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-177">[See this document](https://docs.microsoft.com/rest/api/monitor/servicediagnosticsettings) for information on how you can set up a diagnostic setting using the Azure Monitor REST API.</span></span>

## <a name="schema-of-diagnostic-logs-in-the-storage-account"></a><span data-ttu-id="bfc6e-178">Schema dei log di diagnostica nell'account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="bfc6e-178">Schema of diagnostic logs in the storage account</span></span>
<span data-ttu-id="bfc6e-179">Dopo aver configurato l'archiviazione, viene creato un contenitore di archiviazione nell'account di archiviazione non appena si verifica un evento in una delle categorie di log abilitate.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-179">Once you have set up archival, a storage container is created in the storage account as soon as an event occurs in one of the log categories you have enabled.</span></span> <span data-ttu-id="bfc6e-180">I BLOB nel contenitore seguono lo stesso formato nei log di diagnostica e nel log attività.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-180">The blobs within the container follow the same format across Diagnostic Logs and the Activity Log.</span></span> <span data-ttu-id="bfc6e-181">La struttura di questi BLOB è:</span><span class="sxs-lookup"><span data-stu-id="bfc6e-181">The structure of these blobs is:</span></span>

> <span data-ttu-id="bfc6e-182">insights-logs-{log category name}/resourceId=/SUBSCRIPTIONS/{subscription ID}/RESOURCEGROUPS/{nome gruppo risorse}/PROVIDERS/{nome provider risorse}/{tipo risorsa}/{nome risorsa}/y={anno numerico a quattro cifre}/m={mese numerico a due cifre}/d={giorno numerico a due cifre}/h={ora in formato 24 ore a due cifre}/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="bfc6e-182">insights-logs-{log category name}/resourceId=/SUBSCRIPTIONS/{subscription ID}/RESOURCEGROUPS/{resource group name}/PROVIDERS/{resource provider name}/{resource type}/{resource name}/y={four-digit numeric year}/m={two-digit numeric month}/d={two-digit numeric day}/h={two-digit 24-hour clock hour}/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="bfc6e-183">O più semplicemente,</span><span class="sxs-lookup"><span data-stu-id="bfc6e-183">Or, more simply,</span></span>

> <span data-ttu-id="bfc6e-184">insights-logs-{nome categoria log}/resourceId=/{ID risorsa}/y={anno numerico a quattro cifre}/m={mese numerico a due cifre}/d={giorno numerico a due cifre}/h={ora in formato 24 ore a due cifre}/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="bfc6e-184">insights-logs-{log category name}/resourceId=/{resource Id}/y={four-digit numeric year}/m={two-digit numeric month}/d={two-digit numeric day}/h={two-digit 24-hour clock hour}/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="bfc6e-185">Ad esempio, un nome BLOB potrebbe essere:</span><span class="sxs-lookup"><span data-stu-id="bfc6e-185">For example, a blob name might be:</span></span>

> <span data-ttu-id="bfc6e-186">insights-logs-networksecuritygrouprulecounter/resourceId=/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUP/TESTNSG/y=2016/m=08/d=22/h=18/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="bfc6e-186">insights-logs-networksecuritygrouprulecounter/resourceId=/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUP/TESTNSG/y=2016/m=08/d=22/h=18/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="bfc6e-187">Ogni BLOB PT1H.json contiene un BLOB JSON di eventi che si sono verificati nell'ora specificata nell'URL BLOB (ad esempio, h=12).</span><span class="sxs-lookup"><span data-stu-id="bfc6e-187">Each PT1H.json blob contains a JSON blob of events that occurred within the hour specified in the blob URL (for example, h=12).</span></span> <span data-ttu-id="bfc6e-188">Durante l'ora attuale, gli eventi vengono aggiunti al file PT1H.json man mano che si verificano.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-188">During the present hour, events are appended to the PT1H.json file as they occur.</span></span> <span data-ttu-id="bfc6e-189">Il valore dei minuti (m=00) è sempre 00, perché gli eventi del log di diagnostica vengono sempre suddivisi in singoli BLOB per ogni ora.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-189">The minute value (m=00) is always 00, since diagnostic log events are broken into individual blobs per hour.</span></span>

<span data-ttu-id="bfc6e-190">Nel file PT1H.json ogni evento viene archiviato nella matrice "records", con questo formato:</span><span class="sxs-lookup"><span data-stu-id="bfc6e-190">Within the PT1H.json file, each event is stored in the “records” array, following this format:</span></span>

```
{
    "records": [
        {
            "time": "2016-07-01T00:00:37.2040000Z",
            "systemId": "46cdbb41-cb9c-4f3d-a5b4-1d458d827ff1",
            "category": "NetworkSecurityGroupRuleCounter",
            "resourceId": "/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUPS/TESTNSG",
            "operationName": "NetworkSecurityGroupCounters",
            "properties": {
                "vnetResourceGuid": "{12345678-9012-3456-7890-123456789012}",
                "subnetPrefix": "10.3.0.0/24",
                "macAddress": "000123456789",
                "ruleName": "/subscriptions/ s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg/securityRules/default-allow-rdp",
                "direction": "In",
                "type": "allow",
                "matchedConnections": 1988
            }
        }
    ]
}
```

| <span data-ttu-id="bfc6e-191">Nome dell'elemento</span><span class="sxs-lookup"><span data-stu-id="bfc6e-191">Element name</span></span> | <span data-ttu-id="bfc6e-192">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bfc6e-192">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bfc6e-193">time</span><span class="sxs-lookup"><span data-stu-id="bfc6e-193">time</span></span> |<span data-ttu-id="bfc6e-194">Timestamp del momento in cui l'evento è stato generato dal servizio di Azure che ha elaborato la richiesta corrispondente all'evento.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-194">Timestamp when the event was generated by the Azure service processing the request corresponding the event.</span></span> |
| <span data-ttu-id="bfc6e-195">ResourceId</span><span class="sxs-lookup"><span data-stu-id="bfc6e-195">resourceId</span></span> |<span data-ttu-id="bfc6e-196">ID risorsa della risorsa interessata.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-196">Resource ID of the impacted resource.</span></span> |
| <span data-ttu-id="bfc6e-197">operationName</span><span class="sxs-lookup"><span data-stu-id="bfc6e-197">operationName</span></span> |<span data-ttu-id="bfc6e-198">Nome dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-198">Name of the operation.</span></span> |
| <span data-ttu-id="bfc6e-199">category</span><span class="sxs-lookup"><span data-stu-id="bfc6e-199">category</span></span> |<span data-ttu-id="bfc6e-200">Categoria di log dell'evento.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-200">Log category of the event.</span></span> |
| <span data-ttu-id="bfc6e-201">properties</span><span class="sxs-lookup"><span data-stu-id="bfc6e-201">properties</span></span> |<span data-ttu-id="bfc6e-202">Set di coppie `<Key, Value>` ad esempio Dictionary, che descrivono i dettagli dell'evento.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-202">Set of `<Key, Value>` pairs (i.e. Dictionary) describing the details of the event.</span></span> |

> [!NOTE]
> <span data-ttu-id="bfc6e-203">Le proprietà e l'utilizzo di tali proprietà possono variare a seconda della risorsa.</span><span class="sxs-lookup"><span data-stu-id="bfc6e-203">The properties and usage of those properties can vary depending on the resource.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="bfc6e-204">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="bfc6e-204">Next steps</span></span>
* [<span data-ttu-id="bfc6e-205">Introduzione all'archivio BLOB di Azure con .NET</span><span class="sxs-lookup"><span data-stu-id="bfc6e-205">Download blobs for analysis</span></span>](../storage/storage-dotnet-how-to-use-blobs.md)
* [<span data-ttu-id="bfc6e-206">Trasmettere log di diagnostica di Azure a uno spazio di nomi di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="bfc6e-206">Stream diagnostic logs to an Event Hubs namespace</span></span>](monitoring-stream-diagnostic-logs-to-event-hubs.md)
* [<span data-ttu-id="bfc6e-207">Altre informazioni sui log di diagnostica</span><span class="sxs-lookup"><span data-stu-id="bfc6e-207">Read more about diagnostic logs</span></span>](monitoring-overview-of-diagnostic-logs.md)
