---
title: Riparazione di un processo di importazione in Importazione/Esportazione di Azure - versione 1 | Documentazione Microsoft
description: "Informazioni su come ripristinare un processo di importazione che è stato creato ed eseguito usando il servizio Importazione/Esportazione di Azure."
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: 
ms.assetid: 38cc16bd-ad55-4625-9a85-e1726c35fd1b
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: muralikk
ms.openlocfilehash: c837713fd9e7d03287ae5a3644fd6bb47714c9d4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="repairing-an-import-job"></a><span data-ttu-id="0cb17-103">Riparazione di un processo di importazione</span><span class="sxs-lookup"><span data-stu-id="0cb17-103">Repairing an import job</span></span>
<span data-ttu-id="0cb17-104">Il servizio Importazione/Esportazione di Microsoft Azure potrebbe non riuscire a copiare alcuni file o parti di file nel servizio BLOB di Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="0cb17-104">The Microsoft Azure Import/Export service may fail to copy some of your files or parts of a file to the Windows Azure Blob service.</span></span> <span data-ttu-id="0cb17-105">I motivi includono:</span><span class="sxs-lookup"><span data-stu-id="0cb17-105">Some reasons for failures include:</span></span>  
  
-   <span data-ttu-id="0cb17-106">File corrotti</span><span class="sxs-lookup"><span data-stu-id="0cb17-106">Corrupted files</span></span>  
  
-   <span data-ttu-id="0cb17-107">Unità danneggiate</span><span class="sxs-lookup"><span data-stu-id="0cb17-107">Damaged drives</span></span>  
  
-   <span data-ttu-id="0cb17-108">Chiave dell'account di archiviazione modificata durante il trasferimento del file.</span><span class="sxs-lookup"><span data-stu-id="0cb17-108">The storage account key changed while the file was being transferred.</span></span>  
  
<span data-ttu-id="0cb17-109">È possibile eseguire lo strumento di importazione/esportazione di Microsoft Azure con i file di log di copia del processo di importazione. In questo caso, lo strumento carica i file mancanti (o parti di file) nell'account di archiviazione di Windows Azure per completare il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-109">You can run the Microsoft Azure Import/Export Tool with the import job's copy log files, and the tool uploads the missing files (or parts of a file) to your Windows Azure storage account to complete the import job.</span></span>  
  
## <a name="repairimport-parameters"></a><span data-ttu-id="0cb17-110">Parametri di RepairImport</span><span class="sxs-lookup"><span data-stu-id="0cb17-110">RepairImport parameters</span></span>

<span data-ttu-id="0cb17-111">È possibile specificare i parametri seguenti con **RepairImport**:</span><span class="sxs-lookup"><span data-stu-id="0cb17-111">The following parameters can be specified with **RepairImport**:</span></span> 
  
|||  
|-|-|  
|<span data-ttu-id="0cb17-112">**/r:**<RepairFile\></span><span class="sxs-lookup"><span data-stu-id="0cb17-112">**/r:**<RepairFile\></span></span>|<span data-ttu-id="0cb17-113">**Obbligatorio.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-113">**Required.**</span></span> <span data-ttu-id="0cb17-114">Percorso del file di ripristino che tiene traccia dell'avanzamento del ripristino e consente di riprendere un ripristino interrotto.</span><span class="sxs-lookup"><span data-stu-id="0cb17-114">Path to the repair file, which tracks the progress of the repair, and allows you to resume an interrupted repair.</span></span> <span data-ttu-id="0cb17-115">Ogni unità deve contenere un solo file di ripristino.</span><span class="sxs-lookup"><span data-stu-id="0cb17-115">Each drive must have one and only one repair file.</span></span> <span data-ttu-id="0cb17-116">Quando si avvia un ripristino per una determinata unità, si viene spostati nel percorso di un file di ripristino che non esiste ancora.</span><span class="sxs-lookup"><span data-stu-id="0cb17-116">When you start a repair for a given drive, pass in the path to a repair file, which does not yet exist.</span></span> <span data-ttu-id="0cb17-117">Per riprendere un ripristino interrotto, è consigliabile inserire il nome di un file di ripristino esistente.</span><span class="sxs-lookup"><span data-stu-id="0cb17-117">To resume an interrupted repair, you should pass in the name of an existing repair file.</span></span> <span data-ttu-id="0cb17-118">Il file di ripristino corrispondente all'unità di destinazione deve essere sempre specificato.</span><span class="sxs-lookup"><span data-stu-id="0cb17-118">The repair file corresponding to the target drive must always be specified.</span></span>|  
|<span data-ttu-id="0cb17-119">**/logdir:**<LogDirectory\></span><span class="sxs-lookup"><span data-stu-id="0cb17-119">**/logdir:**<LogDirectory\></span></span>|<span data-ttu-id="0cb17-120">**Facoltativo.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-120">**Optional.**</span></span> <span data-ttu-id="0cb17-121">Directory dei log.</span><span class="sxs-lookup"><span data-stu-id="0cb17-121">The log directory.</span></span> <span data-ttu-id="0cb17-122">in cui vengono scritti file di log dettagliati.</span><span class="sxs-lookup"><span data-stu-id="0cb17-122">Verbose log files are written to this directory.</span></span> <span data-ttu-id="0cb17-123">Se non è specificata alcuna directory dei log, viene usata la directory corrente.</span><span class="sxs-lookup"><span data-stu-id="0cb17-123">If no log directory is specified, the current directory is used as the log directory.</span></span>|  
|<span data-ttu-id="0cb17-124">**/d:**<TargetDirectories\></span><span class="sxs-lookup"><span data-stu-id="0cb17-124">**/d:**<TargetDirectories\></span></span>|<span data-ttu-id="0cb17-125">**Obbligatorio.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-125">**Required.**</span></span> <span data-ttu-id="0cb17-126">Una o più directory separate da punto e virgola contenenti i file originali che sono stati importati.</span><span class="sxs-lookup"><span data-stu-id="0cb17-126">One or more semicolon-separated directories that contain the original files that were imported.</span></span> <span data-ttu-id="0cb17-127">È possibile usare anche l'unità di importazione, ma non è obbligatorio se sono disponibili posizioni alternative per i file originali.</span><span class="sxs-lookup"><span data-stu-id="0cb17-127">The import drive may also be used, but is not required if alternate locations of original files are available.</span></span>|  
|<span data-ttu-id="0cb17-128">**/bk:**<BitLockerKey\></span><span class="sxs-lookup"><span data-stu-id="0cb17-128">**/bk:**<BitLockerKey\></span></span>|<span data-ttu-id="0cb17-129">**Facoltativo.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-129">**Optional.**</span></span> <span data-ttu-id="0cb17-130">È necessario specificare la chiave BitLocker se si desidera che lo strumento sblocchi un'unità crittografata in cui sono disponibili i file originali.</span><span class="sxs-lookup"><span data-stu-id="0cb17-130">You should specify the BitLocker key if you want the tool to unlock an encrypted drive where the original files are available.</span></span>|  
|<span data-ttu-id="0cb17-131">**/sn:**<StorageAccountName\></span><span class="sxs-lookup"><span data-stu-id="0cb17-131">**/sn:**<StorageAccountName\></span></span>|<span data-ttu-id="0cb17-132">**Obbligatorio.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-132">**Required.**</span></span> <span data-ttu-id="0cb17-133">Nome dell'account di archiviazione per il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-133">The name of the storage account for the import job.</span></span>|  
|<span data-ttu-id="0cb17-134">**/sk:**<StorageAccountKey\></span><span class="sxs-lookup"><span data-stu-id="0cb17-134">**/sk:**<StorageAccountKey\></span></span>|<span data-ttu-id="0cb17-135">**Obbligatorio** solo se non è specificata una firma di accesso condiviso del contenitore.</span><span class="sxs-lookup"><span data-stu-id="0cb17-135">**Required** if and only if a container SAS is not specified.</span></span> <span data-ttu-id="0cb17-136">Chiave dell'account per l'account di archiviazione per il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-136">The account key for the storage account for the import job.</span></span>|  
|<span data-ttu-id="0cb17-137">**/csas:**<ContainerSas\></span><span class="sxs-lookup"><span data-stu-id="0cb17-137">**/csas:**<ContainerSas\></span></span>|<span data-ttu-id="0cb17-138">**Obbligatorio** solo se non è specificata la chiave dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-138">**Required** if and only if the storage account key is not specified.</span></span> <span data-ttu-id="0cb17-139">Firma di accesso condiviso del contenitore per l'accesso ai BLOB associati al processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-139">The container SAS for accessing the blobs associated with the import job.</span></span>|  
|<span data-ttu-id="0cb17-140">**/CopyLogFile:**<DriveCopyLogFile\></span><span class="sxs-lookup"><span data-stu-id="0cb17-140">**/CopyLogFile:**<DriveCopyLogFile\></span></span>|<span data-ttu-id="0cb17-141">**Obbligatorio.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-141">**Required.**</span></span> <span data-ttu-id="0cb17-142">Percorso del file dei log di copia dell'unità (log dettagliato o log di errore).</span><span class="sxs-lookup"><span data-stu-id="0cb17-142">Path to the drive copy log file (either verbose log or error log).</span></span> <span data-ttu-id="0cb17-143">Il file viene generato dal servizio di Importazione/Esportazione di Azure e può essere scaricato dall'archiviazione BLOB associata al processo.</span><span class="sxs-lookup"><span data-stu-id="0cb17-143">The file is generated by the Windows Azure Import/Export service and can be downloaded from the blob storage associated with the job.</span></span> <span data-ttu-id="0cb17-144">Il file dei log di copia contiene informazioni sui BLOB non riusciti o sui file da ripristinare.</span><span class="sxs-lookup"><span data-stu-id="0cb17-144">The copy log file contains information about failed blobs or files, which are to be repaired.</span></span>|  
|<span data-ttu-id="0cb17-145">**/PathMapFile:**<DrivePathMapFile\></span><span class="sxs-lookup"><span data-stu-id="0cb17-145">**/PathMapFile:**<DrivePathMapFile\></span></span>|<span data-ttu-id="0cb17-146">**Facoltativo.**</span><span class="sxs-lookup"><span data-stu-id="0cb17-146">**Optional.**</span></span> <span data-ttu-id="0cb17-147">Percorso di un file di testo che può essere usato per risolvere le ambiguità, se si dispone di più file con lo stesso nome importati nello stesso processo.</span><span class="sxs-lookup"><span data-stu-id="0cb17-147">Path to a text file that can be used to resolve ambiguities if you have multiple files with the same name that you were importing in the same job.</span></span> <span data-ttu-id="0cb17-148">La prima volta che viene eseguito lo strumento, è possibile popolare questo file con tutti i nomi ambigui.</span><span class="sxs-lookup"><span data-stu-id="0cb17-148">The first time the tool is run, it can populate this file with all of the ambiguous names.</span></span> <span data-ttu-id="0cb17-149">Le esecuzioni successive dello strumento useranno questo file per risolvere le ambiguità.</span><span class="sxs-lookup"><span data-stu-id="0cb17-149">Subsequent runs of the tool use this file to resolve the ambiguities.</span></span>|  
  
## <a name="using-the-repairimport-command"></a><span data-ttu-id="0cb17-150">Uso del comando RepairImport</span><span class="sxs-lookup"><span data-stu-id="0cb17-150">Using the RepairImport command</span></span>  
<span data-ttu-id="0cb17-151">Per ripristinare i dati di importazione tramite flusso di dati in rete, è necessario specificare le directory contenenti i file originali importati usando il parametro `/d`.</span><span class="sxs-lookup"><span data-stu-id="0cb17-151">To repair import data by streaming the data over the network, you must specify the directories that contain the original files you were importing using the `/d` parameter.</span></span> <span data-ttu-id="0cb17-152">È anche necessario specificare il file di log di copia scaricato dall'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-152">You must also specify the copy log file that you downloaded from your storage account.</span></span> <span data-ttu-id="0cb17-153">Una tipica riga di comando per ripristinare un processo di importazione con errori parziali è:</span><span class="sxs-lookup"><span data-stu-id="0cb17-153">A typical command line to repair an import job with partial failures looks like:</span></span>  
  
```  
WAImportExport.exe RepairImport /r:C:\WAImportExport\9WM35C2V.rep /d:C:\Users\bob\Pictures;X:\BobBackup\photos /sn:bobmediaaccount /sk:VkGbrUqBWLYJ6zg1m29VOTrxpBgdNOlp+kp0C9MEdx3GELxmBw4hK94f7KysbbeKLDksg7VoN1W/a5UuM2zNgQ== /CopyLogFile:C:\WAImportExport\9WM35C2V.log  
```  
  
<span data-ttu-id="0cb17-154">Nell'esempio seguente di file dei log di copia, una parte da 64 K di un file era corrotta nell'unità inviata per il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-154">In the following example of a copy log file, one 64-K piece of a file was corrupted on the drive that was shipped for the import job.</span></span> <span data-ttu-id="0cb17-155">Poiché si tratta dell'unico errore indicato, il resto dei BLOB nel processo sono stati importati.</span><span class="sxs-lookup"><span data-stu-id="0cb17-155">Since this is the only failure indicated, the rest of the blobs in the job were successfully imported.</span></span>  
  
```xml
<?xml version="1.0" encoding="utf-8"?>  
<DriveLog>  
 <DriveId>9WM35C2V</DriveId>  
 <Blob Status="CompletedWithErrors">  
 <BlobPath>pictures/animals/koala.jpg</BlobPath>  
 <FilePath>\animals\koala.jpg</FilePath>  
 <Length>163840</Length>  
 <ImportDisposition Status="Overwritten">overwrite</ImportDisposition>  
 <PageRangeList>  
  <PageRange Offset="65536" Length="65536" Hash="AA2585F6F6FD01C4AD4256E018240CD4" Status="Corrupted" />  
 </PageRangeList>  
 </Blob>  
 <Status>CompletedWithErrors</Status>  
</DriveLog>  
```
  
<span data-ttu-id="0cb17-156">Quando questo log di copia viene passato allo strumento di importazione/esportazione di Azure, lo strumento prova a completare l'importazione del file copiando i contenuti mancanti in rete.</span><span class="sxs-lookup"><span data-stu-id="0cb17-156">When this copy log is passed to the Azure Import/Export Tool, the tool tries to finish the import for this file by copying the missing contents across the network.</span></span> <span data-ttu-id="0cb17-157">Come nell'esempio precedente, lo strumento cerca il file originale `\animals\koala.jpg` all'interno delle due directory `C:\Users\bob\Pictures` e `X:\BobBackup\photos`.</span><span class="sxs-lookup"><span data-stu-id="0cb17-157">Following the example above, the tool looks for the original file `\animals\koala.jpg` within the two directories `C:\Users\bob\Pictures` and `X:\BobBackup\photos`.</span></span> <span data-ttu-id="0cb17-158">Se il file `C:\Users\bob\Pictures\animals\koala.jpg` esiste, lo strumento di importazione/esportazione di Azure copia l'intervallo di dati mancante nel BLOB corrispondente `http://bobmediaaccount.blob.core.windows.net/pictures/animals/koala.jpg`.</span><span class="sxs-lookup"><span data-stu-id="0cb17-158">If the file `C:\Users\bob\Pictures\animals\koala.jpg` exists, the Azure Import/Export Tool copies the missing range of data to the corresponding blob `http://bobmediaaccount.blob.core.windows.net/pictures/animals/koala.jpg`.</span></span>  
  
## <a name="resolving-conflicts-when-using-repairimport"></a><span data-ttu-id="0cb17-159">Risoluzione dei conflitti quando si usa RepairImport</span><span class="sxs-lookup"><span data-stu-id="0cb17-159">Resolving conflicts when using RepairImport</span></span>  
<span data-ttu-id="0cb17-160">In alcune situazioni lo strumento potrebbe non essere in grado di trovare o aprire il file necessario per uno dei motivi seguenti: è impossibile trovare il file, il file non è accessibile, il nome del file è ambiguo oppure il contenuto del file non è più corretto.</span><span class="sxs-lookup"><span data-stu-id="0cb17-160">In some situations, the tool may not be able to find or open the necessary file for one of the following reasons: the file could not be found, the file is not accessible, the file name is ambiguous, or the content of the file is no longer correct.</span></span>  
  
<span data-ttu-id="0cb17-161">Potrebbe verificarsi un errore di ambiguità se lo strumento tenta di individuare `\animals\koala.jpg` ed esiste un file con lo stesso nome sia in `C:\Users\bob\pictures` sia in `X:\BobBackup\photos`.</span><span class="sxs-lookup"><span data-stu-id="0cb17-161">An ambiguous error could occur if the tool is trying to locate `\animals\koala.jpg` and there is a file with that name under both `C:\Users\bob\pictures` and `X:\BobBackup\photos`.</span></span> <span data-ttu-id="0cb17-162">Ovvero sia `C:\Users\bob\pictures\animals\koala.jpg` che `X:\BobBackup\photos\animals\koala.jpg` esistono nelle unità del processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-162">That is, both `C:\Users\bob\pictures\animals\koala.jpg` and `X:\BobBackup\photos\animals\koala.jpg` exist on the import job drives.</span></span>  
  
<span data-ttu-id="0cb17-163">L'opzione `/PathMapFile` consente di risolvere questi errori.</span><span class="sxs-lookup"><span data-stu-id="0cb17-163">The `/PathMapFile` option allows you to resolve these errors.</span></span> <span data-ttu-id="0cb17-164">È possibile specificare il nome del file contenente l'elenco di file che lo strumento non è stato in grado di identificare in modo corretto.</span><span class="sxs-lookup"><span data-stu-id="0cb17-164">You can specify the name of the file, which contains the list of files that the tool was not able to correctly identify.</span></span> <span data-ttu-id="0cb17-165">La riga di comando di esempio seguente consente di popolare `9WM35C2V_pathmap.txt`:</span><span class="sxs-lookup"><span data-stu-id="0cb17-165">The following command-line example populates `9WM35C2V_pathmap.txt`:</span></span>  
  
```
WAImportExport.exe RepairImport /r:C:\WAImportExport\9WM35C2V.rep /d:C:\Users\bob\Pictures;X:\BobBackup\photos /sn:bobmediaaccount /sk:VkGbrUqBWLYJ6zg1m29VOTrxpBgdNOlp+kp0C9MEdx3GELxmBw4hK94f7KysbbeKLDksg7VoN1W/a5UuM2zNgQ== /CopyLogFile:C:\WAImportExport\9WM35C2V.log /PathMapFile:C:\WAImportExport\9WM35C2V_pathmap.txt  
```
  
<span data-ttu-id="0cb17-166">Lo strumento scriverà quindi i percorsi dei file problematici in `9WM35C2V_pathmap.txt`, uno per ogni riga.</span><span class="sxs-lookup"><span data-stu-id="0cb17-166">The tool will then write the problematic file paths to `9WM35C2V_pathmap.txt`, one on each line.</span></span> <span data-ttu-id="0cb17-167">Ad esempio, dopo l'esecuzione del comando il file potrebbe contenere le voci seguenti:</span><span class="sxs-lookup"><span data-stu-id="0cb17-167">For instance, the file may contain the following entries after running the command:</span></span>  
 
```
\animals\koala.jpg  
\animals\kangaroo.jpg  
```
  
 <span data-ttu-id="0cb17-168">Per ogni file nell'elenco, è consigliabile tentare di individuare e aprire il file per assicurarsi che sia disponibile per lo strumento.</span><span class="sxs-lookup"><span data-stu-id="0cb17-168">For each file in the list, you should attempt to locate and open the file to ensure it is available to the tool.</span></span> <span data-ttu-id="0cb17-169">Se si desidera indicare in modo esplicito allo strumento dove trovare un file, è possibile modificare il file di mappa del percorso e aggiungere i percorsi di tutti i file nella stessa riga, separati da un carattere di tabulazione:</span><span class="sxs-lookup"><span data-stu-id="0cb17-169">If you wish to tell the tool explicitly where to find a file, you can modify the path map file and add the path to each file on the same line, separated by a tab character:</span></span>  
  
```
\animals\koala.jpg           C:\Users\bob\Pictures\animals\koala.jpg  
\animals\kangaroo.jpg        X:\BobBackup\photos\animals\kangaroo.jpg  
```
  
<span data-ttu-id="0cb17-170">Dopo aver reso disponibili i file necessari allo strumento o aver aggiornato il file di mappa del percorso, è possibile eseguire nuovamente lo strumento per completare il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="0cb17-170">After making the necessary files available to the tool, or updating the path map file, you can rerun the tool to complete the import process.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="0cb17-171">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="0cb17-171">Next steps</span></span>
 
* [<span data-ttu-id="0cb17-172">Configurazione dello strumento Importazione/Esportazione di Azure</span><span class="sxs-lookup"><span data-stu-id="0cb17-172">Setting Up the Azure Import/Export Tool</span></span>](storage-import-export-tool-setup-v1.md)   
* <span data-ttu-id="0cb17-173">[Preparing hard drives for an import job](../storage-import-export-tool-preparing-hard-drives-import-v1.md) (Preparazione dei dischi rigidi per un processo di importazione)</span><span class="sxs-lookup"><span data-stu-id="0cb17-173">[Preparing hard drives for an import job](../storage-import-export-tool-preparing-hard-drives-import-v1.md)</span></span>   
* <span data-ttu-id="0cb17-174">[Reviewing job status with copy log files](storage-import-export-tool-reviewing-job-status-v1.md) (Revisione dello stato dei processi con i file di log di copia)</span><span class="sxs-lookup"><span data-stu-id="0cb17-174">[Reviewing job status with copy log files](storage-import-export-tool-reviewing-job-status-v1.md)</span></span>   
* <span data-ttu-id="0cb17-175">[Repairing an export job](../storage-import-export-tool-repairing-an-export-job-v1.md) (Riparazione di un processo di esportazione)</span><span class="sxs-lookup"><span data-stu-id="0cb17-175">[Repairing an export job](../storage-import-export-tool-repairing-an-export-job-v1.md)</span></span>   
* [<span data-ttu-id="0cb17-176">Risoluzione dei problemi relativi allo strumento Importazione/Esportazione di Azure</span><span class="sxs-lookup"><span data-stu-id="0cb17-176">Troubleshooting the Azure Import/Export Tool</span></span>](storage-import-export-tool-troubleshooting-v1.md)
