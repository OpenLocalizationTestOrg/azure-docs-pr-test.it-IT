---
title: aaaUse tooaccess l'autenticazione di Azure AD API di servizi multimediali di Azure con REST | Documenti Microsoft
description: Informazioni su come tooaccess API di servizi multimediali di Azure con l'autenticazione di Azure Active Directory tramite REST.
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="3b893-103">Usare Azure AD authentication tooaccess hello Azure API dei servizi multimediali con REST</span><span class="sxs-lookup"><span data-stu-id="3b893-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="3b893-104">il team di servizi multimediali di Azure Hello è stata rilasciata a supporto dell'autenticazione di Azure Active Directory (Azure AD) per l'accesso a servizi multimediali di Azure.</span><span class="sxs-lookup"><span data-stu-id="3b893-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="3b893-105">Inoltre annunciato piani toodeprecate Access Control di Azure l'autenticazione del servizio per l'accesso a servizi multimediali.</span><span class="sxs-lookup"><span data-stu-id="3b893-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="3b893-106">Poiché ogni sottoscrizione di Azure e ogni account di servizi multimediali è tenant tooan collegato AD Azure, supporto per l'autenticazione di Azure AD offre diversi vantaggi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3b893-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="3b893-107">Per informazioni dettagliate su questa modifica e la migrazione (se si utilizza hello Media Services .NET SDK per app), vedere l'esempio hello post di blog e articoli:</span><span class="sxs-lookup"><span data-stu-id="3b893-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- <span data-ttu-id="3b893-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation) (Servizi multimediali di Azure annuncia il supporto per Azure AD e dichiara deprecata l'autenticazione del servizio Controllo di accesso)</span><span class="sxs-lookup"><span data-stu-id="3b893-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)</span></span>
- <span data-ttu-id="3b893-109">[Access Azure Media Services API by using Azure AD authentication](media-services-use-aad-auth-to-access-ams-api.md) (Accedere all'API Servizi multimediali di Microsoft Azure tramite l'autenticazione di Azure AD)</span><span class="sxs-lookup"><span data-stu-id="3b893-109">[Access Azure Media Services API by using Azure AD authentication](media-services-use-aad-auth-to-access-ams-api.md)</span></span>
- [<span data-ttu-id="3b893-110">Usare l'autenticazione di Azure AD tooaccess API di servizi multimediali di Azure con Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="3b893-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="3b893-111">Introduzione ad Azure AD authentication utilizzando hello portale di Azure</span><span class="sxs-lookup"><span data-stu-id="3b893-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="3b893-112">Alcuni clienti necessario toodevelop le relative soluzioni di servizi multimediali in hello seguenti vincoli:</span><span class="sxs-lookup"><span data-stu-id="3b893-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="3b893-113">Utilizzano un linguaggio di programmazione che non è Microsoft .NET o Visual c# o l'ambiente di runtime hello non è Windows.</span><span class="sxs-lookup"><span data-stu-id="3b893-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="3b893-114">Librerie di Azure AD, ad esempio librerie di autenticazione di Active Directory non sono disponibili per hello linguaggio di programmazione o non possono essere utilizzate per il proprio ambiente di runtime.</span><span class="sxs-lookup"><span data-stu-id="3b893-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="3b893-115">Alcuni clienti hanno sviluppato applicazioni tramite l'API REST sia per l'autenticazione del servizio Controllo di accesso che per l'accesso a Servizi multimediali di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="3b893-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="3b893-116">In questi casi, è necessario un hello solo toouse modo API REST per l'autenticazione di Azure AD e accedere a servizi multimediali di Azure successive.</span><span class="sxs-lookup"><span data-stu-id="3b893-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="3b893-117">È necessario toonot si basano su una delle librerie di hello Azure AD o su hello Media Services .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="3b893-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="3b893-118">Questo articolo descrive una soluzione e offre codice di esempio per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="3b893-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="3b893-119">Poiché il codice hello tutte le chiamate API REST, senza la dipendenza su qualsiasi AD Azure o libreria di servizi multimediali di Azure, il codice hello può facilmente essere tradotte tooany altro linguaggio di programmazione.</span><span class="sxs-lookup"><span data-stu-id="3b893-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3b893-120">Attualmente servizi multimediali supporta modello di autenticazione hello Azure Access Control services.</span><span class="sxs-lookup"><span data-stu-id="3b893-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="3b893-121">L'autenticazione di Controllo di accesso, tuttavia, verrà dichiarata deprecata il 1° giugno 2018.</span><span class="sxs-lookup"><span data-stu-id="3b893-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="3b893-122">Si consiglia di migrare il modello di autenticazione di Azure AD toohello appena possibile.</span><span class="sxs-lookup"><span data-stu-id="3b893-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="3b893-123">Progettazione</span><span class="sxs-lookup"><span data-stu-id="3b893-123">Design</span></span>

<span data-ttu-id="3b893-124">In questo articolo, si usa hello dopo l'autenticazione e autorizzazione:</span><span class="sxs-lookup"><span data-stu-id="3b893-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="3b893-125">Protocollo di autorizzazione: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="3b893-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="3b893-126">OAuth 2.0 è uno standard di sicurezza Web che riguarda sia l'autenticazione che l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="3b893-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="3b893-127">Questo standard, supportato da Google, Microsoft, Facebook e PayPal,</span><span class="sxs-lookup"><span data-stu-id="3b893-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="3b893-128">è stato ratificato nell'ottobre 2012.</span><span class="sxs-lookup"><span data-stu-id="3b893-128">It was ratified October 2012.</span></span> <span data-ttu-id="3b893-129">Microsoft supporta stabilmente gli standard OAuth 2.0 e OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="3b893-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="3b893-130">in diversi servizi e in più librerie client, tra cui Azure Active Directory, Open Web Interface for .NET (OWIN) Katana e le librerie di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3b893-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="3b893-131">Tipo di concessione: credenziali client.</span><span class="sxs-lookup"><span data-stu-id="3b893-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="3b893-132">Le credenziali del client è uno dei tipi di concessione quattro hello in OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="3b893-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="3b893-133">e viene spesso usato per l'accesso all'API Microsoft Graph di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3b893-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="3b893-134">Modalità di autenticazione: entità servizio.</span><span class="sxs-lookup"><span data-stu-id="3b893-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="3b893-135">Hello altre modalità di autenticazione è autenticazione interattivo o utente.</span><span class="sxs-lookup"><span data-stu-id="3b893-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="3b893-136">Un totale di quattro applicazioni o servizi sono coinvolti nel flusso di autenticazione e autorizzazione hello Azure AD per l'utilizzo di servizi multimediali.</span><span class="sxs-lookup"><span data-stu-id="3b893-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="3b893-137">flusso di hello e i servizi e applicazioni Hello sono descritti in hello nella tabella seguente:</span><span class="sxs-lookup"><span data-stu-id="3b893-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="3b893-138">Tipo di applicazione</span><span class="sxs-lookup"><span data-stu-id="3b893-138">Application type</span></span> |<span data-ttu-id="3b893-139">Applicazione</span><span class="sxs-lookup"><span data-stu-id="3b893-139">Application</span></span> |<span data-ttu-id="3b893-140">Flusso</span><span class="sxs-lookup"><span data-stu-id="3b893-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="3b893-141">Client</span><span class="sxs-lookup"><span data-stu-id="3b893-141">Client</span></span> | <span data-ttu-id="3b893-142">App o soluzione del cliente</span><span class="sxs-lookup"><span data-stu-id="3b893-142">Customer app or solution</span></span> | <span data-ttu-id="3b893-143">Questa applicazione (in realtà, il proxy) viene registrata nel tenant di Azure AD hello in cui hello Azure media di sottoscrizione e hello risiede l'account di servizio.</span><span class="sxs-lookup"><span data-stu-id="3b893-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="3b893-144">Hello dell'entità servizio dell'applicazione hello registrato viene quindi concessa con ruolo di proprietario o collaboratore nel controllo di accesso (IAM) dell'account del servizio di supporto hello hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="3b893-145">entità servizio Hello è rappresentato da hello segreto dell'app client ID e client.</span><span class="sxs-lookup"><span data-stu-id="3b893-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="3b893-146">Provider di identità (IDP)</span><span class="sxs-lookup"><span data-stu-id="3b893-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="3b893-147">Azure AD come IDP</span><span class="sxs-lookup"><span data-stu-id="3b893-147">Azure AD as IDP</span></span> | <span data-ttu-id="3b893-148">entità di servizio app registrato Hello (ID client e il segreto client) è stato autenticato da Azure AD come provider di identità hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="3b893-149">Questa autenticazione viene eseguita internamente e in modo implicito.</span><span class="sxs-lookup"><span data-stu-id="3b893-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="3b893-150">Come flusso di credenziali client, il client di hello viene autenticato anziché utente hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="3b893-151">Servizio token di sicurezza/Server OAuth</span><span class="sxs-lookup"><span data-stu-id="3b893-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="3b893-152">Azure AD come servizio token di sicurezza</span><span class="sxs-lookup"><span data-stu-id="3b893-152">Azure AD as STS</span></span> | <span data-ttu-id="3b893-153">Dopo l'autenticazione da IDP hello (o OAuth Server in termini di OAuth 2.0), un token di accesso o JSON Web Token (JWT) viene rilasciato da Azure AD come servizio token di sicurezza/OAuth Server per la risorsa di livello intermedio toohello di accesso: in questo caso, hello endpoint API REST di servizi multimediali.</span><span class="sxs-lookup"><span data-stu-id="3b893-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="3b893-154">Risorsa</span><span class="sxs-lookup"><span data-stu-id="3b893-154">Resource</span></span> | <span data-ttu-id="3b893-155">API REST di Servizi multimediali</span><span class="sxs-lookup"><span data-stu-id="3b893-155">Media Services REST API</span></span> | <span data-ttu-id="3b893-156">Ogni chiamata API REST di servizi multimediali è autorizzata da un token di accesso che viene generato da Azure AD come servizio token di sicurezza o server OAuth hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="3b893-157">Se si esegue il codice di esempio hello e acquisizione un token di accesso o un token JWT, hello JWT ha hello gli attributi seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b893-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="3b893-158">Ecco i mapping di hello tra attributi hello in hello JWT hello quattro applicazioni o servizi nella tabella precedente hello:</span><span class="sxs-lookup"><span data-stu-id="3b893-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="3b893-159">Tipo di applicazione</span><span class="sxs-lookup"><span data-stu-id="3b893-159">Application type</span></span> |<span data-ttu-id="3b893-160">Applicazione</span><span class="sxs-lookup"><span data-stu-id="3b893-160">Application</span></span> |<span data-ttu-id="3b893-161">Attributo JWT</span><span class="sxs-lookup"><span data-stu-id="3b893-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="3b893-162">Client</span><span class="sxs-lookup"><span data-stu-id="3b893-162">Client</span></span> |<span data-ttu-id="3b893-163">App o soluzione del cliente</span><span class="sxs-lookup"><span data-stu-id="3b893-163">Customer app or solution</span></span> |<span data-ttu-id="3b893-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="3b893-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="3b893-165">ID client Hello di un'applicazione AD tooAzure verrà registrato nella sezione successiva hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="3b893-166">Provider di identità (IDP)</span><span class="sxs-lookup"><span data-stu-id="3b893-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="3b893-167">Azure AD come IDP</span><span class="sxs-lookup"><span data-stu-id="3b893-167">Azure AD as IDP</span></span> |<span data-ttu-id="3b893-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="3b893-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="3b893-169">Hello GUID è il tenant di ID di Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3b893-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="3b893-170">Ogni tenant ha un proprio ID univoco.</span><span class="sxs-lookup"><span data-stu-id="3b893-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="3b893-171">Servizio token di sicurezza/Server OAuth</span><span class="sxs-lookup"><span data-stu-id="3b893-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="3b893-172">Azure AD come servizio token di sicurezza</span><span class="sxs-lookup"><span data-stu-id="3b893-172">Azure AD as STS</span></span> | <span data-ttu-id="3b893-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="3b893-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="3b893-174">Hello GUID è il tenant di ID di Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3b893-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="3b893-175">Risorsa</span><span class="sxs-lookup"><span data-stu-id="3b893-175">Resource</span></span> | <span data-ttu-id="3b893-176">API REST di Servizi multimediali</span><span class="sxs-lookup"><span data-stu-id="3b893-176">Media Services REST API</span></span> |<span data-ttu-id="3b893-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="3b893-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="3b893-178">destinatario Hello o gruppo di destinatari del token di accesso hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="3b893-179">Procedura per la configurazione</span><span class="sxs-lookup"><span data-stu-id="3b893-179">Steps for setup</span></span>

<span data-ttu-id="3b893-180">tooregister e configurare un'applicazione Azure AD per l'autenticazione di Azure AD e tooobtain un token di accesso per richiamare l'endpoint API REST di servizi multimediali di Azure hello, hello completo alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="3b893-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="3b893-181">In hello [portale di Azure classico](http://go.microsoft.com/fwlink/?LinkID=213885), registrare un tenant toohello Azure AD di Azure AD applicazione (ad esempio, wzmediaservice) (ad esempio, microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3b893-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="3b893-182">È possibile registrare l'applicazione come app Web o come app nativa.</span><span class="sxs-lookup"><span data-stu-id="3b893-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="3b893-183">È anche possibile scegliere un URL di sign-on e un URL di risposta, ad esempio http://wzmediaservice.com per entrambi.</span><span class="sxs-lookup"><span data-stu-id="3b893-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="3b893-184">In hello [portale di Azure classico](http://go.microsoft.com/fwlink/?LinkID=213885), visitare toohello **configura** scheda dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3b893-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="3b893-185">Hello nota **ID client**.</span><span class="sxs-lookup"><span data-stu-id="3b893-185">Note hello **client ID**.</span></span> <span data-ttu-id="3b893-186">quindi in **Chiavi** generare una **chiave client** (segreto client).</span><span class="sxs-lookup"><span data-stu-id="3b893-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="3b893-187">Prendere nota della chiave privata client hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-187">Take note of hello client secret.</span></span> <span data-ttu-id="3b893-188">Non verrà più visualizzato.</span><span class="sxs-lookup"><span data-stu-id="3b893-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="3b893-189">In hello [portale di Azure](http://ms.portal.azure.com), visitare l'account di servizi multimediali toohello.</span><span class="sxs-lookup"><span data-stu-id="3b893-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="3b893-190">Seleziona hello **controllo di accesso** riquadro (IAM).</span><span class="sxs-lookup"><span data-stu-id="3b893-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="3b893-191">Aggiungere un nuovo membro che ha hello proprietario o collaboratore hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="3b893-192">Per entità di hello, cercare il nome di applicazione hello registrato nel passaggio 1 (in questo esempio, wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="3b893-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="3b893-193">Info toocollect</span><span class="sxs-lookup"><span data-stu-id="3b893-193">Info toocollect</span></span>

<span data-ttu-id="3b893-194">tooprepare REST per la generazione di codice, raccogliere hello tooinclude punti dati nel codice hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b893-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="3b893-195">Azure AD come endpoint servizio token di sicurezza: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="3b893-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="3b893-196">Da questo endpoint si richiede un token di accesso JWT.</span><span class="sxs-lookup"><span data-stu-id="3b893-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="3b893-197">Inoltre tooserving come un provider di identità, Azure AD funge anche da un servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3b893-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="3b893-198">Azure AD emette un token JWT per l'accesso alle risorse (token di accesso).</span><span class="sxs-lookup"><span data-stu-id="3b893-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="3b893-199">Un token JWT ha varie attestazioni.</span><span class="sxs-lookup"><span data-stu-id="3b893-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="3b893-200">API REST di Servizi multimediali di Microsoft come risorsa o gruppo di destinatari: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="3b893-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="3b893-201">ID client: vedere il passaggio 2 in [Procedura per la configurazione](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="3b893-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="3b893-202">Segreto client: vedere il passaggio 2 in [Procedura per la configurazione](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="3b893-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="3b893-203">L'endpoint dell'API REST account servizi multimediali in hello seguente formato:</span><span class="sxs-lookup"><span data-stu-id="3b893-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="3b893-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="3b893-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="3b893-205">Si tratta hello endpoint in cui tutte le API REST di servizi multimediali vengono effettuate chiamate dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3b893-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="3b893-206">ad esempio, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="3b893-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="3b893-207">È quindi possibile inserire queste cinque parametri nel file Web. config o App. config, toouse nel codice.</span><span class="sxs-lookup"><span data-stu-id="3b893-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="3b893-208">Codice di esempio</span><span class="sxs-lookup"><span data-stu-id="3b893-208">Sample code</span></span>

<span data-ttu-id="3b893-209">È possibile trovare il codice di esempio hello in [autenticazione di Azure AD per l'accesso di Azure Media Services: sia tramite l'API REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="3b893-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="3b893-210">codice di esempio Hello è costituito da due parti:</span><span class="sxs-lookup"><span data-stu-id="3b893-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="3b893-211">Un progetto di libreria DLL che contiene tutto il codice hello API REST di Azure AD autenticazione e autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="3b893-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="3b893-212">Include inoltre un metodo per effettuare chiamate toohello API REST di servizi multimediali endpoint dell'API REST, con il token di accesso di hello.</span><span class="sxs-lookup"><span data-stu-id="3b893-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="3b893-213">Un client console di test, che avvia l'autenticazione di Azure AD e chiama un'API REST di Servizi multimediali diversa.</span><span class="sxs-lookup"><span data-stu-id="3b893-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="3b893-214">progetto di esempio Hello presenta tre caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="3b893-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="3b893-215">Autenticazioni AD Azure tramite le credenziali del client hello concedono utilizzando solo hello API REST.</span><span class="sxs-lookup"><span data-stu-id="3b893-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="3b893-216">Accesso servizi multimediali di Azure utilizzando solo hello API REST.</span><span class="sxs-lookup"><span data-stu-id="3b893-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="3b893-217">Accesso di archiviazione Azure tramite hello solo l'API REST (come toocreate utilizzato un account di servizi multimediali, tramite l'API REST).</span><span class="sxs-lookup"><span data-stu-id="3b893-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="3b893-218">Dove si trova il token di aggiornamento hello?</span><span class="sxs-lookup"><span data-stu-id="3b893-218">Where is hello refresh token?</span></span>

<span data-ttu-id="3b893-219">Potrebbero richiedere alcuni lettori: dove è il token di aggiornamento hello?</span><span class="sxs-lookup"><span data-stu-id="3b893-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="3b893-220">e perché non venga usato in questo caso.</span><span class="sxs-lookup"><span data-stu-id="3b893-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="3b893-221">scopo di Hello di un token di aggiornamento non è un token di accesso toorefresh.</span><span class="sxs-lookup"><span data-stu-id="3b893-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="3b893-222">In alternativa, è toobypass progettato l'intervento dell'utente o l'autenticazione dell'utente finale e comunque ricevere un token di accesso valido quando scade un token precedente.</span><span class="sxs-lookup"><span data-stu-id="3b893-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="3b893-223">Un nome più appropriato per un token di aggiornamento potrebbe essere qualcosa di simile a "token di rinnovo dell'accesso con bypass dell'utente".</span><span class="sxs-lookup"><span data-stu-id="3b893-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="3b893-224">Se si utilizza hello flusso (nome utente e password, che agisce per conto dell'utente) concedere l'autorizzazione di OAuth 2.0, un token di aggiornamento consente di ottenere un accesso rinnovato token senza richiedere l'intervento dell'utente.</span><span class="sxs-lookup"><span data-stu-id="3b893-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="3b893-225">Tuttavia, per hello OAuth 2.0 concessione di credenziali client del flusso descritti in questo articolo, il client hello opera per proprio conto.</span><span class="sxs-lookup"><span data-stu-id="3b893-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="3b893-226">Non è necessario l'intervento dell'utente in tutti, e il server di autorizzazione hello non deve necessariamente troppo (e non) forniscono un token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="3b893-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="3b893-227">Se si esegue il debug hello **GetUrlEncodedJWT** metodo, si nota che la risposta hello dall'endpoint token hello ha un token di accesso, ma nessun token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="3b893-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3b893-228">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="3b893-228">Next steps</span></span>

<span data-ttu-id="3b893-229">Introduzione a [caricamento file account tooyour](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="3b893-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
