---
title: "Panoramica del log attività di Azure | Microsoft Docs"
description: "Informazioni sul log attività di Azure e su come usarlo per comprendere gli eventi che si verificano all'interno della sottoscrizione di Azure."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: c274782f-039d-4c28-9ddb-f89ce21052c7
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: johnkem
ms.openlocfilehash: 8ff9f73fc0732cd2227b7e0cc1091e04d69014eb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="monitor-subscription-activity-with-the-azure-activity-log"></a><span data-ttu-id="ec765-103">Monitorare l'attività di sottoscrizione con il log attività di Azure</span><span class="sxs-lookup"><span data-stu-id="ec765-103">Monitor Subscription Activity with the Azure Activity Log</span></span>
<span data-ttu-id="ec765-104">Il **log attività di Azure** è un log delle sottoscrizioni che fornisce informazioni approfondite sugli eventi a livello di sottoscrizione che si sono verificati in Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-104">The **Azure Activity Log** is a subscription log that provides insight into subscription-level events that have occurred in Azure.</span></span> <span data-ttu-id="ec765-105">Ciò include un intervallo di dati che vanno dai dati operativi di Azure Resource Manager agli aggiornamenti sugli eventi di integrità del servizio.</span><span class="sxs-lookup"><span data-stu-id="ec765-105">This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.</span></span> <span data-ttu-id="ec765-106">Il log attività era noto in precedenza come "log di controllo" o "log operativo", perché la categoria amministrativa segnala eventi del piano di controllo per le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="ec765-106">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since the Administrative category reports control-plane events for your subscriptions.</span></span> <span data-ttu-id="ec765-107">L'uso del log attività permette di acquisire informazioni dettagliate su qualsiasi operazione di scrittura (PUT, POST, DELETE) eseguita sulle risorse nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ec765-107">Using the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="ec765-108">Consente inoltre di comprendere lo stato dell'operazione e altre proprietà specifiche.</span><span class="sxs-lookup"><span data-stu-id="ec765-108">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="ec765-109">Il log attività non include le operazioni di lettura (GET) o quelle per le risorse che usano il modello classico/"RDFE".</span><span class="sxs-lookup"><span data-stu-id="ec765-109">The Activity Log does not include read (GET) operations or operations for resources that use the Classic/"RDFE" model.</span></span>

![<span data-ttu-id="ec765-110">Log attività o altri tipi di log</span><span class="sxs-lookup"><span data-stu-id="ec765-110">Activity Logs vs other types of logs</span></span> ](./media/monitoring-overview-activity-logs/Activity_Log_vs_other_logs_v5.png)

<span data-ttu-id="ec765-111">Figura 1: Log attività o altri tipi di log</span><span class="sxs-lookup"><span data-stu-id="ec765-111">Figure 1: Activity Logs vs other types of logs</span></span>

<span data-ttu-id="ec765-112">Il log attività è diverso dal [log di diagnostica](monitoring-overview-of-diagnostic-logs.md).</span><span class="sxs-lookup"><span data-stu-id="ec765-112">The Activity Log differs from [Diagnostic Logs](monitoring-overview-of-diagnostic-logs.md).</span></span> <span data-ttu-id="ec765-113">I log attività contengono dati relativi alle operazioni su una risorsa esterna (il "piano di controllo").</span><span class="sxs-lookup"><span data-stu-id="ec765-113">Activity Logs provide data about the operations on a resource from the outside (the "control plane").</span></span> <span data-ttu-id="ec765-114">I log di diagnostica vengono generati da una risorsa e contengono informazioni sul funzionamento di tale risorsa (il "piano dati").</span><span class="sxs-lookup"><span data-stu-id="ec765-114">Diagnostics Logs are emitted by a resource and provide information about the operation of that resource (the "data plane").</span></span>

<span data-ttu-id="ec765-115">Per recuperare eventi dal log attività è possibile usare il portale di Azure, l'interfaccia della riga di comando, i cmdlet di PowerShell e l'API REST di Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-115">You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.</span></span>


> [!WARNING]
> <span data-ttu-id="ec765-116">Il log attività di Azure è destinato principalmente alle attività che si verificano in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ec765-116">The Azure Activity Log is primarily for activities that occur in Azure Resource Manager.</span></span> <span data-ttu-id="ec765-117">Non tiene traccia delle risorse che usano il modello classico/RDFE.</span><span class="sxs-lookup"><span data-stu-id="ec765-117">It does not track resources using the Classic/RDFE model.</span></span> <span data-ttu-id="ec765-118">Alcuni tipi di risorse classiche dispongono di un provider di risorse proxy in Azure Resource Manager (ad esempio, Microsoft.ClassicCompute).</span><span class="sxs-lookup"><span data-stu-id="ec765-118">Some Classic resource types have a proxy resource provider in Azure Resource Manager (for example, Microsoft.ClassicCompute).</span></span> <span data-ttu-id="ec765-119">Se un utente interagisce con un tipo di risorsa classica tramite Azure Resource Manager con questi provider di risorse di proxy, le operazioni verranno visualizzate nel log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-119">If you interact with a Classic resource type through Azure Resource Manager using these proxy resource providers, the operations appear in the Activity Log.</span></span> <span data-ttu-id="ec765-120">Se un utente interagisce con un tipo di risorsa classica nel portale classico o all'esterno dei proxy di Azure Resource Manager, le azioni dell'utente verranno registrate solo nel log delle operazioni.</span><span class="sxs-lookup"><span data-stu-id="ec765-120">If you interact with a Classic resource type in the Classic portal or otherwise outside of the Azure Resource Manager proxies, your actions are only recorded in the Operation Log.</span></span> <span data-ttu-id="ec765-121">Il log delle operazioni è accessibile solo nel portale classico.</span><span class="sxs-lookup"><span data-stu-id="ec765-121">The Operation Log is accessible only in the Classic portal.</span></span>
>
>

<span data-ttu-id="ec765-122">Guardare il video seguente di introduzione al log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-122">View the following video introducing the Activity Log.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Seth-Juarez/Logs-John-Kemnetz/player]
> 
>

## <a name="categories-in-the-activity-log"></a><span data-ttu-id="ec765-123">Categorie nel log attività</span><span class="sxs-lookup"><span data-stu-id="ec765-123">Categories in the Activity Log</span></span>
<span data-ttu-id="ec765-124">Il log attività contiene diverse categorie di dati.</span><span class="sxs-lookup"><span data-stu-id="ec765-124">The Activity Log contains several categories of data.</span></span> <span data-ttu-id="ec765-125">Per informazioni dettagliate sugli schemi di queste categorie, [vedere questo articolo](monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="ec765-125">For full details on the schemata of these categories, [see this article](monitoring-activity-log-schema.md).</span></span> <span data-ttu-id="ec765-126">incluse le seguenti:</span><span class="sxs-lookup"><span data-stu-id="ec765-126">These include:</span></span>
* <span data-ttu-id="ec765-127">**Amministrativa**: questa categoria contiene il record di tutte le operazioni di creazione, aggiornamento, eliminazione e azione eseguite tramite Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ec765-127">**Administrative** - This category contains the record of all create, update, delete, and action operations performed through Resource Manager.</span></span> <span data-ttu-id="ec765-128">Tra gli esempi dei tipi di eventi visualizzati in questa categoria sono inclusi "create virtual machine" e "delete network security group". Ogni azione eseguita da un utente o da un'applicazione usando Resource Manager viene modellata come operazione in un determinato tipo di risorsa.</span><span class="sxs-lookup"><span data-stu-id="ec765-128">Examples of the types of events you would see in this category include "create virtual machine" and "delete network security group" Every action taken by a user or application using Resource Manager is modeled as an operation on a particular resource type.</span></span> <span data-ttu-id="ec765-129">Se l'operazione è di tipo scrittura, eliminazione o azione, i record di avvio e riuscita o di non riuscita di tale operazione vengono registrati nella categoria amministrativa.</span><span class="sxs-lookup"><span data-stu-id="ec765-129">If the operation type is Write, Delete, or Action, the records of both the start and success or fail of that operation are recorded in the Administrative category.</span></span> <span data-ttu-id="ec765-130">La categoria amministrativa include anche eventuali modifiche al controllo degli accessi in base al ruolo in una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ec765-130">The Administrative category also includes any changes to role-based access control in a subscription.</span></span>
* <span data-ttu-id="ec765-131">**Integrità del servizio**: questa categoria contiene il record degli eventi imprevisti di integrità del servizio che si sono verificati in Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-131">**Service Health** - This category contains the record of any service health incidents that have occurred in Azure.</span></span> <span data-ttu-id="ec765-132">Un esempio del tipo di evento visualizzato in questa categoria è "SQL Azure in East US is experiencing downtime".</span><span class="sxs-lookup"><span data-stu-id="ec765-132">An example of the type of event you would see in this category is "SQL Azure in East US is experiencing downtime."</span></span> <span data-ttu-id="ec765-133">Gli eventi di integrità del servizio sono di sei tipi: Action Required, Assisted Recovery, Incident, Maintenance, Information o Security, che vengono visualizzati solo se una risorsa della sottoscrizione è interessata dall'evento.</span><span class="sxs-lookup"><span data-stu-id="ec765-133">Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security, and only appear if you have a resource in the subscription that would be impacted by the event.</span></span>
* <span data-ttu-id="ec765-134">**Avviso**: questa categoria contiene il record di tutte le attivazioni degli avvisi di Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-134">**Alert** - This category contains the record of all activations of Azure alerts.</span></span> <span data-ttu-id="ec765-135">Un esempio del tipo di evento visualizzato in questa categoria è "CPU % on myVM has been over 80 for the past 5 minutes".</span><span class="sxs-lookup"><span data-stu-id="ec765-135">An example of the type of event you would see in this category is "CPU % on myVM has been over 80 for the past 5 minutes."</span></span> <span data-ttu-id="ec765-136">In diversi sistemi Azure il concetto di avviso prevede la possibilità di definire una regola di qualche tipo e di ricevere una notifica quando le condizioni corrispondono a tale regola.</span><span class="sxs-lookup"><span data-stu-id="ec765-136">A variety of Azure systems have an alerting concept -- you can define a rule of some sort and receive a notification when conditions match that rule.</span></span> <span data-ttu-id="ec765-137">Ogni volta che un tipo di avviso di Azure supportato viene "attivato" o vengono soddisfatte le condizioni per generare una notifica, viene anche eseguito il push di un record dell'attivazione in questa categoria del log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-137">Each time a supported Azure alert type 'activates,' or the conditions are met to generate a notification, a record of the activation is also pushed to this category of the Activity Log.</span></span>
* <span data-ttu-id="ec765-138">**Ridimensionamento automatico**: questa categoria contiene il record degli eventi correlati all'operazione del motore di ridimensionamento automatico in base alle impostazioni di scalabilità automatica definite nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ec765-138">**Autoscale** - This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription.</span></span> <span data-ttu-id="ec765-139">Un esempio del tipo di evento visualizzato in questa categoria è "Autoscale scale up action failed".</span><span class="sxs-lookup"><span data-stu-id="ec765-139">An example of the type of event you would see in this category is "Autoscale scale up action failed."</span></span> <span data-ttu-id="ec765-140">Con il ridimensionamento automatico è possibile aumentare o ridurre automaticamente il numero di istanze in un tipo di risorsa supportato in base all'ora del giorno e/o ai dati di caricamento (metrica) usando un'impostazione di ridimensionamento automatico.</span><span class="sxs-lookup"><span data-stu-id="ec765-140">Using autoscale, you can automatically scale out or scale in the number of instances in a supported resource type based on time of day and/or load (metric) data using an autoscale setting.</span></span> <span data-ttu-id="ec765-141">Quando vengono soddisfatte le condizioni per aumentare o ridurre le prestazioni, gli eventi di avvio riusciti o quelli non riusciti vengono registrati in questa categoria.</span><span class="sxs-lookup"><span data-stu-id="ec765-141">When the conditions are met to scale up or down, the start and succeeded or failed events are recorded in this category.</span></span>
* <span data-ttu-id="ec765-142">**Consiglio**: questa categoria include gli eventi di raccomandazione da determinati tipi di risorse, ad esempio siti web e server SQL.</span><span class="sxs-lookup"><span data-stu-id="ec765-142">**Recommendation** - This category contains recommendation events from certain resource types, such as web sites and SQL servers.</span></span> <span data-ttu-id="ec765-143">Questi eventi offrono indicazioni su come usare al meglio le risorse.</span><span class="sxs-lookup"><span data-stu-id="ec765-143">These events offer recommendations for how to better utilize your resources.</span></span> <span data-ttu-id="ec765-144">Gli eventi di questo tipo si verificano solo se si hanno risorse che generano consigli.</span><span class="sxs-lookup"><span data-stu-id="ec765-144">You only receive events of this type if you have resources that emit recommendations.</span></span>
* <span data-ttu-id="ec765-145">**Criterio, sicurezza e integrità delle risorse**: queste categorie non contengono eventi, ma sono riservate per usi futuri.</span><span class="sxs-lookup"><span data-stu-id="ec765-145">**Policy, Security, and Resource Health** - These categories do not contain any events; they are reserved for future use.</span></span>

## <a name="event-schema-per-category"></a><span data-ttu-id="ec765-146">Schema di eventi per categoria</span><span class="sxs-lookup"><span data-stu-id="ec765-146">Event schema per category</span></span>
[<span data-ttu-id="ec765-147">Vedere questo articolo per comprendere lo schema di eventi del log attività per categoria.</span><span class="sxs-lookup"><span data-stu-id="ec765-147">See this article to understand the Activity Log event schema per category.</span></span>](monitoring-activity-log-schema.md)

## <a name="what-you-can-do-with-the-activity-log"></a><span data-ttu-id="ec765-148">Che cosa si può fare con il log attività</span><span class="sxs-lookup"><span data-stu-id="ec765-148">What you can do with the Activity Log</span></span>
<span data-ttu-id="ec765-149">Ecco alcune delle attività che è possibile eseguire con il log attività:</span><span class="sxs-lookup"><span data-stu-id="ec765-149">Here are some of the things you can do with the Activity Log:</span></span>

![Log attività di Azure](./media/monitoring-overview-activity-logs/Activity_Log_Overview_v3.png)


* <span data-ttu-id="ec765-151">Eseguire query e visualizzarlo nel **portale di Azure**.</span><span class="sxs-lookup"><span data-stu-id="ec765-151">Query and view it in the **Azure portal**.</span></span>
* [<span data-ttu-id="ec765-152">Creare un avviso per un evento del log attività</span><span class="sxs-lookup"><span data-stu-id="ec765-152">Create an alert on an Activity Log event.</span></span>](monitoring-activity-log-alerts.md)
* <span data-ttu-id="ec765-153">[Trasmetterlo a un **hub eventi**](monitoring-stream-activity-logs-event-hubs.md) per l'inserimento da parte di un servizio di terze parti o di una soluzione di analisi personalizzata come Power BI.</span><span class="sxs-lookup"><span data-stu-id="ec765-153">[Stream it to an **Event Hub**](monitoring-stream-activity-logs-event-hubs.md) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>
* <span data-ttu-id="ec765-154">Analizzarlo in Power BI usando il [**pacchetto di contenuto di Power BI**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span><span class="sxs-lookup"><span data-stu-id="ec765-154">Analyze it in PowerBI using the [**PowerBI content pack**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span></span>
* <span data-ttu-id="ec765-155">[Salvarlo in un **account di archiviazione** per fini di archiviazione o di ispezione manuale](monitoring-archive-activity-log.md).</span><span class="sxs-lookup"><span data-stu-id="ec765-155">[Save it to a **Storage Account** for archival or manual inspection](monitoring-archive-activity-log.md).</span></span> <span data-ttu-id="ec765-156">È possibile specificare il tempo di conservazione in giorni usando il **profilo di log**.</span><span class="sxs-lookup"><span data-stu-id="ec765-156">You can specify the retention time (in days) using the **Log Profile**.</span></span>
* <span data-ttu-id="ec765-157">Eseguire query tramite l'API REST, i cmdlet di PowerShell o l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="ec765-157">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

## <a name="query-the-activity-log-in-the-azure-portal"></a><span data-ttu-id="ec765-158">Eseguire query sul log attività nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="ec765-158">Query the Activity Log in the Azure portal</span></span>
<span data-ttu-id="ec765-159">Nel portale di Azure è possibile visualizzare il log attività in diverse posizioni:</span><span class="sxs-lookup"><span data-stu-id="ec765-159">Within the Azure portal you can view your Activity Log in several places:</span></span>
* <span data-ttu-id="ec765-160">Il **pannello Log attività**, a cui è possibile accedere cercando Log attività in "Altri servizi" nel riquadro di spostamento sinistro.</span><span class="sxs-lookup"><span data-stu-id="ec765-160">The **Activity Log blade**, which you can access by searching for the Activity Log under "More Services" in the left-hand navigation pane.</span></span>
* <span data-ttu-id="ec765-161">Il **pannello Monitoraggio**, che per impostazione predefinita viene visualizzato nel riquadro di spostamento sinistro.</span><span class="sxs-lookup"><span data-stu-id="ec765-161">The **Monitor blade**, which appears by default in the left-hand navigation pane.</span></span> <span data-ttu-id="ec765-162">Il log attività è una sezione di questo pannello Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-162">The Activity Log is one section of this Azure Monitor blade.</span></span>
* <span data-ttu-id="ec765-163">Tutti i **pannelli delle risorse**, ad esempio il pannello di configurazione di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ec765-163">Any resource's **resource blade**, for example, the configuration blade for a Virtual Machine.</span></span> <span data-ttu-id="ec765-164">Il log attività è una delle sezioni nella maggior parte di questi pannelli delle risorse e, facendovi clic, vengono automaticamente filtrati gli eventi correlati alla risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="ec765-164">The Activity Log is be one of the sections on most of these resource blades, and clicking on it automatically filters the events to those related to that specific resource.</span></span>

<span data-ttu-id="ec765-165">Nel portale di Azure è possibile filtrare il log attività in base a questi campi:</span><span class="sxs-lookup"><span data-stu-id="ec765-165">In the Azure portal, you can filter your Activity Log by these fields:</span></span>
* <span data-ttu-id="ec765-166">Intervallo di tempo: ora di inizio e di fine degli eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-166">Timespan - The start and end time for events.</span></span>
* <span data-ttu-id="ec765-167">Categoria: la categoria di eventi, come descritto sopra.</span><span class="sxs-lookup"><span data-stu-id="ec765-167">Category - The event category as described above.</span></span>
* <span data-ttu-id="ec765-168">Sottoscrizione: uno o più nomi di sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-168">Subscription - One or more Azure subscription names.</span></span>
* <span data-ttu-id="ec765-169">Gruppo di risorse: uno o più gruppi di risorse in tali sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="ec765-169">Resource group - One or more resource groups within those subscriptions.</span></span>
* <span data-ttu-id="ec765-170">Risorsa (nome): nome di una risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="ec765-170">Resource (name) - The name of a specific resource.</span></span>
* <span data-ttu-id="ec765-171">Tipo di risorsa: tipo di risorsa, ad esempio Microsoft.Compute/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="ec765-171">Resource type - The type of resource, for example, Microsoft.Compute/virtualmachines.</span></span>
* <span data-ttu-id="ec765-172">Nome operazione: nome di un'operazione di Azure Resource Manager, ad esempio Microsoft.SQL/servers/Write.</span><span class="sxs-lookup"><span data-stu-id="ec765-172">Operation name - The name of an Azure Resource Manager operation, for example, Microsoft.SQL/servers/Write.</span></span>
* <span data-ttu-id="ec765-173">Gravità: livello di gravità dell'evento (informativo, avviso, errore, critico).</span><span class="sxs-lookup"><span data-stu-id="ec765-173">Severity - The severity level of the event (Informational, Warning, Error, Critical).</span></span>
* <span data-ttu-id="ec765-174">Evento avviato da: "chiamante" o utente che ha eseguito l'operazione.</span><span class="sxs-lookup"><span data-stu-id="ec765-174">Event initiated by - The 'caller,' or user who performed the operation.</span></span>
* <span data-ttu-id="ec765-175">Apri ricerca: casella di ricerca di testo aperta che cerca tale stringa in tutti i campi di tutti gli eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-175">Open search - This is an open text search box that searches for that string across all fields in all events.</span></span>

<span data-ttu-id="ec765-176">Dopo avere definito un set di filtri, è possibile salvarlo come query persistente nelle sessioni, in caso fosse necessario eseguire di nuovo la stessa query in futuro con tali filtri applicati.</span><span class="sxs-lookup"><span data-stu-id="ec765-176">Once you have defined a set of filters, you can save it as a query that is persisted across sessions if you ever need to perform the same query with those filters applied again in the future.</span></span> <span data-ttu-id="ec765-177">È anche possibile aggiungere una query al dashboard di Azure per avere sempre sotto controllo eventi specifici.</span><span class="sxs-lookup"><span data-stu-id="ec765-177">You can also pin a query to your Azure dashboard to always keep an eye on specific events.</span></span>

<span data-ttu-id="ec765-178">Fare clic su "Applica" per eseguire la query e visualizzare tutti gli eventi corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="ec765-178">Clicking "Apply" runs your query and show all matching events.</span></span> <span data-ttu-id="ec765-179">Fare clic su un evento dell'elenco per visualizzare il riepilogo di tale evento, oltre al codice JSON non elaborato completo di tale evento.</span><span class="sxs-lookup"><span data-stu-id="ec765-179">Clicking on any event in the list shows the summary of that event as well as the full raw JSON of that event.</span></span>

<span data-ttu-id="ec765-180">Per eseguire operazioni più avanzate, è possibile fare clic sull'icona **Ricerca log**, che visualizza i dati del log attività nella [soluzione Analisi log attività di Log Analytics](../log-analytics/log-analytics-activity.md).</span><span class="sxs-lookup"><span data-stu-id="ec765-180">For even more power, you can click the **Log Search** icon, which displays your Activity Log data in the [Log Analytics Activity Log Analytics solution](../log-analytics/log-analytics-activity.md).</span></span> <span data-ttu-id="ec765-181">Il pannello Log attività offre un'esperienza di filtro/esplorazione di base con i log, ma Log Analytics consente di trasformare tramite Pivot, eseguire query e visualizzare i dati in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="ec765-181">The Activity Log blade offers a basic filter/browse experience on logs, but Log Analytics enables you to pivot, query, and visualize your data in more powerful ways.</span></span>

## <a name="export-the-activity-log-with-a-log-profile"></a><span data-ttu-id="ec765-182">Esportare il log attività con un profilo di log</span><span class="sxs-lookup"><span data-stu-id="ec765-182">Export the Activity Log with a Log Profile</span></span>
<span data-ttu-id="ec765-183">Un **profilo di log** controlla la modalità di esportazione del log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-183">A **Log Profile** controls how your Activity Log is exported.</span></span> <span data-ttu-id="ec765-184">Un profilo di log permette di configurare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="ec765-184">Using a Log Profile, you can configure:</span></span>

* <span data-ttu-id="ec765-185">Destinazione del log attività, ad esempio un account di archiviazione o un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-185">Where the Activity Log should be sent (Storage Account or Event Hubs)</span></span>
* <span data-ttu-id="ec765-186">Categorie di eventi da inviare (scrittura, eliminazione o azione).</span><span class="sxs-lookup"><span data-stu-id="ec765-186">Which event categories (Write, Delete, Action) should be sent.</span></span> <span data-ttu-id="ec765-187">*Il significato di "categoria" nei profili del log è diverso da quello negli eventi del log attività. Nel profilo del log, la "Categoria" rappresenta il tipo di operazione (scrittura, eliminazione, azione). In un evento del log attività, la proprietà "categoria" rappresenta l'origine o il tipo di evento (ad esempio, amministrazione, ServiceHealth, avviso e altro).*</span><span class="sxs-lookup"><span data-stu-id="ec765-187">*The meaning of "category" in Log Profiles and Activity Log events is different. In the Log Profile, "Category" represents the operation type (Write, Delete, Action). In an Activity Log event, the "category" property represents the source or type of event (for example, Administration, ServiceHealth, Alert, and more).*</span></span>
* <span data-ttu-id="ec765-188">Aree o località da esportare.</span><span class="sxs-lookup"><span data-stu-id="ec765-188">Which regions (locations) should be exported.</span></span> <span data-ttu-id="ec765-189">Assicurarsi di includere "global", perché molti eventi del log attività sono eventi globali.</span><span class="sxs-lookup"><span data-stu-id="ec765-189">Make sure to include "global," as many events in the Activity Log are global events.</span></span>
* <span data-ttu-id="ec765-190">Per quanto tempo il log attività deve essere mantenuto nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ec765-190">How long the Activity Log should be retained in a Storage Account.</span></span>
    - <span data-ttu-id="ec765-191">Un periodo di conservazione di zero giorni significa che i log vengono conservati all'infinito.</span><span class="sxs-lookup"><span data-stu-id="ec765-191">A retention of zero days means logs are kept forever.</span></span> <span data-ttu-id="ec765-192">Se impostato su zero giorni, i log vengono conservati all'infinito.</span><span class="sxs-lookup"><span data-stu-id="ec765-192">Otherwise, the value can be any number of days between 1 and 2147483647.</span></span>
    - <span data-ttu-id="ec765-193">Se i criteri di conservazione sono impostati, ma la memorizzazione dei log in un account di archiviazione è disabilitata, ad esempio se sono selezionate solo le opzioni Hub eventi o OMS, i criteri di conservazione non hanno alcun effetto.</span><span class="sxs-lookup"><span data-stu-id="ec765-193">If retention policies are set but storing logs in a Storage Account is disabled (for example, if only Event Hubs or OMS options are selected), the retention policies have no effect.</span></span>
    - <span data-ttu-id="ec765-194">I criteri di conservazione vengono applicati su base giornaliera. Al termine della giornata (UTC), i log relativi a tale giornata che non rientrano più nei criteri di conservazione verranno eliminati.</span><span class="sxs-lookup"><span data-stu-id="ec765-194">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy are deleted.</span></span> <span data-ttu-id="ec765-195">Se, ad esempio, è presente un criterio di conservazione di un giorno, all'inizio della giornata vengono eliminati i log relativi al giorno precedente.</span><span class="sxs-lookup"><span data-stu-id="ec765-195">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted.</span></span>

<span data-ttu-id="ec765-196">È possibile usare un account di archiviazione o un hub eventi dello spazio dei nomi che non si trovi nella stessa sottoscrizione di quello che crea i log.</span><span class="sxs-lookup"><span data-stu-id="ec765-196">You can use a storage account or event hub namespace that is not in the same subscription as the one emitting logs.</span></span> <span data-ttu-id="ec765-197">L'utente che configura l'impostazione deve disporre dell'accesso RBAC appropriato a entrambe le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="ec765-197">The user who configures the setting must have the appropriate RBAC access to both subscriptions.</span></span>

<span data-ttu-id="ec765-198">Queste impostazioni possono essere configurate tramite l'opzione "Esporta" nel pannello Log attività nel portale</span><span class="sxs-lookup"><span data-stu-id="ec765-198">These settings can be configured via the “Export” option in the Activity Log blade in the portal.</span></span> <span data-ttu-id="ec765-199">oppure a livello di codice tramite l'[API REST di Monitoraggio di Azure](https://msdn.microsoft.com/library/azure/dn931927.aspx), i cmdlet di PowerShell o l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="ec765-199">They can also be configured programmatically [using the Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlets, or CLI.</span></span> <span data-ttu-id="ec765-200">Una sottoscrizione può avere un solo profilo di log.</span><span class="sxs-lookup"><span data-stu-id="ec765-200">A subscription can only have one log profile.</span></span>

### <a name="configure-log-profiles-using-the-azure-portal"></a><span data-ttu-id="ec765-201">Configurare i profili di log tramite il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="ec765-201">Configure log profiles using the Azure portal</span></span>
<span data-ttu-id="ec765-202">È possibile trasmettere il log attività a un hub eventi o memorizzarlo in un account di archiviazione usando l'opzione "Esporta" nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ec765-202">You can stream the Activity Log to an Event Hub or store them in a Storage Account by using the “Export” option in the Azure portal.</span></span>

1. <span data-ttu-id="ec765-203">Passare al pannello **Log attività** usando il menu sul lato sinistro del portale.</span><span class="sxs-lookup"><span data-stu-id="ec765-203">Navigate to the **Activity Log** blade using the menu on the left side of the portal.</span></span>

    ![Passare al log attività nel portale](./media/monitoring-overview-activity-logs/activity-logs-portal-navigate.png)
2. <span data-ttu-id="ec765-205">Fare clic sul pulsante **Esporta** nella parte superiore del pannello.</span><span class="sxs-lookup"><span data-stu-id="ec765-205">Click the **Export** button at the top of the blade.</span></span>

    ![Pulsante Esporta nel portale](./media/monitoring-overview-activity-logs/activity-logs-portal-export.png)
3. <span data-ttu-id="ec765-207">Nel pannello visualizzato è possibile selezionare:</span><span class="sxs-lookup"><span data-stu-id="ec765-207">In the blade that appears, you can select:</span></span>  
  * <span data-ttu-id="ec765-208">aree per cui esportare gli eventi</span><span class="sxs-lookup"><span data-stu-id="ec765-208">regions for which you would like to export events</span></span>
  * <span data-ttu-id="ec765-209">account di archiviazione in cui salvare gli eventi</span><span class="sxs-lookup"><span data-stu-id="ec765-209">the Storage Account to which you would like to save events</span></span>
  * <span data-ttu-id="ec765-210">numero di giorni di conservazione degli eventi nella risorsa di archiviazione</span><span class="sxs-lookup"><span data-stu-id="ec765-210">the number of days you want to retain these events in storage.</span></span> <span data-ttu-id="ec765-211">(se si impostano 0 giorni, i log vengono conservati all'infinito)</span><span class="sxs-lookup"><span data-stu-id="ec765-211">A setting of 0 days retains the logs forever.</span></span>
  * <span data-ttu-id="ec765-212">spazio dei nomi del bus di servizio in cui creare un hub eventi per la trasmissione di questi eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-212">the Service Bus Namespace in which you would like an Event Hub to be created for streaming these events.</span></span>

     ![Pannello Esporta log di controllo](./media/monitoring-overview-activity-logs/activity-logs-portal-export-blade.png)
4. <span data-ttu-id="ec765-214">Fare clic su **Salva** per salvare le impostazioni.</span><span class="sxs-lookup"><span data-stu-id="ec765-214">Click **Save** to save these settings.</span></span> <span data-ttu-id="ec765-215">Le impostazioni vengono applicate immediatamente alla sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ec765-215">The settings are immediately be applied to your subscription.</span></span>

### <a name="configure-log-profiles-using-the-azure-powershell-cmdlets"></a><span data-ttu-id="ec765-216">Configurare i profili di log tramite i cmdlet di Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="ec765-216">Configure log profiles using the Azure PowerShell Cmdlets</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="ec765-217">Ottenere un profilo di log esistente</span><span class="sxs-lookup"><span data-stu-id="ec765-217">Get existing log profile</span></span>
```
Get-AzureRmLogProfile
```

#### <a name="add-a-log-profile"></a><span data-ttu-id="ec765-218">Aggiungere un profilo di log</span><span class="sxs-lookup"><span data-stu-id="ec765-218">Add a log profile</span></span>
```
Add-AzureRmLogProfile -Name my_log_profile -StorageAccountId /subscriptions/s1/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey -Locations global,westus,eastus -RetentionInDays 90 -Categories Write,Delete,Action
```

| <span data-ttu-id="ec765-219">Proprietà</span><span class="sxs-lookup"><span data-stu-id="ec765-219">Property</span></span> | <span data-ttu-id="ec765-220">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="ec765-220">Required</span></span> | <span data-ttu-id="ec765-221">Description</span><span class="sxs-lookup"><span data-stu-id="ec765-221">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ec765-222">Name</span><span class="sxs-lookup"><span data-stu-id="ec765-222">Name</span></span> |<span data-ttu-id="ec765-223">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-223">Yes</span></span> |<span data-ttu-id="ec765-224">Nome del profilo di log.</span><span class="sxs-lookup"><span data-stu-id="ec765-224">Name of your log profile.</span></span> |
| <span data-ttu-id="ec765-225">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="ec765-225">StorageAccountId</span></span> |<span data-ttu-id="ec765-226">No</span><span class="sxs-lookup"><span data-stu-id="ec765-226">No</span></span> |<span data-ttu-id="ec765-227">ID risorsa dell'account di archiviazione in cui salvare il log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-227">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="ec765-228">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="ec765-228">serviceBusRuleId</span></span> |<span data-ttu-id="ec765-229">No</span><span class="sxs-lookup"><span data-stu-id="ec765-229">No</span></span> |<span data-ttu-id="ec765-230">ID regola del bus di servizio per lo spazio dei nomi del bus di servizio in cui creare gli hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-230">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="ec765-231">Si tratta di una stringa nel formato seguente: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="ec765-231">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="ec765-232">Località</span><span class="sxs-lookup"><span data-stu-id="ec765-232">Locations</span></span> |<span data-ttu-id="ec765-233">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-233">Yes</span></span> |<span data-ttu-id="ec765-234">Elenco delimitato da virgole di aree per cui raccogliere eventi del log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-234">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="ec765-235">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="ec765-235">RetentionInDays</span></span> |<span data-ttu-id="ec765-236">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-236">Yes</span></span> |<span data-ttu-id="ec765-237">Numero di giorni per cui gli eventi devono essere mantenuti, compreso tra 1 e 2147483647.</span><span class="sxs-lookup"><span data-stu-id="ec765-237">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="ec765-238">Se il valore è zero, i log vengono mantenuti per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="ec765-238">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="ec765-239">Categorie</span><span class="sxs-lookup"><span data-stu-id="ec765-239">Categories</span></span> |<span data-ttu-id="ec765-240">No</span><span class="sxs-lookup"><span data-stu-id="ec765-240">No</span></span> |<span data-ttu-id="ec765-241">Elenco delimitato da virgole di categorie di eventi che devono essere raccolti.</span><span class="sxs-lookup"><span data-stu-id="ec765-241">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="ec765-242">I valori possibili sono Write, Delete e Action.</span><span class="sxs-lookup"><span data-stu-id="ec765-242">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="ec765-243">Rimozione di un profilo di log</span><span class="sxs-lookup"><span data-stu-id="ec765-243">Remove a log profile</span></span>
```
Remove-AzureRmLogProfile -name my_log_profile
```

### <a name="configure-log-profiles-using-the-azure-cross-platform-cli"></a><span data-ttu-id="ec765-244">Configurare i profili di log tramite l'interfaccia della riga di comando multipiattaforma di Azure</span><span class="sxs-lookup"><span data-stu-id="ec765-244">Configure log profiles Using the Azure Cross-Platform CLI</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="ec765-245">Ottenere un profilo di log esistente</span><span class="sxs-lookup"><span data-stu-id="ec765-245">Get existing log profile</span></span>
```
azure insights logprofile list
```
```
azure insights logprofile get --name my_log_profile
```
<span data-ttu-id="ec765-246">La proprietà `name` deve essere il nome del profilo di log.</span><span class="sxs-lookup"><span data-stu-id="ec765-246">The `name` property should be the name of your log profile.</span></span>

#### <a name="add-a-log-profile"></a><span data-ttu-id="ec765-247">Aggiungere un profilo di log</span><span class="sxs-lookup"><span data-stu-id="ec765-247">Add a log profile</span></span>
```
azure insights logprofile add --name my_log_profile --storageId /subscriptions/s1/resourceGroups/insights-integration/providers/Microsoft.Storage/storageAccounts/my_storage --serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey --locations global,westus,eastus,northeurope --retentionInDays 90 –categories Write,Delete,Action
```

| <span data-ttu-id="ec765-248">Proprietà</span><span class="sxs-lookup"><span data-stu-id="ec765-248">Property</span></span> | <span data-ttu-id="ec765-249">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="ec765-249">Required</span></span> | <span data-ttu-id="ec765-250">Description</span><span class="sxs-lookup"><span data-stu-id="ec765-250">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ec765-251">name</span><span class="sxs-lookup"><span data-stu-id="ec765-251">name</span></span> |<span data-ttu-id="ec765-252">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-252">Yes</span></span> |<span data-ttu-id="ec765-253">Nome del profilo di log.</span><span class="sxs-lookup"><span data-stu-id="ec765-253">Name of your log profile.</span></span> |
| <span data-ttu-id="ec765-254">storageId</span><span class="sxs-lookup"><span data-stu-id="ec765-254">storageId</span></span> |<span data-ttu-id="ec765-255">No</span><span class="sxs-lookup"><span data-stu-id="ec765-255">No</span></span> |<span data-ttu-id="ec765-256">ID risorsa dell'account di archiviazione in cui salvare il log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-256">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="ec765-257">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="ec765-257">serviceBusRuleId</span></span> |<span data-ttu-id="ec765-258">No</span><span class="sxs-lookup"><span data-stu-id="ec765-258">No</span></span> |<span data-ttu-id="ec765-259">ID regola del bus di servizio per lo spazio dei nomi del bus di servizio in cui creare gli hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ec765-259">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="ec765-260">Si tratta di una stringa nel formato seguente: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="ec765-260">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="ec765-261">locations</span><span class="sxs-lookup"><span data-stu-id="ec765-261">locations</span></span> |<span data-ttu-id="ec765-262">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-262">Yes</span></span> |<span data-ttu-id="ec765-263">Elenco delimitato da virgole di aree per cui raccogliere eventi del log attività.</span><span class="sxs-lookup"><span data-stu-id="ec765-263">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="ec765-264">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="ec765-264">retentionInDays</span></span> |<span data-ttu-id="ec765-265">Sì</span><span class="sxs-lookup"><span data-stu-id="ec765-265">Yes</span></span> |<span data-ttu-id="ec765-266">Numero di giorni per cui gli eventi devono essere mantenuti, compreso tra 1 e 2147483647.</span><span class="sxs-lookup"><span data-stu-id="ec765-266">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="ec765-267">Se il valore è zero, i log vengono mantenuti per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="ec765-267">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="ec765-268">Categorie</span><span class="sxs-lookup"><span data-stu-id="ec765-268">categories</span></span> |<span data-ttu-id="ec765-269">No</span><span class="sxs-lookup"><span data-stu-id="ec765-269">No</span></span> |<span data-ttu-id="ec765-270">Elenco delimitato da virgole di categorie di eventi che devono essere raccolti.</span><span class="sxs-lookup"><span data-stu-id="ec765-270">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="ec765-271">I valori possibili sono Write, Delete e Action.</span><span class="sxs-lookup"><span data-stu-id="ec765-271">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="ec765-272">Rimozione di un profilo di log</span><span class="sxs-lookup"><span data-stu-id="ec765-272">Remove a log profile</span></span>
```
azure insights logprofile delete --name my_log_profile
```

## <a name="next-steps"></a><span data-ttu-id="ec765-273">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ec765-273">Next Steps</span></span>
* [<span data-ttu-id="ec765-274">Altre informazioni sul log attività (in precedenza, log di controllo)</span><span class="sxs-lookup"><span data-stu-id="ec765-274">Learn more about the Activity Log (formerly Audit Logs)</span></span>](../azure-resource-manager/resource-group-audit.md)
* [<span data-ttu-id="ec765-275">Trasmettere il log attività di Azure a Hub eventi</span><span class="sxs-lookup"><span data-stu-id="ec765-275">Stream the Azure Activity Log to Event Hubs</span></span>](monitoring-stream-activity-logs-event-hubs.md)
