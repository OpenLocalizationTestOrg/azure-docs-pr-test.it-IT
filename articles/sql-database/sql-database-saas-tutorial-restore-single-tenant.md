---
title: un database SQL di Azure in un'applicazione multi-tenant aaaRestore | Documenti Microsoft
description: Informazioni su come toorestore un singolo tenant SQL database dopo l'eliminazione accidentale di dati
keywords: esercitazione database SQL
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="1427f-104">Ripristinare un database SQL a tenant Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="1427f-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="1427f-105">app SaaS Wingtip Hello viene compilato mediante un modello di database per tenant, in cui ogni tenant ha il proprio database.</span><span class="sxs-lookup"><span data-stu-id="1427f-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="1427f-106">Uno dei vantaggi di hello di questo modello è che è facile toorestore dati di un singolo tenant in isolamento senza alcun impatto sugli altri tenant.</span><span class="sxs-lookup"><span data-stu-id="1427f-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="1427f-107">Questa esercitazione illustra due modelli di ripristino dei dati:</span><span class="sxs-lookup"><span data-stu-id="1427f-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="1427f-108">Ripristinare un database in un database parallelo (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="1427f-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="1427f-109">Ripristinare un database sul posto</span><span class="sxs-lookup"><span data-stu-id="1427f-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="1427f-110">**Ripristinare tenant tooa precedente punto nel tempo, in parallelo di un database**</span><span class="sxs-lookup"><span data-stu-id="1427f-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="1427f-111">Questo modello può essere utilizzato dal tenant hello per la revisione, il controllo e la conformità, database originale di hello e così via rimane invariato e non in linea.</span><span class="sxs-lookup"><span data-stu-id="1427f-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="1427f-112">**Ripristinare un tenant sul posto**</span><span class="sxs-lookup"><span data-stu-id="1427f-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="1427f-113">Questo modello è toorecover in genere utilizzato un punto di tenant tooa precedente nel tempo e dopo che un tenant elimina accidentalmente dati.</span><span class="sxs-lookup"><span data-stu-id="1427f-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="1427f-114">database originale Hello viene portato offline e sostituito con il database ripristinato hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="1427f-115">toocomplete completamento di questa esercitazione, assicurarsi che i hello seguenti prerequisiti:</span><span class="sxs-lookup"><span data-stu-id="1427f-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="1427f-116">app SaaS Wingtip Hello viene distribuita.</span><span class="sxs-lookup"><span data-stu-id="1427f-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="1427f-117">toodeploy in meno di cinque minuti, vedere [Distribuisci ed esplorare l'applicazione SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="1427f-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="1427f-118">Azure PowerShell è installato.</span><span class="sxs-lookup"><span data-stu-id="1427f-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="1427f-119">Per informazioni dettagliate, vedere [Introduzione ad Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="1427f-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="1427f-120">Modello di ripristino di introduzione toohello SaaS tenant</span><span class="sxs-lookup"><span data-stu-id="1427f-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="1427f-121">Per tenant hello modello di ripristino, sono disponibili due modelli semplice per il ripristino dei dati di un singolo tenant.</span><span class="sxs-lookup"><span data-stu-id="1427f-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="1427f-122">Poiché i database dei tenant sono isolati tra loro, il ripristino di un tenant non ha alcun impatto sui dati di qualsiasi altro tenant.</span><span class="sxs-lookup"><span data-stu-id="1427f-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="1427f-123">Nel primo modello hello, i dati vengono ripristinati in un nuovo database.</span><span class="sxs-lookup"><span data-stu-id="1427f-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="1427f-124">tenant Hello del database di access toothis insieme ai relativi dati di produzione viene quindi specificato.</span><span class="sxs-lookup"><span data-stu-id="1427f-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="1427f-125">Questo modello consente un tenant admin tooreview hello ripristino dei dati e utilizzarla potenzialmente tooselectively sovrascrivere i valori di dati corrente.</span><span class="sxs-lookup"><span data-stu-id="1427f-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="1427f-126">È attivo toohello SaaS app progettazione toodetermine come sofisticate hello devono essere le opzioni di ripristino dei dati.</span><span class="sxs-lookup"><span data-stu-id="1427f-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="1427f-127">Semplicemente tooreview in grado di dati in hello stato in un determinato punto nel tempo potrebbe essere tutto ciò che serve in alcuni scenari.</span><span class="sxs-lookup"><span data-stu-id="1427f-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="1427f-128">Se viene utilizzato il database di hello [-replica geografica](sql-database-geo-replication-overview.md), è consigliabile copiare i dati necessario hello dalla copia hello ripristinato nel database originale hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="1427f-129">Se si sostituisce database originale hello con database hello ripristinato, è necessario tooreconfigure e risincronizzare la replica geografica.</span><span class="sxs-lookup"><span data-stu-id="1427f-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="1427f-130">Nel modello secondo hello, che presuppone tenant hello ha subito una perdita o danneggiamento dei dati, viene ripristinato il database di produzione del tenant hello tooa punto precedente nel tempo.</span><span class="sxs-lookup"><span data-stu-id="1427f-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="1427f-131">Ripristino hello nel modello sul posto, tenant hello viene portato offline per un breve periodo di tempo durante il ripristino e portato nuovamente online database hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="1427f-132">Hello database originale viene eliminato, ma possono essere ripristinati da ancora se è necessario tooan indietro toogo anche precedente punto nel tempo.</span><span class="sxs-lookup"><span data-stu-id="1427f-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="1427f-133">Una variante di questo modello è stato possibile rinominare database hello anziché eliminarlo, anche se il database hello ridenominazione non offre alcun vantaggio in termini di sicurezza dei dati aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="1427f-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="1427f-134">Ottenere script per l'applicazione hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="1427f-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="1427f-135">Hello Wingtip SaaS script e codice sorgente dell'applicazione sono disponibili in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repository github.</span><span class="sxs-lookup"><span data-stu-id="1427f-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="1427f-136">[I passaggi di script di SaaS Wingtip hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="1427f-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="1427f-137">Simulare un tenant che elimina accidentalmente i dati</span><span class="sxs-lookup"><span data-stu-id="1427f-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="1427f-138">toodemonstrate questi scenari di ripristino, è necessario troppo*accidentalmente* eliminare alcuni dati in uno dei database tenant hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="1427f-139">Mentre è possibile eliminare qualsiasi record, hello successivo passaggio Imposta hello demo toonot essere bloccato da violazioni di integrità referenziale.</span><span class="sxs-lookup"><span data-stu-id="1427f-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="1427f-140">Aggiunge anche alcuni dati di acquisto di ticket è possibile utilizzare più avanti in hello *esercitazioni Wingtip SaaS Analitica*.</span><span class="sxs-lookup"><span data-stu-id="1427f-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="1427f-141">Eseguire hello ticket generatore script e creare dati aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="1427f-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="1427f-142">i ticket per ogni evento ultimo tenant generatore ticket Hello non intenzionalmente acquistato.</span><span class="sxs-lookup"><span data-stu-id="1427f-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="1427f-143">Apri... \\Moduli learning\\utilità\\*Demo TicketGenerator.ps1* in hello *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="1427f-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="1427f-144">Premere **F5** toorun hello script e generare i clienti e i dati di vendita del ticket.</span><span class="sxs-lookup"><span data-stu-id="1427f-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="1427f-145">Aprire hello app tooreview hello correnti eventi</span><span class="sxs-lookup"><span data-stu-id="1427f-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="1427f-146">Aprire hello *Hub eventi* (http://events.wtp.&lt; utente&gt;. trafficmanager.net) e fare clic su **Contoso insieme Hall**:</span><span class="sxs-lookup"><span data-stu-id="1427f-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![Hub eventi](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="1427f-148">Scorrere l'elenco di hello degli eventi e prendere nota dell'ultimo evento hello nell'elenco di hello:</span><span class="sxs-lookup"><span data-stu-id="1427f-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![ultimo evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="1427f-150">Eseguire hello demo scenario tooaccidentally delete hello ultimo evento</span><span class="sxs-lookup"><span data-stu-id="1427f-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="1427f-151">Apri... \\Moduli learning\\la continuità aziendale e ripristino di emergenza\\RestoreTenant\\*Demo RestoreTenant.ps1* in hello *PowerShell ISE*, e hello set il valore seguente:</span><span class="sxs-lookup"><span data-stu-id="1427f-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="1427f-152">**$DemoScenario** = **1**, impostare troppo**1** -Elimina gli eventi senza vendite ticket.</span><span class="sxs-lookup"><span data-stu-id="1427f-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="1427f-153">Premere **F5** toorun hello script ed eliminare l'ultimo evento hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="1427f-154">Dovrebbe essere conferma messaggio simili toohello di seguito:</span><span class="sxs-lookup"><span data-stu-id="1427f-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="1427f-155">verrà visualizzata la pagina eventi di Hello Contoso.</span><span class="sxs-lookup"><span data-stu-id="1427f-155">hello Contoso events page opens.</span></span> <span data-ttu-id="1427f-156">Scorrere verso il basso e verificare l'evento di hello è più presente.</span><span class="sxs-lookup"><span data-stu-id="1427f-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="1427f-157">Se evento hello è ancora nell'elenco di hello, fare clic su Aggiorna e verificare che venga rimossa.</span><span class="sxs-lookup"><span data-stu-id="1427f-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![ultimo evento](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="1427f-159">Ripristinare un database tenant in parallelo con i database di produzione hello</span><span class="sxs-lookup"><span data-stu-id="1427f-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="1427f-160">Questo esercizio Ripristina punto tooa database Contoso insieme Hall di hello prima hello evento è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="1427f-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="1427f-161">Dopo l'eliminazione di eventi hello nei passaggi precedenti hello, toorecover che desideri visualizzare dati hello eliminato.</span><span class="sxs-lookup"><span data-stu-id="1427f-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="1427f-162">È necessario toorestore il database di produzione con record hello eliminato, ma è necessario toorecover hello precedente database tooaccess hello dati precedenti per altri motivi aziendali.</span><span class="sxs-lookup"><span data-stu-id="1427f-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="1427f-163">Hello *ripristino TenantInParallel.ps1* script crea un tenant parallelo, database e una voce di catalogo parallelo entrambi a denominata *ContosoConcertHall\_precedente*.</span><span class="sxs-lookup"><span data-stu-id="1427f-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="1427f-164">Questo modello di ripristino è più adatto per il ripristino da una perdita di dati minore o per la conformità e il controllo di scenari di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1427f-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="1427f-165">È inoltre hello approccio consigliato quando si utilizza [-replica geografica](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1427f-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="1427f-166">Hello completo [simulare un utente di eliminazione accidentale di dati](#simulate-a-tenant-accidentally-deleting-data) sezione.</span><span class="sxs-lookup"><span data-stu-id="1427f-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="1427f-167">Apri... \\Moduli learning\\la continuità aziendale e ripristino di emergenza\\RestoreTenant\\_Demo RestoreTenant.ps1_ in hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="1427f-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="1427f-168">Impostare **$DemoScenario** = **2**, impostare questa proprietà troppo**2** troppo*ripristino tenant in parallelo*.</span><span class="sxs-lookup"><span data-stu-id="1427f-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="1427f-169">Premere **F5** script hello toorun.</span><span class="sxs-lookup"><span data-stu-id="1427f-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="1427f-170">lo script di Hello ripristinate hello tenant database (database paralleli tooa) tooa punto nel tempo prima dell'eliminazione evento hello nella sezione precedente hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="1427f-171">Viene creato un secondo database e rimuove i metadati del catalogo esistente nel database esiste e aggiunge catalogo toohello hello in hello *ContosoConcertHall\_precedente* voce.</span><span class="sxs-lookup"><span data-stu-id="1427f-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="1427f-172">script dimostrativo Hello verrà visualizzata la pagina eventi hello nel browser.</span><span class="sxs-lookup"><span data-stu-id="1427f-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="1427f-173">Nota dall'URL hello: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` che questa è la visualizzazione di dati dal database ripristinato hello in *old* viene aggiunto il nome toohello.</span><span class="sxs-lookup"><span data-stu-id="1427f-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="1427f-174">Eventi di hello scorrimento elencati in hello browser tooconfirm hello di eliminazione nella sezione precedente hello dell'evento è stato ripristinato.</span><span class="sxs-lookup"><span data-stu-id="1427f-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="1427f-175">Si noti che espone tenant hello ripristinato un tenant aggiuntivi, con i ticket toobrowse propria app eventi, è improbabile che toobe come è necessario fornire che un dati toorestored accesso del tenant, ma funge da tooeasily illustrato il criterio di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="1427f-176">In realtà, è probabile che venga conservato solo il database ripristinato per un periodo definito.</span><span class="sxs-lookup"><span data-stu-id="1427f-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="1427f-177">È possibile eliminare voce tenant hello ripristinato dopo aver dal chiamante hello *Remove RestoredTenant.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="1427f-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="1427f-178">Impostare **$DemoScenario** troppo**4** tooselect hello *remove ripristinato tenant* scenario.</span><span class="sxs-lookup"><span data-stu-id="1427f-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="1427f-179">**Eseguire** **tramite** **F5**</span><span class="sxs-lookup"><span data-stu-id="1427f-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="1427f-180">Hello *ContosoConcertHall\_precedente* voce ora è stata eliminata dal catalogo hello.</span><span class="sxs-lookup"><span data-stu-id="1427f-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="1427f-181">Vado avanti e chiudere pagina eventi hello per questo tenant nel browser.</span><span class="sxs-lookup"><span data-stu-id="1427f-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="1427f-182">Ripristinare un tenant sul posto, sostituendo i database tenant esistente hello</span><span class="sxs-lookup"><span data-stu-id="1427f-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="1427f-183">Questo esercizio Ripristina punto tooa tenant Contoso insieme Hall di hello prima hello evento è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="1427f-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="1427f-184">Hello *ripristino TenantInPlace* script ripristinato hello corrente tenant database tooa nuovo database che punta tooa precedente punto nel tempo e le eliminazioni hello database originale.</span><span class="sxs-lookup"><span data-stu-id="1427f-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="1427f-185">Questo modello di ripristino è più adatto per il ripristino dal danneggiamento dei dati grave perché potrebbe verificarsi la perdita di dati significativi che hello tenant avrebbe tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="1427f-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="1427f-186">Aprire il file **Demo-RestoreTenant.ps1** in PowerShell ISE</span><span class="sxs-lookup"><span data-stu-id="1427f-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="1427f-187">Impostare **$DemoScenario** troppo**5** tooselect hello *tenant in uno scenario di punto di ripristino*.</span><span class="sxs-lookup"><span data-stu-id="1427f-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="1427f-188">Eseguire tramite **F5**.</span><span class="sxs-lookup"><span data-stu-id="1427f-188">Execute using **F5**.</span></span>

<span data-ttu-id="1427f-189">script Hello Ripristina punto tooa database tenant di hello cinque minuti prima che l'evento hello è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="1427f-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="1427f-190">Questa operazione viene eseguita prima tenendo hello Contoso insieme Hall tenant offline in modo non sono presenti ulteriori aggiornamenti toohello dati.</span><span class="sxs-lookup"><span data-stu-id="1427f-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="1427f-191">Quindi, parallelo di un database creato tramite il ripristino dal punto di ripristino hello e denominato con un timestamp tooensure hello database non in conflitto con il nome di database hello esistente tenant.</span><span class="sxs-lookup"><span data-stu-id="1427f-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="1427f-192">Successivamente, viene eliminato il vecchio database di tenant hello e database ripristinato hello è nome del database originale rinominato toohello.</span><span class="sxs-lookup"><span data-stu-id="1427f-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="1427f-193">Infine, Contoso insieme Hall viene portato il database ripristinato toohello accesso di tooallow online hello app.</span><span class="sxs-lookup"><span data-stu-id="1427f-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="1427f-194">È stato ripristinato correttamente hello database tooa punto nel tempo prima di hello evento è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="1427f-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="1427f-195">verrà visualizzata la pagina eventi di Hello, pertanto verificare ultimo evento hello è stato ripristinato.</span><span class="sxs-lookup"><span data-stu-id="1427f-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="1427f-196">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="1427f-196">Next steps</span></span>

<span data-ttu-id="1427f-197">Questa esercitazione illustra come:</span><span class="sxs-lookup"><span data-stu-id="1427f-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="1427f-198">Ripristinare un database in un database parallelo (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="1427f-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="1427f-199">Ripristinare un database sul posto</span><span class="sxs-lookup"><span data-stu-id="1427f-199">Restore a database in place</span></span>

[<span data-ttu-id="1427f-200">Gestire lo schema del database tenant</span><span class="sxs-lookup"><span data-stu-id="1427f-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="1427f-201">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="1427f-201">Additional resources</span></span>

* <span data-ttu-id="1427f-202">Ulteriori [esercitazioni in cui si basano su hello applicazione SaaS Wingtip](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="1427f-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="1427f-203">Panoramica della continuità aziendale del database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="1427f-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="1427f-204">Informazioni sul backup del database SQL</span><span class="sxs-lookup"><span data-stu-id="1427f-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
