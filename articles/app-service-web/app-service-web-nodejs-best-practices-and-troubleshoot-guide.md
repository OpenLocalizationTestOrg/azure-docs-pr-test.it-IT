---
title: Procedure consigliate e guida alla risoluzione dei problemi per le applicazioni Node in App Web di Azure
description: Informazioni sulle procedure consigliate e sulle procedure per la risoluzione dei problemi delle applicazioni Node in App Web di Azure.
services: app-service\web
documentationcenter: nodejs
author: ranjithr
manager: wadeh
editor: 
ms.assetid: 387ea217-7910-4468-8987-9a1022a99bef
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 06/06/2016
ms.author: ranjithr
ms.openlocfilehash: d820ef3438e13332657641b06b57fa277e79f811
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="best-practices-and-troubleshooting-guide-for-node-applications-on-azure-web-apps"></a><span data-ttu-id="bf310-103">Procedure consigliate e guida alla risoluzione dei problemi per le applicazioni Node in App Web di Azure</span><span class="sxs-lookup"><span data-stu-id="bf310-103">Best practices and troubleshooting guide for node applications on Azure Web Apps</span></span>
[!INCLUDE [tabs](../../includes/app-service-web-get-started-nav-tabs.md)]

<span data-ttu-id="bf310-104">In questo articolo verranno illustrate le procedure consigliate e le procedure di risoluzione dei problemi per le [applicazioni Node](app-service-web-get-started-nodejs.md) in esecuzione in App Web di Azure con [iisnode](https://github.com/azure/iisnode).</span><span class="sxs-lookup"><span data-stu-id="bf310-104">In this article, you will learn the best practices and troubleshooting steps for [node applications](app-service-web-get-started-nodejs.md) running on Azure Webapps (with [iisnode](https://github.com/azure/iisnode)).</span></span>

> [!WARNING]
> <span data-ttu-id="bf310-105">Prestare attenzione durante l'uso delle procedure di risoluzione dei problemi nel sito di produzione.</span><span class="sxs-lookup"><span data-stu-id="bf310-105">Use caution when using troubleshooting steps on your production site.</span></span> <span data-ttu-id="bf310-106">È consigliabile risolvere i problemi dell'app in una configurazione non di produzione, ad esempio nello slot di staging, e dopo la risoluzione del problema scambiare lo slot di staging con lo slot di produzione.</span><span class="sxs-lookup"><span data-stu-id="bf310-106">Recommendation is to troubleshoot your app on a non-production setup for example your staging slot and when the issue is fixed, swap your staging slot with your production slot.</span></span>
> 
> 

## <a name="iisnode-configuration"></a><span data-ttu-id="bf310-107">Configurazione IISNODE</span><span class="sxs-lookup"><span data-stu-id="bf310-107">IISNODE configuration</span></span>
<span data-ttu-id="bf310-108">Questo [file di schema](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) mostra tutte le impostazioni che possono essere configurate per iisnode.</span><span class="sxs-lookup"><span data-stu-id="bf310-108">This [schema file](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) shows all the settings that can be configured for iisnode.</span></span> <span data-ttu-id="bf310-109">Ecco alcune impostazioni utili per l'applicazione:</span><span class="sxs-lookup"><span data-stu-id="bf310-109">Some of the settings that will be useful for your application are:</span></span>

* <span data-ttu-id="bf310-110">nodeProcessCountPerApplication</span><span class="sxs-lookup"><span data-stu-id="bf310-110">nodeProcessCountPerApplication</span></span>
  
    <span data-ttu-id="bf310-111">Questa impostazione controlla il numero di processi del nodo avviati per ogni applicazione IIS.</span><span class="sxs-lookup"><span data-stu-id="bf310-111">This setting controls the number of node processes that are launched per IIS application.</span></span> <span data-ttu-id="bf310-112">Il valore predefinito è 1.</span><span class="sxs-lookup"><span data-stu-id="bf310-112">Default value is 1.</span></span> <span data-ttu-id="bf310-113">Se si specifica 0 per questa impostazione, è possibile avviare un numero di file node.exe uguale al numero di core della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-113">You can launch as many node.exe’s as your VM core count by setting this to 0.</span></span> <span data-ttu-id="bf310-114">Il valore consigliato è 0 per la maggior parte delle applicazioni, per consentire di utilizzare tutti i core disponibili nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-114">Recommended value is 0 for most application so you can utilize all of the cores on your machine.</span></span> <span data-ttu-id="bf310-115">Node.exe è un file a thread singolo, quindi un file node.exe utilizzerà al massimo 1 core. Per ottenere le prestazioni più elevate dall'applicazione Node, è consigliabile utilizzare tutti i core.</span><span class="sxs-lookup"><span data-stu-id="bf310-115">Node.exe is single threaded so one node.exe will consume a maximum of 1 core and to get maximum performance out of your node application you would want to utilize all cores.</span></span>
* <span data-ttu-id="bf310-116">nodeProcessCommandLine</span><span class="sxs-lookup"><span data-stu-id="bf310-116">nodeProcessCommandLine</span></span>
  
    <span data-ttu-id="bf310-117">Questa impostazione controlla il percorso del file node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-117">This setting controls the path to the node.exe.</span></span> <span data-ttu-id="bf310-118">È possibile impostare questo valore in modo che faccia riferimento alla versione specifica del file node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-118">You can set this value to point to your node.exe version.</span></span>
* <span data-ttu-id="bf310-119">maxConcurrentRequestsPerProcess</span><span class="sxs-lookup"><span data-stu-id="bf310-119">maxConcurrentRequestsPerProcess</span></span>
  
    <span data-ttu-id="bf310-120">Questa impostazione controlla il numero massimo di richieste concorrenti inviate da iisnode a ogni node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-120">This setting controls the maximum number of concurrent requests sent by iisnode to each node.exe.</span></span> <span data-ttu-id="bf310-121">In App Web di Azure il valore predefinito per questa impostazione è Infinite.</span><span class="sxs-lookup"><span data-stu-id="bf310-121">On azure webapps, the default value for this is Infinite.</span></span> <span data-ttu-id="bf310-122">Non sarà necessario preoccuparsi di questa impostazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-122">You will not have to worry about this setting.</span></span> <span data-ttu-id="bf310-123">All'esterno di App Web di Azure il valore predefinito è 1024.</span><span class="sxs-lookup"><span data-stu-id="bf310-123">Outside azure webapps, the default value is 1024.</span></span> <span data-ttu-id="bf310-124">Potrebbe essere necessario configurare questa impostazione in base al numero di richieste ricevute dall'applicazione e dalla velocità di elaborazione di ogni richiesta da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-124">You might want to configure this depending on how many requests your application gets and how fast your application processes each request.</span></span>
* <span data-ttu-id="bf310-125">maxNamedPipeConnectionRetry</span><span class="sxs-lookup"><span data-stu-id="bf310-125">maxNamedPipeConnectionRetry</span></span>
  
    <span data-ttu-id="bf310-126">Questa impostazione controlla il numero massimo di tentativi di connessione da parte di iisnode alla named pipe per inviare la richiesta a node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-126">This setting controls the maximum number of times iisnode will retry making connection on the named pipe to send the request over to node.exe.</span></span> <span data-ttu-id="bf310-127">Questa impostazione, insieme a namedPipeConnectionRetryDelay, determina il timeout totale di ogni richiesta in iisnode.</span><span class="sxs-lookup"><span data-stu-id="bf310-127">This setting in combination with namedPipeConnectionRetryDelay determines the total timeout of each request within iisnode.</span></span> <span data-ttu-id="bf310-128">Il valore predefinito è 200 in App Web di Azure.</span><span class="sxs-lookup"><span data-stu-id="bf310-128">Default value is 200 on Azure Webapps.</span></span> <span data-ttu-id="bf310-129">Timeout totale in secondi = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span><span class="sxs-lookup"><span data-stu-id="bf310-129">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
* <span data-ttu-id="bf310-130">namedPipeConnectionRetryDelay</span><span class="sxs-lookup"><span data-stu-id="bf310-130">namedPipeConnectionRetryDelay</span></span>
  
    <span data-ttu-id="bf310-131">Questa impostazione controlla la quantità di tempo (in ms) di attesa da parte di iisnode prima di ripetere il tentativo di invio di richieste a node.exe tramite la named pipe.</span><span class="sxs-lookup"><span data-stu-id="bf310-131">This setting controls the amount of time (in ms) iisnode will wait for between each retry to send request to node.exe over the named pipe.</span></span> <span data-ttu-id="bf310-132">Il valore predefinito è 250 ms.</span><span class="sxs-lookup"><span data-stu-id="bf310-132">Default value is 250ms.</span></span>
    <span data-ttu-id="bf310-133">Timeout totale in secondi = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span><span class="sxs-lookup"><span data-stu-id="bf310-133">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
  
    <span data-ttu-id="bf310-134">Per impostazione predefinita, il timeout totale in iisnode in App Web di Azure è 200 \* 250ms = 50 seconds.</span><span class="sxs-lookup"><span data-stu-id="bf310-134">By default the total timeout in iisnode on azure webapps is 200 \* 250ms = 50 seconds.</span></span>
* <span data-ttu-id="bf310-135">logDirectory</span><span class="sxs-lookup"><span data-stu-id="bf310-135">logDirectory</span></span>
  
    <span data-ttu-id="bf310-136">Questa impostazione controlla la directory in cui iisnode registrerà stdout/stderr.</span><span class="sxs-lookup"><span data-stu-id="bf310-136">This setting controls the directory where iisnode will log stdout/stderr.</span></span> <span data-ttu-id="bf310-137">Il valore predefinito è iisnode, ovvero un valore relativo alla directory di script principale (directory in cui si trova server.js)</span><span class="sxs-lookup"><span data-stu-id="bf310-137">Default value is iisnode which is relative to the main script directory (directory where main server.js is present)</span></span>
* <span data-ttu-id="bf310-138">debuggerExtensionDll</span><span class="sxs-lookup"><span data-stu-id="bf310-138">debuggerExtensionDll</span></span>
  
    <span data-ttu-id="bf310-139">Questa impostazione controlla la versione di node-inspector verrà usata da iisnode durante il debug dell'applicazione Node.</span><span class="sxs-lookup"><span data-stu-id="bf310-139">This setting controls what version of node-inspector iisnode will use when debugging your node application.</span></span> <span data-ttu-id="bf310-140">iisnode-inspector-0.7.3.dll e iisnode-inspector.dll sono attualmente gli unici due valori validi per questa impostazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-140">Currently iisnode-inspector-0.7.3.dll and iisnode-inspector.dll are the only 2 valid values for this setting.</span></span> <span data-ttu-id="bf310-141">Il valore predefinito è iisnode-inspector-0.7.3.dll.</span><span class="sxs-lookup"><span data-stu-id="bf310-141">Default value is iisnode-inspector-0.7.3.dll.</span></span> <span data-ttu-id="bf310-142">La versione iisnode-inspector-0.7.3.dll usa node-inspector-0.7.3 e usa WebSocket. Sarà quindi necessario abilitare i protocolli WebSocket in App Web di Azure per usare questa versione.</span><span class="sxs-lookup"><span data-stu-id="bf310-142">iisnode-inspector-0.7.3.dll version uses node-inspector-0.7.3 and uses websockets, so you will need to enable websockets on your azure webapp to use this version.</span></span> <span data-ttu-id="bf310-143">Per altre informazioni sulla configurazione di iisnode per l'uso di node-inspector, vedere <http://www.ranjithr.com/?p=98>.</span><span class="sxs-lookup"><span data-stu-id="bf310-143">See <http://www.ranjithr.com/?p=98> for more details on how to configure iisnode to use the new node-inspector.</span></span>
* <span data-ttu-id="bf310-144">flushResponse</span><span class="sxs-lookup"><span data-stu-id="bf310-144">flushResponse</span></span>
  
    <span data-ttu-id="bf310-145">Il comportamento predefinito di IIS prevede il buffering di un massimo di 4 MB di dati di risposta prima dello scaricamento oppure fino alla fine della risposta, a seconda di quale si verifica per primo.</span><span class="sxs-lookup"><span data-stu-id="bf310-145">The default behavior of IIS is that it buffers response data up to 4MB before flushing, or until the end of the response, whichever comes first.</span></span> <span data-ttu-id="bf310-146">iisnode offre un'impostazione di configurazione per eseguire l'override di questo comportamento: per scaricare un frammento del corpo dell'entità della risposta non appena iisnode lo riceve da node.exe, è necessario impostare l'attributo iisnode/@flushResponse in web.config su 'true':</span><span class="sxs-lookup"><span data-stu-id="bf310-146">iisnode offers a configuration setting to override this behavior: to flush a fragment of the response entity body as soon as iisnode receives it from node.exe, you need to set the iisnode/@flushResponse attribute in web.config to 'true':</span></span>
  
    ```
    <configuration>    
        <system.webServer>    
            <!-- ... -->    
            <iisnode flushResponse="true" />    
        </system.webServer>    
    </configuration>
    ```
  
    <span data-ttu-id="bf310-147">L'abilitazione dello scaricamento di ogni frammento del corpo dell'entità della risposta aggiunge un sovraccarico delle prestazioni, che riduce la velocità effettiva del sistema del 5% circa (a partire dalla versione 0.1.13). È quindi consigliabile limitare l'ambito di questa impostazione solo agli endpoint che richiedono lo streaming delle risposte, ad esempio usando l'elemento <location> nel file web.config.</span><span class="sxs-lookup"><span data-stu-id="bf310-147">Enabling flushing of every fragment of the response entity body adds performance overhead that reduces the throughput of the system by ~5% (as of v0.1.13), so it is best to scope this setting only to endpoints that require response streaming (e.g. using the <location> element in the web.config)</span></span>
  
    <span data-ttu-id="bf310-148">Per lo streaming di applicazioni sarà inoltre necessario impostare il valore responseBufferLimit del gestore di iisnode su 0.</span><span class="sxs-lookup"><span data-stu-id="bf310-148">In addition to this, for streaming applications, you will need to also set responseBufferLimit of your iisnode handler to 0.</span></span>
  
    ```
    <handlers>    
        <add name="iisnode" path="app.js" verb="\*" modules="iisnode" responseBufferLimit="0"/>    
    </handlers>
    ```
* <span data-ttu-id="bf310-149">watchedFiles</span><span class="sxs-lookup"><span data-stu-id="bf310-149">watchedFiles</span></span>
  
    <span data-ttu-id="bf310-150">Si tratta di un elenco di file separato da punti e virgola che sarà controllato per rilevare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="bf310-150">This is a semi-colon separated list of files that will be watched for changes.</span></span> <span data-ttu-id="bf310-151">Una modifica a un file provoca il riciclo da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-151">A change to a file causes the application to recycle.</span></span> <span data-ttu-id="bf310-152">Ogni voce è costituita da un nome di directory facoltativo e un nome di file obbligatorio, relativi alla directory in cui si trova il punto di ingresso principale dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-152">Each entry consists of an optional directory name plus required file name which are relative to the directory where the main application entry point is located.</span></span> <span data-ttu-id="bf310-153">I caratteri jolly sono consentiti solo nella parte relativa al nome di file.</span><span class="sxs-lookup"><span data-stu-id="bf310-153">Wild cards are allowed in the file name portion only.</span></span> <span data-ttu-id="bf310-154">Il valore predefinito è "\*.js;web.config"</span><span class="sxs-lookup"><span data-stu-id="bf310-154">Default value is “\*.js;web.config”</span></span>
* <span data-ttu-id="bf310-155">recycleSignalEnabled</span><span class="sxs-lookup"><span data-stu-id="bf310-155">recycleSignalEnabled</span></span>
  
    <span data-ttu-id="bf310-156">Il valore predefinito è False.</span><span class="sxs-lookup"><span data-stu-id="bf310-156">Default value is false.</span></span> <span data-ttu-id="bf310-157">Se questa funzionalità è abilitata, l'applicazione Node si può connettere a una named pipe (variabile di ambiente IISNODE\_CONTROL\_PIPE) e può inviare un messaggio di "riciclo".</span><span class="sxs-lookup"><span data-stu-id="bf310-157">If enabled, your node application can connect to a named pipe (environment variable IISNODE\_CONTROL\_PIPE) and send a “recycle” message.</span></span> <span data-ttu-id="bf310-158">In questo modo w3wp verrà riciclato correttamente.</span><span class="sxs-lookup"><span data-stu-id="bf310-158">This will cause the w3wp to recycle gracefully.</span></span>
* <span data-ttu-id="bf310-159">idlePageOutTimePeriod</span><span class="sxs-lookup"><span data-stu-id="bf310-159">idlePageOutTimePeriod</span></span>
  
    <span data-ttu-id="bf310-160">Il valore predefinito è 0, ovvero questa funzionalità è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="bf310-160">Default value is 0 which means this feature is disabled.</span></span> <span data-ttu-id="bf310-161">Se si specifica un valore maggiore di 0, iisnode eseguirà il paging di tutti i rispettivi processi figlio ogni 'idlePageOutTimePeriod' millisecondi.</span><span class="sxs-lookup"><span data-stu-id="bf310-161">When set to some value greater than 0, iisnode will page out all its child processes every ‘idlePageOutTimePeriod’ milliseconds.</span></span> <span data-ttu-id="bf310-162">Per informazioni sul paging, vedere questa [documentazione](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf310-162">To understand what page out means, please refer to this [documentation](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span></span> <span data-ttu-id="bf310-163">Questa impostazione sarà utile per le applicazioni che utilizzano una quantità elevata di memoria e vogliono eseguire occasionalmente il paging della memoria sul disco per liberare RAM.</span><span class="sxs-lookup"><span data-stu-id="bf310-163">This setting will be useful for applications that consume a lot of memory and want to pageout memory to disk occasionally to free up some RAM.</span></span>

> [!WARNING]
> <span data-ttu-id="bf310-164">Prestare attenzione quando si abilitano le impostazioni di configurazione seguenti nelle applicazioni di produzione.</span><span class="sxs-lookup"><span data-stu-id="bf310-164">Use caution when enabling the following configuration settings on production applications.</span></span> <span data-ttu-id="bf310-165">È consigliabile non abilitarle nelle applicazioni di produzione live.</span><span class="sxs-lookup"><span data-stu-id="bf310-165">Recommendation is to not enable them on live production applications.</span></span>
> 
> 

* <span data-ttu-id="bf310-166">debugHeaderEnabled</span><span class="sxs-lookup"><span data-stu-id="bf310-166">debugHeaderEnabled</span></span>
  
    <span data-ttu-id="bf310-167">Il valore predefinito è False.</span><span class="sxs-lookup"><span data-stu-id="bf310-167">The default value is false.</span></span> <span data-ttu-id="bf310-168">Se questa opzione è impostata su True, iisnode aggiungerà un'intestazione di risposta HTTP di tipo iisnode-debug a ogni risposta HTTP inviata. Il valore di intestazione di tipo iisnode-debug è un URL.</span><span class="sxs-lookup"><span data-stu-id="bf310-168">If set to true, iisnode will add an HTTP response header iisnode-debug to every HTTP response it sends the iisnode-debug header value is a URL.</span></span> <span data-ttu-id="bf310-169">I singoli elementi delle informazioni di diagnostica possono essere dedotti esaminando il frammento di URL, ma per ottenere una visualizzazione migliore è possibile aprire l'URL nel browser.</span><span class="sxs-lookup"><span data-stu-id="bf310-169">Individual pieces of diagnostic information can be gleaned by looking at the URL fragment, but a much better visualization is achieved by opening the URL in the browser.</span></span>
* <span data-ttu-id="bf310-170">loggingEnabled</span><span class="sxs-lookup"><span data-stu-id="bf310-170">loggingEnabled</span></span>
  
    <span data-ttu-id="bf310-171">Questa impostazione controlla la registrazione di stdout e stderr da parte di iisnode.</span><span class="sxs-lookup"><span data-stu-id="bf310-171">This setting controls the logging of stdout and stderr by iisnode.</span></span> <span data-ttu-id="bf310-172">Iisnode acquisirà i valori di stdout/stderr dai processi di nodo avviati e li scriverà nella directory specificata nell'impostazione 'logDirectory'.</span><span class="sxs-lookup"><span data-stu-id="bf310-172">Iisnode will capture stdout/stderr from node processes it launches and write to the directory specified in the ‘logDirectory’ setting.</span></span> <span data-ttu-id="bf310-173">Se si abilita questa impostazione, l'applicazione scriverà log nel file system e ciò potrebbe provocare problemi di prestazioni, in base alla quantità di registrazione eseguita dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-173">Once this is enable, your application will be writing logs to the file system and depending on the amount of logging done by the application, there could be performance implications.</span></span>
* <span data-ttu-id="bf310-174">devErrorsEnabled</span><span class="sxs-lookup"><span data-stu-id="bf310-174">devErrorsEnabled</span></span>
  
    <span data-ttu-id="bf310-175">Il valore predefinito è False.</span><span class="sxs-lookup"><span data-stu-id="bf310-175">Default value is false.</span></span> <span data-ttu-id="bf310-176">Se questo valore è impostato su True, iisnode visualizzerà il codice di stato HTTP e il codice errore Win32 nel browser.</span><span class="sxs-lookup"><span data-stu-id="bf310-176">When set to true, iisnode will display the HTTP status code and Win32 error code on your browser.</span></span> <span data-ttu-id="bf310-177">Il codice win32 sarà utile per il debug di determinati tipi di problemi.</span><span class="sxs-lookup"><span data-stu-id="bf310-177">The win32 code will be helpful in debugging certain types of issues.</span></span>
* <span data-ttu-id="bf310-178">debuggingEnabled (non abilitare questa impostazione nel sito di produzione live)</span><span class="sxs-lookup"><span data-stu-id="bf310-178">debuggingEnabled (do not enable on live production site)</span></span>
  
    <span data-ttu-id="bf310-179">Questa impostazione controlla la funzionalità di debug.</span><span class="sxs-lookup"><span data-stu-id="bf310-179">This setting controls debugging feature.</span></span> <span data-ttu-id="bf310-180">Iisnode è integrato con node-inspector.</span><span class="sxs-lookup"><span data-stu-id="bf310-180">Iisnode is integrated with node-inspector.</span></span> <span data-ttu-id="bf310-181">Abilitando questa impostazione, si abilita il debug dell'applicazione Node.</span><span class="sxs-lookup"><span data-stu-id="bf310-181">By enabling this setting, you enable debugging of your node application.</span></span> <span data-ttu-id="bf310-182">Dopo l'abilitazione di questa impostazione, iisnode presenterà i file di node-inspector necessari nella directory 'debuggerVirtualDir' alla prima richiesta di debug per l'applicazione Node.</span><span class="sxs-lookup"><span data-stu-id="bf310-182">Once this setting is enabled, iisnode will layout the necessary node-inspector files in ‘debuggerVirtualDir’ directory on the first debug request to your node application.</span></span> <span data-ttu-id="bf310-183">È possibile caricare node-inspector inviando una richiesta a http://yoursite/server.js/debug.</span><span class="sxs-lookup"><span data-stu-id="bf310-183">You can load the node-inspector by sending a request to http://yoursite/server.js/debug.</span></span> <span data-ttu-id="bf310-184">È possibile controllare il segmento dell'URL di debug con l'impostazione 'debuggerPathSegment'.</span><span class="sxs-lookup"><span data-stu-id="bf310-184">You can control the debug URL segment with ‘debuggerPathSegment’ setting.</span></span> <span data-ttu-id="bf310-185">Per impostazione predefinita, debuggerPathSegment='debug'.</span><span class="sxs-lookup"><span data-stu-id="bf310-185">By default debuggerPathSegment=’debug’.</span></span> <span data-ttu-id="bf310-186">È possibile impostare questo valore su un GUID, ad esempio, in modo che non possa essere individuato facilmente da altri utenti.</span><span class="sxs-lookup"><span data-stu-id="bf310-186">You can set this to a GUID for example so that it is more difficult to be discovered by others.</span></span>
  
    <span data-ttu-id="bf310-187">Per altre informazioni sul debug, vedere questo [collegamento](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) .</span><span class="sxs-lookup"><span data-stu-id="bf310-187">Check this [link](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) for more details on debugging.</span></span>

## <a name="scenarios-and-recommendationstroubleshooting"></a><span data-ttu-id="bf310-188">Scenari e indicazioni/risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="bf310-188">Scenarios and recommendations/troubleshooting</span></span>
### <a name="my-node-application-is-making-too-many-outbound-calls"></a><span data-ttu-id="bf310-189">L'applicazione Node effettua un numero eccessivo di chiamate in uscita.</span><span class="sxs-lookup"><span data-stu-id="bf310-189">My node application is making too many outbound calls.</span></span>
<span data-ttu-id="bf310-190">Il funzionamento normale di molte applicazioni prevede l'esecuzione di connessioni in uscita.</span><span class="sxs-lookup"><span data-stu-id="bf310-190">Many applications would want to make outbound connections as part of their regular operation.</span></span> <span data-ttu-id="bf310-191">Quando si riceve una richiesta, ad esempio, l'app Node deve contattare un'API REST in una posizione diversa e ottenere informazioni per elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="bf310-191">For example, when a request comes in, your node app would want to contact a REST API elsewhere and get some information to process the request.</span></span> <span data-ttu-id="bf310-192">È consigliabile usare un agente keep-alive durante l'esecuzione di chiamate HTTP o HTTPS.</span><span class="sxs-lookup"><span data-stu-id="bf310-192">You would want to use a keep alive agent when making http or https calls.</span></span> <span data-ttu-id="bf310-193">È ad esempio possibile usare il modulo agentkeepalive come agente keep-alive durante le chiamate in uscita,</span><span class="sxs-lookup"><span data-stu-id="bf310-193">For example, you could use the agentkeepalive module as your keep alive agent when making these outbound calls.</span></span> <span data-ttu-id="bf310-194">per assicurare che i socket vengano riutilizzati nella macchina virtuale di App Web di Azure e ridurre il sovraccarico per la creazione di nuovi socket per ogni richiesta in uscita.</span><span class="sxs-lookup"><span data-stu-id="bf310-194">This makes sure that the sockets are reused on your azure webapp VM and reducing the overhead of creating new sockets for every outbound request.</span></span> <span data-ttu-id="bf310-195">Ciò consente anche di assicurare che si stia usando un numero minore di socket per effettuare molte richieste in uscita e che quindi non venga superato il valore maxSockets allocato per la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-195">Also, this makes sure that you are using less number of sockets to make many outbound requests and therefore you don’t exceed the maxSockets that are allocated per VM.</span></span> <span data-ttu-id="bf310-196">In App Web di Azure è consigliabile impostare il valore maxSockets per agentKeepAlive su un totale di 160 socket per ogni macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-196">Recommendation on Azure Webapps would be to set the agentKeepAlive maxSockets value to a total of 160 sockets per VM.</span></span> <span data-ttu-id="bf310-197">Se quindi sono presenti quattro node.exe in esecuzione nella macchina virtuale, è consigliabile impostare il valore maxSockets per agentKeepAlive su 40 per ogni file node.exe, ovvero 160 in totale per ogni macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-197">This means that if you have 4 node.exe running on the VM, you would want to set the agentKeepAlive maxSockets to 40 per node.exe which is 160 total per VM.</span></span>

<span data-ttu-id="bf310-198">Configurazione di esempio per [agentKeepALive](https://www.npmjs.com/package/agentkeepalive):</span><span class="sxs-lookup"><span data-stu-id="bf310-198">Example [agentKeepALive](https://www.npmjs.com/package/agentkeepalive) configuration:</span></span>

```
var keepaliveAgent = new Agent({    
    maxSockets: 40,    
    maxFreeSockets: 10,    
    timeout: 60000,    
    keepAliveTimeout: 300000    
});
```

<span data-ttu-id="bf310-199">Questo esempio presuppone che siano presenti quattro file node.exe in esecuzione nella VM.</span><span class="sxs-lookup"><span data-stu-id="bf310-199">This example assumes you have 4 node.exe running on your VM.</span></span> <span data-ttu-id="bf310-200">Se nella macchina virtuale è presente un numero diverso di node.exe in esecuzione, sarà necessario modificare di conseguenza l'impostazione maxSockets.</span><span class="sxs-lookup"><span data-stu-id="bf310-200">If you have a different number of node.exe running on the VM, you will have to modify the maxSockets setting accordingly.</span></span>

### <a name="my-node-application-is-consuming-too-much-cpu"></a><span data-ttu-id="bf310-201">L'applicazione Node utilizza una quantità eccessiva di CPU.</span><span class="sxs-lookup"><span data-stu-id="bf310-201">My node application is consuming too much CPU.</span></span>
<span data-ttu-id="bf310-202">È probabile che si riceva una raccomandazione relativa all'utilizzo elevato di CPU da App Web di Azure nel portale.</span><span class="sxs-lookup"><span data-stu-id="bf310-202">You will probably get a recommendation from Azure Webapps on your portal about high cpu consumption.</span></span> <span data-ttu-id="bf310-203">È anche possibile configurare monitoraggi per il controllo di determinate [metriche](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="bf310-203">You can also setup monitors to watch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="bf310-204">Quando si verifica l'utilizzo della CPU nel [dashboard del portale di Azure](../application-insights/app-insights-web-monitor-performance.md), controllare i valori MAX per la CPU, in modo da non perdere i valori di picco.</span><span class="sxs-lookup"><span data-stu-id="bf310-204">When checking the CPU usage on the [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check the MAX values for CPU so you don’t miss out the peak values.</span></span>
<span data-ttu-id="bf310-205">Se si ritiene che l'applicazione utilizzi una quantità eccessiva di CPU senza spiegazioni plausibili, sarà necessario profilare l'applicazione Node.</span><span class="sxs-lookup"><span data-stu-id="bf310-205">In cases where you think your application is consuming too much CPU and you cannot explain why, you will need to profile your node application.</span></span>

### 
#### <a name="profiling-your-node-application-on-azure-webapps-with-v8-profiler"></a><span data-ttu-id="bf310-206">Profilatura dell'applicazione Node in App Web di Azure con V8-Profiler</span><span class="sxs-lookup"><span data-stu-id="bf310-206">Profiling your node application on azure webapps with V8-Profiler</span></span>
<span data-ttu-id="bf310-207">Si supponga, ad esempio, che sia disponibile un'app hello world da profilare come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="bf310-207">For example, lets say you have a hello world app that you want to profile as shown below:</span></span>

```
var http = require('http');    
function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    WriteConsoleLog();    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="bf310-208">Passare al sito scm all'indirizzo https://yoursite.scm.azurewebsites.net/DebugConsole</span><span class="sxs-lookup"><span data-stu-id="bf310-208">Go to your scm site https://yoursite.scm.azurewebsites.net/DebugConsole</span></span>

<span data-ttu-id="bf310-209">Verrà visualizzato un prompt dei comandi, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="bf310-209">You will see a command prompt as shown below.</span></span> <span data-ttu-id="bf310-210">Passare al sito/directory wwwroot.</span><span class="sxs-lookup"><span data-stu-id="bf310-210">Go into your site/wwwroot directory</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_install_v8.png)

<span data-ttu-id="bf310-211">Eseguire il comando "npm install v8-profiler".</span><span class="sxs-lookup"><span data-stu-id="bf310-211">Run the command “npm install v8-profiler”</span></span>

<span data-ttu-id="bf310-212">Nella directory node\_modules dovrebbe essere eseguita l'installazione di v8-profiler e di tutte le rispettive dipendenze.</span><span class="sxs-lookup"><span data-stu-id="bf310-212">This should install v8-profiler under node\_modules directory and all of its dependencies.</span></span>
<span data-ttu-id="bf310-213">Modificare il file server.js per profilare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-213">Now, edit your server.js to profile your application.</span></span>

```
var http = require('http');    
var profiler = require('v8-profiler');    
var fs = require('fs');

function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    profiler.startProfiling('HandleRequest');    
    WriteConsoleLog();    
    fs.writeFileSync('profile.cpuprofile', JSON.stringify(profiler.stopProfiling('HandleRequest')));    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="bf310-214">Le modifiche precedenti eseguiranno la profilatura della funzione WriteConsoleLog e quindi scriveranno l'output della profilatura nel file 'profile.cpuprofile' in wwwroot del sito.</span><span class="sxs-lookup"><span data-stu-id="bf310-214">The above changes will profile the WriteConsoleLog function and then write the profile output to ‘profile.cpuprofile’ file under your site wwwroot.</span></span> <span data-ttu-id="bf310-215">Inviare una richiesta all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-215">Send a request to your application.</span></span> <span data-ttu-id="bf310-216">Verrà visualizzato un file 'profile.cpuprofile' creato in wwwroot del sito.</span><span class="sxs-lookup"><span data-stu-id="bf310-216">You will see a ‘profile.cpuprofile’ file created under your site wwwroot.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_profile.cpuprofile.png)

<span data-ttu-id="bf310-217">Scaricare questo file. Sarà necessario aprire il file con gli strumenti F12 di Chrome.</span><span class="sxs-lookup"><span data-stu-id="bf310-217">Download this file and you will need to open this file with Chrome F12 Tools.</span></span> <span data-ttu-id="bf310-218">Premere F12 in Chrome, quindi fare clic sulla scheda "Profiles" (Profili).</span><span class="sxs-lookup"><span data-stu-id="bf310-218">Hit F12 on chrome, then click on the “Profiles Tab”.</span></span> <span data-ttu-id="bf310-219">Fare clic sul pulsante "Load" (Carica).</span><span class="sxs-lookup"><span data-stu-id="bf310-219">Click on “Load” Button.</span></span> <span data-ttu-id="bf310-220">Selezionare il file profile.cpuprofile appena scaricato.</span><span class="sxs-lookup"><span data-stu-id="bf310-220">Select your profile.cpuprofile file that you just downloaded.</span></span> <span data-ttu-id="bf310-221">Fare clic sul profilo appena caricato.</span><span class="sxs-lookup"><span data-stu-id="bf310-221">Click on the profile you just loaded.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/chrome_tools_view.png)

<span data-ttu-id="bf310-222">Come si può notare, il 95% del tempo è stato utilizzato dalla funzione WriteConsoleLog, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="bf310-222">You will see that 95% of the time was consumed by WriteConsoleLog function as shown below.</span></span> <span data-ttu-id="bf310-223">Vengono anche mostrati i numeri di riga esatti e i file di origine che provocano questo problema.</span><span class="sxs-lookup"><span data-stu-id="bf310-223">This also shows you the exact line numbers and source files that cause the issue.</span></span>

### <a name="my-node-application-is-consuming-too-much-memory"></a><span data-ttu-id="bf310-224">L'applicazione Node utilizza una quantità eccessiva di memoria.</span><span class="sxs-lookup"><span data-stu-id="bf310-224">My node application is consuming too much memory.</span></span>
<span data-ttu-id="bf310-225">È probabile che si riceva da App Web di Azure nel portale una raccomandazione relativa all'utilizzo elevato di memoria.</span><span class="sxs-lookup"><span data-stu-id="bf310-225">You will probably get a recommendation from Azure Webapps on your portal about high memory consumption.</span></span> <span data-ttu-id="bf310-226">È anche possibile configurare monitoraggi per il controllo di determinate [metriche](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="bf310-226">You can also setup monitors to watch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="bf310-227">Quando si verifica l'utilizzo della memoria nel [dashboard del portale di Azure](../application-insights/app-insights-web-monitor-performance.md), controllare i valori MAX per la memoria, in modo da non perdere i valori di picco.</span><span class="sxs-lookup"><span data-stu-id="bf310-227">When checking the memory usage on the [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check the MAX values for memory so you don’t miss out the peak values.</span></span>

#### <a name="leak-detection-and-heap-diffing-for-nodejs"></a><span data-ttu-id="bf310-228">Rilevamento della perdita di risorse e delle differenze tra heap per node.js</span><span class="sxs-lookup"><span data-stu-id="bf310-228">Leak detection and Heap Diffing for node.js</span></span>
<span data-ttu-id="bf310-229">È possibile usare [node-memwatch](https://github.com/lloyd/node-memwatch) per semplificare l'identificazione delle perdite di memoria.</span><span class="sxs-lookup"><span data-stu-id="bf310-229">You could use [node-memwatch](https://github.com/lloyd/node-memwatch) to help you identify memory leaks.</span></span>
<span data-ttu-id="bf310-230">È possibile installare memwatch con la stessa procedura usata per v8-profiler e modificare il codice per acquisire gli heap e rilevarne le differenze per identificare le perdite di memoria nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bf310-230">You can install memwatch just like v8-profiler and edit your code to capture and diff heaps to identify the memory leaks in your application.</span></span>

### <a name="my-nodeexes-are-getting-killed-randomly"></a><span data-ttu-id="bf310-231">I file node.exe vengono terminati in modo casuale</span><span class="sxs-lookup"><span data-stu-id="bf310-231">My node.exe’s are getting killed randomly</span></span>
<span data-ttu-id="bf310-232">Questo problema può avere alcune cause:</span><span class="sxs-lookup"><span data-stu-id="bf310-232">There are a few reasons why this could be happening:</span></span>

1. <span data-ttu-id="bf310-233">L'applicazione genera eccezioni non rilevate. Cercare nel file d:\\home\\LogFiles\\Application\\logging-errors.txt i dettagli nell'eccezione generata.</span><span class="sxs-lookup"><span data-stu-id="bf310-233">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for the details on the exception thrown.</span></span> <span data-ttu-id="bf310-234">Questo file include l'analisi dello stack, quindi è possibile risolvere i problemi dell'applicazione in base a tali informazioni.</span><span class="sxs-lookup"><span data-stu-id="bf310-234">This file has the stack trace so you can fix your application based on this.</span></span>
2. <span data-ttu-id="bf310-235">L'applicazione utilizza una quantità troppo elevata di memoria e ciò impedisce l'avvio di altri processi.</span><span class="sxs-lookup"><span data-stu-id="bf310-235">Your application is consuming too much memory which is affecting other processes from getting started.</span></span> <span data-ttu-id="bf310-236">Se il totale della memoria della macchina virtuale si avvicina al 100%, è possibile che il file node.exe venga terminato da gestione processi per consentire ad altri processi di eseguire alcune operazioni.</span><span class="sxs-lookup"><span data-stu-id="bf310-236">If the total VM memory is close to 100%, your node.exe’s could be killed by the process manager to let other processes get a chance to do some work.</span></span> <span data-ttu-id="bf310-237">Per risolvere questo problema, assicurarsi che l'applicazione non perda memoria OPPURE, se l'applicazione deve effettivamente usare una quantità elevata di memoria, selezionare dimensioni maggiori per la macchina virtuale, in modo da ottenere molta più RAM.</span><span class="sxs-lookup"><span data-stu-id="bf310-237">To fix this, either make sure your application is not leaking memory OR if you application really needs to use a lot of memory, please scale up to a larger VM with a lot more RAM.</span></span>

### <a name="my-node-application-does-not-start"></a><span data-ttu-id="bf310-238">Non è possibile avviare l'applicazione Node</span><span class="sxs-lookup"><span data-stu-id="bf310-238">My node application does not start</span></span>
<span data-ttu-id="bf310-239">Se l'applicazione restituisce errori di tipo 500 all'avvio, è possibile che si siano verificati i problemi seguenti:</span><span class="sxs-lookup"><span data-stu-id="bf310-239">If your application is returning 500 Errors at startup, there could be a few reasons:</span></span>

1. <span data-ttu-id="bf310-240">Node.exe non è presente nella posizione corretta.</span><span class="sxs-lookup"><span data-stu-id="bf310-240">Node.exe is not present at the correct location.</span></span> <span data-ttu-id="bf310-241">Verificare l'impostazione nodeProcessCommandLine.</span><span class="sxs-lookup"><span data-stu-id="bf310-241">Check nodeProcessCommandLine setting.</span></span>
2. <span data-ttu-id="bf310-242">Il file di script principale non è presente nella posizione corretta.</span><span class="sxs-lookup"><span data-stu-id="bf310-242">Main script file is not present at the correct location.</span></span> <span data-ttu-id="bf310-243">Controllare il file web.config e assicurarsi che il nome del file di script principale nella sezione dei gestori corrisponda al file di script principale.</span><span class="sxs-lookup"><span data-stu-id="bf310-243">Check web.config and make sure the name of the main script file in the handlers section matches the main script file.</span></span>
3. <span data-ttu-id="bf310-244">La configurazione di Web.config non è corretta. Controllare i nomi/valori delle impostazioni.</span><span class="sxs-lookup"><span data-stu-id="bf310-244">Web.config configuration is not correct – check the settings names/values.</span></span>
4. <span data-ttu-id="bf310-245">Avvio a freddo: l'avvio dell'applicazione richiede troppo tempo.</span><span class="sxs-lookup"><span data-stu-id="bf310-245">Cold Start – Your application is taking too long to startup.</span></span> <span data-ttu-id="bf310-246">Se l'avvio dell'applicazione richiede più di (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 secondi, iisnode restituirà un errore di tipo 500.</span><span class="sxs-lookup"><span data-stu-id="bf310-246">If your application takes longer than (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 seconds, iisnode will return 500 error.</span></span> <span data-ttu-id="bf310-247">Incrementare i valori di queste impostazioni, in modo che corrispondano al tempo di avvio dell'applicazione, per impedire il timeout di iisnode e la restituzione dell'errore di tipo 500.</span><span class="sxs-lookup"><span data-stu-id="bf310-247">Increase the values of these settings to match your application start time to prevent iisnode from timing out and returning the 500 error.</span></span>

### <a name="my-node-application-crashed"></a><span data-ttu-id="bf310-248">Si è verificato l'arresto anomalo dell'applicazione Node</span><span class="sxs-lookup"><span data-stu-id="bf310-248">My node application crashed</span></span>
<span data-ttu-id="bf310-249">L'applicazione genera eccezioni non rilevate. Cercare nel file d:\\home\\LogFiles\\Application\\logging-errors.txt i dettagli nell'eccezione generata.</span><span class="sxs-lookup"><span data-stu-id="bf310-249">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for the details on the exception thrown.</span></span> <span data-ttu-id="bf310-250">Questo file include l'analisi dello stack, quindi è possibile risolvere i problemi dell'applicazione in base a tali informazioni.</span><span class="sxs-lookup"><span data-stu-id="bf310-250">This file has the stack trace so you can fix your application based on this.</span></span>

### <a name="my-node-application-takes-too-much-time-to-startup-cold-start"></a><span data-ttu-id="bf310-251">L'avvio dell'applicazione Node richiede troppo tempo (avvio a freddo)</span><span class="sxs-lookup"><span data-stu-id="bf310-251">My node application takes too much time to startup (Cold Start)</span></span>
<span data-ttu-id="bf310-252">La causa più comune di questo problema deriva dalla presenza di un numero elevato di file dell'applicazione in node\_modules e dal tentativo dell'applicazione di caricare la maggior parte di questi file durante l'avvio.</span><span class="sxs-lookup"><span data-stu-id="bf310-252">Most common reason for this is that the application has a lot of files in the node\_modules and the application tries to load most of these files during startup.</span></span> <span data-ttu-id="bf310-253">Per impostazione predefinita, poiché i file si trovano nella condivisione di rete in App Web di Azure, il caricamento di un numero così elevato di file può richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="bf310-253">By default, since your files reside on the network share on Azure Webapps, loading so many files can take some time.</span></span>
<span data-ttu-id="bf310-254">Ecco alcune soluzione per ridurre i tempi di avvio:</span><span class="sxs-lookup"><span data-stu-id="bf310-254">Some solutions to make this faster are:</span></span>

1. <span data-ttu-id="bf310-255">Assicurarsi che sia disponibile una struttura di dipendenze semplice, senza dipendenze duplicate, usando npm3 per installare i moduli.</span><span class="sxs-lookup"><span data-stu-id="bf310-255">Make sure you have a flat dependency structure and no duplicate dependencies by using npm3 to install your modules.</span></span>
2. <span data-ttu-id="bf310-256">Provare a eseguire il caricamento lazy di node\_modules e non caricare tutti i moduli all'avvio.</span><span class="sxs-lookup"><span data-stu-id="bf310-256">Try to lazy load your node\_modules and not load all of the modules at startup.</span></span> <span data-ttu-id="bf310-257">La chiamata a require('module') deve essere quindi effettuata quando effettivamente necessario, all'interno della funzione in cui si prova a usare il modulo.</span><span class="sxs-lookup"><span data-stu-id="bf310-257">This means that the call to require(‘module’) should be done when you actually need it within the function you try to use the module.</span></span>
3. <span data-ttu-id="bf310-258">App Web di Azure offre una funzionalità definita cache locale.</span><span class="sxs-lookup"><span data-stu-id="bf310-258">Azure Webapps offers a feature called local cache.</span></span> <span data-ttu-id="bf310-259">Questa funzionalità copia il contenuto dalla condivisione di rete nel disco locale sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bf310-259">This feature copies your content from the network share to the local disk on the VM.</span></span> <span data-ttu-id="bf310-260">Poiché i file sono locali, il tempo di caricamento di node\_modules risulta molto più veloce.</span><span class="sxs-lookup"><span data-stu-id="bf310-260">Since the files are local, the load time of node\_modules is much faster.</span></span> <span data-ttu-id="bf310-261">Per informazioni dettagliate su come usare, la cache locale, vedere questa [documentazione](../app-service/app-service-local-cache.md) .</span><span class="sxs-lookup"><span data-stu-id="bf310-261">- This [documentation](../app-service/app-service-local-cache.md) explains how to use Local Cache in more detail.</span></span>

## <a name="iisnode-http-status-and-substatus"></a><span data-ttu-id="bf310-262">Stato e stato secondario HTTP di IISNODE</span><span class="sxs-lookup"><span data-stu-id="bf310-262">IISNODE http status and substatus</span></span>
<span data-ttu-id="bf310-263">Questo [file di origine](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) elenca tutte le combinazioni possibili di stato/stato secondario che iisnode può restituire in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="bf310-263">This [source file](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) lists all the possible status/substatus combination iisnode can return in case of error.</span></span>

<span data-ttu-id="bf310-264">Abilitare FREB per l'applicazione per visualizzare il codice errore win32. Assicurarsi di abilitare FREB solo in siti non di produzione, per motivi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="bf310-264">Enable FREB for your application to see the win32 error code (please make sure you enable FREB only on non-production sites for performance reasons).</span></span>

| <span data-ttu-id="bf310-265">Stato HTTP</span><span class="sxs-lookup"><span data-stu-id="bf310-265">Http Status</span></span> | <span data-ttu-id="bf310-266">Stato secondario HTTP</span><span class="sxs-lookup"><span data-stu-id="bf310-266">Http SubStatus</span></span> | <span data-ttu-id="bf310-267">Possibile motivo</span><span class="sxs-lookup"><span data-stu-id="bf310-267">Possible Reason?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bf310-268">500</span><span class="sxs-lookup"><span data-stu-id="bf310-268">500</span></span> |<span data-ttu-id="bf310-269">1000</span><span class="sxs-lookup"><span data-stu-id="bf310-269">1000</span></span> |<span data-ttu-id="bf310-270">Si è verificato un problema durante l'invio della richiesta a IISNODE. Verificare se node.exe è stato avviato.</span><span class="sxs-lookup"><span data-stu-id="bf310-270">There was some issue dispatching the request to IISNODE – check if node.exe was started up.</span></span> <span data-ttu-id="bf310-271">È possibile che si sia verificato l'arresto anomalo di Node.exe all'avvio.</span><span class="sxs-lookup"><span data-stu-id="bf310-271">Node.exe could have crashed on startup.</span></span> <span data-ttu-id="bf310-272">Cercare eventuali errori nella configurazione del file web.config.</span><span class="sxs-lookup"><span data-stu-id="bf310-272">Check your web.config configuration for errors.</span></span> |
| <span data-ttu-id="bf310-273">500</span><span class="sxs-lookup"><span data-stu-id="bf310-273">500</span></span> |<span data-ttu-id="bf310-274">1001</span><span class="sxs-lookup"><span data-stu-id="bf310-274">1001</span></span> |<span data-ttu-id="bf310-275">- Win32Error 0x2: l'app non risponde all'URL.</span><span class="sxs-lookup"><span data-stu-id="bf310-275">- Win32Error 0x2 - App is not responding to the URL.</span></span> <span data-ttu-id="bf310-276">Controllare le regole di riscrittura dell'URL o verificare se sono state definite le route corrette per l'app Express.</span><span class="sxs-lookup"><span data-stu-id="bf310-276">Check URL rewrite rules or if your express app has the correct routes defined.</span></span> <span data-ttu-id="bf310-277">- Win32Error 0x6d: la named pipe è occupata. Node.exe non accetta le richieste perché la pipe è occupata.</span><span class="sxs-lookup"><span data-stu-id="bf310-277">- Win32Error 0x6d – named pipe is busy – Node.exe is not accepting requests because the pipe is busy.</span></span> <span data-ttu-id="bf310-278">Controllare se l'utilizzo della CPU è elevato.</span><span class="sxs-lookup"><span data-stu-id="bf310-278">Check high cpu usage.</span></span> <span data-ttu-id="bf310-279">- Altri errori: controllare se si è verificato l'arresto anomalo di node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-279">- Other errors – check if node.exe crashed.</span></span> |
| <span data-ttu-id="bf310-280">500</span><span class="sxs-lookup"><span data-stu-id="bf310-280">500</span></span> |<span data-ttu-id="bf310-281">1002</span><span class="sxs-lookup"><span data-stu-id="bf310-281">1002</span></span> |<span data-ttu-id="bf310-282">Si è verificato l'arresto anomalo di Node.exe: verificare se nel file d:\\home\\LogFiles\\logging-errors.txt è disponibile l'analisi dello stack.</span><span class="sxs-lookup"><span data-stu-id="bf310-282">Node.exe crashed – check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="bf310-283">500</span><span class="sxs-lookup"><span data-stu-id="bf310-283">500</span></span> |<span data-ttu-id="bf310-284">1003</span><span class="sxs-lookup"><span data-stu-id="bf310-284">1003</span></span> |<span data-ttu-id="bf310-285">Problema di configurazione della pipe: questo errore non dovrebbe essere mai visualizzato. Se viene visualizzato, la configurazione della named pipe non è corretta.</span><span class="sxs-lookup"><span data-stu-id="bf310-285">Pipe configuration Issue – You should never see this but if you do, the named pipe configuration is incorrect.</span></span> |
| <span data-ttu-id="bf310-286">500</span><span class="sxs-lookup"><span data-stu-id="bf310-286">500</span></span> |<span data-ttu-id="bf310-287">1004-1018</span><span class="sxs-lookup"><span data-stu-id="bf310-287">1004-1018</span></span> |<span data-ttu-id="bf310-288">Si è verificato un errore durante l'invio della richiesta o l'elaborazione della risposta verso/da node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-288">There was some error while sending the request or processing the response to/from node.exe.</span></span> <span data-ttu-id="bf310-289">Controllare se si è verificato l'arresto anomalo di node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-289">Check if node.exe crashed.</span></span> <span data-ttu-id="bf310-290">Verificare se nel file d:\\home\\LogFiles\\logging-errors.txt è disponibile l'analisi dello stack.</span><span class="sxs-lookup"><span data-stu-id="bf310-290">check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="bf310-291">503</span><span class="sxs-lookup"><span data-stu-id="bf310-291">503</span></span> |<span data-ttu-id="bf310-292">1000</span><span class="sxs-lookup"><span data-stu-id="bf310-292">1000</span></span> |<span data-ttu-id="bf310-293">La memoria non è sufficiente per allocare altre connessioni a named pipe.</span><span class="sxs-lookup"><span data-stu-id="bf310-293">Not enough memory to allocate more named pipe connections.</span></span> <span data-ttu-id="bf310-294">Verificare i motivi per cui l'app utilizza una quantità così elevata di memoria.</span><span class="sxs-lookup"><span data-stu-id="bf310-294">Check why your app is consuming so much memory.</span></span> <span data-ttu-id="bf310-295">Controllare il valore dell'impostazione maxConcurrentRequestsPerProcess.</span><span class="sxs-lookup"><span data-stu-id="bf310-295">Check maxConcurrentRequestsPerProcess setting value.</span></span> <span data-ttu-id="bf310-296">Se non è impostata su Infinite e il numero di richieste è elevato, incrementare il valore per evitare questo errore.</span><span class="sxs-lookup"><span data-stu-id="bf310-296">If its not infinite and you have a lot of requests, increase this value to prevent this error.</span></span> |
| <span data-ttu-id="bf310-297">503</span><span class="sxs-lookup"><span data-stu-id="bf310-297">503</span></span> |<span data-ttu-id="bf310-298">1001</span><span class="sxs-lookup"><span data-stu-id="bf310-298">1001</span></span> |<span data-ttu-id="bf310-299">Non è stato possibile inviare la richiesta a node.exe perché l'applicazione è in fase di riciclo.</span><span class="sxs-lookup"><span data-stu-id="bf310-299">Request could not be dispatched to node.exe because the application is recycling.</span></span> <span data-ttu-id="bf310-300">Dopo il riciclo dell'applicazione, le richieste dovrebbero essere gestite normalmente.</span><span class="sxs-lookup"><span data-stu-id="bf310-300">After the application has recycled, requests should be served normally.</span></span> |
| <span data-ttu-id="bf310-301">503</span><span class="sxs-lookup"><span data-stu-id="bf310-301">503</span></span> |<span data-ttu-id="bf310-302">1002</span><span class="sxs-lookup"><span data-stu-id="bf310-302">1002</span></span> |<span data-ttu-id="bf310-303">Cercare il motivo effettivo nel codice errore win32. Non è stato possibile inviare la richiesta a node.exe.</span><span class="sxs-lookup"><span data-stu-id="bf310-303">Check win32 error code for actual reason – Request could not be dispatched to a node.exe.</span></span> |
| <span data-ttu-id="bf310-304">503</span><span class="sxs-lookup"><span data-stu-id="bf310-304">503</span></span> |<span data-ttu-id="bf310-305">1003</span><span class="sxs-lookup"><span data-stu-id="bf310-305">1003</span></span> |<span data-ttu-id="bf310-306">La named pipe è troppo occupata. Controllare se il nodo utilizza una quantità elevata di CPU.</span><span class="sxs-lookup"><span data-stu-id="bf310-306">Named pipe is too Busy – Check if node is consuming a lot of CPU</span></span> |

<span data-ttu-id="bf310-307">NODE.exe include un'impostazione definita NODE\_PENDING\_PIPE\_INSTANCES.</span><span class="sxs-lookup"><span data-stu-id="bf310-307">There is a setting within NODE.exe called NODE\_PENDING\_PIPE\_INSTANCES.</span></span> <span data-ttu-id="bf310-308">Per impostazione predefinita, all'esterno di App Web di Azure questo valore è 4.</span><span class="sxs-lookup"><span data-stu-id="bf310-308">By default outside of azure webapps this value is 4.</span></span> <span data-ttu-id="bf310-309">Node.exe può quindi accettare quattro richieste alla volta nella named pipe.</span><span class="sxs-lookup"><span data-stu-id="bf310-309">This means that node.exe can only accept 4 requests at a time on the named pipe.</span></span> <span data-ttu-id="bf310-310">In App Web di Azure questo valore è impostato su 5000 e questo valore dovrebbe essere appropriato per la maggior parte delle applicazioni in esecuzione in App Web di Azure.</span><span class="sxs-lookup"><span data-stu-id="bf310-310">On Azure Webapps, this value is set to 5000 and this value should be good enough for most node applications running on azure webapps.</span></span> <span data-ttu-id="bf310-311">L'errore 503.1003 non dovrebbe essere visualizzato in App Web di Azure perché è stato impostato un valore elevato per NODE\_PENDING\_PIPE\_INSTANCES.</span><span class="sxs-lookup"><span data-stu-id="bf310-311">You should not see 503.1003 on azure webapps because we have a high value for the NODE\_PENDING\_PIPE\_INSTANCES.</span></span>  |

## <a name="more-resources"></a><span data-ttu-id="bf310-312">Altre risorse</span><span class="sxs-lookup"><span data-stu-id="bf310-312">More resources</span></span>
<span data-ttu-id="bf310-313">Per altre informazioni sulle applicazioni node.js nel servizio app di Azure, selezionare questi collegamenti.</span><span class="sxs-lookup"><span data-stu-id="bf310-313">Follow these links to learn more about node.js applications on Azure App Service.</span></span>

* [<span data-ttu-id="bf310-314">Introduzione alle app Web Node.js nel servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="bf310-314">Get started with Node.js web apps in Azure App Service</span></span>](app-service-web-get-started-nodejs.md)
* [<span data-ttu-id="bf310-315">Come eseguire il debug di un'app Web Node.js nel servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="bf310-315">How to debug a Node.js web app in Azure App Service</span></span>](web-sites-nodejs-debug.md)
* [<span data-ttu-id="bf310-316">Utilizzo di moduli Node.js con le applicazioni Azure</span><span class="sxs-lookup"><span data-stu-id="bf310-316">Using Node.js Modules with Azure applications</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="bf310-317">Blog sulle app Web del servizio app di Azure: Node.js</span><span class="sxs-lookup"><span data-stu-id="bf310-317">Azure App Service Web Apps: Node.js</span></span>](https://blogs.msdn.microsoft.com/silverlining/2012/06/14/windows-azure-websites-node-js/)
* [<span data-ttu-id="bf310-318">Centro per sviluppatori di Node. js</span><span class="sxs-lookup"><span data-stu-id="bf310-318">Node.js Developer Center</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="bf310-319">Exploring the Super Secret Kudu Debug Console (Esplorazione della console segreta di debug di Kudu)</span><span class="sxs-lookup"><span data-stu-id="bf310-319">Exploring the Super Secret Kudu Debug Console</span></span>](https://azure.microsoft.com/documentation/videos/super-secret-kudu-debug-console-for-azure-web-sites/)

