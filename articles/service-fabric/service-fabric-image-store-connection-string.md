---
title: Stringa di connessione dell'archivio immagini di Azure Service Fabric | Microsoft Docs
description: Informazioni sulla stringa di connessione dell'archivio immagini
services: service-fabric
documentationcenter: .net
author: alexwun
manager: timlt
editor: 
ms.assetid: 00f8059d-9d53-4cb8-b44a-b25149de3030
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/07/2017
ms.author: alexwun
ms.openlocfilehash: f497006a8ba48da0032b82113702d8014952ca20
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="understand-the-imagestoreconnectionstring-setting"></a><span data-ttu-id="26d67-103">Informazioni sull'impostazione ImageStoreConnectionString</span><span class="sxs-lookup"><span data-stu-id="26d67-103">Understand the ImageStoreConnectionString setting</span></span>

<span data-ttu-id="26d67-104">In alcuni documenti di Microsoft si accenna brevemente all'esistenza di un parametro "ImageStoreConnectionString" senza che descriverne il significato reale.</span><span class="sxs-lookup"><span data-stu-id="26d67-104">In some of our documentation, we briefly mention the existence of an "ImageStoreConnectionString" parameter without describing what it really means.</span></span> <span data-ttu-id="26d67-105">E dopo aver consultato un articolo come [Deploy and remove applications using PowerShell][10] (Distribuire e rimuovere applicazioni tramite PowerShell), sembra che sia sufficiente copiare e incollare il valore così come viene visualizzato nel manifesto del cluster del cluster di destinazione.</span><span class="sxs-lookup"><span data-stu-id="26d67-105">And after going through an article like [Deploy and remove applications using PowerShell][10], it looks like all you do is copy/paste the value as it appears in the cluster manifest of the target cluster.</span></span> <span data-ttu-id="26d67-106">L'impostazione quindi deve essere configurabile per ogni cluster, ma quando si crea un cluster nel [Portale di Azure][11], non è possibile configurare questa impostazione che è sempre "fabric:ImageStore".</span><span class="sxs-lookup"><span data-stu-id="26d67-106">So the setting must be configurable per cluster, but when you create a cluster through the [Azure portal][11], there's no option to configure this setting and it's always "fabric:ImageStore".</span></span> <span data-ttu-id="26d67-107">Qual è lo scopo di questa impostazione quindi?</span><span class="sxs-lookup"><span data-stu-id="26d67-107">What's the purpose of this setting then?</span></span>

![Manifesto del cluster][img_cm]

<span data-ttu-id="26d67-109">Service Fabric inizialmente era una piattaforma usata da diversi team di Microsofti, pertanto alcuni aspetti sono altamente personalizzabili e "Archivio immagini" è uni di questi aspetti.</span><span class="sxs-lookup"><span data-stu-id="26d67-109">Service Fabric started off as a platform for internal Microsoft consumption by many diverse teams, so some aspects of it are highly customizable - the "Image Store" is one such aspect.</span></span> <span data-ttu-id="26d67-110">In pratica, l'Archivio di immagini è un repository collegabile per l'archiviazione dei pacchetti di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="26d67-110">Essentially, the Image Store is a pluggable repository for storing application packages.</span></span> <span data-ttu-id="26d67-111">Quando l'applicazione viene distribuita in un nodo del cluster, tale nodo scarica il contenuto del pacchetto dell'applicazione da Archivio immagini.</span><span class="sxs-lookup"><span data-stu-id="26d67-111">When your application is deployed to a node in the cluster, that node downloads the contents of your application package from the Image Store.</span></span> <span data-ttu-id="26d67-112">ImageStoreConnectionString è un'impostazione che include tutte le informazioni necessarie sia per i client che per i nodi utile a trovare l'Archivio immagini corretto per un determinato cluster.</span><span class="sxs-lookup"><span data-stu-id="26d67-112">The ImageStoreConnectionString is a setting that includes all the necessary information for both clients and nodes to find the correct Image Store for a given cluster.</span></span>

<span data-ttu-id="26d67-113">Esistono attualmente tre tipi possibili di provider i Archivio immagini e le relative stringhe di connessione sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="26d67-113">There are currently three possible kinds of Image Store providers and their corresponding connection strings are as follows:</span></span>

1. <span data-ttu-id="26d67-114">Servizio di archiviazione immagini: "fabric:ImageStore"</span><span class="sxs-lookup"><span data-stu-id="26d67-114">Image Store Service: "fabric:ImageStore"</span></span>

2. <span data-ttu-id="26d67-115">File System: "file:[file system path]"</span><span class="sxs-lookup"><span data-stu-id="26d67-115">File System: "file:[file system path]"</span></span>

3. <span data-ttu-id="26d67-116">Archiviazione di Azure: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span><span class="sxs-lookup"><span data-stu-id="26d67-116">Azure Storage: "xstore:DefaultEndpointsProtocol=https;AccountName=[...];AccountKey=[...];Container=[...]"</span></span>

<span data-ttu-id="26d67-117">Il tipo di provider utilizzato nell'ambiente di produzione è il Servizio di archiviazione immagini, che è un servizio di sistema persistente con stato che è possibile visualizzare da Service Fabric Explorer.</span><span class="sxs-lookup"><span data-stu-id="26d67-117">The provider type used in production is the Image Store Service, which is a stateful persisted system service that you can see from Service Fabric Explorer.</span></span> 

![Servizio di archiviazione immagini][img_is]

<span data-ttu-id="26d67-119">Ospitare Archivio immagini in un servizio di sistema all'interno del cluster stesso elimina le dipendenze esterne per il repository del pacchetto e offre un maggiore controllo sulla posizione di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="26d67-119">Hosting the Image Store in a system service within the cluster itself eliminates external dependencies for the package repository and gives us more control over the locality of storage.</span></span> <span data-ttu-id="26d67-120">È probabile che i miglioramenti futuri di Archivio immagini riguarderanno prima di tutto, o in esclusivamente, il provider di Archivio immagini.</span><span class="sxs-lookup"><span data-stu-id="26d67-120">Future improvements around the Image Store are likely to target the Image Store provider first, if not exclusively.</span></span> <span data-ttu-id="26d67-121">La stringa di connessione per il provider del Servizio di archiviazione immagini non dispone di informazioni univoche in quanto il client è già connesso al cluster di destinazione.</span><span class="sxs-lookup"><span data-stu-id="26d67-121">The connection string for the Image Store Service provider doesn't have any unique information since the client is already connected to the target cluster.</span></span> <span data-ttu-id="26d67-122">Per il client è sufficiente sapere che è necessario usare i protocolli per il servizio di sistema.</span><span class="sxs-lookup"><span data-stu-id="26d67-122">The client only needs to know that protocols targeting the system service should be used.</span></span>

<span data-ttu-id="26d67-123">Il provider di File System viene usato al posto del servizio di archiviazione immagini per i cluster di una casella locali durante lo sviluppo per eseguire il bootstrap del cluster un po' più velocemente.</span><span class="sxs-lookup"><span data-stu-id="26d67-123">The File System provider is used instead of the Image Store Service for local one-box clusters during development to bootstrap the cluster slightly faster.</span></span> <span data-ttu-id="26d67-124">La differenza generalmente è poca, ma è un'ottimizzazione utile a molti durante lo sviluppo.</span><span class="sxs-lookup"><span data-stu-id="26d67-124">The difference is typically small, but it's a useful optimization for most folks during development.</span></span> <span data-ttu-id="26d67-125">È possibile distribuire un cluster di una casella locale anche con altri tipi di provider per l'archiviazione, ma in genere non è necessario farlo poiché il flusso di lavoro di sviluppo e test rimane invariato indipendentemente dal provider.</span><span class="sxs-lookup"><span data-stu-id="26d67-125">It's possible to deploy a local one-box cluster with the other storage provider types as well, but there's usually no reason to do so since the develop/test workflow remains the same regardless of provider.</span></span> <span data-ttu-id="26d67-126">Oltre a questo uso, i provider di File System e di Archiviazione di Azure esistono solo per il supporto legacy.</span><span class="sxs-lookup"><span data-stu-id="26d67-126">Other than this usage, the File System and Azure Storage providers only exist for legacy support.</span></span>

<span data-ttu-id="26d67-127">Pertanto nonostante ImageStoreConnectionString sia configurabile, generalmente viene usata solo l'impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="26d67-127">So while the ImageStoreConnectionString is configurable, you generally just use the default setting.</span></span> <span data-ttu-id="26d67-128">Durante la pubblicazione in Azure tramite [Visual Studio][12], il parametro viene impostato automaticamente in base alle esigenze dell'utente.</span><span class="sxs-lookup"><span data-stu-id="26d67-128">When publishing to Azure through [Visual Studio][12], the parameter is automatically set for you accordingly.</span></span> <span data-ttu-id="26d67-129">Per la distribuzione a livello di codice ai cluster ospitati in Azure, la stringa di connessione è sempre "fabric:ImageStore".</span><span class="sxs-lookup"><span data-stu-id="26d67-129">For programmatic deployment to clusters hosted in Azure, the connection string is always "fabric:ImageStore".</span></span> <span data-ttu-id="26d67-130">In caso di dubbi, il suo valore può essere verificato sempre recuperando il manifesto del cluster da [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx) o [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span><span class="sxs-lookup"><span data-stu-id="26d67-130">Though when in doubt, its value can always be verified by retrieving the cluster manifest by [PowerShell](https://docs.microsoft.com/powershell/servicefabric/vlatest/get-servicefabricclustermanifest), [.NET](https://msdn.microsoft.com/library/azure/mt161375.aspx), or [REST](https://docs.microsoft.com/rest/api/servicefabric/get-a-cluster-manifest).</span></span> <span data-ttu-id="26d67-131">Sia i test in locale che i cluster di produzione devono essere sempre configurati per poter usare anche il provider del Servizio di archivio immagini.</span><span class="sxs-lookup"><span data-stu-id="26d67-131">Both on-premises test and production clusters should always be configured to use the Image Store Service provider as well.</span></span>

### <a name="next-steps"></a><span data-ttu-id="26d67-132">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="26d67-132">Next steps</span></span>
<span data-ttu-id="26d67-133">[Deploy and remove applications using PowerShell][10] (Distribuire e rimuovere applicazioni con PowerShell)</span><span class="sxs-lookup"><span data-stu-id="26d67-133">[Deploy and remove applications using PowerShell][10]</span></span>

<!--Image references-->
[img_is]: ./media/service-fabric-image-store-connection-string/image_store_service.png
[img_cm]: ./media/service-fabric-image-store-connection-string/cluster_manifest.png

[10]: service-fabric-deploy-remove-applications.md
[11]: service-fabric-cluster-creation-via-portal.md
[12]: service-fabric-publish-app-remote-cluster.md
