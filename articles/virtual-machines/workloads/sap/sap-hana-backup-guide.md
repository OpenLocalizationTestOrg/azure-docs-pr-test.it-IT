---
title: Guida di aaaBackup per SAP HANA in macchine virtuali di Azure | Documenti Microsoft
description: La guida del backup per SAP HANA offre due opzioni principali per il backup di SAP HANA su macchine virtuali di Azure
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="4dce5-103">Guida del backup di SAP HANA in macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="4dce5-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="4dce5-104">Introduzione</span><span class="sxs-lookup"><span data-stu-id="4dce5-104">Getting Started</span></span>

<span data-ttu-id="4dce5-105">Guida al backup Hello per SAP HANA in esecuzione in macchine virtuali di Azure solo descrive gli argomenti specifici di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="4dce5-106">Per generale SAP HANA backup elementi correlati, vedere la documentazione di SAP HANA hello (vedere _documentazione di backup di SAP HANA_ più avanti in questo articolo).</span><span class="sxs-lookup"><span data-stu-id="4dce5-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="4dce5-107">Hello di questo articolo è attiva due possibilità backup principali per SAP HANA in macchine virtuali di Azure:</span><span class="sxs-lookup"><span data-stu-id="4dce5-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="4dce5-108">Sistema di file di backup toohello HANA in una macchina virtuale Linux di Azure (vedere [SAP HANA Azure Backup a livello di file](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="4dce5-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="4dce5-109">Backup HANA basato su snapshot di archiviazione con funzionalità snapshot blob di archiviazione di Azure hello manualmente o servizio di Backup di Azure (vedere [SAP HANA backup basato su snapshot di archiviazione](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="4dce5-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="4dce5-110">SAP HANA offre un backup API, che consente di strumenti di backup di terze parti toointegrate direttamente con SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="4dce5-111">(Che non è nell'ambito di hello di questa Guida). Al momento non è prevista alcuna integrazione diretta di SAP HANA con il servizio di Backup di Azure basato su tale API.</span><span class="sxs-lookup"><span data-stu-id="4dce5-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="4dce5-112">SAP HANA è ufficialmente supportato sul tipo di macchina virtuale di Azure GS5 come singola istanza con i carichi di lavoro tooOLAP un'ulteriore restrizione (vedere [trovare piattaforme IaaS Certificate](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) nel sito Web SAP hello).</span><span class="sxs-lookup"><span data-stu-id="4dce5-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="4dce5-113">Questo articolo verrà aggiornato non appena saranno disponibili nuove offerte per SAP HANA in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="4dce5-114">Azure offre anche una soluzione ibrida SAP HANA, in cui SAP HANA viene eseguito in modo non virtualizzato su server fisici.</span><span class="sxs-lookup"><span data-stu-id="4dce5-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="4dce5-115">La presente guida del backup di SAP HANA in Azure descrive un ambiente di Azure genuino in cui SAP HANA viene eseguito in una VM di Azure, non su &quot;istanze di grandi dimensioni&quot;. Vedere [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) (Panoramica e architettura di SAP HANA (istanze di grandi dimensioni) in Azure) per altre informazioni su questa soluzione di backup per &quot;istanze di grandi dimensioni&quot; basate su snapshot di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="4dce5-116">Informazioni generali sui prodotti SAP supportati in Azure sono reperibili in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533) (Nota SAP 1928533).</span><span class="sxs-lookup"><span data-stu-id="4dce5-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="4dce5-117">Hello tre figure seguenti offrono una panoramica di hello opzioni di backup di SAP HANA utilizzando funzionalità native di Azure attualmente e anche mostrano tre potenziali scenari di backup futuri.</span><span class="sxs-lookup"><span data-stu-id="4dce5-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="4dce5-118">articoli correlati Hello [SAP HANA Azure Backup a livello di file](sap-hana-backup-file-level.md) e [SAP HANA backup basato su snapshot di archiviazione](sap-hana-backup-storage-snapshots.md) vengono descritte queste opzioni in modo più dettagliato, tra cui dimensioni e considerazioni sulle prestazioni per SAP Backup HANA terabyte di più dimensioni.</span><span class="sxs-lookup"><span data-stu-id="4dce5-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![La figura seguente illustra due possibilità per il salvataggio stato macchina virtuale corrente hello](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="4dce5-120">Questa figura mostra il possibilità hello di salvataggio hello corrente stato della macchina virtuale, tramite il servizio di Backup di Azure o manuale dello snapshot di dischi di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="4dce5-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="4dce5-121">Con questo approccio, un &#39; non ha i backup di SAP HANA toomanage.</span><span class="sxs-lookup"><span data-stu-id="4dce5-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="4dce5-122">challenge Hello dello scenario di snapshot disco hello è coerenza del file system e uno stato coerente con l'applicazione su disco.</span><span class="sxs-lookup"><span data-stu-id="4dce5-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="4dce5-123">argomento di coerenza Hello è descritta nella sezione hello _la coerenza dei dati SAP HANA quando l'esecuzione di snapshot di archiviazione_ più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="4dce5-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="4dce5-124">Funzionalità e limitazioni del servizio di Backup di Azure correlate a backup HANA tooSAP viene anche illustrato più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="4dce5-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![La figura seguente illustra le opzioni per l'esecuzione di un SAP HANA file di backup all'interno di hello VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="4dce5-126">Questa figura mostra le opzioni per eseguire un backup del file SAP HANA all'interno di hello macchina virtuale e quindi archiviati i file di backup HANA da qualche parte else usando strumenti diversi.</span><span class="sxs-lookup"><span data-stu-id="4dce5-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="4dce5-127">L'esecuzione di un backup HANA richiede più tempo rispetto a una soluzione di backup basato su snapshot, ma presenta vantaggi riguardanti l'integrità e la coerenza.</span><span class="sxs-lookup"><span data-stu-id="4dce5-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="4dce5-128">Altri dettagli sono disponibili più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="4dce5-128">More details are provided later in this article.</span></span>

![La figura seguente mostra un potenziale scenario futuro di backup di SAP HANA](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="4dce5-130">La figura seguente mostra un potenziale scenario futuro di backup di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="4dce5-131">Se SAP HANA ha consentito l'esecuzione di backup da una replica secondaria, vengono aggiunte altre opzioni per le strategie di backup.</span><span class="sxs-lookup"><span data-stu-id="4dce5-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="4dce5-132">Attualmente non è possibile in base tooa post in hello SAP HANA Wiki:</span><span class="sxs-lookup"><span data-stu-id="4dce5-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="4dce5-133">_&quot;È possibile tootake backup sul lato secondario hello?_</span><span class="sxs-lookup"><span data-stu-id="4dce5-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="4dce5-134">_No, attualmente è possibile solo richiedere dati e i backup su lato primario hello del log. Se il backup del log automatico è abilitato, dopo l'acquisizione della proprietà toohello lato secondario, i backup del log hello verranno automaticamente essere scritti.&quot;_</span><span class="sxs-lookup"><span data-stu-id="4dce5-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="4dce5-135">Risorse SAP per il backup di HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="4dce5-136">Documentazione sul backup di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="4dce5-137">Introduzione tooSAP amministrazione HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- <span data-ttu-id="4dce5-138">[Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) (Pianificazione del backup e strategia di ripristino)</span><span class="sxs-lookup"><span data-stu-id="4dce5-138">[Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)</span></span>
- <span data-ttu-id="4dce5-139">[Schedule HANA Backup using ABAP DBACOCKPIT](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html) (Pianificare il backup di HANA tramite ABAP DBACOCKPIT)</span><span class="sxs-lookup"><span data-stu-id="4dce5-139">[Schedule HANA Backup using ABAP DBACOCKPIT](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)</span></span>
- <span data-ttu-id="4dce5-140">[Schedule Data Backups (SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm) (Pianificare il backup dei dati (Pannello di controllo di SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="4dce5-140">[Schedule Data Backups (SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)</span></span>
- <span data-ttu-id="4dce5-141">Domande frequenti sul backup di SAP HANA in [Nota SAP 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="4dce5-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="4dce5-142">Domande frequenti sugli snapshot di archiviazione e dei database di SAP HANA in [Nota SAP 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="4dce5-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="4dce5-143">File system di rete non appropriati per il backup e il ripristino in [Nota SAP 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="4dce5-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="4dce5-144">Perché eseguire il backup di SAP HANA?</span><span class="sxs-lookup"><span data-stu-id="4dce5-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="4dce5-145">Archiviazione di Azure offre disponibilità e affidabilità predefinito hello (vedere [tooMicrosoft introduzione di archiviazione di Azure](../../../storage/common/storage-introduction.md) per ulteriori informazioni sull'archiviazione di Azure).</span><span class="sxs-lookup"><span data-stu-id="4dce5-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="4dce5-146">Hello minimo per &quot;backup&quot; è toorely su hello SLA di Azure, mantenendo hello file di dati e log SAP HANA su macchina virtuale del server SAP HANA toohello collegati dischi rigidi virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="4dce5-147">Questo approccio vengono illustrati gli errori di macchina virtuale, ma non potenziali dati SAP HANA toohello di danni e i file di log o errori logici, ad esempio l'eliminazione di dati o file accidentalmente.</span><span class="sxs-lookup"><span data-stu-id="4dce5-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="4dce5-148">I backup sono necessari anche per motivi legali o di conformità.</span><span class="sxs-lookup"><span data-stu-id="4dce5-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="4dce5-149">In breve, è sempre necessario eseguire backup di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="4dce5-150">Come tooverify correttezza del backup di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="4dce5-151">Quando si usano gli snapshot di archiviazione, è consigliabile eseguire un ripristino di prova su un sistema differente.</span><span class="sxs-lookup"><span data-stu-id="4dce5-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="4dce5-152">Questo approccio offre un modo tooensure che è un backup corretti e interni processi di lavoro di backup e ripristino come previsto.</span><span class="sxs-lookup"><span data-stu-id="4dce5-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="4dce5-153">Mentre questo è un importante ostacolo in locale, è molto più semplice tooaccomplish nel cloud hello fornendo temporaneamente le risorse necessarie per questo scopo.</span><span class="sxs-lookup"><span data-stu-id="4dce5-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="4dce5-154">Tenere presente che eseguire un semplice ripristino e verificare che HANA sia attivo e in esecuzione non è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="4dce5-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="4dce5-155">Idealmente, uno deve essere eseguito un toobe controllo coerenza nella tabella, è necessario che il database ripristinato hello correttamente.</span><span class="sxs-lookup"><span data-stu-id="4dce5-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="4dce5-156">SAP HANA offre diversi tipi di verifiche della coerenza, descritti nella [Nota SAP 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="4dce5-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="4dce5-157">Informazioni sulla verifica della coerenza hello tabella sono disponibili sul sito Web SAP hello al [tabella e le verifiche di coerenza catalogo](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="4dce5-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="4dce5-158">Per il backup di file standard, non è necessario eseguire un ripristino di prova.</span><span class="sxs-lookup"><span data-stu-id="4dce5-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="4dce5-159">Sono disponibili due strumenti di SAP HANA che consentono di toocheck quali backup può essere utilizzato per il ripristino: hdbbackupdiag e hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="4dce5-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="4dce5-160">Vedere [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) (Verifica manuale della fattibilità di un ripristino) per altre informazioni su questi strumenti.</span><span class="sxs-lookup"><span data-stu-id="4dce5-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="4dce5-161">Vantaggi e svantaggi dei backup di HANA rispetto agli snapshot di archiviazione</span><span class="sxs-lookup"><span data-stu-id="4dce5-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="4dce5-162">SAP &#39; backup t offrono preferenza tooeither HANA e snapshot di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="4dce5-163">Elenca i vantaggi e svantaggi, in modo possibile determinare quali toouse a seconda della situazione hello e tecnologia di archiviazione disponibile (vedere [pianificazione di strategia di Backup e ripristino](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="4dce5-164">In Azure, tenere in considerazione il fatto hello che hello non funzionalità snapshot di blob di Azure &#39; t garantire coerenza del file system (vedere [utilizzando gli snapshot di blob con PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="4dce5-165">la sezione successiva, Hello _la coerenza dei dati SAP HANA quando l'esecuzione di snapshot di archiviazione_, vengono fornite alcune considerazioni relative a questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="4dce5-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="4dce5-166">Dispone inoltre di uno toounderstand hello costi di fatturazione quando si utilizzano spesso degli snapshot blob come descritto in questo articolo: [informazioni sulle modalità costi dovuto agli snapshot](/rest/api/storageservices/understanding-how-snapshots-accrue-charges), non è &#39; t altrettanto ovvie come l'uso di Azure dischi virtuali.</span><span class="sxs-lookup"><span data-stu-id="4dce5-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="4dce5-167">Coerenza dei dati SAP HANA durante l'esecuzione degli snapshot di archiviazione</span><span class="sxs-lookup"><span data-stu-id="4dce5-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="4dce5-168">La coerenza del file system e dell'applicazione è un problema complesso quando si eseguono snapshot di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="4dce5-169">problemi di tooavoid modo più semplici Hello è tooshut verso il basso SAP HANA, o forse macchina virtuale intero hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="4dce5-170">L'arresto potrebbe essere eseguibile tramite demo, prototipo o anche tramite un sistema di sviluppo, ma non è un'opzione per un sistema di produzione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="4dce5-171">In Azure, uno ha tookeep presente che hello non funzionalità snapshot di blob di Azure &#39; t garantire coerenza del file system.</span><span class="sxs-lookup"><span data-stu-id="4dce5-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="4dce5-172">Funziona correttamente, tuttavia utilizzando hello SAP HANA snapshot funzionalità, come un singolo disco virtuale è coinvolto.</span><span class="sxs-lookup"><span data-stu-id="4dce5-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="4dce5-173">Ma anche con un singolo disco, gli elementi aggiuntivi toobe selezionata.</span><span class="sxs-lookup"><span data-stu-id="4dce5-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="4dce5-174">La [Nota SAP 2039883](https://launchpad.support.sap.com/#/notes/2039883) contiene importanti informazioni sui backup di SAP HANA tramite gli snapshot di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="4dce5-175">Ad esempio, sono indicate che, con file system di hello XFS, è necessario toorun **xfs\_bloccare** prima di avviare una risorsa di archiviazione snapshot coerenza tooguarantee (vedere [xfs\_freeze(8) - uomo di Linux pagina](https://linux.die.net/man/8/xfs_freeze) per informazioni dettagliate su **xfs\_bloccare**).</span><span class="sxs-lookup"><span data-stu-id="4dce5-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="4dce5-176">argomento Hello di verifica di coerenza diventa anche più complessa in un caso in cui un singolo file system si estende su più dischi o volumi.</span><span class="sxs-lookup"><span data-stu-id="4dce5-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="4dce5-177">Ad esempio, tramite mdadm o LVM e lo striping.</span><span class="sxs-lookup"><span data-stu-id="4dce5-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="4dce5-178">Nota SAP indicato in precedenza stati Hello:</span><span class="sxs-lookup"><span data-stu-id="4dce5-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="4dce5-179">_&quot;Ma tenere presente che il sistema di archiviazione hello è la coerenza di tooguarantee i/o durante la creazione di uno snapshot di archiviazione per ogni volume di dati SAP HANA, ad esempio agli snapshot di un volume di dati specifici del servizio di SAP HANA devono essere un'operazione atomica.&quot;_</span><span class="sxs-lookup"><span data-stu-id="4dce5-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="4dce5-180">Supponendo che esista un file system XFS spanning quattro dischi virtuali Azure, hello passaggi seguenti viene fornito uno snapshot coerente che rappresenta l'area dei dati HANA hello:</span><span class="sxs-lookup"><span data-stu-id="4dce5-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="4dce5-181">Preparazione dello snapshot HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="4dce5-182">Bloccare il sistema di file hello (ad esempio, utilizzare **xfs\_bloccare**)</span><span class="sxs-lookup"><span data-stu-id="4dce5-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="4dce5-183">Creare tutti gli snapshot BLOB necessari in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="4dce5-184">Sbloccare il sistema di file hello</span><span class="sxs-lookup"><span data-stu-id="4dce5-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="4dce5-185">Conferma snapshot HANA hello</span><span class="sxs-lookup"><span data-stu-id="4dce5-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="4dce5-186">Si consiglia di toouse hello procedura in tutti i casi toobe relativamente hello-safe, indipendentemente da quale file system.</span><span class="sxs-lookup"><span data-stu-id="4dce5-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="4dce5-187">In alternativa, se si tratta di un singolo disco o dello striping, usare mdadm o LVM nei diversi dischi.</span><span class="sxs-lookup"><span data-stu-id="4dce5-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="4dce5-188">Si tratta di importanti tooconfirm hello HANA snapshot.</span><span class="sxs-lookup"><span data-stu-id="4dce5-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="4dce5-189">Scadenza toohello &quot;Copy-on-Write&quot; SAP HANA possono non richiedere ulteriore spazio su disco in questa modalità di preparazione dello snapshot.</span><span class="sxs-lookup"><span data-stu-id="4dce5-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="4dce5-190">&#39; s toostart inoltre non è possibile nuovi backup fino a quando non viene confermato snapshot SAP HANA hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="4dce5-191">Servizio di Azure Backup utilizza tootake estensioni VM di Azure cure hello coerenza del file system.</span><span class="sxs-lookup"><span data-stu-id="4dce5-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="4dce5-192">Queste estensioni della macchina virtuale non sono disponibili per l'uso autonomo.</span><span class="sxs-lookup"><span data-stu-id="4dce5-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="4dce5-193">Uno dispone ancora di coerenza di SAP HANA toomanage.</span><span class="sxs-lookup"><span data-stu-id="4dce5-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="4dce5-194">Vedere l'articolo correlato hello [SAP HANA Azure Backup a livello file](sap-hana-backup-file-level.md) per ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="4dce5-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="4dce5-195">Strategia di pianificazione del backup di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="4dce5-196">articolo di SAP HANA Hello [pianificazione di strategia di Backup e ripristino](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) stati a basic piano backup toodo:</span><span class="sxs-lookup"><span data-stu-id="4dce5-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="4dce5-197">Snapshot di archiviazione (giornaliero)</span><span class="sxs-lookup"><span data-stu-id="4dce5-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="4dce5-198">Backup completo dei dati tramite il formato di file o backint (una volta alla settimana)</span><span class="sxs-lookup"><span data-stu-id="4dce5-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="4dce5-199">Backup automatici dei log</span><span class="sxs-lookup"><span data-stu-id="4dce5-199">Automatic log backups</span></span>

<span data-ttu-id="4dce5-200">Facoltativamente, è possibile procedere completamente senza snapshot di archiviazione. Questi possono essere sostituiti da backup delta di HANA, ad esempio backup incrementali o differenziali. Vedere [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm) (Backup delta).</span><span class="sxs-lookup"><span data-stu-id="4dce5-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="4dce5-201">Guida all'amministrazione HANA Hello fornisce un elenco di esempio.</span><span class="sxs-lookup"><span data-stu-id="4dce5-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="4dce5-202">Si consiglia di che uno eseguire il recupero temporizzato di SAP HANA tooa hello seguente sequenza di backup utilizzando:</span><span class="sxs-lookup"><span data-stu-id="4dce5-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="4dce5-203">Backup completo dei dati</span><span class="sxs-lookup"><span data-stu-id="4dce5-203">Full data backup</span></span>
2. <span data-ttu-id="4dce5-204">Backup differenziale</span><span class="sxs-lookup"><span data-stu-id="4dce5-204">Differential backup</span></span>
3. <span data-ttu-id="4dce5-205">Backup incrementale 1</span><span class="sxs-lookup"><span data-stu-id="4dce5-205">Incremental backup 1</span></span>
4. <span data-ttu-id="4dce5-206">Backup incrementale 2</span><span class="sxs-lookup"><span data-stu-id="4dce5-206">Incremental backup 2</span></span>
5. <span data-ttu-id="4dce5-207">Backup dei log</span><span class="sxs-lookup"><span data-stu-id="4dce5-207">Log backups</span></span>

<span data-ttu-id="4dce5-208">Per una pianificazione esattamente come toowhen e la frequenza con cui deve verificarsi un tipo di backup specifico, non è possibile toogive generale, è troppo specifiche del cliente e dipende dal numero di modifiche di dati si verifica nel sistema hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="4dce5-209">Una base dal lato SAP, che può essere visualizzato come indicazione generale, si consiglia di toomake un backup HANA completo una volta alla settimana.</span><span class="sxs-lookup"><span data-stu-id="4dce5-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="4dce5-210">Per quanto riguarda i backup del log, vedere la documentazione di SAP HANA hello [i backup del Log](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="4dce5-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="4dce5-211">SAP consiglia inoltre di eseguire alcune le attività di manutenzione di hello catalogo di backup tookeep dalla crescita smisurata (vedere [di manutenzione per il catalogo di Backup e archiviazione di Backup](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="4dce5-212">File di configurazione di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-212">SAP HANA configuration files</span></span>

<span data-ttu-id="4dce5-213">Come indicato in domande frequenti hello in [1642148 nota SAP](https://launchpad.support.sap.com/#/notes/1642148), i file di configurazione di SAP HANA hello non fanno parte di un backup HANA standard.</span><span class="sxs-lookup"><span data-stu-id="4dce5-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="4dce5-214">Non sono essenziali toorestore un sistema.</span><span class="sxs-lookup"><span data-stu-id="4dce5-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="4dce5-215">configurazione HANA Hello è possibile modificare manualmente dopo il ripristino di hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="4dce5-216">Nel caso in cui desiderato tooget hello stessa configurazione personalizzata durante il processo di ripristino di hello, è necessario tooback dei file di configurazione HANA hello separatamente.</span><span class="sxs-lookup"><span data-stu-id="4dce5-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="4dce5-217">Se i backup HANA standard sta tooa dedicato di sistema di file di backup HANA, uno è stato possibile anche copiare toohello i file di configurazione hello stesso backup del file System e quindi copiare tutti gli elementi come destinazione di archiviazione finale toohello insieme raffreddare nell'archiviazione blob.</span><span class="sxs-lookup"><span data-stu-id="4dce5-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="4dce5-218">Pannello di controllo SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="4dce5-219">Pannello di controllo di SAP HANA offre il possibilità hello di monitoraggio e la gestione di SAP HANA tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="4dce5-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="4dce5-220">Consente inoltre la gestione dei backup di SAP HANA e pertanto può essere utilizzato come alternativa tooSAP Studio HANA e ABAP DBACOCKPIT (vedere [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) per altre informazioni).</span><span class="sxs-lookup"><span data-stu-id="4dce5-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Questa figura mostra hello schermata di amministrazione del Database SAP HANA Pannello di controllo](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="4dce5-222">In questa figura mostra hello schermata di amministrazione del Database SAP HANA Pannello di controllo e riquadro backup hello hello a sinistra.</span><span class="sxs-lookup"><span data-stu-id="4dce5-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="4dce5-223">Riquadro di backup hello vedere richiede autorizzazioni utente appropriate per l'account di accesso.</span><span class="sxs-lookup"><span data-stu-id="4dce5-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![I backup possono essere monitorati nel pannello di controllo di SAP HANA durante l'esecuzione.](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="4dce5-225">I backup possono essere monitorati nel Pannello di controllo di SAP HANA mentre sono in corso e, al termine, tutti i dettagli backup hello sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="4dce5-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Esempio di uso di Firefox in una macchina virtuale 12 SLES di Azure con desktop Gnome](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="4dce5-227">schermate di Hello precedenti sono state apportate da una macchina virtuale Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="4dce5-228">Questo è un esempio di uso di Firefox in una macchina virtuale 12 SLES di Azure con desktop Gnome,</span><span class="sxs-lookup"><span data-stu-id="4dce5-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="4dce5-229">Mostra le pianificazioni dei backup hello opzione toodefine SAP HANA in Pannello di controllo di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="4dce5-230">Come si può anche osservare, si consiglia di data/ora come prefisso per i file di backup hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="4dce5-231">In SAP HANA Studio prefisso predefinito hello è &quot;completa\_dati\_BACKUP&quot; quando si esegue un backup completo del file.</span><span class="sxs-lookup"><span data-stu-id="4dce5-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="4dce5-232">Si consiglia l'uso di un prefisso unico.</span><span class="sxs-lookup"><span data-stu-id="4dce5-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="4dce5-233">Crittografia del backup di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="4dce5-234">SAP HANA offre la crittografia di dati e log.</span><span class="sxs-lookup"><span data-stu-id="4dce5-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="4dce5-235">Se non vengono crittografati i dati di SAP HANA e di log, quindi backup hello inoltre non vengono crittografati.</span><span class="sxs-lookup"><span data-stu-id="4dce5-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="4dce5-236">È attivo toohello cliente toouse munita di un backup di SAP HANA hello tooencrypt soluzione di terze parti.</span><span class="sxs-lookup"><span data-stu-id="4dce5-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="4dce5-237">Vedere [dati e la crittografia del Volume di Log](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind ulteriori informazioni sulla crittografia di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="4dce5-238">In Microsoft Azure, un cliente può utilizzare hello tooencrypt funzionalità di crittografia VM IaaS.</span><span class="sxs-lookup"><span data-stu-id="4dce5-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="4dce5-239">Ad esempio, una possibile utilizzare dati dedicata dischi collegati toohello macchina virtuale, che vengono utilizzati toostore backup SAP HANA, quindi creare copie di questi dischi.</span><span class="sxs-lookup"><span data-stu-id="4dce5-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="4dce5-240">Servizio di Backup di Azure in grado di gestire le macchine virtuali/dischi crittografati (vedere [la modalità di crittografia delle macchine virtuali con Azure Backup tooback backup e ripristino](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="4dce5-241">Un'altra opzione potrebbe essere toomaintain hello SAP HANA VM e i relativi dischi senza crittografia e archiviare i file di backup di hello SAP HANA in un account di archiviazione per cui è stata abilitata la crittografia (vedere [la crittografia del servizio di archiviazione di Azure per i dati inattivi](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="4dce5-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="4dce5-242">Impostazione del test</span><span class="sxs-lookup"><span data-stu-id="4dce5-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="4dce5-243">Eseguire il test della macchina virtuale in Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="4dce5-244">Un'installazione di SAP HANA in una macchina virtuale di Azure GS5 è stata usata per hello seguente test di backup e ripristino.</span><span class="sxs-lookup"><span data-stu-id="4dce5-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![In questa figura viene illustrata parte del hello Panoramica del portale Azure per la macchina virtuale di test HANA hello](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="4dce5-246">Questa figura mostra parte della panoramica del portale Azure per la macchina virtuale di test HANA hello hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="4dce5-247">Testare la dimensione del backup</span><span class="sxs-lookup"><span data-stu-id="4dce5-247">Test backup size</span></span>

![In questa figura è stata ricavata dalla console di backup hello in Studio HANA e Mostra le dimensioni di file di backup hello GB 229 hello HANA server di indicizzazione](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="4dce5-249">Una tabella fittizia è riempita con dati tooget una dimensione di backup totale dei dati di più di 200 GB di dati delle prestazioni realistici tooderive.</span><span class="sxs-lookup"><span data-stu-id="4dce5-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="4dce5-250">Figura Hello è stata ricavata dalla console di backup hello in Studio HANA e Mostra le dimensioni di file di backup hello GB 229 hello HANA server di indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="4dce5-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="4dce5-251">Per i test di hello, hello predefinito backup prefisso "COMPLETE_DATA_BACKUP" in SAP HANA Studio è stato utilizzato.</span><span class="sxs-lookup"><span data-stu-id="4dce5-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="4dce5-252">Nei sistemi di produzione reali, deve essere definito un prefisso più utile.</span><span class="sxs-lookup"><span data-stu-id="4dce5-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="4dce5-253">Il pannello di controllo SAP HANA suggerisce data/ora.</span><span class="sxs-lookup"><span data-stu-id="4dce5-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="4dce5-254">Test dello strumento toocopy direttamente i file tooAzure archiviazione</span><span class="sxs-lookup"><span data-stu-id="4dce5-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="4dce5-255">tootransfer SAP HANA i file di backup direttamente nell'archiviazione blob tooAzure o condivisioni di file di Azure, hello blobxfer stato utilizzato lo strumento perché supporta sia le destinazioni e possono essere facilmente integrati negli script di automazione dell'interfaccia della riga di comando tooits di scadenza.</span><span class="sxs-lookup"><span data-stu-id="4dce5-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="4dce5-256">Hello blobxfer strumento è disponibile in [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="4dce5-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="4dce5-257">Testare la stima della dimensione del backup</span><span class="sxs-lookup"><span data-stu-id="4dce5-257">Test backup size estimation</span></span>

<span data-ttu-id="4dce5-258">È importante tooestimate dimensioni del backup hello di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="4dce5-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="4dce5-259">Questa stima consente prestazioni tooimprove definendo hello di dimensione massima del file di backup per un numero di file di backup, scadenza tooparallelism durante la copia di un file.</span><span class="sxs-lookup"><span data-stu-id="4dce5-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="4dce5-260">Questi dettagli verranno spiegati più avanti nell'articolo. Inoltre, è necessario stabilire se una procedura completa di backup o un delta toodo backup (incrementale o differenziale).</span><span class="sxs-lookup"><span data-stu-id="4dce5-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="4dce5-261">Fortunatamente, è una semplice istruzione SQL che stima hello dimensioni dei file di backup hello: **selezionare \* da M\_BACKUP\_dimensioni\_STIME** (vedere [ Hello stima dello spazio necessario in hello File System per un Backup dei dati](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![output di Hello dell'istruzione SQL corrisponde quasi esattamente hello dimensioni reali hello completo di backup dei dati su disco](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="4dce5-263">Per il sistema di prova hello, output di hello dell'istruzione SQL corrisponde quasi esattamente hello dimensioni reali hello completo di backup dei dati su disco.</span><span class="sxs-lookup"><span data-stu-id="4dce5-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="4dce5-264">Testare la dimensione del file di backup HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-264">Test HANA backup file size</span></span>

![console di backup HANA Studio Hello consente una dimensione massima del file di hello toorestrict HANA dei file di backup](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="4dce5-266">console di backup HANA Studio Hello consente una dimensione massima del file di hello toorestrict HANA dei file di backup.</span><span class="sxs-lookup"><span data-stu-id="4dce5-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="4dce5-267">Nell'ambiente di esempio hello, questa funzionalità rende possibili tooget più backup di più piccoli file anziché un file di backup di 230 GB.</span><span class="sxs-lookup"><span data-stu-id="4dce5-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="4dce5-268">Le dimensioni del file ha un impatto significativo sulle prestazioni (vedere l'articolo correlato hello [SAP HANA Azure Backup a livello file](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="4dce5-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="4dce5-269">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="4dce5-269">Summary</span></span>

<span data-ttu-id="4dce5-270">In base ai risultati dei test hello hello le tabelle seguenti Mostra i vantaggi e svantaggi delle soluzioni tooback di un database SAP HANA in esecuzione in macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="4dce5-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="4dce5-271">**Eseguire il backup di copia e SAP HANA toohello file system file di backup in un secondo momento la destinazione di backup finale di toohello**</span><span class="sxs-lookup"><span data-stu-id="4dce5-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="4dce5-272">Soluzione</span><span class="sxs-lookup"><span data-stu-id="4dce5-272">Solution</span></span>                                           |<span data-ttu-id="4dce5-273">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="4dce5-273">Pros</span></span>                                 |<span data-ttu-id="4dce5-274">Svantaggi</span><span class="sxs-lookup"><span data-stu-id="4dce5-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="4dce5-275">Mantenere i backup di HANA sui dischi della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="4dce5-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="4dce5-276">Nessuno sforzo di gestione aggiuntivo</span><span class="sxs-lookup"><span data-stu-id="4dce5-276">No additional management efforts</span></span>     |<span data-ttu-id="4dce5-277">Consuma spazio sul disco della macchina virtuale locale</span><span class="sxs-lookup"><span data-stu-id="4dce5-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="4dce5-278">Archiviazione tooblob di Blobxfer strumento toocopy i file di backup</span><span class="sxs-lookup"><span data-stu-id="4dce5-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="4dce5-279">Parallelismo toocopy più file, nell'archiviazione blob sporadico toouse scelta</span><span class="sxs-lookup"><span data-stu-id="4dce5-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="4dce5-280">Manutenzione aggiuntiva dello strumento e script personalizzato</span><span class="sxs-lookup"><span data-stu-id="4dce5-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="4dce5-281">Copia di BLOB tramite Powershell o interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="4dce5-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="4dce5-282">Nessuno strumento aggiuntivo necessario, è possibile procedere con l'esecuzione tramite Azure Powershell o interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="4dce5-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="4dce5-283">processo manuale, cliente ha tootake cure script e la gestione di copia BLOB per il ripristino</span><span class="sxs-lookup"><span data-stu-id="4dce5-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="4dce5-284">Condivisione tooNFS copia</span><span class="sxs-lookup"><span data-stu-id="4dce5-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="4dce5-285">Post-elaborazione dei file di backup in altre VM senza alcun impatto sul server HANA hello</span><span class="sxs-lookup"><span data-stu-id="4dce5-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="4dce5-286">Processo di copia lenta</span><span class="sxs-lookup"><span data-stu-id="4dce5-286">Slow copy process</span></span>|
|<span data-ttu-id="4dce5-287">Copia di Blobxfer tooAzure servizio File</span><span class="sxs-lookup"><span data-stu-id="4dce5-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="4dce5-288">Non consuma spazio sui dischi della macchina virtuale locale</span><span class="sxs-lookup"><span data-stu-id="4dce5-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="4dce5-289">Nessun supporto di scrittura diretto dal backup di HANA, la restrizione sulle dimensioni della condivisione di file è attualmente di 5 TB</span><span class="sxs-lookup"><span data-stu-id="4dce5-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="4dce5-290">Agente di Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="4dce5-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="4dce5-291">Soluzione preferibile</span><span class="sxs-lookup"><span data-stu-id="4dce5-291">Would be preferred solution</span></span>         | <span data-ttu-id="4dce5-292">Attualmente non disponibile su Linux</span><span class="sxs-lookup"><span data-stu-id="4dce5-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="4dce5-293">**Backup di SAP HANA basato su snapshot di archiviazione**</span><span class="sxs-lookup"><span data-stu-id="4dce5-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="4dce5-294">Soluzione</span><span class="sxs-lookup"><span data-stu-id="4dce5-294">Solution</span></span>                                           |<span data-ttu-id="4dce5-295">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="4dce5-295">Pros</span></span>                                 |<span data-ttu-id="4dce5-296">Svantaggi</span><span class="sxs-lookup"><span data-stu-id="4dce5-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="4dce5-297">Servizio Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="4dce5-297">Azure Backup Service</span></span>                               | <span data-ttu-id="4dce5-298">Consente il backup delle macchine virtuali basato su snapshot BLOB</span><span class="sxs-lookup"><span data-stu-id="4dce5-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="4dce5-299">Quando non si utilizza il ripristino a livello di file, richiede la creazione di hello di una nuova macchina virtuale per il processo di ripristino hello, che implica quindi necessario hello di una nuova chiave di licenza di SAP HANA</span><span class="sxs-lookup"><span data-stu-id="4dce5-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="4dce5-300">Snapshot BLOB manuali</span><span class="sxs-lookup"><span data-stu-id="4dce5-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="4dce5-301">Flessibilità toocreate e ripristino specifici dischi di macchina virtuale senza modificare hello ID univoco di VM</span><span class="sxs-lookup"><span data-stu-id="4dce5-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="4dce5-302">Tutto il lavoro manuale, che ha eseguito dal cliente hello toobe</span><span class="sxs-lookup"><span data-stu-id="4dce5-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="4dce5-303">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="4dce5-303">Next steps</span></span>
* <span data-ttu-id="4dce5-304">[SAP HANA Azure Backup a livello di file](sap-hana-backup-file-level.md) descrive l'opzione di backup basato su file hello.</span><span class="sxs-lookup"><span data-stu-id="4dce5-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="4dce5-305">[Backup di SAP HANA in base agli snapshot di archiviazione](sap-hana-backup-storage-snapshots.md) descrive hello archiviazione basata su snapshot opzione di backup.</span><span class="sxs-lookup"><span data-stu-id="4dce5-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="4dce5-306">toolearn tooestablish la disponibilità elevata e piano di ripristino di emergenza di SAP HANA in Azure (istanze di grandi dimensioni), vedere [SAP HANA (istanze di grandi dimensioni) ad alto disponibilità e ripristino di emergenza in Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="4dce5-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
