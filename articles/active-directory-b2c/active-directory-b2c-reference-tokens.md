---
title: 'Azure Active Directory B2C: Riferimento token | Documentazione Microsoft'
description: Tipi di token rilasciati in Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="e961b-103">Azure AD B2C: informazioni di riferimento sui token</span><span class="sxs-lookup"><span data-stu-id="e961b-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="e961b-104">Azure Active Directory B2C (Azure AD B2C) rilascia tipi diversi di token di sicurezza durante l'elaborazione di ogni [flusso di autenticazione](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="e961b-105">Questo documento descrive il formato, le caratteristiche di sicurezza e i contenuti di ogni tipo di token.</span><span class="sxs-lookup"><span data-stu-id="e961b-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="e961b-106">Tipi di token</span><span class="sxs-lookup"><span data-stu-id="e961b-106">Types of tokens</span></span>
<span data-ttu-id="e961b-107">Azure AD B2C supporta il [protocollo di autorizzazione OAuth 2.0](active-directory-b2c-reference-protocols.md), che usa sia token di accesso che token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e961b-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="e961b-108">L'endpoint supporta inoltre l'autenticazione e l'accesso tramite [OpenID Connect](active-directory-b2c-reference-protocols.md), che introduce un terzo tipo di token: il token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="e961b-109">Ognuno di questi token viene rappresentato come token di connessione.</span><span class="sxs-lookup"><span data-stu-id="e961b-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="e961b-110">Un token di connessione è un token di sicurezza leggero che consente al "portatore" di accedere a una risorsa protetta.</span><span class="sxs-lookup"><span data-stu-id="e961b-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="e961b-111">Per "portatore" si intende qualsiasi parte che possa presentare il token.</span><span class="sxs-lookup"><span data-stu-id="e961b-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="e961b-112">Per poter ricevere un token di connessione, Azure AD deve prima autenticare una parte.</span><span class="sxs-lookup"><span data-stu-id="e961b-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="e961b-113">Se non vengono adottate le misure necessarie per proteggere il token durante la trasmissione e l'archiviazione, potrebbe essere intercettato e usato da parti non autorizzate.</span><span class="sxs-lookup"><span data-stu-id="e961b-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="e961b-114">Alcuni token di sicurezza hanno un meccanismo predefinito che ne impedisce l'uso da parti non autorizzate, ma i token di connessione non presentano questo meccanismo.</span><span class="sxs-lookup"><span data-stu-id="e961b-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="e961b-115">Devono essere trasportati usando un canale protetto, ad esempio il protocollo Transport Layer Security (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e961b-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="e961b-116">Se un token di connessione viene trasmesso al di fuori di un canale protetto, un utente malintenzionato potrebbe usare un attacco man-in-the-middle per acquisire il token e usarlo per l'accesso non autorizzato a una risorsa protetta.</span><span class="sxs-lookup"><span data-stu-id="e961b-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="e961b-117">Gli stessi principi di sicurezza si applicano quando i token di connessione vengono archiviati o memorizzati nella cache per un uso futuro.</span><span class="sxs-lookup"><span data-stu-id="e961b-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="e961b-118">Assicurarsi sempre che l'app trasmetta e archivi i token di connessione in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="e961b-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="e961b-119">Per altre considerazioni sulla sicurezza dei token di connessione, vedere la [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="e961b-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="e961b-120">Molti dei token rilasciati da Azure AD B2C vengono implementati come token Web JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="e961b-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="e961b-121">Un token JWT è un modo compatto e indipendente dall'URL di trasferimento delle informazioni tra due parti.</span><span class="sxs-lookup"><span data-stu-id="e961b-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="e961b-122">I token JWT contengono informazioni note come attestazioni.</span><span class="sxs-lookup"><span data-stu-id="e961b-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="e961b-123">Si tratta di asserzioni di informazioni relative alla connessione e all'oggetto del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="e961b-124">Le attestazioni nei token JWT sono oggetti JSON codificati e serializzati per la trasmissione.</span><span class="sxs-lookup"><span data-stu-id="e961b-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="e961b-125">I token JWT rilasciati da Azure AD B2C sono firmati, ma non crittografati, è quindi possibile esaminarne facilmente i contenuti per il debug.</span><span class="sxs-lookup"><span data-stu-id="e961b-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="e961b-126">Sono disponibili diversi strumenti adatti a questo scopo, ad esempio [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="e961b-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="e961b-127">Per altre informazioni sui token JWT, vedere le [specifiche dei token JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="e961b-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="e961b-128">Token ID</span><span class="sxs-lookup"><span data-stu-id="e961b-128">ID tokens</span></span>
<span data-ttu-id="e961b-129">I token ID sono un tipo di token di sicurezza che l'app riceve dagli endpoint `authorize` e `token` di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e961b-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="e961b-130">Vengono rappresentati come token [JWT](#types-of-tokens)e contengono attestazioni che è possibile usare per l'identificazione degli utenti nell'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="e961b-131">Quando vengono acquisiti dall'endpoint `authorize` , i token ID vengono spesso usati per l'accesso degli utenti alle applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="e961b-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="e961b-132">Quando vengono acquisiti dall'endpoint `token` , i token ID possono essere inviati in richieste HTTP durante la comunicazione tra due componenti della stessa applicazione o dello stesso servizio.</span><span class="sxs-lookup"><span data-stu-id="e961b-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="e961b-133">Le attestazioni nei token ID possono essere usate in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="e961b-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="e961b-134">Vengono comunemente usate per visualizzare informazioni sull'account o per prendere decisioni relative al controllo di accesso in un'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="e961b-135">Attualmente i token ID sono firmati, ma non crittografati.</span><span class="sxs-lookup"><span data-stu-id="e961b-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="e961b-136">Quando l'API o l'app riceve un token ID, deve [convalidare la firma](#token-validation) per dimostrare l'autenticità del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="e961b-137">Per dimostrarne la validità, l'API o l'app deve anche convalidare alcune delle attestazioni del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="e961b-138">A seconda dei requisiti dello scenario, le attestazioni convalidate da un'app possono variare, ma l'app deve eseguire alcune [operazioni comuni di convalida delle attestazioni](#token-validation) in ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="e961b-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="e961b-139">Token ID di esempio</span><span class="sxs-lookup"><span data-stu-id="e961b-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="e961b-140">Token di accesso</span><span class="sxs-lookup"><span data-stu-id="e961b-140">Access tokens</span></span>
<span data-ttu-id="e961b-141">Un token di accesso è anche un tipo di token di sicurezza che l'app riceve dagli endpoint `authorize` e `token` di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e961b-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="e961b-142">I token di accesso vengono rappresentati come token [JWT](#types-of-tokens) e contengono attestazioni che è possibile usare per l'identificazione delle autorizzazioni concesse alle API.</span><span class="sxs-lookup"><span data-stu-id="e961b-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="e961b-143">Attualmente i token di accesso sono firmati, ma non crittografati.</span><span class="sxs-lookup"><span data-stu-id="e961b-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="e961b-144">Per fornire l'accesso alle API e ai server delle risorse, è necessario usare i token di accesso.</span><span class="sxs-lookup"><span data-stu-id="e961b-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="e961b-145">Altre informazioni su come [usare i token di accesso](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="e961b-146">Quando l'API riceve un token di accesso, deve [convalidare la firma](#token-validation) per dimostrare l'autenticità del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="e961b-147">Per dimostrarne la validità, l'API deve anche convalidare alcune attestazioni del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="e961b-148">A seconda dei requisiti dello scenario, le attestazioni convalidate da un'app possono variare, ma l'app deve eseguire alcune [operazioni comuni di convalida delle attestazioni](#token-validation) in ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="e961b-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="e961b-149">Attestazioni nei token di accesso e ID</span><span class="sxs-lookup"><span data-stu-id="e961b-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="e961b-150">Azure AD B2C consente un controllo con granularità fine sul contenuto dei token.</span><span class="sxs-lookup"><span data-stu-id="e961b-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="e961b-151">È possibile configurare [criteri](active-directory-b2c-reference-policies.md) per inviare un set di dati utente specifici in attestazioni necessarie per il funzionamento dell'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="e961b-152">Le attestazioni possono includere proprietà standard, ad esempio le proprietà `displayName` e `emailAddress` relative all'utente.</span><span class="sxs-lookup"><span data-stu-id="e961b-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="e961b-153">Possono includere anche [attributi utente personalizzati](active-directory-b2c-reference-custom-attr.md) che è possibile definire nella directory B2C.</span><span class="sxs-lookup"><span data-stu-id="e961b-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="e961b-154">Ogni token ID e di accesso ricevuto contiene un determinato set di attestazioni relative alla sicurezza.</span><span class="sxs-lookup"><span data-stu-id="e961b-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="e961b-155">Le applicazioni possono usare queste attestazioni per autenticare in modo sicuro gli utenti e le richieste.</span><span class="sxs-lookup"><span data-stu-id="e961b-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="e961b-156">Si noti che le attestazioni nei token ID non vengono restituite in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="e961b-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="e961b-157">Si noti anche che possono essere introdotte nuove attestazioni nei token ID in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="e961b-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="e961b-158">L'introduzione delle nuove attestazioni non deve interrompere il funzionamento dell'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="e961b-159">Di seguito è riportato un elenco delle attestazioni previste in ogni token ID e di accesso rilasciato da Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="e961b-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="e961b-160">Eventuali attestazioni aggiuntive sono determinate dai criteri.</span><span class="sxs-lookup"><span data-stu-id="e961b-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="e961b-161">A scopo di esercitazione, provare a verificare le attestazioni nel token ID di esempio incollandole in [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="e961b-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="e961b-162">Per informazioni più dettagliate, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="e961b-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="e961b-163">Nome</span><span class="sxs-lookup"><span data-stu-id="e961b-163">Name</span></span> | <span data-ttu-id="e961b-164">Attestazione</span><span class="sxs-lookup"><span data-stu-id="e961b-164">Claim</span></span> | <span data-ttu-id="e961b-165">Valore di esempio</span><span class="sxs-lookup"><span data-stu-id="e961b-165">Example value</span></span> | <span data-ttu-id="e961b-166">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e961b-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e961b-167">Audience</span><span class="sxs-lookup"><span data-stu-id="e961b-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="e961b-168">Identifica il destinatario del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="e961b-169">Per Azure AD B2C il destinatario è l'ID applicazione assegnato all'app nel portale di registrazione delle app.</span><span class="sxs-lookup"><span data-stu-id="e961b-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="e961b-170">L'app deve convalidare questo valore e rifiutare il token, se il valore non corrisponde.</span><span class="sxs-lookup"><span data-stu-id="e961b-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="e961b-171">Issuer</span><span class="sxs-lookup"><span data-stu-id="e961b-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="e961b-172">Identifica il servizio token di sicurezza (STS) che costruisce e restituisce il token</span><span class="sxs-lookup"><span data-stu-id="e961b-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="e961b-173">e identifica la directory di Azure AD in cui è stato autenticato l'utente.</span><span class="sxs-lookup"><span data-stu-id="e961b-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="e961b-174">L'app deve convalidare l'attestazione Autorità di certificazione per assicurarsi che il token sia stato fornito dall'endpoint di Azure Active Directory 2.0.</span><span class="sxs-lookup"><span data-stu-id="e961b-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="e961b-175">Ora di emissione</span><span class="sxs-lookup"><span data-stu-id="e961b-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="e961b-176">Indica l'ora in cui il token è stato rilasciato, rappresentata come valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="e961b-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="e961b-177">Scadenza</span><span class="sxs-lookup"><span data-stu-id="e961b-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="e961b-178">Indica l'ora di scadenza del token, rappresentata come valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="e961b-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="e961b-179">L'app deve usare questa attestazione per verificare la validità della durata del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="e961b-180">Non prima</span><span class="sxs-lookup"><span data-stu-id="e961b-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="e961b-181">Indica l'ora di inizio della validità del token, rappresentata come valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="e961b-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="e961b-182">Equivale in genere all'ora di rilascio del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="e961b-183">L'app deve usare questa attestazione per verificare la validità della durata del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="e961b-184">Version</span><span class="sxs-lookup"><span data-stu-id="e961b-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="e961b-185">Versione del token ID, definita da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e961b-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="e961b-186">Hash del codice</span><span class="sxs-lookup"><span data-stu-id="e961b-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="e961b-187">L'hash del codice è incluso in un token ID solo quando quest'ultimo viene rilasciato insieme a un codice di autorizzazione di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e961b-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="e961b-188">Può essere usato per convalidare l'autenticità di un codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="e961b-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="e961b-189">Per informazioni dettagliate su come eseguire la convalida, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) .</span><span class="sxs-lookup"><span data-stu-id="e961b-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="e961b-190">Hash del token di accesso</span><span class="sxs-lookup"><span data-stu-id="e961b-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="e961b-191">L'hash del token di accesso è incluso in un token ID solo quando quest'ultimo viene rilasciato insieme a un token di accesso di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e961b-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="e961b-192">Può essere usato per convalidare l'autenticità di un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="e961b-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="e961b-193">Per informazioni dettagliate su come eseguire la convalida, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="e961b-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="e961b-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="e961b-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="e961b-195">Strategia per ridurre gli attacchi di riproduzione dei token.</span><span class="sxs-lookup"><span data-stu-id="e961b-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="e961b-196">L'app può specificare un'attestazione Nonce in una richiesta di autorizzazione usando il parametro di query `nonce` .</span><span class="sxs-lookup"><span data-stu-id="e961b-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="e961b-197">Il valore specificato nella richiesta verrà rilasciato senza modifica nell'attestazione `nonce` solo di un token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="e961b-198">In questo modo l'app può verificare il valore rispetto al valore specificato nella richiesta che associa la sessione dell'app a un determinato token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="e961b-199">L'app deve eseguire la convalida durante il processo di convalida del token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="e961b-200">Oggetto</span><span class="sxs-lookup"><span data-stu-id="e961b-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="e961b-201">Indica l'entità su cui il token rilascia informazioni, ad esempio l'utente di un'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="e961b-202">Questo valore non è modificabile e non può essere riassegnato o riutilizzato.</span><span class="sxs-lookup"><span data-stu-id="e961b-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="e961b-203">Può essere usato per eseguire controlli di autorizzazione in modo sicuro, ad esempio quando il token viene usato per accedere a una risorsa.</span><span class="sxs-lookup"><span data-stu-id="e961b-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="e961b-204">Per impostazione predefinita, l'attestazione dell'oggetto viene popolata con l'ID oggetto dell'utente nella directory.</span><span class="sxs-lookup"><span data-stu-id="e961b-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="e961b-205">Per maggiori informazioni, vedere [Azure Active Directory B2C: Configurazione di token, sessione e accesso Single Sign-On](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="e961b-206">Riferimento alla classe contesto di autenticazione</span><span class="sxs-lookup"><span data-stu-id="e961b-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="e961b-207">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="e961b-207">Not applicable</span></span> |<span data-ttu-id="e961b-208">Attualmente non in uso, tranne nel caso di criteri meno recenti.</span><span class="sxs-lookup"><span data-stu-id="e961b-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="e961b-209">Per maggiori informazioni, vedere [Azure Active Directory B2C: Configurazione di token, sessione e accesso Single Sign-On](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="e961b-210">Criteri del framework di attendibilità</span><span class="sxs-lookup"><span data-stu-id="e961b-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="e961b-211">Nome del criterio usato per acquisire il token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="e961b-212">Ora di autenticazione</span><span class="sxs-lookup"><span data-stu-id="e961b-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="e961b-213">Ora in cui l'utente ha immesso le credenziali l'ultima volta, rappresentata come valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="e961b-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="e961b-214">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="e961b-214">Refresh tokens</span></span>
<span data-ttu-id="e961b-215">I token di aggiornamento sono token di sicurezza che l'app può usare per acquisire nuovi token ID e token di accesso in un flusso di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e961b-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="e961b-216">Consentono all'app di ottenere l'accesso a lungo termine alle risorse per conto degli utenti senza richiedere l'interazione degli utenti.</span><span class="sxs-lookup"><span data-stu-id="e961b-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="e961b-217">Per ricevere un token di aggiornamento in una risposta del token, l'app deve richiedere l'ambito `offline_acesss` .</span><span class="sxs-lookup"><span data-stu-id="e961b-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="e961b-218">Per ulteriori informazioni sull’ambito `offline_access` , fare riferimento al [riferimento al protocollo di Azure AD B2C](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="e961b-219">I token di aggiornamento sono e saranno sempre, completamente opachi per l'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="e961b-220">Vengono rilasciati da Azure AD e possono essere controllati e interpretati solo da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e961b-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="e961b-221">Hanno lunga durata, ma l'app non deve essere scritta in base a una durata specifica prevista per il token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e961b-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="e961b-222">I token di aggiornamento possono essere annullati in qualsiasi momento per vari motivi.</span><span class="sxs-lookup"><span data-stu-id="e961b-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="e961b-223">L'unico modo per l'app di sapere se un token di aggiornamento è valido è tentare di riscattarlo mediante una richiesta di token al Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e961b-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="e961b-224">Quando si riscatta un token di aggiornamento per un nuovo token, se all'app è stata concessa l'autorizzazione per l'ambito `offline_access`, si riceve un nuovo token di aggiornamento nella risposta del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="e961b-225">È consigliabile salvare il token di aggiornamento appena rilasciato,</span><span class="sxs-lookup"><span data-stu-id="e961b-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="e961b-226">che deve sostituire il token di aggiornamento usato in precedenza nella richiesta.</span><span class="sxs-lookup"><span data-stu-id="e961b-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="e961b-227">In questo modo, il token di aggiornamento rimarrà valido il più a lungo possibile.</span><span class="sxs-lookup"><span data-stu-id="e961b-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="e961b-228">Convalida dei token</span><span class="sxs-lookup"><span data-stu-id="e961b-228">Token validation</span></span>
<span data-ttu-id="e961b-229">Per convalidare un token, l'app deve verificare sia la firma che le attestazioni del token stesso.</span><span class="sxs-lookup"><span data-stu-id="e961b-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="e961b-230">Sono disponibili molte librerie open source per la convalida dei token JWT, a seconda del linguaggio preferito.</span><span class="sxs-lookup"><span data-stu-id="e961b-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="e961b-231">È consigliabile prendere in esame tali opzioni anziché implementare una logica di convalida personalizzata.</span><span class="sxs-lookup"><span data-stu-id="e961b-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="e961b-232">Le informazioni contenute in questa guida permettono di imparare a usare correttamente tali librerie.</span><span class="sxs-lookup"><span data-stu-id="e961b-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="e961b-233">convalidare la firma</span><span class="sxs-lookup"><span data-stu-id="e961b-233">Validate the signature</span></span>
<span data-ttu-id="e961b-234">Un token JWT contiene tre segmenti separati dal carattere `.` .</span><span class="sxs-lookup"><span data-stu-id="e961b-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="e961b-235">Il primo segmento costituisce l'*intestazione*, il secondo è il *corpo*, il terzo la *firma*.</span><span class="sxs-lookup"><span data-stu-id="e961b-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="e961b-236">Il segmento di firma può essere usato per convalidare l'autenticità del token, in modo che possa essere considerato attendibile dall'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="e961b-237">I token Azure AD B2C vengono firmati usando algoritmi di crittografia asimmetrica standard del settore, come RSA 256.</span><span class="sxs-lookup"><span data-stu-id="e961b-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="e961b-238">L'intestazione del token contiene informazioni sulla chiave e sul metodo di crittografia usati per firmare il token:</span><span class="sxs-lookup"><span data-stu-id="e961b-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="e961b-239">L'attestazione `alg` indica l'algoritmo usato per firmare il token.</span><span class="sxs-lookup"><span data-stu-id="e961b-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="e961b-240">L'attestazione `kid` indica la chiave pubblica specifica usata per firmare il token.</span><span class="sxs-lookup"><span data-stu-id="e961b-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="e961b-241">In qualsiasi momento Azure AD può firmare un token usando un determinato set di coppie di chiavi pubblica/privata.</span><span class="sxs-lookup"><span data-stu-id="e961b-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="e961b-242">Azure AD ruota il set di chiavi su base periodica, quindi l'app deve essere scritta in modo da gestire automaticamente le modifiche delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="e961b-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="e961b-243">Una frequenza ragionevole per la ricerca di aggiornamenti per le chiavi pubbliche usate da Azure AD è di circa 24 ore.</span><span class="sxs-lookup"><span data-stu-id="e961b-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="e961b-244">Azure AD B2C include un endpoint dei metadati di OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="e961b-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="e961b-245">Questo consente alle app di recuperare informazioni su Azure AD B2C in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e961b-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="e961b-246">Queste informazioni includono endpoint, contenuti del token e chiavi per la firma dei token.</span><span class="sxs-lookup"><span data-stu-id="e961b-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="e961b-247">La directory B2C contiene un documento metadati JSON per ogni criterio.</span><span class="sxs-lookup"><span data-stu-id="e961b-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="e961b-248">Il documento di metadati dei criteri `b2c_1_sign_in` in `fabrikamb2c.onmicrosoft.com` si trova ad esempio in:</span><span class="sxs-lookup"><span data-stu-id="e961b-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="e961b-249">`fabrikamb2c.onmicrosoft.com` è la directory B2C usata per autenticare l'utente e `b2c_1_sign_in` sono i criteri usati per acquisire il token.</span><span class="sxs-lookup"><span data-stu-id="e961b-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="e961b-250">Per determinare quale criterio è stato usato per la firma di un token e la posizione da cui recuperare i metadati, sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="e961b-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="e961b-251">Prima di tutto, il nome del criterio è incluso nell'attestazione `acr` del token.</span><span class="sxs-lookup"><span data-stu-id="e961b-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="e961b-252">È possibile analizzare le attestazioni all'esterno del corpo del token JWT decodificando il corpo in base 64 e deserializzando la stringa JSON risultante.</span><span class="sxs-lookup"><span data-stu-id="e961b-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="e961b-253">L'attestazione `acr` è il nome del criterio usato per rilasciare il token.</span><span class="sxs-lookup"><span data-stu-id="e961b-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="e961b-254">L'altra opzione consiste nel codificare i criteri nel valore del parametro `state` quando si rilascia la richiesta, per poi decodificarlo e determinare quali criteri sono stati utilizzati.</span><span class="sxs-lookup"><span data-stu-id="e961b-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="e961b-255">Entrambi i metodi sono validi.</span><span class="sxs-lookup"><span data-stu-id="e961b-255">Either method is valid.</span></span>

<span data-ttu-id="e961b-256">Il documento metadati è un oggetto JSON che contiene diverse informazioni utili,</span><span class="sxs-lookup"><span data-stu-id="e961b-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="e961b-257">come ad esempio il percorso degli endpoint necessari per eseguire l'autenticazione OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="e961b-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="e961b-258">Include anche un oggetto `jwks_uri` che fornisce la posizione del set di chiavi pubbliche usate per firmare i token.</span><span class="sxs-lookup"><span data-stu-id="e961b-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="e961b-259">Tale posizione è indicata di seguito, ma è consigliabile recuperarla in modo dinamico usando il documento di metadati e analizzando l'oggetto `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="e961b-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="e961b-260">Il documento JSON in questo URL contiene tutte le informazioni sulla chiave pubblica usata in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="e961b-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="e961b-261">L'app può usare l'attestazione `kid` nell'intestazione del token JWT per selezionare la chiave pubblica nel documento JSON usata per firmare un determinato token.</span><span class="sxs-lookup"><span data-stu-id="e961b-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="e961b-262">Può quindi eseguire la convalida della firma usando la chiave pubblica corretta e l'algoritmo indicato.</span><span class="sxs-lookup"><span data-stu-id="e961b-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="e961b-263">La descrizione della convalida della firma non rientra nelle finalità di questo documento.</span><span class="sxs-lookup"><span data-stu-id="e961b-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="e961b-264">A tale scopo è possibile consultare le varie librerie open source disponibili.</span><span class="sxs-lookup"><span data-stu-id="e961b-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="e961b-265">Convalidare le attestazioni</span><span class="sxs-lookup"><span data-stu-id="e961b-265">Validate the claims</span></span>
<span data-ttu-id="e961b-266">Quando l'app o l'API riceve un token ID, deve eseguire anche diversi controlli in base alle attestazioni nel token ID.</span><span class="sxs-lookup"><span data-stu-id="e961b-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="e961b-267">Sono incluse, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e961b-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="e961b-268">Attestazione **Destinatari** : verifica che il token ID fosse destinato all'app.</span><span class="sxs-lookup"><span data-stu-id="e961b-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="e961b-269">Attestazioni **not before** (Non prima) e **expiration time** (Scadenza): verificano che il token ID non sia scaduto.</span><span class="sxs-lookup"><span data-stu-id="e961b-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="e961b-270">Attestazione **Autorità di certificazione** : verifica che il token sia stato rilasciato all'app da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e961b-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="e961b-271">Attestazione **Nonce**: strategia per ridurre gli attacchi di riproduzione dei token.</span><span class="sxs-lookup"><span data-stu-id="e961b-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="e961b-272">Per un elenco completo delle convalide che l'app deve eseguire, vedere le [specifiche di OpenID Connect](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="e961b-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="e961b-273">Per informazioni dettagliate sui valori previsti per tali attestazioni, vedere la sezione [Token](#types-of-tokens)precedente.</span><span class="sxs-lookup"><span data-stu-id="e961b-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="e961b-274">Durata dei token</span><span class="sxs-lookup"><span data-stu-id="e961b-274">Token lifetimes</span></span>
<span data-ttu-id="e961b-275">A scopo di approfondimento viene riportata di seguito la durata dei vari token.</span><span class="sxs-lookup"><span data-stu-id="e961b-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="e961b-276">Queste informazioni possono risultare utili durante lo sviluppo e il debug delle app.</span><span class="sxs-lookup"><span data-stu-id="e961b-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="e961b-277">Si noti che le app non devono essere scritte in base a una durata specifica prevista come costante.</span><span class="sxs-lookup"><span data-stu-id="e961b-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="e961b-278">La durata dei token può variare.</span><span class="sxs-lookup"><span data-stu-id="e961b-278">They can and will change.</span></span> <span data-ttu-id="e961b-279">Al seguente link sono disponibili maggiori informazioni sulla [personalizzazione della durata dei token in Azure AD B2C](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="e961b-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="e961b-280">Token</span><span class="sxs-lookup"><span data-stu-id="e961b-280">Token</span></span> | <span data-ttu-id="e961b-281">Durata</span><span class="sxs-lookup"><span data-stu-id="e961b-281">Lifetime</span></span> | <span data-ttu-id="e961b-282">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e961b-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e961b-283">Token ID</span><span class="sxs-lookup"><span data-stu-id="e961b-283">ID tokens</span></span> |<span data-ttu-id="e961b-284">Un'ora</span><span class="sxs-lookup"><span data-stu-id="e961b-284">One hour</span></span> |<span data-ttu-id="e961b-285">I token ID sono in genere validi per un'ora.</span><span class="sxs-lookup"><span data-stu-id="e961b-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="e961b-286">L'app Web può usare tale durata per mantenere le relative sessioni con gli utenti (scelta consigliati).</span><span class="sxs-lookup"><span data-stu-id="e961b-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="e961b-287">È anche possibile scegliere una durata di sessione diversa.</span><span class="sxs-lookup"><span data-stu-id="e961b-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="e961b-288">Se l'app deve ottenere un nuovo token ID, deve semplicemente inviare una nuova richiesta di accesso ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e961b-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="e961b-289">Se l'utente ha una sessione del browser valida con Azure AD, può non essere necessario immettere nuovamente le credenziali.</span><span class="sxs-lookup"><span data-stu-id="e961b-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="e961b-290">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="e961b-290">Refresh tokens</span></span> |<span data-ttu-id="e961b-291">Fino a 14 giorni</span><span class="sxs-lookup"><span data-stu-id="e961b-291">Up to 14 days</span></span> |<span data-ttu-id="e961b-292">Un singolo token di aggiornamento è valido per un periodo massimo di 14 giorni.</span><span class="sxs-lookup"><span data-stu-id="e961b-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="e961b-293">Tuttavia, un token di aggiornamento potrebbe non essere più valido in qualsiasi momento per diversi motivi.</span><span class="sxs-lookup"><span data-stu-id="e961b-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="e961b-294">L'app deve continuare a provare a usare un token di aggiornamento fino a quando la richiesta non ha esito negativo o l'app non sostituisce il token di aggiornamento con uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="e961b-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="e961b-295">Se sono trascorsi 90 giorni dall'ultima volta in cui l'utente ha immesso le credenziali, un token di aggiornamento può non essere più valido.</span><span class="sxs-lookup"><span data-stu-id="e961b-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="e961b-296">Codici di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="e961b-296">Authorization codes</span></span> |<span data-ttu-id="e961b-297">Cinque minuti</span><span class="sxs-lookup"><span data-stu-id="e961b-297">Five minutes</span></span> |<span data-ttu-id="e961b-298">I codici di autorizzazione hanno intenzionalmente una breve durata.</span><span class="sxs-lookup"><span data-stu-id="e961b-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="e961b-299">Alla ricezione devono essere riscattati immediatamente con token di accesso, token ID o token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e961b-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

