---
title: Panoramica dell'architettura di rete degli ambienti del servizio app
description: Panoramica dell'architettura della topologia di rete degli ambienti del servizio app.
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: b2afe86d8774b449a257312d4e60b5f6125336ca
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="1c471-103">Panoramica dell'architettura di rete degli ambienti del servizio app</span><span class="sxs-lookup"><span data-stu-id="1c471-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="1c471-104">Introduzione</span><span class="sxs-lookup"><span data-stu-id="1c471-104">Introduction</span></span>
<span data-ttu-id="1c471-105">Gli ambienti del servizio app vengono sempre creati in una subnet di una [rete virtuale][virtualnetwork]. Le app in esecuzione in un ambiente del servizio app possono comunicare con gli endpoint privati che fanno parte della stessa topologia di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="1c471-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within the same virtual network topology.</span></span>  <span data-ttu-id="1c471-106">Poiché i clienti possono bloccare alcune parti dell'infrastruttura di rete virtuale, è importante conoscere i tipi di flusso delle comunicazioni di rete che avvengono con un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-106">Since customers may lock down parts of their virtual network infrastructure, it is important to understand the types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="1c471-107">Flusso di rete generale</span><span class="sxs-lookup"><span data-stu-id="1c471-107">General Network Flow</span></span>
<span data-ttu-id="1c471-108">Quando un ambiente del servizio app usa un indirizzo IP virtuale pubblico (VIP) per le app, tutto il traffico in ingresso viene ricevuto su questo indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="1c471-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="1c471-109">Sono inclusi il traffico HTTP e HTTPS per le app, altro traffico per l'FTP, la funzionalità di debug remoto e le operazioni di gestione di Azure.</span><span class="sxs-lookup"><span data-stu-id="1c471-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="1c471-110">Per un elenco completo delle porte specifiche (sia obbligatorie che facoltative) disponibili nell'indirizzo VIP pubblico, vedere l'articolo sul [controllo del traffico in uscita][controllinginboundtraffic] verso un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-110">For a full list of the specific ports (both required and optional) that are available on the public VIP see the article on [controlling inbound traffic][controllinginboundtraffic] to an App Service Environment.</span></span> 

<span data-ttu-id="1c471-111">Gli ambienti del servizio app supportano anche le applicazioni in esecuzione associate solo a un indirizzo interno di rete virtuale, noto anche come indirizzo ILB (bilanciamento del carico interno).</span><span class="sxs-lookup"><span data-stu-id="1c471-111">App Service Environments also support running apps that are bound only to a virtual network internal address, also referred to as an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="1c471-112">In un ambiente del servizio app abilitato al bilanciamento del carico interno, il traffico HTTP e HTTPS per le app e le chiamate di debug remoto, vengono ricevuti all'indirizzo ILB.</span><span class="sxs-lookup"><span data-stu-id="1c471-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on the ILB address.</span></span>  <span data-ttu-id="1c471-113">Per le configurazioni dell'ambiente di servizio app con bilanciamento del carico interno più comuni, anche il traffico FTP/FTPS verrà ricevuto all'indirizzo ILB.</span><span class="sxs-lookup"><span data-stu-id="1c471-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on the ILB address.</span></span>  <span data-ttu-id="1c471-114">Le operazioni di gestione di Azure useranno tuttavia le porte 454/455 all'indirizzo VIP pubblico di un ambiente del servizio app abilitato per il bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="1c471-114">However Azure management operations will still flow to ports 454/455 on the public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="1c471-115">Il diagramma seguente mostra una panoramica dei vari flussi di rete in ingresso e in uscita per un ambiente del servizio app in cui le app sono associate a un indirizzo IP virtuale pubblico:</span><span class="sxs-lookup"><span data-stu-id="1c471-115">The diagram below shows an overview of the various inbound and outbound network flows for an App Service Environment where the apps are bound to a public virtual IP address:</span></span>

![Flussi di rete generali][GeneralNetworkFlows]

<span data-ttu-id="1c471-117">Un ambiente del servizio app può comunicare con svariati endpoint di clienti privati.</span><span class="sxs-lookup"><span data-stu-id="1c471-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="1c471-118">Ad esempio, le app in esecuzione nell'ambiente del servizio app possono connettersi a uno o più server di database in esecuzione su macchine virtuali IaaS nella stessa topologia di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="1c471-118">For example, apps running in the App Service Environment can connect to database server(s) running on IaaS virtual machines in the same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1c471-119">Se si esamina il diagramma di rete è possibile osservare che le "altre risorse di calcolo" vengono distribuite in una subnet diversa dall'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-119">Looking at the network diagram, the "Other Compute Resources" are deployed in a different Subnet from the App Service Environment.</span></span> <span data-ttu-id="1c471-120">La distribuzione delle risorse nella stessa subnet con l'ambiente del servizio app bloccherà la connettività da questo ambiente a tali risorse, ad eccezione di routing specifico all'interno dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-120">Deploying resources in the same Subnet with the ASE will block connectivity from ASE to those resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="1c471-121">Distribuire in una subnet diversa, nella stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="1c471-121">Deploy to a different Subnet instead (in the same VNET).</span></span> <span data-ttu-id="1c471-122">L'ambiente del servizio app sarà quindi in grado di connettersi.</span><span class="sxs-lookup"><span data-stu-id="1c471-122">The App Service Environment will then be able to connect.</span></span> <span data-ttu-id="1c471-123">Non è necessaria alcuna configurazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="1c471-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="1c471-124">Gli ambienti del servizio app comunicano anche con le risorse database SQL e di archiviazione di Azure necessarie per la gestione e il funzionamento di un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="1c471-125">Alcune risorse SQL e di archiviazione con cui comunica un ambiente del servizio app si trovano nella stessa area dell'ambiente del servizio app, mentre altre si trovano in aree remote di Azure.</span><span class="sxs-lookup"><span data-stu-id="1c471-125">Some of the Sql and Storage resources that an App Service Environment communicates with are located in the same region as the App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="1c471-126">Di conseguenza, la connettività in uscita a Internet è sempre necessaria per il corretto funzionamento di un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-126">As a result, outbound connectivity to the Internet is always required for an App Service Environment to function properly.</span></span> 

<span data-ttu-id="1c471-127">Poiché un ambiente del servizio app viene distribuito in una subnet, si possono usare gruppi di sicurezza di rete per controllare il traffico in ingresso alla subnet.</span><span class="sxs-lookup"><span data-stu-id="1c471-127">Since an App Service Environment is deployed in a subnet, network security groups can be used to control inbound traffic to the subnet.</span></span>  <span data-ttu-id="1c471-128">Per informazioni dettagliate su come controllare il traffico in ingresso a un ambiente del servizio app, vedere l'[articolo][controllinginboundtraffic] seguente.</span><span class="sxs-lookup"><span data-stu-id="1c471-128">For details on how to control inbound traffic to an App Service Environment, see the following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="1c471-129">Per informazioni dettagliate su come consentire la connettività Internet in uscita da un ambiente del servizio app, vedere il seguente articolo sull'uso di [Express Route][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="1c471-129">For details on how to allow outbound Internet connectivity from an App Service Environment, see the following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="1c471-130">Lo stesso approccio descritto nell'articolo si applica quando si usano la connettività da sito a sito e il tunneling forzato.</span><span class="sxs-lookup"><span data-stu-id="1c471-130">The same approach described in the article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="1c471-131">Indirizzi di rete in uscita</span><span class="sxs-lookup"><span data-stu-id="1c471-131">Outbound Network Addresses</span></span>
<span data-ttu-id="1c471-132">Quando un ambiente del servizio app esegue chiamate in uscita, un indirizzo IP è sempre associato alle chiamate in uscita.</span><span class="sxs-lookup"><span data-stu-id="1c471-132">When an App Service Environment makes outbound calls, an IP Address is always associated with the outbound calls.</span></span>  <span data-ttu-id="1c471-133">Lo specifico indirizzo IP usato dipende dal fatto che l'endpoint da chiamare si trovi all'interno o all'esterno della topologia di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="1c471-133">The specific IP address that is used depends on whether the endpoint being called is located within the virtual network topology, or outside of the virtual network topology.</span></span>

<span data-ttu-id="1c471-134">Se l'endpoint da chiamare è all' **esterno** della topologia di rete virtuale, l'indirizzo in uscita (detto anche indirizzo NAT in uscita) usato è l'indirizzo VIP pubblico dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-134">If the endpoint being called is **outside** of the virtual network topology, then the outbound address (aka the outbound NAT address) that is used is the public VIP of the App Service Environment.</span></span>  <span data-ttu-id="1c471-135">Questo indirizzo si trova nell'interfaccia utente del portale per l'ambiente del servizio app nel pannello Proprietà.</span><span class="sxs-lookup"><span data-stu-id="1c471-135">This address can be found in the portal user interface for the App Service Environment in Properties blade.</span></span>

![Indirizzo IP in uscita][OutboundIPAddress]

<span data-ttu-id="1c471-137">Questo indirizzo può essere determinato per gli ambienti del servizio app che hanno un indirizzo VIP pubblico anche creando un'app nell'ambiente del servizio app ed eseguendo *nslookup* nell'indirizzo dell'app.</span><span class="sxs-lookup"><span data-stu-id="1c471-137">This address can also be determined for ASEs that only have a public VIP by creating an app in the App Service Environment, and then performing an *nslookup* on the app's address.</span></span> <span data-ttu-id="1c471-138">L'indirizzo IP risultante è sia l'indirizzo VIP pubblico sia l'indirizzo NAT in uscita dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-138">The resultant IP address is both the public VIP, as well as the App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="1c471-139">Se l'endpoint da chiamare è all' **interno** della topologia di rete virtuale, l'indirizzo in uscita dell'app chiamante sarà l'indirizzo IP interno della singola risorsa di calcolo che esegue l'app.</span><span class="sxs-lookup"><span data-stu-id="1c471-139">If the endpoint being called is **inside** of the virtual network topology, the outbound address of the calling app will be the internal IP address of the individual compute resource running the app.</span></span>  <span data-ttu-id="1c471-140">Tuttavia non esiste un mapping persistente degli indirizzi IP interni di rete virtuale alle app.</span><span class="sxs-lookup"><span data-stu-id="1c471-140">However there is not a persistent mapping of virtual network internal IP addresses to apps.</span></span>  <span data-ttu-id="1c471-141">Le app possono spostarsi in risorse di calcolo diverse e il pool di risorse di calcolo disponibili in un ambiente del servizio app può essere modificato in seguito a operazioni di ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="1c471-141">Apps can move around across different compute resources, and the pool of available compute resources in an App Service Environment can change due to scaling operations.</span></span>

<span data-ttu-id="1c471-142">Tuttavia, poiché un ambiente del servizio app si trova sempre all'interno di una subnet, è certo che l'indirizzo IP interno di una risorsa di calcolo che esegue un'app sarà sempre compreso nell'intervallo CIDR della subnet.</span><span class="sxs-lookup"><span data-stu-id="1c471-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that the internal IP address of a compute resource running an app will always lie within the CIDR range of the subnet.</span></span>  <span data-ttu-id="1c471-143">Di conseguenza, quando vengono usati gruppi di sicurezza di rete o ACL con granularità fine per proteggere l'accesso ad altri endpoint all'interno della rete virtuale, è necessario concedere l'accesso all'intervallo della subnet contenente l'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-143">As a result, when fine-grained ACLs or network security groups are used to secure access to other endpoints within the virtual network, the subnet range containing the App Service Environment needs to be granted access.</span></span>

<span data-ttu-id="1c471-144">Il diagramma seguente illustra questi concetti in modo più dettagliato:</span><span class="sxs-lookup"><span data-stu-id="1c471-144">The following diagram shows these concepts in more detail:</span></span>

![Indirizzi di rete in uscita][OutboundNetworkAddresses]

<span data-ttu-id="1c471-146">Nel diagramma precedente:</span><span class="sxs-lookup"><span data-stu-id="1c471-146">In the above diagram:</span></span>

* <span data-ttu-id="1c471-147">Poiché l'indirizzo VIP pubblico dell'ambiente del servizio app è 192.23.1.2, questo sarà l'indirizzo IP in uscita usato quando si eseguono chiamate agli endpoint "Internet".</span><span class="sxs-lookup"><span data-stu-id="1c471-147">Since the public VIP of the App Service Environment is 192.23.1.2, that is the outbound IP address used when making calls to "Internet" endpoints.</span></span>
* <span data-ttu-id="1c471-148">L'intervallo CIDR della subnet contenitore per l'ambiente del servizio app è 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="1c471-148">The CIDR range of the containing subnet for the App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="1c471-149">Gli altri endpoint all'interno della stessa infrastruttura di rete virtuale visualizzeranno le chiamate dalle app come provenienti da un punto compreso in questo intervallo di indirizzi.</span><span class="sxs-lookup"><span data-stu-id="1c471-149">Other endpoints within the same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="1c471-150">Chiamate tra gli ambienti del servizio app</span><span class="sxs-lookup"><span data-stu-id="1c471-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="1c471-151">Se si distribuiscono più ambienti del servizio app nella stessa rete virtuale e si eseguono chiamate in uscita da un ambiente del servizio app a un altro, può verificarsi uno scenario più complesso.</span><span class="sxs-lookup"><span data-stu-id="1c471-151">A more complex scenario can occur if you deploy multiple App Service Environments in the same virtual network, and make outbound calls from one App Service Environment to another App Service Environment.</span></span>  <span data-ttu-id="1c471-152">Anche questi tipi di chiamate tra ambienti del servizio app saranno considerati come chiamate "Internet".</span><span class="sxs-lookup"><span data-stu-id="1c471-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="1c471-153">Il diagramma seguente illustra un esempio di un'architettura a più livelli con le app in un ambiente del servizio app (ad esempio, app Web "Porta principale") che eseguono chiamate al secondo ambiente del servizio app (ad esempio, app di API back-end interne non accessibili da Internet).</span><span class="sxs-lookup"><span data-stu-id="1c471-153">The following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended to be accessible from the Internet).</span></span> 

![Chiamate tra gli ambienti del servizio app][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="1c471-155">Nell'esempio precedente l'indirizzo IP in uscita dell'ambiente del servizio app "ASE One" è 192.23.1.2.</span><span class="sxs-lookup"><span data-stu-id="1c471-155">In the example above the App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="1c471-156">Se un'app in esecuzione in questo ambiente del servizio app effettua una chiamata in uscita a un'app in esecuzione in un secondo ambiente del servizio app ("ASE Two") che si trova nella stessa rete virtuale, la chiamata in uscita sarà considerata come chiamata "Internet".</span><span class="sxs-lookup"><span data-stu-id="1c471-156">If an app running on this App Service Environment makes an outbound call to an app running on a second App Service Environment ("ASE Two") located in the same virtual network, the outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="1c471-157">Di conseguenza il traffico di rete in arrivo nel secondo ambiente del servizio app verrà visualizzato come proveniente da 192.23.1.2 (ossia non l'intervallo di indirizzi della subnet del primo ambiente del servizio app).</span><span class="sxs-lookup"><span data-stu-id="1c471-157">As a result the network traffic arriving on the second App Service Environment will show as originating from 192.23.1.2 (i.e. not the subnet address range of the first App Service Environment).</span></span>

<span data-ttu-id="1c471-158">Anche se le chiamate tra ambienti del servizio app diversi sono considerate come chiamate "Internet", quando entrambi gli ambienti del servizio app si trovano nella stessa area di Azure, il traffico di rete rimarrà nella rete dell'area di Azure e non transiterà fisicamente attraverso la rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="1c471-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in the same Azure region the network traffic will remain on the regional Azure network and will not physically flow over the public Internet.</span></span>  <span data-ttu-id="1c471-159">Di conseguenza è possibile usare un gruppo di sicurezza di rete nella subnet del secondo ambiente del servizio app per consentire solo chiamate in ingresso dal primo ambiente del servizio app con indirizzo IP in uscita 192.23.1.2, garantendo comunicazioni sicure tra gli ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="1c471-159">As a result you can use a network security group on the subnet of the second App Service Environment to only allow inbound calls from the first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between the App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="1c471-160">Informazioni e collegamenti aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="1c471-160">Additional Links and Information</span></span>
<span data-ttu-id="1c471-161">Tutti gli articoli e le procedure sugli ambienti del servizio app sono disponibili nel [file LEGGIMI per gli ambienti di servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="1c471-161">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="1c471-162">Informazioni dettagliate sulle porte in ingresso usate dagli ambienti del servizio app e sull'uso di gruppi di sicurezza di rete per controllare il traffico in ingresso sono disponibili [qui][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="1c471-162">Details on inbound ports used by App Service Environments and using network security groups to control inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="1c471-163">Informazioni dettagliate sull'uso di route definite dall'utente per concedere l'accesso Internet in uscita agli ambienti del servizio app sono disponibili in questo [articolo][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="1c471-163">Details on using user defined routes to grant outbound Internet access to App Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

