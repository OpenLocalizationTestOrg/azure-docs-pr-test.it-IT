---
title: aaaMigrate un tooSQL database Server SQL Server in una macchina virtuale | Documenti Microsoft
description: Informazioni su come un utente locale toomigrate database tooSQL Server in una macchina virtuale di Azure.
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 9c7aba30304ea40796412d2ddc885f6d4a58be2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-a-sql-server-database-toosql-server-in-an-azure-vm"></a><span data-ttu-id="4fb26-103">Eseguire la migrazione di un tooSQL database Server SQL Server in una macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-103">Migrate a SQL Server database tooSQL Server in an Azure VM</span></span>

<span data-ttu-id="4fb26-104">Esistono diversi metodi toomigrate un tooSQL di database utente di SQL Server on-premise Server in una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-104">There are a number of methods toomigrate an on-premises SQL Server user database tooSQL Server in an Azure VM.</span></span> <span data-ttu-id="4fb26-105">In questo articolo verrà descrivere brevemente vari metodi e consigliabile migliore hello per vari scenari.</span><span class="sxs-lookup"><span data-stu-id="4fb26-105">This article will briefly discuss various methods and recommend hello best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-hello-primary-migration-methods"></a><span data-ttu-id="4fb26-106">Quali sono i metodi di migrazione primario hello?</span><span class="sxs-lookup"><span data-stu-id="4fb26-106">What are hello primary migration methods?</span></span>
<span data-ttu-id="4fb26-107">metodi di migrazione primario Hello sono:</span><span class="sxs-lookup"><span data-stu-id="4fb26-107">hello primary migration methods are:</span></span>

* <span data-ttu-id="4fb26-108">Eseguire il backup in locale utilizzando la compressione e manualmente file di backup di copia hello in hello macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-108">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>
* <span data-ttu-id="4fb26-109">Eseguire un backup tooURL e il ripristino nella macchina virtuale di Azure dall'URL hello hello</span><span class="sxs-lookup"><span data-stu-id="4fb26-109">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>
* <span data-ttu-id="4fb26-110">Scollegare e quindi copiare hello dati e log file tooAzure archiviazione blob e quindi ricollegare tooSQL Server nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="4fb26-110">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="4fb26-111">Convertire fisico locale computer VHD tooHyper-V, caricare tooAzure nell'archiviazione Blob e quindi distribuire come nuova macchina virtuale con caricamento VHD</span><span class="sxs-lookup"><span data-stu-id="4fb26-111">Convert on-premises physical machine tooHyper-V VHD, upload tooAzure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="4fb26-112">Spedizione del disco rigido tramite il servizio di Importazione/Esportazione di Windows</span><span class="sxs-lookup"><span data-stu-id="4fb26-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="4fb26-113">Se dispone di una distribuzione di AlwaysOn locale, utilizzare hello [Aggiungi Replica Azure](../classic/sql-onprem-availability.md) toocreate una replica in Azure e quindi il failover, verso l'istanza del database Azure toohello utenti</span><span class="sxs-lookup"><span data-stu-id="4fb26-113">If you have an AlwaysOn deployment on-premises, use hello [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) toocreate a replica in Azure and then failover, pointing users toohello Azure database instance</span></span>
* <span data-ttu-id="4fb26-114">Utilizzo di SQL Server [la replica transazionale](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server come server di sottoscrizione dell'istanza e quindi disabilitare la replica, scegliendo l'istanza del database Azure toohello utenti</span><span class="sxs-lookup"><span data-stu-id="4fb26-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server instance as a subscriber and then disable replication, pointing users toohello Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="4fb26-115">È inoltre possibile utilizzare questi stessi database toomove tecniche tra macchine virtuali di SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-115">You can also use these same techniques toomove databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="4fb26-116">Non è ad esempio, una macchina virtuale immagine della raccolta di SQL Server da una versione o edizione tooanother di tooupgrade metodo supportato.</span><span class="sxs-lookup"><span data-stu-id="4fb26-116">For example, there is no supported way tooupgrade a SQL Server gallery-image VM from one version/edition tooanother.</span></span> <span data-ttu-id="4fb26-117">In questo caso, si deve creare una nuova macchina virtuale di SQL Server con hello/edizione della nuova versione e quindi usare una delle tecniche di migrazione hello in questo articolo di toomove dei database.</span><span class="sxs-lookup"><span data-stu-id="4fb26-117">In this case, you should create a new SQL Server VM with hello new version/edition, and then use one of hello migration techniques in this article toomove your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="4fb26-118">Scelta del metodo di migrazione</span><span class="sxs-lookup"><span data-stu-id="4fb26-118">Choosing your migration method</span></span>
<span data-ttu-id="4fb26-119">Prestazioni di trasferimento ottimale, eseguire la migrazione di file di database hello in hello macchina virtuale di Azure utilizzando un file di backup compresso.</span><span class="sxs-lookup"><span data-stu-id="4fb26-119">For optimum data transfer performance, migrate hello database files into hello Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="4fb26-120">tempo di inattività toominimize durante il processo di migrazione di database hello, utilizzare l'opzione AlwaysOn hello o hello la replica transazionale.</span><span class="sxs-lookup"><span data-stu-id="4fb26-120">toominimize downtime during hello database migration process, use either hello AlwaysOn option or hello transactional replication option.</span></span>

<span data-ttu-id="4fb26-121">Se non è possibile toouse hello sopra metodi, eseguire manualmente la migrazione del database.</span><span class="sxs-lookup"><span data-stu-id="4fb26-121">If it is not possible toouse hello above methods, manually migrate your database.</span></span> <span data-ttu-id="4fb26-122">In questo modo, verranno in genere iniziano con un backup del database seguito da una copia di backup del database hello in Azure e quindi eseguire un ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="4fb26-122">Using this method, you will generally start with a database backup followed by a copy of hello database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="4fb26-123">È possibile anche copiare i file di database hello stessi in Azure e quindi collegarli.</span><span class="sxs-lookup"><span data-stu-id="4fb26-123">You can also copy hello database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="4fb26-124">Esistono diversi metodi che consentono di eseguire questo processo di migrazione manuale di un database in una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="4fb26-125">Quando si esegue l'aggiornamento da versioni precedenti di SQL Server tooSQL Server 2014 o SQL Server 2016, è necessario considerare se sono necessarie modifiche.</span><span class="sxs-lookup"><span data-stu-id="4fb26-125">When you upgrade tooSQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="4fb26-126">È consigliabile indirizzare tutte le dipendenze sulle funzionalità non supportate dalla nuova versione di hello di SQL Server come parte del progetto di migrazione.</span><span class="sxs-lookup"><span data-stu-id="4fb26-126">We recommend that you address all dependencies on features not supported by hello new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="4fb26-127">Per ulteriori informazioni sulle edizioni supportata di hello e sugli scenari, vedere [aggiornamento tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="4fb26-127">For more information on hello supported editions and scenarios, see [Upgrade tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="4fb26-128">Hello nella tabella seguente elenca ogni metodo di migrazione primario hello e viene descritto quando utilizzare hello di ogni metodo è più appropriato.</span><span class="sxs-lookup"><span data-stu-id="4fb26-128">hello following table lists each of hello primary migration methods and discusses when hello use of each method is most appropriate.</span></span>

| <span data-ttu-id="4fb26-129">Metodo</span><span class="sxs-lookup"><span data-stu-id="4fb26-129">Method</span></span> | <span data-ttu-id="4fb26-130">Versione del database di origine</span><span class="sxs-lookup"><span data-stu-id="4fb26-130">Source database version</span></span> | <span data-ttu-id="4fb26-131">Versione del database di destinazione</span><span class="sxs-lookup"><span data-stu-id="4fb26-131">Destination database version</span></span> | <span data-ttu-id="4fb26-132">Vincolo di dimensioni del backup del database di origine</span><span class="sxs-lookup"><span data-stu-id="4fb26-132">Source database backup size constraint</span></span> | <span data-ttu-id="4fb26-133">Note</span><span class="sxs-lookup"><span data-stu-id="4fb26-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="4fb26-134">Eseguire il backup in locale utilizzando la compressione e manualmente file di backup di copia hello in hello macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-134">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="4fb26-135">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="4fb26-136">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="4fb26-137">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="4fb26-138">È una tecnica molto semplice e ben collaudata per spostare i database tra più computer.</span><span class="sxs-lookup"><span data-stu-id="4fb26-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="4fb26-139">Eseguire un backup tooURL e il ripristino nella macchina virtuale di Azure dall'URL hello hello</span><span class="sxs-lookup"><span data-stu-id="4fb26-139">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="4fb26-140">SQL Server 2012 SP1 CU2 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="4fb26-141">SQL Server 2012 SP1 CU2 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="4fb26-142">< 12.8 TB per SQL Server 2016, in caso contrario < 1 TB</span><span class="sxs-lookup"><span data-stu-id="4fb26-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="4fb26-143">Questo metodo è solo un altro modo toomove hello file di backup toohello VM utilizzando l'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-143">This method is just another way toomove hello backup file toohello VM using Azure storage.</span></span> |
| [<span data-ttu-id="4fb26-144">Scollegare e quindi copiare hello dati e log file tooAzure archiviazione blob e quindi ricollegare tooSQL Server nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="4fb26-144">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="4fb26-145">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="4fb26-146">SQL Server 2014 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="4fb26-147">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="4fb26-148">Utilizzare questo metodo quando si pianifica troppo[archiviare questi file tramite il servizio di archiviazione Blob di Azure hello](https://msdn.microsoft.com/library/dn385720.aspx) e collegarli tooSQL Server in esecuzione in una macchina virtuale di Azure, in particolare con i database di dimensioni molto grandi</span><span class="sxs-lookup"><span data-stu-id="4fb26-148">Use this method when you plan too[store these files using hello Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them tooSQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="4fb26-149">Converti locale computer i dischi rigidi virtuali tooHyper-V, caricare tooAzure nell'archiviazione Blob e quindi distribuire una nuova macchina virtuale con disco rigido virtuale caricato</span><span class="sxs-lookup"><span data-stu-id="4fb26-149">Convert on-premises machine tooHyper-V VHDs, upload tooAzure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="4fb26-150">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="4fb26-151">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="4fb26-152">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="4fb26-153">Quando utilizzare [riportare la propria licenza di SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), durante la migrazione di un database a cui verrà eseguita in una versione precedente di SQL Server o quando la migrazione dei database di sistema e utente come parte di hello migrazione del database dipende da altri i database utente e/o i database di sistema.</span><span class="sxs-lookup"><span data-stu-id="4fb26-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of hello migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="4fb26-154">Spedizione del disco rigido tramite il servizio di Importazione/Esportazione di Windows</span><span class="sxs-lookup"><span data-stu-id="4fb26-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="4fb26-155">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="4fb26-156">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="4fb26-157">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="4fb26-158">Hello utilizzare [Windows servizio di importazione/esportazione](../../../storage/common/storage-import-export-service.md) quando il metodo di copia manuale è troppo lento, ad esempio con i database di dimensioni molto grandi</span><span class="sxs-lookup"><span data-stu-id="4fb26-158">Use hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="4fb26-159">Utilizzare hello Aggiungi Replica Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-159">Use hello Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="4fb26-160">SQL Server 2012 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="4fb26-161">SQL Server 2012 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="4fb26-162">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="4fb26-163">Riduce al minimo il tempo di inattività; da usare quando si ha una distribuzione locale di AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="4fb26-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="4fb26-164">Uso della replica transazionale di SQL Server</span><span class="sxs-lookup"><span data-stu-id="4fb26-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="4fb26-165">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="4fb26-166">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="4fb26-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="4fb26-167">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="4fb26-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="4fb26-168">Utilizzare questa opzione quando è necessario toominimize i tempi di inattività e non dispone di una distribuzione locale di AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="4fb26-168">Use when you need toominimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="4fb26-169">Backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="4fb26-169">Backup and restore</span></span>
<span data-ttu-id="4fb26-170">Eseguire il backup del database con la compressione, copiare hello backup toohello macchina virtuale e quindi ripristinare il database di hello.</span><span class="sxs-lookup"><span data-stu-id="4fb26-170">Back up your database with compression, copy hello backup toohello VM, and then restore hello database.</span></span> <span data-ttu-id="4fb26-171">Se il file di backup è maggiore di 1 TB, è necessario eseguire lo striping perché hello la dimensione massima di un disco di macchina virtuale è di 1 TB.</span><span class="sxs-lookup"><span data-stu-id="4fb26-171">If your backup file is larger than 1 TB, you must stripe it because hello maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="4fb26-172">Utilizzare hello seguendo i passaggi generali toomigrate un database utente utilizzando il metodo manuale:</span><span class="sxs-lookup"><span data-stu-id="4fb26-172">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="4fb26-173">Eseguire un percorso locale di tooan backup completo del database.</span><span class="sxs-lookup"><span data-stu-id="4fb26-173">Perform a full database backup tooan on-premises location.</span></span>
2. <span data-ttu-id="4fb26-174">Creare o caricare una macchina virtuale con la versione di hello di SQL Server desiderato.</span><span class="sxs-lookup"><span data-stu-id="4fb26-174">Create or upload a virtual machine with hello version of SQL Server desired.</span></span>
3. <span data-ttu-id="4fb26-175">Configurare la connettività in base ai requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="4fb26-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="4fb26-176">Vedere [connessione macchina virtuale di SQL Server in Azure (gestione delle risorse) tooa](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="4fb26-176">See [Connect tooa SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="4fb26-177">Copiare il tooyour di file di backup VM comando remote desktop, in Esplora risorse o hello copia da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="4fb26-177">Copy your backup file(s) tooyour VM using remote desktop, Windows Explorer or hello copy command from a command prompt.</span></span>

## <a name="backup-toourl-and-restore"></a><span data-ttu-id="4fb26-178">TooURL backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="4fb26-178">Backup tooURL and restore</span></span>
<span data-ttu-id="4fb26-179">Invece il backup dei file locale tooa, è possibile usare hello [tooURL backup](https://msdn.microsoft.com/library/dn435916.aspx) e quindi ripristinare dall'URL toohello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="4fb26-179">Instead of backing up tooa local file, you can use hello [backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL toohello VM.</span></span> <span data-ttu-id="4fb26-180">Con SQL Server 2016, il set di backup con striping è supportato, è consigliato per le prestazioni e necessari limiti delle dimensioni hello tooexceed per ogni blob.</span><span class="sxs-lookup"><span data-stu-id="4fb26-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required tooexceed hello size limits per blob.</span></span> <span data-ttu-id="4fb26-181">Per i database di dimensioni molto grandi, hello l'uso di hello [Windows servizio di importazione/esportazione](../../../storage/common/storage-import-export-service.md) è consigliato.</span><span class="sxs-lookup"><span data-stu-id="4fb26-181">For very large databases, hello use of hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="4fb26-182">Rimuovere e allegare dall'URL</span><span class="sxs-lookup"><span data-stu-id="4fb26-182">Detach and attach from URL</span></span>
<span data-ttu-id="4fb26-183">I file di database e log di scollegamento e li trasferiscono troppo[archiviazione Blob di Azure](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="4fb26-183">Detach your database and log files and transfer them too[Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="4fb26-184">Quindi, collegare il database di hello dall'URL hello nella macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-184">Then attach hello database from hello URL on your Azure VM.</span></span> <span data-ttu-id="4fb26-185">Utilizzare questo metodo se si desidera tooreside i file di database fisico hello nell'archiviazione Blob.</span><span class="sxs-lookup"><span data-stu-id="4fb26-185">Use this if you want hello physical database files tooreside in Blob storage.</span></span> <span data-ttu-id="4fb26-186">Ciò può risultare utile per i database di dimensioni molto grandi.</span><span class="sxs-lookup"><span data-stu-id="4fb26-186">This might be useful for very large databases.</span></span> <span data-ttu-id="4fb26-187">Utilizzare hello seguendo i passaggi generali toomigrate un database utente utilizzando il metodo manuale:</span><span class="sxs-lookup"><span data-stu-id="4fb26-187">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="4fb26-188">Scollegare il file di database hello dall'istanza del database locale hello.</span><span class="sxs-lookup"><span data-stu-id="4fb26-188">Detach hello database files from hello on-premises database instance.</span></span>
2. <span data-ttu-id="4fb26-189">Copiare i file del database scollegato hello nell'archiviazione blob di Azure utilizzando hello [utilità della riga di comando di AZCopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="4fb26-189">Copy hello detached database files into Azure blob storage using hello [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="4fb26-190">Collegare i file del database hello dall'istanza di SQL Server hello Azure URL toohello in hello macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb26-190">Attach hello database files from hello Azure URL toohello SQL Server instance in hello Azure VM.</span></span>

## <a name="convert-toovm-and-upload-toourl-and-deploy-as-new-vm"></a><span data-ttu-id="4fb26-191">Convertire tooVM e tooURL di caricare e distribuire come nuova macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="4fb26-191">Convert tooVM and upload tooURL and deploy as new VM</span></span>
<span data-ttu-id="4fb26-192">Utilizzare questo toomigrate metodo tutti i database utente e di sistema in una macchina virtuale di tooAzure istanza di SQL Server di on-premise.</span><span class="sxs-lookup"><span data-stu-id="4fb26-192">Use this method toomigrate all system and user databases in an on-premises SQL Server instance tooAzure virtual machine.</span></span> <span data-ttu-id="4fb26-193">Utilizzare hello seguendo i passaggi generali toomigrate un'intera istanza di SQL Server utilizzando il metodo manuale:</span><span class="sxs-lookup"><span data-stu-id="4fb26-193">Use hello following general steps toomigrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="4fb26-194">Converti fisico o virtuale macchine dischi rigidi virtuali tooHyper-V utilizzando [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="4fb26-194">Convert physical or virtual machines tooHyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="4fb26-195">Caricare il file di disco rigido virtuale tooAzure archiviazione usando hello [cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="4fb26-195">Upload VHD files tooAzure Storage by using hello [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="4fb26-196">Distribuire una nuova macchina virtuale tramite hello caricato disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="4fb26-196">Deploy a new virtual machine by using hello uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="4fb26-197">toomigrate un'intera applicazione, è consigliabile utilizzare [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="4fb26-197">toomigrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="4fb26-198">Spedizione del disco rigido</span><span class="sxs-lookup"><span data-stu-id="4fb26-198">Ship hard drive</span></span>
<span data-ttu-id="4fb26-199">Hello utilizzare [metodo del servizio di importazione/esportazione Windows](../../../storage/common/storage-import-export-service.md) tootransfer grandi quantità di dati di file tooAzure nell'archiviazione Blob in situazioni in cui caricamento hello rete viene impedito perché costoso o difficile da effettuare.</span><span class="sxs-lookup"><span data-stu-id="4fb26-199">Use hello [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) tootransfer large amounts of file data tooAzure Blob storage in situations where uploading over hello network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="4fb26-200">Con questo servizio, si invia uno o più unità disco rigido contenente tale dati tooan data center di Azure, in cui i dati verranno caricati tooyour account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="4fb26-200">With this service, you send one or more hard drives containing that data tooan Azure data center, where your data will be uploaded tooyour storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4fb26-201">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="4fb26-201">Next Steps</span></span>
<span data-ttu-id="4fb26-202">Per altre informazioni sull'esecuzione di SQL Server in Macchine virtuali di Azure, vedere [Panoramica di SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4fb26-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="4fb26-203">Per istruzioni sulla creazione di una macchina virtuale di Azure SQL Server da un'immagine acquisita, vedere [suggerimenti sulla clonazione macchine virtuali di SQL Azure da immagini acquisite](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) sul blog di ingegneri di SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="4fb26-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on hello CSS SQL Server Engineers blog.</span></span>

