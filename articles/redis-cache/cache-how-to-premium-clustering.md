---
title: aaaHow tooconfigure Redis clustering per una Cache Redis di Azure Premium | Documenti Microsoft
description: Informazioni su come toocreate e gestire il servizio cluster per il livello Premium, le istanze di Cache Redis di Azure Redis
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="2394f-103">Come tooconfigure Redis clustering per una Cache Redis di Azure Premium</span><span class="sxs-lookup"><span data-stu-id="2394f-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="2394f-104">Cache Redis di Azure ha diverse offerte di cache, che forniscono flessibilità nella scelta di hello della dimensione della cache e le funzionalità, incluse le funzionalità di livello Premium, ad esempio clustering, persistenza e il supporto di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="2394f-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="2394f-105">In questo articolo viene descritto come tooconfigure clustering in premium Azure Redis Cache istanza.</span><span class="sxs-lookup"><span data-stu-id="2394f-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="2394f-106">Per informazioni su altre funzionalità di cache premium, vedere [livello Premium di Cache Redis di Azure di introduzione toohello](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="2394f-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="2394f-107">Che cos'è un cluster Redis?</span><span class="sxs-lookup"><span data-stu-id="2394f-107">What is Redis Cluster?</span></span>
<span data-ttu-id="2394f-108">Cache Redis di Azure offre funzionalità di clustering Redis come nell' [implementazione in Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="2394f-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="2394f-109">Con Redis Cluster, si otterrà hello seguenti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="2394f-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="2394f-110">Hello possibilità tooautomatically dividere il set di dati tra più nodi.</span><span class="sxs-lookup"><span data-stu-id="2394f-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="2394f-111">Hello possibilità toocontinue operazioni quando un sottoinsieme di nodi hello si sono verificati errori o sono Impossibile toocommunicate con rest hello del cluster di hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="2394f-112">Maggiore velocità effettiva: velocità effettiva aumenta in modo lineare man mano che aumenta il numero di hello di partizioni.</span><span class="sxs-lookup"><span data-stu-id="2394f-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="2394f-113">Altre dimensioni della memoria: aumenta in modo lineare man mano che aumenta il numero di hello di partizioni.</span><span class="sxs-lookup"><span data-stu-id="2394f-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="2394f-114">Per altre informazioni su dimensioni, velocità effettiva e larghezza di banda delle cache premium, vedere [Quali offerte e dimensioni della Cache Redis è consigliabile usare?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="2394f-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="2394f-115">In Azure, Redis cluster viene offerto come un modello principale/replica in ogni partizione ha una coppia di principale/replica con replica in replica hello viene gestita dal servizio Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="2394f-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="2394f-116">Clustering</span><span class="sxs-lookup"><span data-stu-id="2394f-116">Clustering</span></span>
<span data-ttu-id="2394f-117">Il servizio cluster è stato attivato hello **nuova Cache Redis** pannello durante la creazione della cache.</span><span class="sxs-lookup"><span data-stu-id="2394f-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="2394f-118">Il servizio cluster è configurato su hello **Cluster Redis** blade.</span><span class="sxs-lookup"><span data-stu-id="2394f-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Clustering][redis-cache-clustering]

<span data-ttu-id="2394f-120">Possono esistere fino a partizioni too10 cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="2394f-121">Fare clic su **abilitato** e far scorrere il dispositivo di scorrimento hello o digitare un numero compreso tra 1 e 10 per **numero di partizioni** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="2394f-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="2394f-122">Ogni partizione è una coppia di cache principale/replica gestita da Azure e dimensioni totali di hello della cache di hello viene calcolata moltiplicando il numero di hello di partizioni per dimensioni della cache di hello selezionata nel piano tariffario hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Clustering][redis-cache-clustering-selected]

<span data-ttu-id="2394f-124">Dopo la creazione della cache di hello ci si connette tooit e usare semplicemente come una cache non cluster e Redis distribuisce i dati di hello in partizioni di Cache di hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="2394f-125">Se è diagnostica [abilitato](cache-how-to-monitor.md#enable-cache-diagnostics), le metriche acquisite separatamente per ogni partizione e può essere [visualizzati](cache-how-to-monitor.md) nel pannello Cache Redis hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="2394f-126">Sono richieste alcune lievi modifiche all'applicazione client quando le funzionalità di clustering vengono configurate.</span><span class="sxs-lookup"><span data-stu-id="2394f-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="2394f-127">Per ulteriori informazioni, vedere [devo toomake qualsiasi toouse applicazione di modifiche toomy client clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="2394f-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="2394f-128">Per il codice di esempio sull'utilizzo di clustering con client stackexchange. Redis hello, vedere hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) esempio.</span><span class="sxs-lookup"><span data-stu-id="2394f-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="2394f-129">Modificare dimensioni hello cluster in esecuzione cache premium</span><span class="sxs-lookup"><span data-stu-id="2394f-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="2394f-130">dimensione del cluster toochange hello in un premium in esecuzione la cache con clustering fare clic su abilitato, **dimensione del Cluster Redis** da hello **menu risorse**.</span><span class="sxs-lookup"><span data-stu-id="2394f-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="2394f-131">Mentre hello Azure Redis Cache Premium livello è stato rilasciato tooGeneral disponibilità, funzionalità di dimensioni del Cluster Redis hello è attualmente in anteprima.</span><span class="sxs-lookup"><span data-stu-id="2394f-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Dimensione del cluster Redis][redis-cache-redis-cluster-size]

<span data-ttu-id="2394f-133">dimensione del cluster toochange hello, utilizzare il dispositivo di scorrimento hello o digitare un numero compreso tra 1 e 10 hello **numero di partizioni** casella di testo e fare clic su **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="2394f-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="2394f-134">Ridimensionamento di un cluster esegue hello [migrazione](https://redis.io/commands/migrate) comando, che è un comando dispendiosa, pertanto, per un impatto minimo, si consiglia di eseguire questa operazione durante le ore non di punta.</span><span class="sxs-lookup"><span data-stu-id="2394f-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="2394f-135">Durante il processo di migrazione hello, si noterà un picco di carico del server.</span><span class="sxs-lookup"><span data-stu-id="2394f-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="2394f-136">Ridimensionamento di un cluster è un valore long processo in esecuzione e hello quantità di tempo dipende dalla hello numero di chiavi e le dimensioni dei valori di hello associati a tali chiavi.</span><span class="sxs-lookup"><span data-stu-id="2394f-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="2394f-137">Domande frequenti sul clustering</span><span class="sxs-lookup"><span data-stu-id="2394f-137">Clustering FAQ</span></span>
<span data-ttu-id="2394f-138">Hello elenco seguente contiene le risposte toocommonly domande frequenti su cluster di Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="2394f-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="2394f-139">È necessario toomake qualsiasi toouse applicazione di modifiche toomy client clustering?</span><span class="sxs-lookup"><span data-stu-id="2394f-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="2394f-140">Come vengono distribuite le chiavi in un cluster?</span><span class="sxs-lookup"><span data-stu-id="2394f-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="2394f-141">Che cos'è una dimensione della cache più grande hello che posso creare?</span><span class="sxs-lookup"><span data-stu-id="2394f-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="2394f-142">Tutti i client Redis supportano il clustering?</span><span class="sxs-lookup"><span data-stu-id="2394f-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="2394f-143">Come connettersi toomy cache quando il servizio cluster è abilitato?</span><span class="sxs-lookup"><span data-stu-id="2394f-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="2394f-144">È possibile connettersi direttamente toohello singole partizioni di my cache?</span><span class="sxs-lookup"><span data-stu-id="2394f-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="2394f-145">È possibile configurare il clustering per una cache creata in precedenza?</span><span class="sxs-lookup"><span data-stu-id="2394f-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="2394f-146">È possibile configurare il clustering per una cache Basic o Standard?</span><span class="sxs-lookup"><span data-stu-id="2394f-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="2394f-147">È possibile utilizzare il clustering con i provider di stato della sessione ASP.NET Redis e la memorizzazione nella cache di Output di hello?</span><span class="sxs-lookup"><span data-stu-id="2394f-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="2394f-148">Usando StackExchange.Redis e il clustering si ottengono eccezioni MOVE. Cosa fare?</span><span class="sxs-lookup"><span data-stu-id="2394f-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="2394f-149">È necessario toomake qualsiasi toouse applicazione di modifiche toomy client clustering?</span><span class="sxs-lookup"><span data-stu-id="2394f-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="2394f-150">Quando il clustering è abilitato, sarà disponibile solo il database 0.</span><span class="sxs-lookup"><span data-stu-id="2394f-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="2394f-151">Se l'applicazione client utilizza più database e tenta di tooread o scrittura database tooa diverso da 0, hello seguente eccezione viene generata.</span><span class="sxs-lookup"><span data-stu-id="2394f-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="2394f-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->``StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="2394f-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="2394f-153">Per altre informazioni, vedere la [specifica sul cluster Redis: subset implementato](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="2394f-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="2394f-154">Se si usa [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), è necessario usare la versione 1.0.481 o successiva.</span><span class="sxs-lookup"><span data-stu-id="2394f-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="2394f-155">La connessione della cache toohello utilizzando hello stesso [endpoint, porte e le chiavi](cache-configure.md#properties) utilizzati durante la connessione della cache tooa che non dispone di clustering abilitato.</span><span class="sxs-lookup"><span data-stu-id="2394f-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="2394f-156">Hello unica differenza è che tutte le letture e scritture devono essere eseguite toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="2394f-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="2394f-157">Altri client possono avere requisiti diversi.</span><span class="sxs-lookup"><span data-stu-id="2394f-157">Other clients may have different requirements.</span></span> <span data-ttu-id="2394f-158">Vedere [Tutti i client Redis supportano il clustering?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="2394f-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="2394f-159">Se l'applicazione usa più chiavi operazioni batch in un unico comando, tutte le chiavi devono trovarsi in hello stesso partizione.</span><span class="sxs-lookup"><span data-stu-id="2394f-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="2394f-160">le chiavi toolocate in hello stesso partizione, vedere [modalità sono le chiavi di distribuzione in un cluster?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="2394f-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="2394f-161">Se si usa il provider di stato della sessione ASP.NET Redis, è necessario usare la versione 2.0.1 o successiva.</span><span class="sxs-lookup"><span data-stu-id="2394f-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="2394f-162">Vedere [è possibile utilizzare il clustering con i provider di stato della sessione ASP.NET Redis e la memorizzazione nella cache di Output di hello?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="2394f-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="2394f-163">Come vengono distribuite le chiavi in un cluster?</span><span class="sxs-lookup"><span data-stu-id="2394f-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="2394f-164">Per ogni hello Redis [il modello di distribuzione di chiavi](http://redis.io/topics/cluster-spec#keys-distribution-model) documentazione: spazio della chiave hello è suddiviso in 16384 slot.</span><span class="sxs-lookup"><span data-stu-id="2394f-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="2394f-165">Ogni chiave è stato eseguito l'hashing e assegnato tooone di questi slot, cui sono distribuiti tra i nodi del cluster hello hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="2394f-166">È possibile configurare quale parte della chiave di hello è tooensure con hash che più chiavi si trovano nella stesso partizione con il tag di hash hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="2394f-167">Le chiavi con un tag - hash se qualsiasi parte della chiave di hello è racchiuso tra parentesi `{` e `}`, solo tale parte della chiave hello viene eseguito l'hashing per hello determinazione dello slot di hello hash di una chiave.</span><span class="sxs-lookup"><span data-stu-id="2394f-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="2394f-168">Ad esempio, hello dopo 3 chiavi potrebbe trovarsi in hello partizione stesso: `{key}1`, `{key}2`, e `{key}3` dal solo hello `key` parte del nome hello viene eseguito l'hashing.</span><span class="sxs-lookup"><span data-stu-id="2394f-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="2394f-169">Per un elenco completo di specifiche dei tag hash per le chiavi, vedere la pagina relativa ai [tag hash per le chiavi](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="2394f-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="2394f-170">Chiavi senza un tag di hash - nome della chiave intera hello viene utilizzato per l'hashing.</span><span class="sxs-lookup"><span data-stu-id="2394f-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="2394f-171">Ciò comporta una distribuzione uniforme statisticamente tra partizioni hello della cache di hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="2394f-172">Per ottimizzare le prestazioni e velocità effettiva, si consiglia di distribuire le chiavi di hello in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="2394f-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="2394f-173">Se si usano le chiavi con un tag di hash è chiavi hello tooensure di responsabilità dell'applicazione hello siano distribuite uniformemente.</span><span class="sxs-lookup"><span data-stu-id="2394f-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="2394f-174">Per altre informazioni, vedere le pagine relative al [modello di distribuzione delle chiavi](http://redis.io/topics/cluster-spec#keys-distribution-model), al [partizionamento orizzontale del cluster Redis](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding) e ai [tag hash per le chiavi](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="2394f-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="2394f-175">Per il codice di esempio sull'utilizzo di clustering e l'individuazione di chiavi in hello stesso partizione con client stackexchange. Redis hello, vedere hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) parte hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) esempio.</span><span class="sxs-lookup"><span data-stu-id="2394f-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="2394f-176">Che cos'è una dimensione della cache più grande hello che posso creare?</span><span class="sxs-lookup"><span data-stu-id="2394f-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="2394f-177">dimensione della cache premium più grande di Hello è 53 GB.</span><span class="sxs-lookup"><span data-stu-id="2394f-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="2394f-178">È possibile creare le partizioni too10 offrendo una dimensione massima di 530 GB.</span><span class="sxs-lookup"><span data-stu-id="2394f-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="2394f-179">Se è necessaria una dimensione maggiore, è possibile [farne richiesta](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="2394f-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="2394f-180">Per altre informazioni, vedere [Prezzi di Cache Redis di Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="2394f-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="2394f-181">Tutti i client Redis supportano il clustering?</span><span class="sxs-lookup"><span data-stu-id="2394f-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="2394f-182">In hello ora corrente, non tutti i client supportano Redis clustering.</span><span class="sxs-lookup"><span data-stu-id="2394f-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="2394f-183">StackExchange.Redis è uno dei client che supporta questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="2394f-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="2394f-184">Per ulteriori informazioni su altri client, vedere hello [Playing with cluster hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) sezione di hello [esercitazione cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="2394f-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="2394f-185">Se si utilizza il client stackexchange. Redis, assicurarsi di utilizzare più recente di hello [stackexchange. Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 o versione successiva per il clustering toowork correttamente.</span><span class="sxs-lookup"><span data-stu-id="2394f-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="2394f-186">Per altre informazioni in caso di problemi con le eccezioni MOVE, vedere la sezione relativa alle [eccezioni MOVE](#move-exceptions) .</span><span class="sxs-lookup"><span data-stu-id="2394f-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="2394f-187">Come connettersi toomy cache quando il servizio cluster è abilitato?</span><span class="sxs-lookup"><span data-stu-id="2394f-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="2394f-188">È possibile connettersi tooyour cache utilizzando hello stesso [endpoint](cache-configure.md#properties), [porte](cache-configure.md#properties), e [chiavi](cache-configure.md#access-keys) utilizzati durante la connessione della cache tooa che non dispone di clustering abilitato.</span><span class="sxs-lookup"><span data-stu-id="2394f-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="2394f-189">Redis gestisce hello clustering nel back-end hello in modo non si dispone di toomanage dal client.</span><span class="sxs-lookup"><span data-stu-id="2394f-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="2394f-190">È possibile connettersi direttamente toohello singole partizioni di my cache?</span><span class="sxs-lookup"><span data-stu-id="2394f-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="2394f-191">Questa operazione non è supportata ufficialmente.</span><span class="sxs-lookup"><span data-stu-id="2394f-191">This is not officially supported.</span></span> <span data-ttu-id="2394f-192">Ciò premesso, ogni partizione è costituita da una coppia di cache primaria/di replica nota complessivamente come un'istanza della cache.</span><span class="sxs-lookup"><span data-stu-id="2394f-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="2394f-193">È possibile connettersi a istanze di cache toothese tramite l'utilità di redis-cli hello hello [instabile](http://redis.io/download) ramo del repository di Redis hello in GitHub.</span><span class="sxs-lookup"><span data-stu-id="2394f-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="2394f-194">Questa versione implementa il supporto di base iniziali di hello `-c` passare.</span><span class="sxs-lookup"><span data-stu-id="2394f-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="2394f-195">Per ulteriori informazioni vedere [Playing with cluster hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) su [http://redis.io](http://redis.io) in hello [esercitazione cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="2394f-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="2394f-196">Per non ssl, utilizzare hello i comandi seguenti.</span><span class="sxs-lookup"><span data-stu-id="2394f-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="2394f-197">Per ssl, sostituire `1300N` con `1500N`.</span><span class="sxs-lookup"><span data-stu-id="2394f-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="2394f-198">È possibile configurare il clustering per una cache creata in precedenza?</span><span class="sxs-lookup"><span data-stu-id="2394f-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="2394f-199">Al momento è possibile solo abilitare il clustering durante la creazione di una cache.</span><span class="sxs-lookup"><span data-stu-id="2394f-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="2394f-200">È possibile modificare le dimensioni di cluster hello dopo la creazione di cache di hello, ma non è possibile aggiungere clustering tooa premium cache o rimuovere il servizio cluster da una cache premium dopo la creazione della cache di hello.</span><span class="sxs-lookup"><span data-stu-id="2394f-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="2394f-201">Una cache premium con il clustering abilitato e solo una partizione è diversa da una cache premium di hello stesse dimensioni con alcun tipo di clustering.</span><span class="sxs-lookup"><span data-stu-id="2394f-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="2394f-202">È possibile configurare il clustering per una cache Basic o Standard?</span><span class="sxs-lookup"><span data-stu-id="2394f-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="2394f-203">Il clustering è disponibile esclusivamente per le cache Premium.</span><span class="sxs-lookup"><span data-stu-id="2394f-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="2394f-204">È possibile utilizzare il clustering con i provider di stato della sessione ASP.NET Redis e la memorizzazione nella cache di Output di hello?</span><span class="sxs-lookup"><span data-stu-id="2394f-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="2394f-205">**Provider di cache di output Redis** : nessuna modifica necessaria.</span><span class="sxs-lookup"><span data-stu-id="2394f-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="2394f-206">**Provider di stato della sessione redis** -toouse clustering, è necessario utilizzare [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 o versione successiva o un'eccezione viene generata.</span><span class="sxs-lookup"><span data-stu-id="2394f-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="2394f-207">Si tratta di una modifica significativa. Per altre informazioni, vedere la pagina relativa ai [dettagli delle modifiche significative della versione 2.0.0](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="2394f-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="2394f-208">Usando StackExchange.Redis e il clustering si ottengono eccezioni MOVE. Cosa fare?</span><span class="sxs-lookup"><span data-stu-id="2394f-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="2394f-209">Se si usa StackExchange.Redis e si ricevono eccezioni `MOVE` quando si usa il clustering, assicurarsi di usare [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="2394f-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="2394f-210">Per istruzioni sulla configurazione del toouse di applicazioni .NET stackexchange. Redis, vedere [configurare i client della cache di hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="2394f-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2394f-211">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="2394f-211">Next steps</span></span>
<span data-ttu-id="2394f-212">Informazioni su come toouse premium più memorizzano nella cache le funzionalità.</span><span class="sxs-lookup"><span data-stu-id="2394f-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="2394f-213">Livello di introduzione toohello Premium di Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="2394f-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







