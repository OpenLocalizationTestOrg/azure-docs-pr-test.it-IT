---
title: aaaCreate i piani di ripristino per il failover e ripristino in Azure Site Recovery | Documenti Microsoft
description: Viene descritto come toocreate e personalizzare i piani di ripristino in Azure Site Recovery, toofail su e ripristinare le macchine virtuali e server fisici
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 09ca7719e92460b283947fdbe752e8654e5b9cab
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="592ac-103">Creare piani di ripristino</span><span class="sxs-lookup"><span data-stu-id="592ac-103">Create recovery plans</span></span>


<span data-ttu-id="592ac-104">L'articolo contiene informazioni sulla creazione e la personalizzazione dei piani di ripristino in [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="592ac-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="592ac-105">Inviare eventuali commenti o domande nella parte inferiore di hello di questo articolo, o di hello [forum sui servizi di ripristino di Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="592ac-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="592ac-106">Creare hello toodo piani di ripristino seguente:</span><span class="sxs-lookup"><span data-stu-id="592ac-106">Create recovery plans toodo hello following:</span></span>

* <span data-ttu-id="592ac-107">Definire gruppi di computer che eseguono il failover insieme e quindi si avviano contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="592ac-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="592ac-108">Creare le dipendenze tra i computer raggruppandoli in un gruppo di piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="592ac-109">Ad esempio, toofail su e visualizzare una specifica applicazione, si raggruppano le macchine virtuali di hello per l'applicazione in hello stesso gruppo di piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-109">For example, toofail over and bring up a specific application, you group all of hello VMs for that application into hello same recovery plan group.</span></span>
* <span data-ttu-id="592ac-110">Eseguire un failover.</span><span class="sxs-lookup"><span data-stu-id="592ac-110">Run a failover.</span></span> <span data-ttu-id="592ac-111">È possibile eseguire un failover non pianificato o un test, pianificato, in un piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="592ac-112">Creare un piano di ripristino</span><span class="sxs-lookup"><span data-stu-id="592ac-112">Create a recovery plan</span></span>

1. <span data-ttu-id="592ac-113">Fare clic su **Piani di ripristino** > **Crea piano di ripristino**.</span><span class="sxs-lookup"><span data-stu-id="592ac-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="592ac-114">Specificare un nome per il piano di ripristino di hello e un'origine e destinazione.</span><span class="sxs-lookup"><span data-stu-id="592ac-114">Specify a name for hello recovery plan, and a source and target.</span></span> <span data-ttu-id="592ac-115">percorso di origine di Hello deve avere le macchine virtuali che sono abilitate per il failover e ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-115">hello source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="592ac-116">Per la replica tooVMM VMM, selezionare **tipo di origine** > **VMM**e hello di origine e il server VMM di destinazione.</span><span class="sxs-lookup"><span data-stu-id="592ac-116">For VMM tooVMM replication, select **Source Type** > **VMM**, and hello source and target VMM servers.</span></span> <span data-ttu-id="592ac-117">Fare clic su **Hyper-V** toosee cloud protetti.</span><span class="sxs-lookup"><span data-stu-id="592ac-117">Click **Hyper-V** toosee clouds that are protected.</span></span>
    - <span data-ttu-id="592ac-118">Per VMM tooAzure, selezionare **tipo di origine** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="592ac-118">For VMM tooAzure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="592ac-119">Server VMM di origine selezionare hello e **Azure** come destinazione di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-119">Select hello source VMM server, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="592ac-120">Per Hyper-V replica tooAzure (senza VMM), selezionare **tipo di origine** > **sito Hyper-V**.</span><span class="sxs-lookup"><span data-stu-id="592ac-120">For Hyper-V replication tooAzure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="592ac-121">Sito hello selezionare come origine di hello, e **Azure** come destinazione di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-121">Select hello site as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="592ac-122">Per una VM VMware o fisico locale tooAzure server, selezionare un server di configurazione come origine di hello, e **Azure** come destinazione di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-122">For a VMware VM or a physical on-premises server tooAzure, select a configuration server as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="592ac-123">Per un piano di ripristino di Azure tooAzure, selezionare una regione di Azure come origine di hello e un'area secondaria di Azure come destinazione di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-123">For a Azure tooAzure recovery plan, select a Azure region as hello source, and a secondary Azure region as hello target.</span></span> <span data-ttu-id="592ac-124">aree di Azure secondario Hello sono che protetti solo le macchine virtuali toowhich.</span><span class="sxs-lookup"><span data-stu-id="592ac-124">hello secondary Azure regions are only those toowhich virtual machines are protected.</span></span>
2. <span data-ttu-id="592ac-125">In **selezionare le macchine virtuali**, selezionare le macchine virtuali hello (o gruppo di replica) che si desidera tooadd toohello gruppo predefinito (gruppo 1) nel piano di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-125">In **Select virtual machines**, select hello virtual machines (or replication group) that you want tooadd toohello default group (Group 1) in hello recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="592ac-126">Personalizzare ed estendere i piani di ripristino</span><span class="sxs-lookup"><span data-stu-id="592ac-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="592ac-127">È possibile personalizzare ed estendere i piani di ripristino:</span><span class="sxs-lookup"><span data-stu-id="592ac-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="592ac-128">**Aggiungere nuovi gruppi**, aggiungere il gruppo predefinito toohello di ripristino aggiuntivi piano gruppi (backup tooseven) e quindi aggiungere ulteriori macchine o replica gruppi toothose gruppi del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-128">**Add new groups**—Add additional recovery plan groups (up tooseven) toohello default group, and then add more machines or replication groups toothose recovery plan groups.</span></span> <span data-ttu-id="592ac-129">I gruppi sono numerati in ordine di hello in cui viene aggiunta.</span><span class="sxs-lookup"><span data-stu-id="592ac-129">Groups are numbered in hello order in which you add them.</span></span> <span data-ttu-id="592ac-130">Una macchina virtuale o un gruppo di replica può essere incluso solo in un gruppo del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="592ac-131">**Aggiungere un'azione manuale**: è possibile aggiungere azioni manuali da eseguire prima o dopo un gruppo del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="592ac-132">Quando viene eseguito il piano di ripristino di hello, si ferma in corrispondenza punto hello in corrispondenza del quale è stata inserita azione manuale hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-132">When hello recovery plan runs, it stops at hello point at which you inserted hello manual action.</span></span> <span data-ttu-id="592ac-133">Una finestra di dialogo viene richiesto che è stata completata l'azione manuale hello toospecify.</span><span class="sxs-lookup"><span data-stu-id="592ac-133">A dialog box prompts you toospecify that hello manual action was completed.</span></span>
- <span data-ttu-id="592ac-134">**Aggiungere uno script**: è possibile aggiungere script che vengono eseguiti prima o dopo un gruppo del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="592ac-135">Quando si aggiunge uno script, viene aggiunto un nuovo set di azioni per il gruppo di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-135">When you add a script, it adds a new set of actions for hello group.</span></span> <span data-ttu-id="592ac-136">Ad esempio, è verrà creato un set di passaggi preliminari per gruppo 1 con nome hello: gruppo 1: passaggi preliminari.</span><span class="sxs-lookup"><span data-stu-id="592ac-136">For example, a set of pre-steps for Group 1 will be created with hello name: Group 1: pre-steps.</span></span> <span data-ttu-id="592ac-137">Tutti i passaggi preliminari verranno elencati in questo set.</span><span class="sxs-lookup"><span data-stu-id="592ac-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="592ac-138">È possibile aggiungere uno script nel sito primario di hello solo se si dispone di un server VMM distribuito.</span><span class="sxs-lookup"><span data-stu-id="592ac-138">You can only add a script on hello primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="592ac-139">**Aggiungere runbook di Azure**: è possibile estendere i piani di ripristino con i runbook di Azure.</span><span class="sxs-lookup"><span data-stu-id="592ac-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="592ac-140">Ad esempio, tooautomate attività o il ripristino di passo-passo toocreate.</span><span class="sxs-lookup"><span data-stu-id="592ac-140">For example, tooautomate tasks, or toocreate single-step recovery.</span></span> <span data-ttu-id="592ac-141">[Altre informazioni](site-recovery-runbook-automation.md)</span><span class="sxs-lookup"><span data-stu-id="592ac-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="592ac-142">Aggiungere script</span><span class="sxs-lookup"><span data-stu-id="592ac-142">Add scripts</span></span>

<span data-ttu-id="592ac-143">È possibile usare gli script di PowerShell nei piani di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="592ac-144">Verificare che gli script utilizzano blocchi try-catch in modo che hello eccezioni vengono gestite normalmente.</span><span class="sxs-lookup"><span data-stu-id="592ac-144">Ensure that scripts use try-catch blocks so that hello exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="592ac-145">Se si verifica un'eccezione nello script hello, arresta l'esecuzione e attività hello viene indicata come non riuscita.</span><span class="sxs-lookup"><span data-stu-id="592ac-145">If there is an exception in hello script, it stops running and hello task shows as failed.</span></span>
    - <span data-ttu-id="592ac-146">Se si verifica un errore, non viene eseguita qualsiasi parte rimanente dello script hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-146">If an error occurs, any remaining part of hello script doesn't run.</span></span>
    - <span data-ttu-id="592ac-147">Se si verifica un errore quando si esegue un failover non pianificato, il piano di ripristino hello continua.</span><span class="sxs-lookup"><span data-stu-id="592ac-147">If an error occurs when you run an unplanned failover, hello recovery plan continues.</span></span>
    - <span data-ttu-id="592ac-148">Se si verifica un errore quando si esegue un failover pianificato, il piano di ripristino hello arresta.</span><span class="sxs-lookup"><span data-stu-id="592ac-148">If an error occurs when you run a planned failover, hello recovery plan stops.</span></span> <span data-ttu-id="592ac-149">È necessario toofix hello script, verificare che il funzionamento sia quello previsto e quindi eseguire di nuovo piano di ripristino di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-149">You need toofix hello script, check that it runs as expected, and then run hello recovery plan again.</span></span>
- <span data-ttu-id="592ac-150">comando Write-Host Hello non funziona in uno script di piano di ripristino e hello script avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="592ac-150">hello Write-Host command doesn’t work in a recovery plan script, and hello script will fail.</span></span> <span data-ttu-id="592ac-151">l'output di toocreate, creare uno script proxy che a sua volta esegue lo script principale.</span><span class="sxs-lookup"><span data-stu-id="592ac-151">toocreate output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="592ac-152">Assicurarsi che tutto l'output viene reindirizzato tramite hello >> comando.</span><span class="sxs-lookup"><span data-stu-id="592ac-152">Make sure that all output is piped out using hello >> command.</span></span>
  * <span data-ttu-id="592ac-153">Timeout script Hello se non viene restituito all'interno di 600 secondi.</span><span class="sxs-lookup"><span data-stu-id="592ac-153">hello script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="592ac-154">Se scritto tooSTDERR, lo script di hello viene classificato come non riuscita.</span><span class="sxs-lookup"><span data-stu-id="592ac-154">If anything is written out tooSTDERR, hello script is classified as failed.</span></span> <span data-ttu-id="592ac-155">Queste informazioni vengono visualizzate nei dettagli di esecuzione di script hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-155">This information is displayed in hello script execution details.</span></span>

<span data-ttu-id="592ac-156">Se si usa VMM nella distribuzione:</span><span class="sxs-lookup"><span data-stu-id="592ac-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="592ac-157">Gli script in un piano di ripristino eseguite nel contesto di hello di hello account del servizio VMM.</span><span class="sxs-lookup"><span data-stu-id="592ac-157">Scripts in a recovery plan run in hello context of hello VMM Service account.</span></span> <span data-ttu-id="592ac-158">Verificare che l'account disponga delle autorizzazioni di lettura per la condivisione di hello remoto in cui hello script si trova.</span><span class="sxs-lookup"><span data-stu-id="592ac-158">Make sure this account has Read permissions for hello remote share on which hello script is located.</span></span> <span data-ttu-id="592ac-159">Test hello toorun di script a livello di privilegi di account del servizio VMM hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-159">Test hello script toorun at hello VMM service account privilege level.</span></span>
* <span data-ttu-id="592ac-160">I cmdlet di VMM vengono forniti in un modulo di Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="592ac-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="592ac-161">modulo Hello viene installato quando si installa la console di VMM hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-161">hello module is installed when you install hello VMM console.</span></span> <span data-ttu-id="592ac-162">Può essere caricato nello script, hello comando nello script hello seguente:</span><span class="sxs-lookup"><span data-stu-id="592ac-162">It can be loaded into your script, using hello following command in hello script:</span></span>
   - <span data-ttu-id="592ac-163">Import-Module -Name virtualmachinemanager.</span><span class="sxs-lookup"><span data-stu-id="592ac-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="592ac-164">[Altre informazioni](https://technet.microsoft.com/library/hh875013.aspx).</span><span class="sxs-lookup"><span data-stu-id="592ac-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="592ac-165">Assicurarsi di disporre di almeno un server di libreria nella distribuzione di VMM.</span><span class="sxs-lookup"><span data-stu-id="592ac-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="592ac-166">Per impostazione predefinita, percorso di condivisione di libreria hello per un server VMM si trova in locale nel server VMM, con il nome di cartella hello MSCVMMLibrary hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-166">By default, hello library share path for a VMM server is located locally on hello VMM server, with hello folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="592ac-167">Se il percorso della condivisione di libreria è remoto (o locale, ma non condiviso con MSCVMMLibrary), configurare una condivisione di hello come segue (utilizzando \\libserver2.contoso.com\share\ come esempio):</span><span class="sxs-lookup"><span data-stu-id="592ac-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure hello share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="592ac-168">Aprire l'Editor del Registro di sistema hello e passare troppo**HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure sito Recovery\Registration**.</span><span class="sxs-lookup"><span data-stu-id="592ac-168">Open hello Registry Editor and navigate too**HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="592ac-169">Modificare il valore di hello **ScriptLibraryPath** e inserirlo come \\libserver2.contoso.com\share\.</span><span class="sxs-lookup"><span data-stu-id="592ac-169">Edit hello value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="592ac-170">Specificare hello FQDN completo.</span><span class="sxs-lookup"><span data-stu-id="592ac-170">Specify hello full FQDN.</span></span> <span data-ttu-id="592ac-171">Fornire il percorso della condivisione toohello di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="592ac-171">Provide permissions toohello share location.</span></span>
      * <span data-ttu-id="592ac-172">Assicurarsi di testare lo script hello con un account utente che ha hello stesso account del servizio autorizzazioni come hello VMM.</span><span class="sxs-lookup"><span data-stu-id="592ac-172">Ensure that you test hello script with a user account that has hello same permissions as hello VMM service account.</span></span> <span data-ttu-id="592ac-173">Verifica che autonomi testati gli script eseguiti hello stesso modo come vengono riprodotti in piani di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-173">This checks that standalone tested scripts run in hello same way as they will in recovery plans.</span></span> <span data-ttu-id="592ac-174">Nel server VMM, hello impostare hello esecuzione criteri toobypass come segue:</span><span class="sxs-lookup"><span data-stu-id="592ac-174">On hello VMM server, set hello execution policy toobypass as follows:</span></span>
        * <span data-ttu-id="592ac-175">Aprire la console di Windows PowerShell a 64 bit hello con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="592ac-175">Open hello 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="592ac-176">Digitare: **Set-executionpolicy bypass**.</span><span class="sxs-lookup"><span data-stu-id="592ac-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="592ac-177">[Altre informazioni](https://technet.microsoft.com/library/ee176961.aspx)</span><span class="sxs-lookup"><span data-stu-id="592ac-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-tooa-plan"></a><span data-ttu-id="592ac-178">Aggiungere uno script o un piano di azione manuale tooa</span><span class="sxs-lookup"><span data-stu-id="592ac-178">Add a script or manual action tooa plan</span></span>

<span data-ttu-id="592ac-179">Dopo aver aggiunto le macchine virtuali o tooit di gruppi di replica e il piano di hello creato, è possibile aggiungere un gruppo piano di ripristino di uno script toohello predefinito.</span><span class="sxs-lookup"><span data-stu-id="592ac-179">You can add a script toohello default recovery plan group after you've added VMs or replication groups tooit, and created hello plan.</span></span>

1. <span data-ttu-id="592ac-180">Piano di ripristino hello aperto.</span><span class="sxs-lookup"><span data-stu-id="592ac-180">Open hello recovery plan.</span></span>
2. <span data-ttu-id="592ac-181">Fare clic su un elemento hello **passaggio** elenco e quindi fare clic su **Script** o **azione manuale**.</span><span class="sxs-lookup"><span data-stu-id="592ac-181">Click an item in hello **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="592ac-182">Specificare se uno script di hello tooadd toowant o azione prima o dopo hello elemento selezionato.</span><span class="sxs-lookup"><span data-stu-id="592ac-182">Specify whether toowant tooadd hello script or action before or after hello selected item.</span></span> <span data-ttu-id="592ac-183">Hello utilizzare **Sposta su** e **Sposta giù** pulsanti, posizione hello toomove dello script hello verso l'alto o verso il basso.</span><span class="sxs-lookup"><span data-stu-id="592ac-183">Use hello **Move Up** and **Move Down**  buttons, toomove hello position of hello script up or down.</span></span>
4. <span data-ttu-id="592ac-184">Se si aggiunge uno script VMM, selezionare **Failover tooVMM script**.</span><span class="sxs-lookup"><span data-stu-id="592ac-184">If you add a VMM script, select **Failover tooVMM script**.</span></span> <span data-ttu-id="592ac-185">In **percorso dello Script**, condivisione toohello di tipo hello percorso relativo.</span><span class="sxs-lookup"><span data-stu-id="592ac-185">In **Script Path**, type hello relative path toohello share.</span></span> <span data-ttu-id="592ac-186">Nell'esempio VMM hello seguente, specificare il percorso di hello: **\rpscripts\rpscript.ps1.**.</span><span class="sxs-lookup"><span data-stu-id="592ac-186">In hello VMM example below, you specify hello path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="592ac-187">Se si aggiunge un'automazione di Azure esegue libro, specificare l'account di automazione di Azure hello in cui hello runbook è lo script del runbook di Azure appropriato hello individuare e selezionare.</span><span class="sxs-lookup"><span data-stu-id="592ac-187">If you add an Azure automation run book, specify hello Azure Automation account in which hello runbook is located, and select hello appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="592ac-188">Eseguire un failover del piano di ripristino hello, toomake che hello script funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="592ac-188">Do a failover of hello recovery plan, toomake sure hello script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="592ac-189">Aggiungere uno script VMM</span><span class="sxs-lookup"><span data-stu-id="592ac-189">Add a VMM script</span></span>

<span data-ttu-id="592ac-190">Se si dispone di un sito di origine VMM, si può creare uno script nel server VMM hello e includerla nel piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="592ac-190">If you have a VMM source site, you can create a script on hello VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="592ac-191">Creare una nuova cartella nella condivisione di libreria hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-191">Create a new folder in hello library share.</span></span> <span data-ttu-id="592ac-192">Ad esempio, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="592ac-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="592ac-193">Posizionarlo su origine hello e i server VMM di destinazione.</span><span class="sxs-lookup"><span data-stu-id="592ac-193">Place it on hello source and target VMM servers.</span></span>
2. <span data-ttu-id="592ac-194">Creare script hello (ad esempio RPScript) e verificare che funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="592ac-194">Create hello script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="592ac-195">Posizionare script hello in posizione hello \<VMMServerName > \MSSCVMMLibrary, nei server VMM di origine e destinazione di hello.</span><span class="sxs-lookup"><span data-stu-id="592ac-195">Place hello script in hello location \<VMMServerName>\MSSCVMMLibrary, on hello source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="592ac-196">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="592ac-196">Next steps</span></span>

<span data-ttu-id="592ac-197">[Altre informazioni](site-recovery-failover.md) sull'esecuzione dei failover.</span><span class="sxs-lookup"><span data-stu-id="592ac-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>
