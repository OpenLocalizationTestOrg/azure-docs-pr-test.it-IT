---
title: Servizi Cloud con Application Insights aaaTroubleshoot | Documenti Microsoft
description: Informazioni su come servizio cloud tootroubleshoot problemi utilizzando i dati di Application Insights tooprocess da diagnostica di Azure.
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 972924d9e6d1fe33d5c19b006d482de52ffb0ef7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="0d0e1-103">Risoluzione dei problemi di Servizi Cloud tramite Application Insights</span><span class="sxs-lookup"><span data-stu-id="0d0e1-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="0d0e1-104">Con [Azure SDK 2.8](https://azure.microsoft.com/downloads/) ed estensione di diagnostica di Azure 1.5, è possibile inviare i dati di diagnostica di Azure per il servizio Cloud direttamente tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly tooApplication Insights.</span></span> <span data-ttu-id="0d0e1-105">Hello log raccolti da diagnostica di Azure&mdash;inclusi i log applicazioni, registri eventi di Windows, i log ETW e i contatori delle prestazioni&mdash;possono essere inviati tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-105">hello logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent tooApplication Insights.</span></span> <span data-ttu-id="0d0e1-106">È quindi possibile visualizzare queste informazioni nell'interfaccia utente del portale Application Insights hello.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-106">You can then visualize this information in hello Application Insights portal UI.</span></span> <span data-ttu-id="0d0e1-107">È quindi possibile utilizzare hello Application Insights SDK tooget approfondite metriche e i registri che provengono da dell'applicazione, nonché sistema hello e a livello di infrastruttura, i dati provenienti da diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-107">You can then use hello Application Insights SDK tooget insights into metrics and logs that come from your application, as well as hello system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-toosend-data-tooapplication-insights"></a><span data-ttu-id="0d0e1-108">Configurare diagnostica Azure toosend dati tooApplication Insights</span><span class="sxs-lookup"><span data-stu-id="0d0e1-108">Configure Azure Diagnostics toosend data tooApplication Insights</span></span>
<span data-ttu-id="0d0e1-109">Seguire questi tooset passaggi backup il tooApplication dati relativo a cloud service progetto toosend diagnostica di Azure Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-109">Follow these steps tooset up your cloud service project toosend Azure Diagnostics data tooApplication Insights.</span></span>

1. <span data-ttu-id="0d0e1-110">In Esplora soluzioni di Visual Studio, fare doppio clic su un ruolo e scegliere **proprietà** progettazione ruoli di hello tooopen.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** tooopen hello Role designer.</span></span>

    ![Proprietà del ruolo di Esplora soluzioni][1]

2. <span data-ttu-id="0d0e1-112">In hello **diagnostica** sezione di progettazione ruoli hello, seleziona hello **inviare dati di diagnostica tooApplication Insights** opzione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-112">In hello **Diagnostics** section of hello Role designer, select hello **Send diagnostics data tooApplication Insights** option.</span></span>

    ![Progettazione ruoli invia la diagnostica tooapplication comprensione dei dati][2]

3. <span data-ttu-id="0d0e1-114">In hello finestra di dialogo visualizzata selezionare risorsa di Application Insights hello che si desidera toosend hello Azure dati di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-114">In hello dialog box that pops up, select hello Application Insights resource that you want toosend hello Azure diagnostics data to.</span></span> <span data-ttu-id="0d0e1-115">la finestra di dialogo Hello consente tooselect una risorsa di Application Insights esistente dalla sottoscrizione o toomanually specificare una chiave di strumentazione per una risorsa di Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-115">hello dialog box allows you tooselect an existing Application Insights resource from your subscription or toomanually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="0d0e1-116">Per altre informazioni sulla creazione di una risorsa di Application Insights, vedere [Creare una nuova risorsa di Application Insights](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="0d0e1-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![selezionare una risorsa di Application Insights][3]

    <span data-ttu-id="0d0e1-118">Dopo aver aggiunto la risorsa di Application Insights hello, chiave di strumentazione hello per la risorsa viene archiviata come impostazione di configurazione del servizio con nome hello **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-118">Once you have added hello Application Insights resource, hello instrumentation key for that resource is stored as a service configuration setting with hello name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="0d0e1-119">È possibile modificare questa impostazione di configurazione per ogni configurazione del servizio o ambiente.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="0d0e1-120">toodo in tal caso, selezionare una configurazione diversa da hello **configurazione del servizio** elenco e specificare una nuova chiave di strumentazione per la configurazione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-120">toodo so, select a different configuration from hello **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![selezionare una configurazione del servizio][4]

    <span data-ttu-id="0d0e1-122">Hello **APPINSIGHTS_INSTRUMENTATIONKEY** impostazione di configurazione viene utilizzata dall'estensione di diagnostica di Visual Studio tooconfigure hello hello appropriato Application Insights informazioni sulle risorse durante la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-122">hello **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="0d0e1-123">impostazione di configurazione di Hello è un modo pratico di definizione di chiavi di strumentazione diversi per le configurazioni di servizio diverso.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-123">hello configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="0d0e1-124">Visual Studio verrà convertire tale impostazione e inserirlo hello diagnostica configurazione pubblica dell'estensione hello durante il processo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-124">Visual Studio will translate that setting and insert it into hello diagnostics extension public configuration during hello publish process.</span></span> <span data-ttu-id="0d0e1-125">processo di hello toosimplify di configurazione dell'estensione di diagnostica hello con PowerShell, output del pacchetto hello da Visual Studio contiene anche hello pubblico XML di configurazione con chiave appropriata di strumentazione di Application Insights hello.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-125">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML with hello appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="0d0e1-126">file di configurazione pubblica Hello vengono creati nella cartella estensioni hello e seguire pattern hello *PaaSDiagnostics.&lt; RoleName&gt;. Paasdiagnostics.<NomeRuolo>.pubconfig.XML*.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-126">hello public config files are created in hello Extensions folder and follow hello pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="0d0e1-127">Tutte le distribuzioni basate su PowerShell possono usare toomap questo modello ogni ruolo di tooa di configurazione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-127">Any PowerShell-based deployments can use this pattern toomap each configuration tooa role.</span></span>

4) <span data-ttu-id="0d0e1-128">tooconfigure diagnostica Windows Azure toosend tutti i log a livello di errore e i contatori delle prestazioni raccolti da hello diagnostica Windows Azure agente tooApplication informazioni dettagliate, abilitare hello **inviare dati di diagnostica tooApplication Insights** opzione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-128">tooconfigure Azure diagnostics toosend all performance counters and error-level logs collected by hello Azure diagnostics agent tooApplication Insights, enable hello **Send diagnostics data tooApplication Insights** option.</span></span> 

    <span data-ttu-id="0d0e1-129">Se si desidera toofurther configurare quali dati vengono inviati tooApplication Insights, è necessario modificare manualmente hello *wadcfgx* file per ogni ruolo.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-129">If you want toofurther configure what data is sent tooApplication Insights, you must manually edit hello *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="0d0e1-130">Vedere [tooApplication dati di diagnostica di Azure configurare toosend Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn ulteriori informazioni sull'aggiornamento manuale configurazione hello.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-130">See [Configure Azure Diagnostics toosend data tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn more about manually updating hello configuration.</span></span>

<span data-ttu-id="0d0e1-131">Quando il servizio di cloud hello è configurato toosend diagnostica Windows Azure dati tooapplication insights, è possibile distribuirlo tooAzure in genere, assicurandosi di hello estensione diagnostica di Azure è abilitata.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-131">When hello cloud service is configured toosend Azure diagnostics data tooapplication insights, you can deploy it tooAzure normally, making sure hello Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="0d0e1-132">Per altre informazioni, vedere [Pubblicazione di un servizio cloud di Azure con Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="0d0e1-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="0d0e1-133">Visualizzazione dei dati del servizio Diagnostica di Azure in Application Insights</span><span class="sxs-lookup"><span data-stu-id="0d0e1-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="0d0e1-134">Hello telemetria di diagnostica Azure viene visualizzato nella hello Application Insights risorsa configurata per il servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-134">hello Azure diagnostic telemetry shows up in hello Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="0d0e1-135">Mapping tra tipi di log di diagnostica Windows Azure concetti Insights tooApplication nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="0d0e1-135">Azure diagnostics log types map tooApplication Insights concepts in these ways:</span></span>

* <span data-ttu-id="0d0e1-136">I contatori delle prestazioni vengono visualizzati come metriche personalizzate in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="0d0e1-137">I registri eventi di Windows vengono visualizzati come tracce ed eventi personalizzati in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="0d0e1-138">I log applicazioni, i log ETW e gli eventuali log dell'infrastruttura di diagnostica vengono visualizzati come tracce in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="0d0e1-139">tooview dati di diagnostica di Azure in Application Insights, effettuare una delle seguenti hello:</span><span class="sxs-lookup"><span data-stu-id="0d0e1-139">tooview Azure diagnostics data in Application Insights, do one of hello following:</span></span>

* <span data-ttu-id="0d0e1-140">Utilizzare [Esplora metriche](../application-insights/app-insights-metrics-explorer.md) toovisualize un miglioramento delle prestazioni personalizzato contatori o i conteggi di diversi tipi di eventi di registro eventi di Windows.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Metriche personalizzate in Esplora metriche][5]

* <span data-ttu-id="0d0e1-142">Utilizzare [ricerca](../application-insights/app-insights-diagnostic-search.md) toosearch attraverso i registri di traccia hello inviato da diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) toosearch across hello  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="0d0e1-143">Ad esempio, se un'eccezione non gestita ha causato toocrash ruolo hello e riciclo, informazioni sull'eccezione hello dell'elenco di hello *applicazione* canale di *registro eventi di Windows*.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-143">For example, if an unhandled exception has caused hello role toocrash and recycle, information about hello exception shows up in hello *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="0d0e1-144">È possibile utilizzare ricerca toolook hello errore registro eventi di Windows e ottenere hello completo dello stack per determinare causa hello eccezione toohelp trova hello del problema hello.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-144">You can use search toolook at hello Windows Event Log error and get hello full stack trace for hello exception toohelp find hello cause of hello issue.</span></span>

    ![Cerca tracce][6]

## <a name="next-steps"></a><span data-ttu-id="0d0e1-146">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="0d0e1-146">Next Steps</span></span>
* <span data-ttu-id="0d0e1-147">[Aggiungere il servizio cloud di hello Application Insights SDK tooyour](../application-insights/app-insights-cloudservices.md) toosend dati sulle richieste, eccezioni, dipendenze e qualsiasi telemetria personalizzata dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-147">[Add hello Application Insights SDK tooyour cloud service](../application-insights/app-insights-cloudservices.md) toosend data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="0d0e1-148">In combinazione con dati di diagnostica Azure hello, queste informazioni è possibile ottenere una visione completa dell'applicazione e del sistema, tutto in hello stessa risorsa di Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0d0e1-148">When combined with hello Azure Diagnostics data, this information you can get a complete view of your application and system, all in hello same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png
