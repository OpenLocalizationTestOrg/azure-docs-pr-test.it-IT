---
title: "lo stato di avanzamento di un processo contando le attività dallo stato - Azure Batch aaaMonitor | Documenti Microsoft"
description: "Monitorare lo stato di hello di un processo chiamando operazione Ottieni conteggio attività hello toocount attività per un processo. È possibile ottenere un conteggio delle attività attive, in esecuzione e completate e delle attività riuscite o non riuscite."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/02/2017
ms.author: tamram
ms.openlocfilehash: 03957d8a3d678bf44587f3bc7f988a76885c2af0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="count-tasks-by-state-toomonitor-a-jobs-progress-preview"></a><span data-ttu-id="133c9-104">Conteggio attività toomonitor stato avanzamento di un processo (anteprima)</span><span class="sxs-lookup"><span data-stu-id="133c9-104">Count tasks by state toomonitor a job's progress (Preview)</span></span>

<span data-ttu-id="133c9-105">Azure Batch offre un modo efficiente toomonitor hello lo stato di avanzamento di un processo durante l'esecuzione delle relative attività.</span><span class="sxs-lookup"><span data-stu-id="133c9-105">Azure Batch provides an efficient way toomonitor hello progress of a job as it runs its tasks.</span></span> <span data-ttu-id="133c9-106">È possibile chiamare hello [Ottieni conteggio attività] [ rest_get_task_counts] toofind operazione quante attività sono in uno stato attivo, in esecuzione o completato e quanti hanno esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="133c9-106">You can call hello [Get Task Counts][rest_get_task_counts] operation toofind out how many tasks are in an active, running, or completed state, and how many have succeeded or failed.</span></span> <span data-ttu-id="133c9-107">Contando il numero di hello di attività in ogni stato, è più facilmente possibile visualizzare utente tooa di stato di avanzamento del processo di hello o rilevare ritardi imprevisti o errori che possono influire sul processo hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-107">By counting hello number of tasks in each state, you can more easily display hello job's progress tooa user, or detect unexpected delays or failures that may affect hello job.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="133c9-108">Ciao operazione Ottieni conteggio attività è attualmente in anteprima e non è ancora disponibile in Azure per enti pubblici, Cina di Azure e Azure in Germania.</span><span class="sxs-lookup"><span data-stu-id="133c9-108">hello Get Task Counts operation is currently in preview, and is not yet available in Azure Government, Azure China, and Azure Germany.</span></span> 
>
>

## <a name="how-tasks-are-counted"></a><span data-ttu-id="133c9-109">Come vengono conteggiate le attività</span><span class="sxs-lookup"><span data-stu-id="133c9-109">How tasks are counted</span></span>

<span data-ttu-id="133c9-110">operazione Ottieni conteggio attività Hello conta le attività dallo stato, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="133c9-110">hello Get Task Counts operation counts tasks by state, as follows:</span></span>

- <span data-ttu-id="133c9-111">Un'attività viene considerata **active** quando è in coda e in grado di toorun, ma non è attualmente assegnato tooa del nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="133c9-111">A task is counted as **active** when it is queued and able toorun, but is not currently assigned tooa compute node.</span></span> <span data-ttu-id="133c9-112">Un'attività viene conteggiata come **attiva** anche se dipende da un'attività padre non ancora completata.</span><span class="sxs-lookup"><span data-stu-id="133c9-112">A task is also counted as **active** if it is dependent on a parent task that has not yet completed.</span></span> <span data-ttu-id="133c9-113">Per ulteriori informazioni sulle dipendenze delle attività, vedere [creare relazioni tra attività attività toorun che dipendono da altre attività](batch-task-dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="133c9-113">For more information on task dependencies, see [Create task dependencies toorun tasks that depend on other tasks](batch-task-dependencies.md).</span></span> 
- <span data-ttu-id="133c9-114">Un'attività viene considerata **esecuzione** quando è stato assegnato il nodo di calcolo tooa, ma non è ancora stata completata.</span><span class="sxs-lookup"><span data-stu-id="133c9-114">A task is counted as **running** when it has been assigned tooa compute node, but has not yet completed.</span></span> <span data-ttu-id="133c9-115">Un'attività viene considerata **esecuzione** quando lo stato è `preparing` o `running`, come indicato dal hello [ottenere informazioni su un'attività] [ rest_get_task] operazione.</span><span class="sxs-lookup"><span data-stu-id="133c9-115">A task is counted as **running** when its state is either `preparing` or `running`, as indicated by hello [Get information about a task][rest_get_task] operation.</span></span>
- <span data-ttu-id="133c9-116">Un'attività viene considerata **completato** quando non è più idoneo toorun.</span><span class="sxs-lookup"><span data-stu-id="133c9-116">A task is counted as **completed** when it is no longer eligible toorun.</span></span> <span data-ttu-id="133c9-117">Un'attività conteggiata come **completata** è stata in genere completata correttamente o non è riuscita e ha anche superato il limite di nuovi tentativi.</span><span class="sxs-lookup"><span data-stu-id="133c9-117">A task counted as **completed** has typically either finished successfully, or has finished unsuccessfully and has also exhausted its retry limit.</span></span> 

<span data-ttu-id="133c9-118">Hello operazione Ottieni conteggio attività indica inoltre il numero di attività hanno esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="133c9-118">hello Get Task Counts operation also reports how many tasks have succeeded or failed.</span></span> <span data-ttu-id="133c9-119">Batch determina se un'attività è riuscita o meno controllando hello **risultato** proprietà di hello [executionInfo] [https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] proprietà:</span><span class="sxs-lookup"><span data-stu-id="133c9-119">Batch determines whether a task has succeeded or failed by checking hello **result** property of hello [executionInfo][https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] property:</span></span>

    - <span data-ttu-id="133c9-120">Un'attività viene considerata **ha avuto esito positivo** se hello risultato dell'esecuzione dell'attività è `success`.</span><span class="sxs-lookup"><span data-stu-id="133c9-120">A task is counted as **succeeded** if hello result of task execution is `success`.</span></span>
    - <span data-ttu-id="133c9-121">Un'attività viene considerata **Impossibile** se hello risultato dell'esecuzione dell'attività è `failure`.</span><span class="sxs-lookup"><span data-stu-id="133c9-121">A task is counted as **failed** if hello result of task execution is `failure`.</span></span>

<span data-ttu-id="133c9-122">Per altre informazioni sugli stati delle attività, vedere [Get information about a task][rest_get_task] (Ottenere informazioni su un'attività).</span><span class="sxs-lookup"><span data-stu-id="133c9-122">For more information about task states, see [Get information about a task][rest_get_task].</span></span>

<span data-ttu-id="133c9-123">Hello .NET esempio seguente viene illustrato come attività tooretrieve conta dallo stato:</span><span class="sxs-lookup"><span data-stu-id="133c9-123">hello following .NET code sample shows how tooretrieve task counts by state:</span></span> 

```csharp
var taskCounts = await batchClient.JobOperations.GetTaskCountsAsync("job-1");

Console.WriteLine("Task count in active state: {0}", taskCounts.Active);
Console.WriteLine("Task count in preparing or running state: {0}", taskCounts.Running);
Console.WriteLine("Task count in completed state: {0}", taskCounts.Completed);
Console.WriteLine("Succeeded task count: {0}", taskCounts.Succeeded);
Console.WriteLine("Failed task count: {0}", taskCounts.Failed);
Console.WriteLine("ValidationStatus: {0}", taskCounts.ValidationStatus);
```

> [!NOTE]
> <span data-ttu-id="133c9-124">È possibile utilizzare un modello simile per REST e altri linguaggi supportati tooget attività i conteggi per un processo.</span><span class="sxs-lookup"><span data-stu-id="133c9-124">You can use a similar pattern for REST and other supported languages tooget task counts for a job.</span></span> 
> 
> 

## <a name="consistency-checking-for-task-counts"></a><span data-ttu-id="133c9-125">Verifica della coerenza per i conteggi delle attività</span><span class="sxs-lookup"><span data-stu-id="133c9-125">Consistency checking for task counts</span></span>

<span data-ttu-id="133c9-126">servizio Batch Hello aggrega i conteggi di attività per la raccolta dati da più parti di un sistema distribuito asincrono.</span><span class="sxs-lookup"><span data-stu-id="133c9-126">hello Batch service aggregates task counts by gathering data from multiple parts of an asynchronous distributed system.</span></span> <span data-ttu-id="133c9-127">tooensure attività conteggi sono corretti, Batch fornisce la convalida aggiuntiva per il conteggio di stato mediante l'esecuzione di verifiche di coerenza su più componenti di sistema hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-127">tooensure that task counts are correct, Batch provides additional validation for state counts by performing consistency checks against multiple components of hello system.</span></span> <span data-ttu-id="133c9-128">Batch esegue queste verifiche di coerenza, purché vi sono meno di 200.000 attività nel processo di hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-128">Batch performs these consistency checks as long as there are fewer than 200,000 tasks in hello job.</span></span> <span data-ttu-id="133c9-129">In hello improbabile che il controllo di coerenza hello rileva errori, Batch corregge risultato hello dell'operazione Ottieni conteggio attività hello in base ai risultati di hello di verifica di coerenza hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-129">In hello unlikely event that hello consistency check finds errors, Batch corrects hello result of hello Get Tasks Counts operation based on hello results of hello consistency check.</span></span> <span data-ttu-id="133c9-130">Hello verifica di coerenza è un'ulteriore misura tooensure che i clienti che si basano su hello operazione Ottieni conteggio attività ottenere informazioni corrette di hello che necessarie per la soluzione.</span><span class="sxs-lookup"><span data-stu-id="133c9-130">hello consistency check is an extra measure tooensure that customers who rely on hello Get Task Counts operation get hello right information they need for their solution.</span></span>

<span data-ttu-id="133c9-131">Hello **validationStatus** proprietà in risposta hello indica se i Batch ha eseguito il controllo di coerenza hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-131">hello **validationStatus** property in hello response indicates whether Batch has performed hello consistency check.</span></span> <span data-ttu-id="133c9-132">Se il Batch non è stato toocheck in grado di conteggi di stato con gli stati di hello effettivo mantenuti nel sistema hello, hello **validationStatus** impostata troppo`unvalidated`.</span><span class="sxs-lookup"><span data-stu-id="133c9-132">If Batch has not been able toocheck state counts against hello actual states held in hello system, then hello **validationStatus** property is set too`unvalidated`.</span></span> <span data-ttu-id="133c9-133">Per motivi di prestazioni Batch non eseguirà hello verifica di coerenza se hello processo include più di 200.000 attività, pertanto hello **validationStatus** proprietà può essere impostata troppo`unvalidated` in questo caso.</span><span class="sxs-lookup"><span data-stu-id="133c9-133">For performance reasons, Batch will not perform hello consistency check if hello job includes more than 200,000 tasks, so hello **validationStatus** property may be set too`unvalidated` in this case.</span></span> <span data-ttu-id="133c9-134">Tuttavia, hello attività conteggio non è necessariamente in questo caso, è altamente improbabile anche una perdita di dati molto limitato.</span><span class="sxs-lookup"><span data-stu-id="133c9-134">However, hello task count is not necessarily wrong in this case, as even a very limited data loss is highly unlikely.</span></span> 

<span data-ttu-id="133c9-135">Quando un'attività di modifica stato, pipeline di aggregazione hello elabora modifica hello entro pochi secondi.</span><span class="sxs-lookup"><span data-stu-id="133c9-135">When a task changes state, hello aggregation pipeline processes hello change within few seconds.</span></span> <span data-ttu-id="133c9-136">operazione Ottieni conteggio attività Hello riflette i conteggi delle attività hello aggiornato entro tale periodo.</span><span class="sxs-lookup"><span data-stu-id="133c9-136">hello Get Task Counts operation reflects hello updated task counts within that period.</span></span> <span data-ttu-id="133c9-137">Tuttavia, se pipeline aggregazione hello mancati riscontri una modifica in uno stato di attività, quindi che modifica non è registrato fino al successivo passaggio di convalida hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-137">However, if hello aggregation pipeline misses a change in a task state, then that change is not registered until hello next validation pass.</span></span> <span data-ttu-id="133c9-138">Durante questo periodo, i conteggi delle attività potrebbero essere leggermente imprecisi a causa di eventi non toohello, ma essi vengono corretti nel passaggio di convalida hello successivo.</span><span class="sxs-lookup"><span data-stu-id="133c9-138">During this time, task counts may be slightly inaccurate due toohello missed event, but they are corrected on hello next validation pass.</span></span>

## <a name="best-practices-for-counting-a-jobs-tasks"></a><span data-ttu-id="133c9-139">Procedure consigliate per il conteggio della attività di un processo</span><span class="sxs-lookup"><span data-stu-id="133c9-139">Best practices for counting a job's tasks</span></span>

<span data-ttu-id="133c9-140">La chiamata di operazione Ottieni conteggio attività hello è tooreturn modo più efficiente di hello un conteggio delle attività di un processo per stato di base.</span><span class="sxs-lookup"><span data-stu-id="133c9-140">Calling hello Get Task Counts operation is hello most efficient way tooreturn a basic count of a job's tasks by state.</span></span> <span data-ttu-id="133c9-141">Se si utilizza una versione del servizio Batch 2017-06-01.5.1, si consiglia di scrittura o aggiornamento del codice toouse Ottieni conteggio attività.</span><span class="sxs-lookup"><span data-stu-id="133c9-141">If you are using Batch service version 2017-06-01.5.1, we recommend writing or updating your code toouse Get Task Counts.</span></span>

<span data-ttu-id="133c9-142">in precedenza 2017-06-01.5.1 Hello operazione Ottieni conteggio attività non è disponibile nelle versioni del servizio Batch.</span><span class="sxs-lookup"><span data-stu-id="133c9-142">hello Get Task Counts operation is not available in Batch service versions earlier than 2017-06-01.5.1.</span></span> <span data-ttu-id="133c9-143">Se si utilizza una versione precedente del servizio di hello, quindi utilizzare un'attività di toocount query di elenco in un processo.</span><span class="sxs-lookup"><span data-stu-id="133c9-143">If you are using an older version of hello service, then use a list query toocount tasks in a job instead.</span></span> <span data-ttu-id="133c9-144">Per ulteriori informazioni, vedere [creare query in modo efficiente le risorse di Batch toolist](batch-efficient-list-queries.md).</span><span class="sxs-lookup"><span data-stu-id="133c9-144">For more information, see [Create queries toolist Batch resources efficiently](batch-efficient-list-queries.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="133c9-145">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="133c9-145">Next steps</span></span>

* <span data-ttu-id="133c9-146">Vedere hello [Cenni preliminari sulle funzionalità di Batch](batch-api-basics.md) toolearn ulteriori informazioni sulle funzionalità e concetti relativi al servizio Batch.</span><span class="sxs-lookup"><span data-stu-id="133c9-146">See hello [Batch feature overview](batch-api-basics.md) toolearn more about Batch service concepts and features.</span></span> <span data-ttu-id="133c9-147">articolo Hello illustra risorse Batch primarie hello come pool, nodi di calcolo, i processi e attività e fornisce una panoramica delle funzionalità del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="133c9-147">hello article discusses hello primary Batch resources such as pools, compute nodes, jobs, and tasks, and provides an overview of hello service's features.</span></span>
* <span data-ttu-id="133c9-148">Nozioni di base hello dello sviluppo di un'applicazione abilitata per Batch utilizzando hello [libreria client .NET per Batch](batch-dotnet-get-started.md) o [Python](batch-python-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="133c9-148">Learn hello basics of developing a Batch-enabled application using hello [Batch .NET client library](batch-dotnet-get-started.md) or [Python](batch-python-tutorial.md).</span></span> <span data-ttu-id="133c9-149">Questi articoli introduttivi consentono di eseguire un'applicazione funzionante che utilizza hello Batch servizio tooexecute un carico di lavoro su più nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="133c9-149">These introductory articles guide you through a working application that uses hello Batch service tooexecute a workload on multiple compute nodes.</span></span>


[rest_get_task_counts]: https://docs.microsoft.com/rest/api/batchservice/get-the-task-counts-for-a-job
[rest_get_task]: https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task
[rest_list_tasks]: https://docs.microsoft.com/rest/api/batchservice/list-the-tasks-associated-with-a-job
