---
title: Creare modelli di distribuzione per le app per la logica di Azure | Microsoft Docs
description: Creare modelli di Azure Resource Manager per la distribuzione delle app per la logica e la gestione dei rilasci
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 85928ec6-d7cb-488e-926e-2e5db89508ee
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.custom: H1Hack27Feb2017
ms.date: 10/18/2016
ms.author: LADocs; jehollan
ms.openlocfilehash: 9cfbb294010d48deaf4b4c78c6a6bcd59a387d87
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="create-templates-for-logic-apps-deployment-and-release-management"></a><span data-ttu-id="5a97f-103">Creare modelli per la distribuzione delle app per la logica e la gestione dei rilasci</span><span class="sxs-lookup"><span data-stu-id="5a97f-103">Create templates for logic apps deployment and release management</span></span>

<span data-ttu-id="5a97f-104">Una volta creata un'app per la logica, è possibile crearla come un modello di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="5a97f-104">After a logic app has been created, you might want to create it as an Azure Resource Manager template.</span></span>
<span data-ttu-id="5a97f-105">Così facendo, l'app per la logica potrà essere facilmente distribuita in qualsiasi ambiente o gruppo di risorse in cui potrebbe essere necessaria.</span><span class="sxs-lookup"><span data-stu-id="5a97f-105">This way, you can easily deploy the logic app to any environment or resource group where you might need it.</span></span>
<span data-ttu-id="5a97f-106">Per altre informazioni sui modelli di Resource Manager, vedere gli articoli su [creazione di modelli di Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md) e [distribuzione delle risorse con i modelli di Azure Resource Manager](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="5a97f-106">For more about Resource Manager templates, see [authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md) and [deploying resources by using Azure Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="logic-app-deployment-template"></a><span data-ttu-id="5a97f-107">Modello di distribuzione di app per la logica</span><span class="sxs-lookup"><span data-stu-id="5a97f-107">Logic app deployment template</span></span>

<span data-ttu-id="5a97f-108">Un'app per la logica dispone di tre componenti di base:</span><span class="sxs-lookup"><span data-stu-id="5a97f-108">A logic app has three basic components:</span></span>

* <span data-ttu-id="5a97f-109">**Risorsa di app per la logica**: contiene informazioni su elementi quali piano tariffario, posizione e definizione del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="5a97f-109">**Logic app resource**: Contains information about things like pricing plan, location, and the workflow definition.</span></span>
* <span data-ttu-id="5a97f-110">**Definizione del flusso di lavoro**: descrive i passaggi del flusso di lavoro dell'app per la logica e come il motore dell'app per la logica deve eseguire il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="5a97f-110">**Workflow definition**: Describes your logic app's workflow steps and how the Logic Apps engine should execute the workflow.</span></span>
<span data-ttu-id="5a97f-111">È possibile visualizzare questa definizione nella finestra **Visualizzazione Codice** dell'app per la logica.</span><span class="sxs-lookup"><span data-stu-id="5a97f-111">You can view this definition in your logic app's **Code View** window.</span></span>
<span data-ttu-id="5a97f-112">Nella risorsa di app per la logica è possibile trovare questa definizione nella proprietà `definition`.</span><span class="sxs-lookup"><span data-stu-id="5a97f-112">In the logic app resource, you can find this definition in the `definition` property.</span></span>
* <span data-ttu-id="5a97f-113">**Connessioni**: si riferisce a risorse separate per archiviare in modo sicuro i metadati su qualsiasi connessione del connettore, ad esempio una stringa di connessione e un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="5a97f-113">**Connections**: Refers to separate resources that securely store metadata about any connector connections, such as a connection string and an access token.</span></span>
<span data-ttu-id="5a97f-114">Nella risorsa di app per la logica, l'app per la logica si riferisce a queste risorse nella sezione `parameters`.</span><span class="sxs-lookup"><span data-stu-id="5a97f-114">In the logic app resource, your logic app references these resources in the `parameters` section.</span></span>

<span data-ttu-id="5a97f-115">È possibile visualizzare tutti questi elementi delle app per la logica esistenti usando uno strumento come [Esplora inventario risorse di Azure](http://resources.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5a97f-115">You can view all these pieces of existing logic apps by using a tool like [Azure Resource Explorer](http://resources.azure.com).</span></span>

<span data-ttu-id="5a97f-116">Per creare un modello per un'app per la logica da usare con distribuzioni di gruppi di risorse, è necessario definire le risorse e creare i parametri necessari.</span><span class="sxs-lookup"><span data-stu-id="5a97f-116">To make a template for a logic app to use with resource group deployments, you must define the resources and parameterize as needed.</span></span>
<span data-ttu-id="5a97f-117">Ad esempio, se si esegue la distribuzione in un ambiente di sviluppo, un ambiente di test e un ambiente di produzione, è probabile che in ogni si vogliano usare stringhe di connessione a un database SQL diverse.</span><span class="sxs-lookup"><span data-stu-id="5a97f-117">For example, if you're deploying to a development, test, and production environment, you likely want to use different connection strings to a SQL database in each environment.</span></span>
<span data-ttu-id="5a97f-118">In alternativa, è possibile che si voglia eseguire la distribuzione in sottoscrizioni o gruppi di risorse diversi.</span><span class="sxs-lookup"><span data-stu-id="5a97f-118">Or, you might want to deploy within different subscriptions or resource groups.</span></span>  

## <a name="create-a-logic-app-deployment-template"></a><span data-ttu-id="5a97f-119">Creare un modello di distribuzione di app per la logica</span><span class="sxs-lookup"><span data-stu-id="5a97f-119">Create a logic app deployment template</span></span>

<span data-ttu-id="5a97f-120">Il modo più semplice per ottenere un modello di distribuzione di app per la logica consiste nell'usare [Visual Studio Tools per app per la logica](logic-apps-deploy-from-vs.md).</span><span class="sxs-lookup"><span data-stu-id="5a97f-120">The easiest way to have a valid logic app deployment template is to use the [Visual Studio Tools for Logic Apps](logic-apps-deploy-from-vs.md).</span></span>
<span data-ttu-id="5a97f-121">Gli strumenti di Visual Studio generano un modello di distribuzione valido, che può essere usato in qualsiasi sottoscrizione o località.</span><span class="sxs-lookup"><span data-stu-id="5a97f-121">The Visual Studio tools generate a valid deployment template that can be used across any subscription or location.</span></span>

<span data-ttu-id="5a97f-122">Esistono altri strumenti utili per la creazione di un modello di distribuzione di app per la logica.</span><span class="sxs-lookup"><span data-stu-id="5a97f-122">A few other tools can assist you as you create a logic app deployment template.</span></span>
<span data-ttu-id="5a97f-123">È possibile eseguire la creazione manualmente utilizzando le risorse appena descritte per creare i parametri in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="5a97f-123">You can author by hand, that is, by using the resources already discussed here to create parameters as needed.</span></span>
<span data-ttu-id="5a97f-124">In alternativa è possibile utilizzare un modulo [Logic App Template Creator](https://github.com/jeffhollan/LogicAppTemplateCreator) di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5a97f-124">Another option is to use a [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell module.</span></span> <span data-ttu-id="5a97f-125">Questo modulo open source valuta l'app per la logica ed eventuali connessioni che utilizza, quindi genera risorse del modello con i parametri necessari per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5a97f-125">This open-source module first evaluates the logic app and any connections that it is using, and then generates template resources with the necessary parameters for deployment.</span></span>
<span data-ttu-id="5a97f-126">Se, ad esempio, si dispone di un'app per la logica che ha ricevuto un messaggio da una coda del bus del servizio di Azure e ha aggiunto dati a un database SQL di Azure, lo strumento conserva l'intera logica di orchestrazione e crea parametri per le stringhe di connessione di SQL e del bus di servizio, in modo che sia possibile configurarle in fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5a97f-126">For example, if you have a logic app that receives a message from an Azure Service Bus queue and adds data to an Azure SQL database, the tool preserves all the orchestration logic and parameterizes the SQL and Service Bus connection strings so that they can be set at deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="5a97f-127">Le connessioni devono essere incluse nello stesso gruppo di risorse dell'app per la logica.</span><span class="sxs-lookup"><span data-stu-id="5a97f-127">Connections must be within the same resource group as the logic app.</span></span>
>
>

### <a name="install-the-logic-app-template-powershell-module"></a><span data-ttu-id="5a97f-128">Installare il modulo PowerShell per il modello di app per la logica</span><span class="sxs-lookup"><span data-stu-id="5a97f-128">Install the logic app template PowerShell module</span></span>
<span data-ttu-id="5a97f-129">Il modo più semplice per installare il modulo consiste nell'usare la [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1) con il comando `Install-Module -Name LogicAppTemplate`.</span><span class="sxs-lookup"><span data-stu-id="5a97f-129">The easiest way to install the module is via the [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), by using the command `Install-Module -Name LogicAppTemplate`.</span></span>  

<span data-ttu-id="5a97f-130">È inoltre possibile installare il modulo PowerShell manualmente:</span><span class="sxs-lookup"><span data-stu-id="5a97f-130">You also can install the PowerShell module manually:</span></span>

1. <span data-ttu-id="5a97f-131">Scaricare la versione più recente di [Logic App Template Creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span><span class="sxs-lookup"><span data-stu-id="5a97f-131">Download the latest release of the [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span></span>  
2. <span data-ttu-id="5a97f-132">Estrarre la cartella nella cartella del modulo PowerShell, in genere `%UserProfile%\Documents\WindowsPowerShell\Modules`.</span><span class="sxs-lookup"><span data-stu-id="5a97f-132">Extract the folder in your PowerShell module folder (usually `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span></span>

<span data-ttu-id="5a97f-133">Per consentire il funzionamento del modulo con qualsiasi tenant e qualsiasi token di accesso della sottoscrizione, è consigliabile usare lo strumento della riga di comando [ARMClient](https://github.com/projectkudu/ARMClient).</span><span class="sxs-lookup"><span data-stu-id="5a97f-133">For the module to work with any tenant and subscription access token, we recommend that you use it with the [ARMClient](https://github.com/projectkudu/ARMClient) command-line tool.</span></span>  <span data-ttu-id="5a97f-134">Questo [post di blog ](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) illustra ARMClient in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="5a97f-134">This [blog post](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) discusses ARMClient in more detail.</span></span>

### <a name="generate-a-logic-app-template-by-using-powershell"></a><span data-ttu-id="5a97f-135">Generare un modello di app per la logica tramite PowerShell</span><span class="sxs-lookup"><span data-stu-id="5a97f-135">Generate a logic app template by using PowerShell</span></span>
<span data-ttu-id="5a97f-136">Dopo aver installato PowerShell, è possibile generare un modello utilizzando il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="5a97f-136">After PowerShell is installed, you can generate a template by using the following command:</span></span>

`armclient token $SubscriptionId | Get-LogicAppTemplate -LogicApp MyApp -ResourceGroup MyRG -SubscriptionId $SubscriptionId -Verbose | Out-File C:\template.json`

<span data-ttu-id="5a97f-137">`$SubscriptionId` è l'ID sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="5a97f-137">`$SubscriptionId` is the Azure subscription ID.</span></span> <span data-ttu-id="5a97f-138">Questa riga ottiene innanzitutto un token di accesso tramite ARMClient, lo trasmette allo script di PowerShell e quindi crea il modello in un file JSON.</span><span class="sxs-lookup"><span data-stu-id="5a97f-138">This line first gets an access token via ARMClient, then pipes it through to the PowerShell script, and then creates the template in a JSON file.</span></span>

## <a name="add-parameters-to-a-logic-app-template"></a><span data-ttu-id="5a97f-139">Aggiungere parametri a un modello di app per la logica</span><span class="sxs-lookup"><span data-stu-id="5a97f-139">Add parameters to a logic app template</span></span>
<span data-ttu-id="5a97f-140">Dopo aver creato il modello di app per la logica, è possibile continuare ad aggiungere o modificare i parametri necessari.</span><span class="sxs-lookup"><span data-stu-id="5a97f-140">After you create your logic app template, you can continue to add or modify parameters that you might need.</span></span> <span data-ttu-id="5a97f-141">Se, ad esempio, la definizione include un ID di risorsa in una funzione di Azure o in un flusso di lavoro annidato in cui si prevede eseguire una singola distribuzione, è possibile aggiungere altre risorse al modello e creare parametri per gli ID in base alla necessità.</span><span class="sxs-lookup"><span data-stu-id="5a97f-141">For example, if your definition includes a resource ID to an Azure function or nested workflow that you plan to deploy in a single deployment, you can add more resources to your template and parameterize IDs as needed.</span></span> <span data-ttu-id="5a97f-142">Lo stesso approccio è applicabile a qualsiasi riferimento ad API personalizzate o endpoint Swagger che si prevede di distribuire in ogni gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="5a97f-142">The same applies to any references to custom APIs or Swagger endpoints you expect to deploy with each resource group.</span></span>

## <a name="deploy-a-logic-app-template"></a><span data-ttu-id="5a97f-143">Distribuire un modello di app per la logica</span><span class="sxs-lookup"><span data-stu-id="5a97f-143">Deploy a logic app template</span></span>

<span data-ttu-id="5a97f-144">Per distribuire il modello, è possibile usare alcuni strumenti, inclusi PowerShell, API REST, [Visual Studio Team Services Release Management](#team-services) e la distribuzione dei modelli attraverso il Portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="5a97f-144">You can deploy your template by using any tools like PowerShell, REST API, [Visual Studio Team Services Release Management](#team-services), and template deployment through the Azure portal.</span></span>
<span data-ttu-id="5a97f-145">Per archiviare i valori per i parametri, è inoltre consigliabile creare un [file di parametri](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span><span class="sxs-lookup"><span data-stu-id="5a97f-145">Also, to store the values for parameters, we recommend that you create a [parameter file](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span></span>
<span data-ttu-id="5a97f-146">Sono disponibili informazioni su come [distribuire risorse con i modelli di Azure Resource Manager e PowerShell](../azure-resource-manager/resource-group-template-deploy.md) o [distribuire risorse con i modelli di Azure Resource Manager e il Portale di Azure](../azure-resource-manager/resource-group-template-deploy-portal.md).</span><span class="sxs-lookup"><span data-stu-id="5a97f-146">Learn how to [deploy resources with Azure Resource Manager templates and PowerShell](../azure-resource-manager/resource-group-template-deploy.md) or [deploy resources with Azure Resource Manager templates and the Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span></span>

### <a name="authorize-oauth-connections"></a><span data-ttu-id="5a97f-147">Autorizzare le connessioni OAuth</span><span class="sxs-lookup"><span data-stu-id="5a97f-147">Authorize OAuth connections</span></span>

<span data-ttu-id="5a97f-148">Una volta distribuite, le app per la logica funzionano end-to-end con parametri validi.</span><span class="sxs-lookup"><span data-stu-id="5a97f-148">After deployment, the logic app works end-to-end with valid parameters.</span></span>
<span data-ttu-id="5a97f-149">Tuttavia, è necessario continuare ad autorizzare le connessioni OAuth per generare un token di accesso valido.</span><span class="sxs-lookup"><span data-stu-id="5a97f-149">However, you must still authorize OAuth connections to generate a valid access token.</span></span>
<span data-ttu-id="5a97f-150">Per autorizzare le connessioni OAuth, aprire l'app per la logica nella finestra di progettazione delle app per la logica e autorizzare le connessioni.</span><span class="sxs-lookup"><span data-stu-id="5a97f-150">To authorize OAuth connections, open the logic app in the Logic Apps Designer, and authorize these connections.</span></span> <span data-ttu-id="5a97f-151">In alternativa, per la distribuzione automatizzata è possibile usare uno script per consentire ogni connessione OAuth.</span><span class="sxs-lookup"><span data-stu-id="5a97f-151">Or for automated deployment, you can use a script to consent to each OAuth connection.</span></span>
<span data-ttu-id="5a97f-152">Nel progetto [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) è presente uno script di esempio su GitHub.</span><span class="sxs-lookup"><span data-stu-id="5a97f-152">There's an example script on GitHub under the [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) project.</span></span>

<a name="team-services"></a>
## <a name="visual-studio-team-services-release-management"></a><span data-ttu-id="5a97f-153">Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="5a97f-153">Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="5a97f-154">Uno scenario comune per la distribuzione e la gestione di ambienti consiste nell'usare uno strumento come Release Management di Visual Studio Team Services con un modello di distribuzione di app per la logica.</span><span class="sxs-lookup"><span data-stu-id="5a97f-154">A common scenario for deploying and managing an environment is to use a tool like Release Management in Visual Studio Team Services, with a logic app deployment template.</span></span> <span data-ttu-id="5a97f-155">Visual Studio Team Services include un'attività [Distribuisci gruppo di risorse di Azure](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) , che può essere aggiunta in una build o in una pipeline di rilascio.</span><span class="sxs-lookup"><span data-stu-id="5a97f-155">Visual Studio Team Services includes a [Deploy Azure Resource Group](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) task that you can add to any build or release pipeline.</span></span> <span data-ttu-id="5a97f-156">Per l'autorizzazione alla distribuzione è necessario avere un'[entità servizio](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/). Sarà quindi possibile generare la definizione della versione.</span><span class="sxs-lookup"><span data-stu-id="5a97f-156">You need to have a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) for authorization to deploy, and then you can generate the release definition.</span></span>

1. <span data-ttu-id="5a97f-157">In Release Management selezionare **Vuoto** per creare una definizione vuota.</span><span class="sxs-lookup"><span data-stu-id="5a97f-157">In Release Management, select **Empty** so that you create an empty definition.</span></span>

    ![Creare una definizione vuota][1]

2. <span data-ttu-id="5a97f-159">Scegliere le risorse necessarie, possibilmente includendo il modello di app per la logica generato manualmente o nell'ambito del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5a97f-159">Choose any resources you need for this, most likely including the logic app template that is generated manually or as part of the build process.</span></span>
3. <span data-ttu-id="5a97f-160">Aggiungere un'attività **Distribuzione gruppo di risorse di Azure** .</span><span class="sxs-lookup"><span data-stu-id="5a97f-160">Add an **Azure Resource Group Deployment** task.</span></span>
4. <span data-ttu-id="5a97f-161">Eseguire la configurazione con un' [entità servizio](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), quindi fare riferimento ai file Modello e Parametri modello.</span><span class="sxs-lookup"><span data-stu-id="5a97f-161">Configure with a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), and reference the Template and Template Parameters files.</span></span>
5. <span data-ttu-id="5a97f-162">Continuare a compilare passaggi nel processo di rilascio per eventuali altri ambienti, test automatizzati o responsabili approvazione necessari.</span><span class="sxs-lookup"><span data-stu-id="5a97f-162">Continue to build out steps in the release process for any other environment, automated test, or approvers as needed.</span></span>

<!-- Image References -->
[1]: ./media/logic-apps-create-deploy-template/emptyreleasedefinition.png
