---
title: aaaPrepare tooAzure di tooupload un disco rigido virtuale di Windows | Documenti Microsoft
description: Come tooprepare un disco rigido virtuale di Windows o VHDX prima del caricamento tooAzure
services: virtual-machines-windows
documentationcenter: 
author: glimoli
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7802489d-33ec-4302-82a4-91463d03887a
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 08/01/2017
ms.author: genli
ms.openlocfilehash: 530390e4c6a4f66ddfd4da23338f9bb3708c299f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="prepare-a-windows-vhd-or-vhdx-tooupload-tooazure"></a><span data-ttu-id="822f6-103">Preparare un tooAzure tooupload Windows VHD o VHDX</span><span class="sxs-lookup"><span data-stu-id="822f6-103">Prepare a Windows VHD or VHDX tooupload tooAzure</span></span>
<span data-ttu-id="822f6-104">Prima di caricare una macchina virtuale Windows (VM) da on-premise tooMicrosoft Azure, è necessario preparare hello disco virtuale (VHD o VHDX).</span><span class="sxs-lookup"><span data-stu-id="822f6-104">Before you upload a Windows  virtual machines (VM) from on-premises tooMicrosoft Azure, you must prepare hello virtual hard disk (VHD or VHDX).</span></span> <span data-ttu-id="822f6-105">Azure supporta solo macchine virtuali di generazione 1 nel formato di file VHD hello e dispongono di un disco di dimensione fissato.</span><span class="sxs-lookup"><span data-stu-id="822f6-105">Azure supports only generation 1 VMs that are in hello VHD file format and have a fixed sized disk.</span></span> <span data-ttu-id="822f6-106">dimensione massima di Hello consentite per hello che VHD è 1023 GB.</span><span class="sxs-lookup"><span data-stu-id="822f6-106">hello maximum size allowed for hello VHD is 1,023 GB.</span></span> <span data-ttu-id="822f6-107">È possibile convertire una generazione 1 macchina virtuale da hello VHDX file tooVHD di sistema e da una a espansione dinamica toofixed dimensioni su disco.</span><span class="sxs-lookup"><span data-stu-id="822f6-107">You can convert a generation 1 VM from hello VHDX file system tooVHD and from a dynamically expanding disk toofixed-sized.</span></span> <span data-ttu-id="822f6-108">Non è tuttavia possibile modificare la generazione di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-108">But you can't change a VM's generation.</span></span> <span data-ttu-id="822f6-109">Per altre informazioni, vedere [Should I create a generation 1 or 2 VM in Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v) (Creare una macchina virtuale di prima o seconda generazione in Hyper-V).</span><span class="sxs-lookup"><span data-stu-id="822f6-109">For more information, see [Should I create a generation 1 or 2 VM in Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).</span></span>

<span data-ttu-id="822f6-110">Per ulteriori informazioni sui criteri di supporto hello per la macchina virtuale di Azure, vedere [supporto del software server Microsoft per le macchine virtuali di Microsoft Azure](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="822f6-110">For more information about hello support policy for Azure VM, see [Microsoft server software support for Microsoft Azure VMs](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span></span>

> [!Note]
> <span data-ttu-id="822f6-111">istruzioni di Hello in questo articolo si applicano toohello versione a 64 bit di Windows Server 2008 R2 e versioni successive sistema operativo di Windows server.</span><span class="sxs-lookup"><span data-stu-id="822f6-111">hello instructions in this article apply toohello 64-bit version of Windows Server 2008 R2 and later Windows server operating system.</span></span> <span data-ttu-id="822f6-112">Per informazioni sull'esecuzione di sistemi operativi a 32 bit in Azure, vedere [Support for 32-bit operating systems in Azure virtual machines](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines) (Supporto per sistemi operativi a 32 bit in macchine virtuali di Azure).</span><span class="sxs-lookup"><span data-stu-id="822f6-112">For information about running 32-bit version of operating system in Azure, see [Support for 32-bit operating systems in Azure virtual machines](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span></span>

## <a name="convert-hello-virtual-disk-toovhd-and-fixed-size-disk"></a><span data-ttu-id="822f6-113">Convertire hello tooVHD di disco virtuale e disco di dimensioni fisse</span><span class="sxs-lookup"><span data-stu-id="822f6-113">Convert hello virtual disk tooVHD and fixed size disk</span></span> 
<span data-ttu-id="822f6-114">Se è necessario tooconvert formato toohello il disco virtuale necessaria per Azure, utilizzare uno dei metodi di hello in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="822f6-114">If you need tooconvert your virtual disk toohello required format for Azure, use one of hello methods in this section.</span></span> <span data-ttu-id="822f6-115">Eseguire il backup hello VM prima di eseguire processo di conversione del disco virtuale hello e assicurarsi che tale disco rigido virtuale di Windows funziona correttamente sul server locale hello di hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-115">Back up hello VM before you run hello virtual disk conversion process and make sure that hello Windows VHD works correctly on hello local server.</span></span> <span data-ttu-id="822f6-116">Prima di provare tooconvert o caricarlo tooAzure, risolvere eventuali problemi all'interno di hello macchina virtuale stessa.</span><span class="sxs-lookup"><span data-stu-id="822f6-116">Resolve any errors within hello VM itself before you try tooconvert or upload it tooAzure.</span></span>

<span data-ttu-id="822f6-117">Dopo aver convertito il disco di hello, creare una macchina virtuale che utilizza disco hello convertito.</span><span class="sxs-lookup"><span data-stu-id="822f6-117">After you convert hello disk, create a VM that uses hello converted disk.</span></span> <span data-ttu-id="822f6-118">Avviare ed eseguire l'accesso toohello VM toofinish preparazione hello VM per il caricamento.</span><span class="sxs-lookup"><span data-stu-id="822f6-118">Start and sign in toohello VM toofinish preparing hello VM for upload.</span></span>

### <a name="convert-disk-using-hyper-v-manager"></a><span data-ttu-id="822f6-119">Convertire il disco tramite la console di gestione di Hyper-V</span><span class="sxs-lookup"><span data-stu-id="822f6-119">Convert disk using Hyper-V Manager</span></span>
1. <span data-ttu-id="822f6-120">Aprire Gestione di Hyper-V e selezionare il computer locale a sinistra di hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-120">Open Hyper-V Manager and select your local computer on hello left.</span></span> <span data-ttu-id="822f6-121">Nel menu di hello sopra l'elenco di computer hello, fare clic su **azione** > **modifica disco**.</span><span class="sxs-lookup"><span data-stu-id="822f6-121">In hello menu above hello computer list, click **Action** > **Edit Disk**.</span></span>
2. <span data-ttu-id="822f6-122">In hello **percorso disco rigido virtuale** schermata, individuare e selezionare il disco virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-122">On hello **Locate Virtual Hard Disk** screen, locate and select your virtual disk.</span></span>
3. <span data-ttu-id="822f6-123">In hello **scelta azione** schermata e quindi selezionare **convertire** e **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="822f6-123">On hello **Choose Action** screen, and then select **Convert** and **Next**.</span></span>
4. <span data-ttu-id="822f6-124">Se è necessario tooconvert formato vhdx, selezionare **VHD** e quindi fare clic su **successivo**</span><span class="sxs-lookup"><span data-stu-id="822f6-124">If you need tooconvert from VHDX, select **VHD** and then click **Next**</span></span>
5. <span data-ttu-id="822f6-125">Se è necessario tooconvert da un disco a espansione dinamica, selezionare **dimensioni fisse** e quindi fare clic su **successivo**</span><span class="sxs-lookup"><span data-stu-id="822f6-125">If you need tooconvert from a dynamically expanding disk, select **Fixed size** and then click **Next**</span></span>
6. <span data-ttu-id="822f6-126">Individuare e selezionare un percorso toosave hello nuovo file VHD.</span><span class="sxs-lookup"><span data-stu-id="822f6-126">Locate and select a path toosave hello new VHD file to.</span></span>
7. <span data-ttu-id="822f6-127">Fare clic su **Finish**.</span><span class="sxs-lookup"><span data-stu-id="822f6-127">Click **Finish**.</span></span>

>[!NOTE]
><span data-ttu-id="822f6-128">comandi Hello in questo articolo devono essere eseguiti in una sessione di PowerShell con privilegi elevata.</span><span class="sxs-lookup"><span data-stu-id="822f6-128">hello commands in this article must be run on an elevated PowerShell session.</span></span>

### <a name="convert-disk-by-using-powershell"></a><span data-ttu-id="822f6-129">Convertire il disco tramite PowerShell</span><span class="sxs-lookup"><span data-stu-id="822f6-129">Convert disk by using PowerShell</span></span>
<span data-ttu-id="822f6-130">È possibile convertire un disco virtuale utilizzando hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) comando in Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="822f6-130">You can convert a virtual disk by using hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) command in Windows PowerShell.</span></span> <span data-ttu-id="822f6-131">Selezionare **Esegui come amministratore** quando si avvia PowerShell.</span><span class="sxs-lookup"><span data-stu-id="822f6-131">Select **Run as administrator** when you start PowerShell.</span></span> 

<span data-ttu-id="822f6-132">Hello comando di esempio seguente converte da tooVHD VHDX e da un'ad espansione dinamica toofixed-dimensioni disco:</span><span class="sxs-lookup"><span data-stu-id="822f6-132">hello following example command converts from VHDX tooVHD, and from a dynamically expanding disk toofixed-size:</span></span>

```Powershell
Convert-VHD –Path c:\test\MY-VM.vhdx –DestinationPath c:\test\MY-NEW-VM.vhd -VHDType Fixed
```
<span data-ttu-id="822f6-133">In questo comando, sostituire il valore di hello per "-Path" con hello percorso toohello disco rigido virtuale che si desidera tooconvert e hello valore per "-DestinationPath" con hello nuovo percorso e nome di hello convertito il disco.</span><span class="sxs-lookup"><span data-stu-id="822f6-133">In this command, replace hello value for "-Path" with hello path toohello virtual hard disk that you want tooconvert and hello value for "-DestinationPath" with hello new path and name of hello converted disk.</span></span>

### <a name="convert-from-vmware-vmdk-disk-format"></a><span data-ttu-id="822f6-134">Conversione dal formato VMware VMDK</span><span class="sxs-lookup"><span data-stu-id="822f6-134">Convert from VMware VMDK disk format</span></span>
<span data-ttu-id="822f6-135">Se si dispone di un'immagine di macchina virtuale Windows in hello [il formato di file VMDK](https://en.wikipedia.org/wiki/VMDK), convertirlo tooa VHD utilizzando hello [Microsoft VM convertitore](https://www.microsoft.com/download/details.aspx?id=42497).</span><span class="sxs-lookup"><span data-stu-id="822f6-135">If you have a Windows VM image in hello [VMDK file format](https://en.wikipedia.org/wiki/VMDK), convert it tooa VHD by using hello [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span></span> <span data-ttu-id="822f6-136">Per ulteriori informazioni, vedere l'articolo di blog hello [come un disco rigido virtuale tooHyper V VMDK di VMware tooConvert](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span><span class="sxs-lookup"><span data-stu-id="822f6-136">For more information, see hello blog article [How tooConvert a VMware VMDK tooHyper-V VHD](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span></span>

## <a name="set-windows-configurations-for-azure"></a><span data-ttu-id="822f6-137">Impostare le configurazioni di Windows per Azure</span><span class="sxs-lookup"><span data-stu-id="822f6-137">Set Windows configurations for Azure</span></span>

<span data-ttu-id="822f6-138">Nella macchina virtuale che si prevede di hello tooAzure tooupload, eseguire tutti i comandi seguenti di hello i passaggi da un [finestra prompt dei comandi con privilegi elevati](https://technet.microsoft.com/library/cc947813.aspx):</span><span class="sxs-lookup"><span data-stu-id="822f6-138">On hello VM that you plan tooupload tooAzure, run all commands in hello following steps from an [elevated Command Prompt window](https://technet.microsoft.com/library/cc947813.aspx):</span></span>

1. <span data-ttu-id="822f6-139">Rimuovere le route statiche permanente nella tabella di routing hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-139">Remove any static persistent route on hello routing table:</span></span>
   
   * <span data-ttu-id="822f6-140">tabella di route hello tooview, eseguire `route print` al prompt dei comandi di hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-140">tooview hello route table, run `route print` at hello command prompt.</span></span>
   * <span data-ttu-id="822f6-141">Controllare hello **persistenza route** sezioni.</span><span class="sxs-lookup"><span data-stu-id="822f6-141">Check hello **Persistence Routes** sections.</span></span> <span data-ttu-id="822f6-142">Se esiste una route permanente, utilizzare [delete route](https://technet.microsoft.com/library/cc739598.apx) tooremove è.</span><span class="sxs-lookup"><span data-stu-id="822f6-142">If there is a persistent route, use [route delete](https://technet.microsoft.com/library/cc739598.apx) tooremove it.</span></span>
2. <span data-ttu-id="822f6-143">Rimuovere proxy WinHTTP hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-143">Remove hello WinHTTP proxy:</span></span>
   
    ```PowerShell
    netsh winhttp reset proxy
    ```
3. <span data-ttu-id="822f6-144">Impostare criteri di hello disco SAN troppo[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span><span class="sxs-lookup"><span data-stu-id="822f6-144">Set hello disk SAN policy too[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span></span> 
   
    ```PowerShell
    diskpart 
    ```
    <span data-ttu-id="822f6-145">Nella finestra del prompt dei comandi aprire hello, digitare hello seguenti comandi:</span><span class="sxs-lookup"><span data-stu-id="822f6-145">In hello open Command Prompt window, type hello following commands:</span></span>

     ```DISKPART
    san policy=onlineall
    exit   
    ```

4. <span data-ttu-id="822f6-146">Impostare ora Coordinated Universal Time (UTC) per Windows e hello tipo di avvio del servizio ora di Windows (w32time) hello troppo**automaticamente**:</span><span class="sxs-lookup"><span data-stu-id="822f6-146">Set Coordinated Universal Time (UTC) time for Windows and hello startup type of hello Windows Time (w32time) service too**Automatically**:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\TimeZoneInformation' -name "RealTimeIsUniversal" 1 -Type DWord

    Set-Service -Name w32time -StartupType Auto
    ```
5. <span data-ttu-id="822f6-147">Impostare hello power profilo toohello **ad alte prestazioni**:</span><span class="sxs-lookup"><span data-stu-id="822f6-147">Set hello power profile toohello **High Performance**:</span></span>

    ```PowerShell
    powercfg /setactive SCHEME_MIN
    ```

## <a name="check-hello-windows-services"></a><span data-ttu-id="822f6-148">Verificare i servizi di Windows hello</span><span class="sxs-lookup"><span data-stu-id="822f6-148">Check hello Windows services</span></span>
<span data-ttu-id="822f6-149">Verificare che ognuno dei seguenti servizi di Windows hello è impostato toohello **i valori predefiniti di Windows**.</span><span class="sxs-lookup"><span data-stu-id="822f6-149">Make sure that each of hello following Windows services is set toohello **Windows default values**.</span></span> <span data-ttu-id="822f6-150">Si tratta di numero minimo di hello di servizi che devono essere impostati toomake che tale hello macchina virtuale disponga di connettività.</span><span class="sxs-lookup"><span data-stu-id="822f6-150">These are hello minimum numbers of services that must be set up toomake sure that hello VM has connectivity.</span></span> <span data-ttu-id="822f6-151">impostazioni di avvio di hello di tooreset, eseguire hello seguenti comandi:</span><span class="sxs-lookup"><span data-stu-id="822f6-151">tooreset hello startup settings, run hello following commands:</span></span>
   
```PowerShell
Set-Service -Name bfe -StartupType Auto
Set-Service -Name dhcp -StartupType Auto
Set-Service -Name dnscache -StartupType Auto
Set-Service -Name IKEEXT -StartupType Auto
Set-Service -Name iphlpsvc -StartupType Auto
Set-Service -Name netlogon -StartupType Manual
Set-Service -Name netman -StartupType Manual
Set-Service -Name nsi -StartupType Auto
Set-Service -Name termService -StartupType Manual
Set-Service -Name MpsSvc -StartupType Auto
Set-Service -Name RemoteRegistry -StartupType Auto
```

## <a name="update-remote-desktop-registry-settings"></a><span data-ttu-id="822f6-152">Aggiornare le impostazioni del registro di Desktop remoto</span><span class="sxs-lookup"><span data-stu-id="822f6-152">Update Remote Desktop registry settings</span></span>
<span data-ttu-id="822f6-153">Verificare che tale hello seguenti impostazioni sono configurate correttamente per connessione desktop remoto:</span><span class="sxs-lookup"><span data-stu-id="822f6-153">Make sure that hello following settings are configured correctly for remote desktop connection:</span></span>

>[!Note] 
><span data-ttu-id="822f6-154">Si potrebbe ricevere un messaggio di errore quando si esegue hello **Set-ItemProperty-Path ' servizi HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal - nome &lt;nome dell'oggetto&gt; &lt;valore&gt;** in questa procedura.</span><span class="sxs-lookup"><span data-stu-id="822f6-154">You may receive an error message when you run hello **Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services -name &lt;object name&gt; &lt;value&gt;** in these steps.</span></span> <span data-ttu-id="822f6-155">messaggio di errore Hello può essere tranquillamente ignorato.</span><span class="sxs-lookup"><span data-stu-id="822f6-155">hello error message can be safely ignored.</span></span> <span data-ttu-id="822f6-156">Significa che solo quel dominio hello non viene eseguita la configurazione tramite un oggetto Criteri di gruppo.</span><span class="sxs-lookup"><span data-stu-id="822f6-156">It means only that hello domain is not pushing that configuration through a Group Policy object.</span></span>
>
>

1. <span data-ttu-id="822f6-157">Remote Desktop Protocol (RDP) è abilitato:</span><span class="sxs-lookup"><span data-stu-id="822f6-157">Remote Desktop Protocol (RDP) is enabled:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server' -name "fDenyTSConnections" -Value 0 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDenyTSConnections" -Value 0 -Type DWord
    ```
   
2. <span data-ttu-id="822f6-158">Hello porta RDP sia impostato correttamente (impostazione predefinita la porta 3389):</span><span class="sxs-lookup"><span data-stu-id="822f6-158">hello RDP port is set up correctly (Default port 3389):</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "PortNumber" 3389 -Type DWord
    ```
    <span data-ttu-id="822f6-159">Quando si distribuisce una macchina virtuale, vengono create le regole predefinite di hello porta 3389.</span><span class="sxs-lookup"><span data-stu-id="822f6-159">When you deploy a VM, hello default rules are created against port 3389.</span></span> <span data-ttu-id="822f6-160">Se si desidera il numero di porta hello toochange, eseguire questa operazione dopo aver distribuito hello VM in Azure.</span><span class="sxs-lookup"><span data-stu-id="822f6-160">If you want toochange hello port number,  do that after hello VM is deployed in Azure.</span></span>

3. <span data-ttu-id="822f6-161">Hello listener è in ascolto in ogni interfaccia di rete:</span><span class="sxs-lookup"><span data-stu-id="822f6-161">hello listener is listening in every network interface:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "LanAdapter" 0 -Type DWord
   ```
4. <span data-ttu-id="822f6-162">Configurare la modalità di autenticazione a livello di rete hello per le connessioni RDP hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-162">Configure hello Network Level Authentication mode for hello RDP connections:</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "UserAuthentication" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SecurityLayer" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "fAllowSecProtocolNegotiation" 1 -Type DWord
     ```

5. <span data-ttu-id="822f6-163">Impostare valore keep-alive hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-163">Set hello keep-alive value：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveEnable" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveInterval" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "KeepAliveTimeout" 1 -Type DWord
    ```
6. <span data-ttu-id="822f6-164">Ristabilire la connessione:</span><span class="sxs-lookup"><span data-stu-id="822f6-164">Reconnect：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDisableAutoReconnect" 0 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fInheritReconnectSame" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fReconnectSame" 0 -Type DWord
    ```
7. <span data-ttu-id="822f6-165">Numero di hello limite di connessioni simultanee:</span><span class="sxs-lookup"><span data-stu-id="822f6-165">Limit hello number of concurrent connections：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "MaxInstanceCount" 4294967295 -Type DWord
    ```
8. <span data-ttu-id="822f6-166">Se sono presenti i certificati autofirmati collegata listener RDP toohello, rimuoverli:</span><span class="sxs-lookup"><span data-stu-id="822f6-166">If there are any self-signed certificates tied toohello RDP listener, remove them:</span></span>
    
    ```PowerShell
    Remove-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SSLCertificateSHA1Hash"
    ```
    <span data-ttu-id="822f6-167">Si tratta di toomake assicurarsi che sia possibile connettersi all'inizio di hello quando si distribuisce hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-167">This is toomake sure that you can connect at hello beginning when you deploy hello VM.</span></span> <span data-ttu-id="822f6-168">È anche possibile esaminare questa in una fase successiva dopo hello che macchina virtuale viene distribuita in Azure, se necessario.</span><span class="sxs-lookup"><span data-stu-id="822f6-168">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

9. <span data-ttu-id="822f6-169">Se hello VM farà parte di un dominio, controllare che tutti hello seguente toomake impostazioni assicurarsi che le impostazioni precedenti hello non vengono ripristinate.</span><span class="sxs-lookup"><span data-stu-id="822f6-169">If hello VM will be part of a Domain, check all hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="822f6-170">criteri di Hello che devono essere controllati sono seguente hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-170">hello policies that must be checked are hello following:</span></span>
    
    - <span data-ttu-id="822f6-171">RDP è abilitato:</span><span class="sxs-lookup"><span data-stu-id="822f6-171">RDP is enabled:</span></span>

         <span data-ttu-id="822f6-172">Configurazione computer\Criteri\Impostazioni di Windows \Modelli amministrativi\ Componenti\Servizi Desktop remoto\Host sessione Desktop remoto\Connessioni:</span><span class="sxs-lookup"><span data-stu-id="822f6-172">Computer Configuration\Policies\Windows Settings\Administrative Templates\ Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span>
         
         <span data-ttu-id="822f6-173">**Consenti tooconnect gli utenti in modalità remota tramite Desktop remoto**</span><span class="sxs-lookup"><span data-stu-id="822f6-173">**Allow users tooconnect remotely by using Remote Desktop**</span></span>

    - <span data-ttu-id="822f6-174">Criteri di gruppo NLA:</span><span class="sxs-lookup"><span data-stu-id="822f6-174">NLA group policy:</span></span>

        <span data-ttu-id="822f6-175">Impostazioni\Modelli amministrativi\ Componenti\Servizi Desktop remoto\Host sessione Desktop remoto\Sicurezza:</span><span class="sxs-lookup"><span data-stu-id="822f6-175">Settings\Administrative Templates\Components\Remote Desktop Services\Remote Desktop Session Host\Security:</span></span> 
        
        <span data-ttu-id="822f6-176">**Richiedi autenticazione utente tramite Autenticazione a livello di rete per le connessioni remote**</span><span class="sxs-lookup"><span data-stu-id="822f6-176">**Require user Authentication for remote connections by using Network Level Authentication**</span></span>
    
    - <span data-ttu-id="822f6-177">Impostazioni Keep-alive:</span><span class="sxs-lookup"><span data-stu-id="822f6-177">Keep Alive settings:</span></span>

        <span data-ttu-id="822f6-178">Configurazione computer\Criteri\Impostazioni di Windows \Modelli amministrativi\ Componenti di Windows\Servizi Desktop remoto\Host sessione Desktop remoto\Connessioni:</span><span class="sxs-lookup"><span data-stu-id="822f6-178">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="822f6-179">**Configura intervallo keep-alive della connessione**</span><span class="sxs-lookup"><span data-stu-id="822f6-179">**Configure keep-alive connection interval**</span></span>

    - <span data-ttu-id="822f6-180">Impostazioni di riconnessione:</span><span class="sxs-lookup"><span data-stu-id="822f6-180">Reconnect settings:</span></span>

        <span data-ttu-id="822f6-181">Configurazione computer\Criteri\Impostazioni di Windows \Modelli amministrativi\ Componenti di Windows\Servizi Desktop remoto\Host sessione Desktop remoto\Connessioni:</span><span class="sxs-lookup"><span data-stu-id="822f6-181">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="822f6-182">**Riconnessione automatica**</span><span class="sxs-lookup"><span data-stu-id="822f6-182">**Automatic reconnection**</span></span>

    - <span data-ttu-id="822f6-183">Limita il numero di hello di impostazioni di connessione:</span><span class="sxs-lookup"><span data-stu-id="822f6-183">Limit hello number of connections settings:</span></span>

        <span data-ttu-id="822f6-184">Configurazione computer\Criteri\Impostazioni di Windows \Modelli amministrativi\ Componenti di Windows\Servizi Desktop remoto\Host sessione Desktop remoto\Connessioni:</span><span class="sxs-lookup"><span data-stu-id="822f6-184">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="822f6-185">**Limita il numero di connessioni**</span><span class="sxs-lookup"><span data-stu-id="822f6-185">**Limit number of connections**</span></span>

## <a name="configure-windows-firewall-rules"></a><span data-ttu-id="822f6-186">Configurare le regole del firewall di Windows</span><span class="sxs-lookup"><span data-stu-id="822f6-186">Configure Windows Firewall rules</span></span>
1. <span data-ttu-id="822f6-187">Attiva Windows Firewall sui profili hello tre (dominio, Standard e pubblico):</span><span class="sxs-lookup"><span data-stu-id="822f6-187">Turn on Windows Firewall on hello three profiles (Domain, Standard, and Public):</span></span>

   ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\DomainProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\PublicProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\Standardprofile' -name "EnableFirewall" -Value 1 -Type DWord
   ```

2. <span data-ttu-id="822f6-188">Eseguire hello seguente comando PowerShell tooallow WinRM tramite i profili del firewall hello tre (dominio, privato e pubblico) e abilitare hello assistenza remota di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="822f6-188">Run hello following command in PowerShell tooallow WinRM through hello three firewall profiles (Domain, Private, and Public) and enable hello PowerShell Remote service:</span></span>
   
   ```PowerShell
    Enable-PSRemoting -force
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
   ```
3. <span data-ttu-id="822f6-189">Abilitare hello seguendo il traffico RDP firewall regole tooallow hello</span><span class="sxs-lookup"><span data-stu-id="822f6-189">Enable hello following firewall rules tooallow hello RDP traffic</span></span> 

   ```PowerShell
    netsh advfirewall firewall set rule group="Remote Desktop" new enable=yes
   ```   
4. <span data-ttu-id="822f6-190">Abilitare la regola di condivisione stampanti e File hello in modo che hello VM può rispondere comando ping tooa all'interno di hello rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="822f6-190">Enable hello File and Printer Sharing rule so that hello VM can respond tooa ping command inside hello Virtual Network:</span></span>

   ```PowerShell
    netsh advfirewall firewall set rule dir=in name="File and Printer Sharing (Echo Request - ICMPv4-In)" new enable=yes
   ``` 
5. <span data-ttu-id="822f6-191">Se hello VM farà parte di un dominio, è possibile controllare hello seguente toomake impostazioni assicurarsi che le impostazioni precedenti hello non vengono ripristinate.</span><span class="sxs-lookup"><span data-stu-id="822f6-191">If hello VM  will be part of a Domain, check hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="822f6-192">criteri Hello AD che devono essere controllati sono seguente hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-192">hello AD policies that must be checked are hello following:</span></span>

    - <span data-ttu-id="822f6-193">Abilitare i profili del Firewall di Windows hello</span><span class="sxs-lookup"><span data-stu-id="822f6-193">Enable hello Windows Firewall profiles</span></span>

        <span data-ttu-id="822f6-194">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo di dominio\Windows Firewall: **proteggi tutte le connessioni di rete**</span><span class="sxs-lookup"><span data-stu-id="822f6-194">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Protect all network connections**</span></span>

       <span data-ttu-id="822f6-195">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo standard\Windows Firewall: **proteggi tutte le connessioni di rete**</span><span class="sxs-lookup"><span data-stu-id="822f6-195">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Protect all network connections**</span></span>

    - <span data-ttu-id="822f6-196">Abilitare RDP</span><span class="sxs-lookup"><span data-stu-id="822f6-196">Enable RDP</span></span> 

        <span data-ttu-id="822f6-197">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo di dominio\Windows Firewall: **consenti eccezioni per Desktop remoto in ingresso**</span><span class="sxs-lookup"><span data-stu-id="822f6-197">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

        <span data-ttu-id="822f6-198">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo standard\Windows Firewall: **consenti eccezioni per Desktop remoto in ingresso**</span><span class="sxs-lookup"><span data-stu-id="822f6-198">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

    - <span data-ttu-id="822f6-199">Abilitare ICMP V4</span><span class="sxs-lookup"><span data-stu-id="822f6-199">Enable ICMP-V4</span></span>

        <span data-ttu-id="822f6-200">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo di dominio\Windows Firewall: **consenti eccezioni ICMP**</span><span class="sxs-lookup"><span data-stu-id="822f6-200">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

        <span data-ttu-id="822f6-201">Configurazione computer\Criteri\Impostazioni di Windows\Modelli amministrativi\Rete\Connessione di rete\Windows Firewall\Profilo standard\Windows Firewall: **consenti eccezioni ICMP**</span><span class="sxs-lookup"><span data-stu-id="822f6-201">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

## <a name="verify-vm-is-healthy-secure-and-accessible-with-rdp"></a><span data-ttu-id="822f6-202">Verificare che la macchina virtuale sia integra, sicura e accessibile con RDP</span><span class="sxs-lookup"><span data-stu-id="822f6-202">Verify VM is healthy, secure, and accessible with RDP</span></span> 
1. <span data-ttu-id="822f6-203">disco hello che toomake sia integro e coerente, eseguire un'operazione del disco di controllo al successivo riavvio VM hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-203">toomake sure hello disk is healthy and consistent, run a check disk operation at hello next VM restart:</span></span>

    ```PowerShell
    Chkdsk /f
    ```
    <span data-ttu-id="822f6-204">Assicurarsi che i report di hello Mostra un disco integro e pulito.</span><span class="sxs-lookup"><span data-stu-id="822f6-204">Make sure that hello report shows a clean and healthy disk.</span></span>

2. <span data-ttu-id="822f6-205">Configurare le impostazioni di dati di configurazione di avvio (BCD) hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-205">Set hello Boot Configuration Data (BCD) settings.</span></span> 

    > [!Note]
    > <span data-ttu-id="822f6-206">Assicurarsi che questi comandi vengano eseguiti in una finestra dei comandi con privilegi elevati e **NON** in PowerShell:</span><span class="sxs-lookup"><span data-stu-id="822f6-206">Make sure you run these commands on an elevated CMD window and **NOT** on PowerShell:</span></span>
   
   ```CMD
   bcdedit /set {bootmgr} integrityservices enable
   
   bcdedit /set {default} device partition=C:
   
   bcdedit /set {default} integrityservices enable
   
   bcdedit /set {default} recoveryenabled Off
   
   bcdedit /set {default} osdevice partition=C:
   
   bcdedit /set {default} bootstatuspolicy IgnoreAllFailures
   ```
3. <span data-ttu-id="822f6-207">Verificare che il repository di Strumentazione gestione Windows hello sia coerenza.</span><span class="sxs-lookup"><span data-stu-id="822f6-207">Verify that hello Windows Management Instrumentations repository is consistent.</span></span> <span data-ttu-id="822f6-208">tooperform, hello esecuzione comando seguente:</span><span class="sxs-lookup"><span data-stu-id="822f6-208">tooperform this, run hello following command:</span></span>

    ```PowerShell
    winmgmt /verifyrepository
    ```
    <span data-ttu-id="822f6-209">Se il repository di hello è danneggiato, vedere [WMI: archivio danneggiato, o non](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span><span class="sxs-lookup"><span data-stu-id="822f6-209">If hello repository is corrupted, see [WMI: Repository Corruption, or Not](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span></span>

4. <span data-ttu-id="822f6-210">Assicurarsi che qualsiasi altra applicazione non utilizza la porta 3389 hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-210">Make sure that any other application is not using hello port 3389.</span></span> <span data-ttu-id="822f6-211">Questa porta viene utilizzata per hello servizio RDP in Azure.</span><span class="sxs-lookup"><span data-stu-id="822f6-211">This port is used for hello RDP service in Azure.</span></span> <span data-ttu-id="822f6-212">È possibile eseguire **netstat - anob** toosee le porte in uso nel hello VM:</span><span class="sxs-lookup"><span data-stu-id="822f6-212">You can run **netstat -anob** toosee which ports are in used on hello VM:</span></span>

    ```PowerShell
    netstat -anob
    ```

5. <span data-ttu-id="822f6-213">Se il disco rigido virtuale di Windows che si desidera tooupload hello è un controller di dominio, attenersi alla seguente procedura:</span><span class="sxs-lookup"><span data-stu-id="822f6-213">If hello Windows VHD that you want tooupload is a domain controller, then follow these steps:</span></span>

    <span data-ttu-id="822f6-214">R.</span><span class="sxs-lookup"><span data-stu-id="822f6-214">A.</span></span> <span data-ttu-id="822f6-215">Seguire [questi passaggi aggiuntivi](https://support.microsoft.com/kb/2904015) disco hello tooprepare.</span><span class="sxs-lookup"><span data-stu-id="822f6-215">Follow [these extra steps](https://support.microsoft.com/kb/2904015) tooprepare hello disk.</span></span>

    <span data-ttu-id="822f6-216">B.</span><span class="sxs-lookup"><span data-stu-id="822f6-216">B.</span></span> <span data-ttu-id="822f6-217">Assicurarsi di conoscere la password DSRM hello nel caso in cui si toostart hello macchina virtuale in modalità ripristino servizi directory in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="822f6-217">Make sure that you know hello DSRM password in case you have toostart hello VM in DSRM at some point.</span></span> <span data-ttu-id="822f6-218">È possibile toorefer toothis collegamento hello tooset [password modalità ripristino servizi directory](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="822f6-218">You may want toorefer toothis link tooset hello [DSRM password](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span></span>

6. <span data-ttu-id="822f6-219">Assicurarsi che la password e account Administrator predefinito hello sono note tooyou.</span><span class="sxs-lookup"><span data-stu-id="822f6-219">Make sure that hello Built-in Administrator account and password are known tooyou.</span></span> <span data-ttu-id="822f6-220">È possibile desidera password dell'amministratore locale corrente tooreset hello e assicurarsi che è possibile utilizzare questo account toosign in tooWindows tramite hello connessione RDP.</span><span class="sxs-lookup"><span data-stu-id="822f6-220">You may want tooreset hello current local administrator password and make sure that you can use this account toosign in tooWindows through hello RDP connection.</span></span> <span data-ttu-id="822f6-221">Questa autorizzazione di accesso è controllata dall'oggetto Criteri di gruppo "Consenti accesso tramite Servizi Desktop remoto" hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-221">This access permission is controlled by hello "Allow log on through Remote Desktop Services" Group Policy object.</span></span> <span data-ttu-id="822f6-222">È possibile visualizzare questo oggetto in Editor criteri di gruppo locali hello in:</span><span class="sxs-lookup"><span data-stu-id="822f6-222">You can view this object in hello Local Group Policy Editor under:</span></span>

    <span data-ttu-id="822f6-223">Configurazione computer\Impostazioni di Windows\Impostazioni di sicurezza\Criteri locali\Assegnazione diritti utente</span><span class="sxs-lookup"><span data-stu-id="822f6-223">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment</span></span>

7. <span data-ttu-id="822f6-224">Controllare criteri di hello seguente AD assicurarsi che non siano bloccate l'accesso RDP tramite RDP né dalla rete hello toomake:</span><span class="sxs-lookup"><span data-stu-id="822f6-224">Check hello following AD polices toomake sure that you are not blocking your RDP access through RDP nor from hello network:</span></span>

    - <span data-ttu-id="822f6-225">Computer Configurazione computer\Impostazioni di Windows\Impostazioni sicurezza\Criteri locali\Assegnazione diritti Assignment\Deny accesso toothis computer hello rete</span><span class="sxs-lookup"><span data-stu-id="822f6-225">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny access toothis computer from hello network</span></span>

    - <span data-ttu-id="822f6-226">Configurazione computer\Impostazioni di Windows\Impostazioni protezione\Criteri locali\Assegnazione diritti utente\Impedisci accesso tramite Servizi Desktop remoto</span><span class="sxs-lookup"><span data-stu-id="822f6-226">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny log on through Remote Desktop Services</span></span>


8. <span data-ttu-id="822f6-227">Riavvio hello VM toomake che Windows sia ancora integro può essere raggiunto tramite la connessione RDP hello.</span><span class="sxs-lookup"><span data-stu-id="822f6-227">Restart hello VM toomake sure that Windows is still healthy can be reached by using hello RDP connection.</span></span> <span data-ttu-id="822f6-228">A questo punto, è possibile desiderata del locale Hyper-V toomake che hello che VM avvio completamente toocreate una macchina virtuale e quindi verificare se si tratta di RDP raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="822f6-228">At this point, you may want toocreate a VM in your local Hyper-V toomake sure hello VM is starting completely and then test whether it is RDP reachable.</span></span>

9. <span data-ttu-id="822f6-229">Rimuovere qualsiasi filtro TDI (Transport Driver Interface) aggiuntivo, ad esempio il software che analizza i pacchetti TCP o altri firewall.</span><span class="sxs-lookup"><span data-stu-id="822f6-229">Remove any extra Transport Driver Interface filters, such as software that analyzes TCP packets or extra firewalls.</span></span> <span data-ttu-id="822f6-230">È anche possibile esaminare questa in una fase successiva dopo hello che macchina virtuale viene distribuita in Azure, se necessario.</span><span class="sxs-lookup"><span data-stu-id="822f6-230">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

10. <span data-ttu-id="822f6-231">Disinstallare eventuali altri software di terze parti e driver che i componenti correlati toophysical o qualsiasi altra tecnologia di virtualizzazione.</span><span class="sxs-lookup"><span data-stu-id="822f6-231">Uninstall any other third-party software and driver that is related toophysical components or any other virtualization technology.</span></span>

### <a name="install-windows-updates"></a><span data-ttu-id="822f6-232">Installare gli aggiornamenti di Windows</span><span class="sxs-lookup"><span data-stu-id="822f6-232">Install Windows Updates</span></span>
<span data-ttu-id="822f6-233">configurazione ideale Hello è troppo**disporre del livello di patch hello di computer più recenti hello hello**.</span><span class="sxs-lookup"><span data-stu-id="822f6-233">hello ideal configuration is too**have hello patch level of hello machine at hello latest**.</span></span> <span data-ttu-id="822f6-234">In caso contrario, verificare che tale hello dopo gli aggiornamenti vengono installati:</span><span class="sxs-lookup"><span data-stu-id="822f6-234">If this is not possible, make sure that hello following updates are installed:</span></span>

|                       |                   |           |                                       <span data-ttu-id="822f6-235">Versione minima del file x64</span><span class="sxs-lookup"><span data-stu-id="822f6-235">Minimum file version x64</span></span>       |                                      |                                      |                            |
|-------------------------|-------------------|------------------------------------|---------------------------------------------|--------------------------------------|--------------------------------------|----------------------------|
| <span data-ttu-id="822f6-236">Componente</span><span class="sxs-lookup"><span data-stu-id="822f6-236">Component</span></span>               | <span data-ttu-id="822f6-237">Binary</span><span class="sxs-lookup"><span data-stu-id="822f6-237">Binary</span></span>            | <span data-ttu-id="822f6-238">Windows 7 e Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="822f6-238">Windows 7 & Windows Server 2008 R2</span></span> | <span data-ttu-id="822f6-239">Windows 8 e Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="822f6-239">Windows 8 & Windows Server 2012</span></span>             | <span data-ttu-id="822f6-240">Windows 8.1 e Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="822f6-240">Windows 8.1 & Windows Server 2012 R2</span></span> | <span data-ttu-id="822f6-241">Windows 10 e Windows Server 2016 RS1</span><span class="sxs-lookup"><span data-stu-id="822f6-241">Windows 10 & Windows Server 2016 RS1</span></span> | <span data-ttu-id="822f6-242">Windows 10 RS2</span><span class="sxs-lookup"><span data-stu-id="822f6-242">Windows 10 RS2</span></span>             |
| <span data-ttu-id="822f6-243">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="822f6-243">Storage</span></span>                 | <span data-ttu-id="822f6-244">disk.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-244">disk.sys</span></span>          | <span data-ttu-id="822f6-245">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-245">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="822f6-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span></span> | <span data-ttu-id="822f6-247">6.3.9600.18203 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="822f6-247">6.3.9600.18203 - KB3137061</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="822f6-248">storport.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-248">storport.sys</span></span>      | <span data-ttu-id="822f6-249">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-249">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span><span class="sxs-lookup"><span data-stu-id="822f6-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span></span> | <span data-ttu-id="822f6-251">6.3.9600.18573 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-251">6.3.9600.18573 - KB4022726</span></span>           | <span data-ttu-id="822f6-252">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-252">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="822f6-253">10.0.15063.332</span><span class="sxs-lookup"><span data-stu-id="822f6-253">10.0.15063.332</span></span>             |
|                         | <span data-ttu-id="822f6-254">ntfs.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-254">ntfs.sys</span></span>          | <span data-ttu-id="822f6-255">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-255">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span><span class="sxs-lookup"><span data-stu-id="822f6-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span></span> | <span data-ttu-id="822f6-257">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-257">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="822f6-258">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-258">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="822f6-259">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="822f6-259">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="822f6-260">Iologmsg.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-260">Iologmsg.dll</span></span>      | <span data-ttu-id="822f6-261">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-261">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-262">6.2.9200.16384 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="822f6-262">6.2.9200.16384 - KB2995387</span></span>                  | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="822f6-263">Classpnp.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-263">Classpnp.sys</span></span>      | <span data-ttu-id="822f6-264">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-264">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="822f6-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span></span> | <span data-ttu-id="822f6-266">6.3.9600.18334 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="822f6-266">6.3.9600.18334 - KB3172614</span></span>           | <span data-ttu-id="822f6-267">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-267">10.0.14393.953 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="822f6-268">Volsnap.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-268">Volsnap.sys</span></span>       | <span data-ttu-id="822f6-269">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-269">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span><span class="sxs-lookup"><span data-stu-id="822f6-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span></span> | <span data-ttu-id="822f6-271">6.3.9600.18265 - KB3145384</span><span class="sxs-lookup"><span data-stu-id="822f6-271">6.3.9600.18265 - KB3145384</span></span>           | -                                    | <span data-ttu-id="822f6-272">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-272">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-273">partmgr.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-273">partmgr.sys</span></span>       | <span data-ttu-id="822f6-274">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-274">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-275">6.2.9200.16681 - KB2877114</span><span class="sxs-lookup"><span data-stu-id="822f6-275">6.2.9200.16681 - KB2877114</span></span>                  | <span data-ttu-id="822f6-276">6.3.9600.17401 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="822f6-276">6.3.9600.17401 - KB3000850</span></span>           | <span data-ttu-id="822f6-277">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-277">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="822f6-278">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-278">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-279">volmgr.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-279">volmgr.sys</span></span>        |                                    |                                             |                                      |                                      | <span data-ttu-id="822f6-280">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-280">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-281">Volmgrx.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-281">Volmgrx.sys</span></span>       | <span data-ttu-id="822f6-282">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-282">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | <span data-ttu-id="822f6-283">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-283">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-284">Msiscsi.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-284">Msiscsi.sys</span></span>       | <span data-ttu-id="822f6-285">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-285">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-286">6.2.9200.21006 - KB2955163</span><span class="sxs-lookup"><span data-stu-id="822f6-286">6.2.9200.21006 - KB2955163</span></span>                  | <span data-ttu-id="822f6-287">6.3.9600.18624 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-287">6.3.9600.18624 - KB4022726</span></span>           | <span data-ttu-id="822f6-288">10.0.14393.1066 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-288">10.0.14393.1066 - KB4022715</span></span>          | <span data-ttu-id="822f6-289">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="822f6-289">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="822f6-290">Msdsm.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-290">Msdsm.sys</span></span>         | <span data-ttu-id="822f6-291">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-291">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-292">6.2.9200.21474 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="822f6-292">6.2.9200.21474 - KB3046101</span></span>                  | <span data-ttu-id="822f6-293">6.3.9600.18592 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-293">6.3.9600.18592 - KB4022726</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="822f6-294">Mpio.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-294">Mpio.sys</span></span>          | <span data-ttu-id="822f6-295">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-295">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-296">6.2.9200.21190 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="822f6-296">6.2.9200.21190 - KB3046101</span></span>                  | <span data-ttu-id="822f6-297">6.3.9600.18616 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-297">6.3.9600.18616 - KB4022726</span></span>           | <span data-ttu-id="822f6-298">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-298">10.0.14393.1198 - KB4022715</span></span>          | -                          |
|                         | <span data-ttu-id="822f6-299">Fveapi.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-299">Fveapi.dll</span></span>        | <span data-ttu-id="822f6-300">6.1.7601.23311 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-300">6.1.7601.23311 - KB3125574</span></span>         | <span data-ttu-id="822f6-301">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="822f6-301">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="822f6-302">6.3.9600.18294 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="822f6-302">6.3.9600.18294 - KB3172614</span></span>           | <span data-ttu-id="822f6-303">10.0.14393.576 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-303">10.0.14393.576 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="822f6-304">Fveapibase.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-304">Fveapibase.dll</span></span>    | <span data-ttu-id="822f6-305">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-305">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-306">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="822f6-306">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="822f6-307">6.3.9600.17415 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="822f6-307">6.3.9600.17415 - KB3172614</span></span>           | <span data-ttu-id="822f6-308">10.0.14393.206 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-308">10.0.14393.206 - KB4022715</span></span>           | -                          |
| <span data-ttu-id="822f6-309">Rete</span><span class="sxs-lookup"><span data-stu-id="822f6-309">Network</span></span>                 | <span data-ttu-id="822f6-310">netvsc.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-310">netvsc.sys</span></span>        | -                                  | -                                           | -                                    | <span data-ttu-id="822f6-311">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-311">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="822f6-312">10.0.15063.250 - KB4020001</span><span class="sxs-lookup"><span data-stu-id="822f6-312">10.0.15063.250 - KB4020001</span></span> |
|                         | <span data-ttu-id="822f6-313">mrxsmb10.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-313">mrxsmb10.sys</span></span>      | <span data-ttu-id="822f6-314">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="822f6-314">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="822f6-315">6.2.9200.22108 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-315">6.2.9200.22108 - KB4022724</span></span>                  | <span data-ttu-id="822f6-316">6.3.9600.18603 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-316">6.3.9600.18603 - KB4022726</span></span>           | <span data-ttu-id="822f6-317">10.0.14393.479 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-317">10.0.14393.479 - KB4022715</span></span>           | <span data-ttu-id="822f6-318">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="822f6-318">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="822f6-319">mrxsmb20.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-319">mrxsmb20.sys</span></span>      | <span data-ttu-id="822f6-320">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="822f6-320">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="822f6-321">6.2.9200.21548 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-321">6.2.9200.21548 - KB4022724</span></span>                  | <span data-ttu-id="822f6-322">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-322">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="822f6-323">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-323">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="822f6-324">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="822f6-324">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="822f6-325">mrxsmb.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-325">mrxsmb.sys</span></span>        | <span data-ttu-id="822f6-326">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="822f6-326">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="822f6-327">6.2.9200.22074 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-327">6.2.9200.22074 - KB4022724</span></span>                  | <span data-ttu-id="822f6-328">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-328">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="822f6-329">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-329">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="822f6-330">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-330">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-331">tcpip.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-331">tcpip.sys</span></span>         | <span data-ttu-id="822f6-332">6.1.7601.23761 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="822f6-332">6.1.7601.23761 - KB4022722</span></span>         | <span data-ttu-id="822f6-333">6.2.9200.22070 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-333">6.2.9200.22070 - KB4022724</span></span>                  | <span data-ttu-id="822f6-334">6.3.9600.18478 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-334">6.3.9600.18478 - KB4022726</span></span>           | <span data-ttu-id="822f6-335">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-335">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="822f6-336">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="822f6-336">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="822f6-337">http.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-337">http.sys</span></span>          | <span data-ttu-id="822f6-338">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-338">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-339">6.2.9200.17285 - KB3042553</span><span class="sxs-lookup"><span data-stu-id="822f6-339">6.2.9200.17285 - KB3042553</span></span>                  | <span data-ttu-id="822f6-340">6.3.9600.18574 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-340">6.3.9600.18574 - KB4022726</span></span>           | <span data-ttu-id="822f6-341">10.0.14393.251 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-341">10.0.14393.251 - KB4022715</span></span>           | <span data-ttu-id="822f6-342">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="822f6-342">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="822f6-343">vmswitch.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-343">vmswitch.sys</span></span>      | <span data-ttu-id="822f6-344">6.1.7601.23727 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="822f6-344">6.1.7601.23727 - KB4022719</span></span>         | <span data-ttu-id="822f6-345">6.2.9200.22117 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-345">6.2.9200.22117 - KB4022724</span></span>                  | <span data-ttu-id="822f6-346">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-346">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="822f6-347">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-347">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="822f6-348">10.0.15063.138</span><span class="sxs-lookup"><span data-stu-id="822f6-348">10.0.15063.138</span></span>             |
| <span data-ttu-id="822f6-349">Core</span><span class="sxs-lookup"><span data-stu-id="822f6-349">Core</span></span>                    | <span data-ttu-id="822f6-350">ntoskrnl.exe</span><span class="sxs-lookup"><span data-stu-id="822f6-350">ntoskrnl.exe</span></span>      | <span data-ttu-id="822f6-351">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="822f6-351">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="822f6-352">6.2.9200.22170 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="822f6-352">6.2.9200.22170 - KB4022718</span></span>                  | <span data-ttu-id="822f6-353">6.3.9600.18696 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-353">6.3.9600.18696 - KB4022726</span></span>           | <span data-ttu-id="822f6-354">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-354">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="822f6-355">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="822f6-355">10.0.15063.483</span></span>             |
| <span data-ttu-id="822f6-356">Servizi Desktop remoto</span><span class="sxs-lookup"><span data-stu-id="822f6-356">Remote Desktop Services</span></span> | <span data-ttu-id="822f6-357">rdpcorets.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-357">rdpcorets.dll</span></span>     | <span data-ttu-id="822f6-358">6.2.9200.21506 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="822f6-358">6.2.9200.21506 - KB4022719</span></span>         | <span data-ttu-id="822f6-359">6.2.9200.22104 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="822f6-359">6.2.9200.22104 - KB4022724</span></span>                  | <span data-ttu-id="822f6-360">6.3.9600.18619 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-360">6.3.9600.18619 - KB4022726</span></span>           | <span data-ttu-id="822f6-361">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-361">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="822f6-362">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-362">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-363">termsrv.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-363">termsrv.dll</span></span>       | <span data-ttu-id="822f6-364">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-364">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="822f6-365">6.2.9200.17048 - KB2973501</span><span class="sxs-lookup"><span data-stu-id="822f6-365">6.2.9200.17048 - KB2973501</span></span>                  | <span data-ttu-id="822f6-366">6.3.9600.17415 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="822f6-366">6.3.9600.17415 - KB3000850</span></span>           | <span data-ttu-id="822f6-367">10.0.14393.0 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-367">10.0.14393.0 - KB4022715</span></span>             | <span data-ttu-id="822f6-368">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="822f6-368">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="822f6-369">termdd.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-369">termdd.sys</span></span>        | <span data-ttu-id="822f6-370">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-370">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="822f6-371">win32k.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-371">win32k.sys</span></span>        | <span data-ttu-id="822f6-372">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="822f6-372">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="822f6-373">6.2.9200.22168 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="822f6-373">6.2.9200.22168 - KB4022718</span></span>                  | <span data-ttu-id="822f6-374">6.3.9600.18698 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="822f6-374">6.3.9600.18698 - KB4022726</span></span>           | <span data-ttu-id="822f6-375">10.0.14393.594 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="822f6-375">10.0.14393.594 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="822f6-376">rdpdd.dll</span><span class="sxs-lookup"><span data-stu-id="822f6-376">rdpdd.dll</span></span>         | <span data-ttu-id="822f6-377">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-377">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="822f6-378">rdpwd.sys</span><span class="sxs-lookup"><span data-stu-id="822f6-378">rdpwd.sys</span></span>         | <span data-ttu-id="822f6-379">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="822f6-379">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
| <span data-ttu-id="822f6-380">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="822f6-380">Security</span></span>                | <span data-ttu-id="822f6-381">Scadenza tooWannaCrypt</span><span class="sxs-lookup"><span data-stu-id="822f6-381">Due tooWannaCrypt</span></span> | <span data-ttu-id="822f6-382">KB4012212</span><span class="sxs-lookup"><span data-stu-id="822f6-382">KB4012212</span></span>                          | <span data-ttu-id="822f6-383">KB4012213</span><span class="sxs-lookup"><span data-stu-id="822f6-383">KB4012213</span></span>                                   | <span data-ttu-id="822f6-384">KB4012213</span><span class="sxs-lookup"><span data-stu-id="822f6-384">KB4012213</span></span>                            | <span data-ttu-id="822f6-385">KB4012606</span><span class="sxs-lookup"><span data-stu-id="822f6-385">KB4012606</span></span>                            | <span data-ttu-id="822f6-386">KB4012606</span><span class="sxs-lookup"><span data-stu-id="822f6-386">KB4012606</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="822f6-387">KB4012216</span><span class="sxs-lookup"><span data-stu-id="822f6-387">KB4012216</span></span>                                   |                                      | <span data-ttu-id="822f6-388">KB4013198</span><span class="sxs-lookup"><span data-stu-id="822f6-388">KB4013198</span></span>                            | <span data-ttu-id="822f6-389">KB4013198</span><span class="sxs-lookup"><span data-stu-id="822f6-389">KB4013198</span></span>                  |
|                         |                   | <span data-ttu-id="822f6-390">KB4012215</span><span class="sxs-lookup"><span data-stu-id="822f6-390">KB4012215</span></span>                          | <span data-ttu-id="822f6-391">KB4012214</span><span class="sxs-lookup"><span data-stu-id="822f6-391">KB4012214</span></span>                                   | <span data-ttu-id="822f6-392">KB4012216</span><span class="sxs-lookup"><span data-stu-id="822f6-392">KB4012216</span></span>                            | <span data-ttu-id="822f6-393">KB4013429</span><span class="sxs-lookup"><span data-stu-id="822f6-393">KB4013429</span></span>                            | <span data-ttu-id="822f6-394">KB4013429</span><span class="sxs-lookup"><span data-stu-id="822f6-394">KB4013429</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="822f6-395">KB4012217</span><span class="sxs-lookup"><span data-stu-id="822f6-395">KB4012217</span></span>                                   |                                      | <span data-ttu-id="822f6-396">KB4013429</span><span class="sxs-lookup"><span data-stu-id="822f6-396">KB4013429</span></span>                            | <span data-ttu-id="822f6-397">KB4013429</span><span class="sxs-lookup"><span data-stu-id="822f6-397">KB4013429</span></span>                  |
       
### <span data-ttu-id="822f6-398">Quando toouse sysprep<a id="step23"></a></span><span class="sxs-lookup"><span data-stu-id="822f6-398">When toouse sysprep <a id="step23"></a></span></span>    

<span data-ttu-id="822f6-399">Sysprep è un processo che è possibile eseguire in un'installazione di windows che verrà reimpostato installazione hello del sistema di hello e fornirà un "configurazione hello guidata" rimuovendo tutti i dati personali e la reimpostazione di diversi componenti.</span><span class="sxs-lookup"><span data-stu-id="822f6-399">Sysprep is a process that you could run into a windows installation that will reset hello installation of hello system and will provide an “out of hello box experience” by removing all personal data and resetting several components.</span></span> <span data-ttu-id="822f6-400">In genere questa operazione è se si desidera toocreate un modello da cui è possibile distribuire diverse altre macchine virtuali che hanno una configurazione specifica.</span><span class="sxs-lookup"><span data-stu-id="822f6-400">You typically do this if you want toocreate a template from which you can deploy several other VMs that have a specific configuration.</span></span> <span data-ttu-id="822f6-401">Il modello è denominato **immagine generalizzata**.</span><span class="sxs-lookup"><span data-stu-id="822f6-401">This is called a **generalized image**.</span></span>

<span data-ttu-id="822f6-402">Se, invece, si desidera toocreate solo una macchina virtuale da un disco, non è toouse sysprep.</span><span class="sxs-lookup"><span data-stu-id="822f6-402">If, instead, you want only toocreate one VM from one disk, you don’t have toouse sysprep.</span></span> <span data-ttu-id="822f6-403">In questo caso, è possibile creare hello macchina virtuale da cosa è noto come un **immagine specializzata**.</span><span class="sxs-lookup"><span data-stu-id="822f6-403">In this situation, you can just create hello VM from what is known as a **specialized image**.</span></span>

<span data-ttu-id="822f6-404">Per ulteriori informazioni su come toocreate una macchina virtuale da un disco specializzato, vedere:</span><span class="sxs-lookup"><span data-stu-id="822f6-404">For more information about how toocreate a VM from a specialized disk, see:</span></span>

- [<span data-ttu-id="822f6-405">Creare una macchina virtuale da un disco specializzato</span><span class="sxs-lookup"><span data-stu-id="822f6-405">Create a VM from a specialized disk</span></span>](create-vm-specialized.md)
- [<span data-ttu-id="822f6-406">Creare una macchina virtuale da un disco rigido virtuale specializzato</span><span class="sxs-lookup"><span data-stu-id="822f6-406">Create a VM from a specialized VHD disk</span></span>](https://azure.microsoft.com/resources/templates/201-vm-specialized-vhd/)

<span data-ttu-id="822f6-407">Se si desidera un'immagine generalizzata toocreate, è necessario toorun sysprep.</span><span class="sxs-lookup"><span data-stu-id="822f6-407">If you want toocreate a generalized image, you need toorun sysprep.</span></span> <span data-ttu-id="822f6-408">Per ulteriori informazioni su Sysprep, vedere [come tooUse Sysprep: An Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span><span class="sxs-lookup"><span data-stu-id="822f6-408">For more information about Sysprep, see [How tooUse Sysprep: An Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span></span> 

<span data-ttu-id="822f6-409">Non tutti i ruoli o le applicazioni installate in un computer basato su Windows supportano questa generalizzazione.</span><span class="sxs-lookup"><span data-stu-id="822f6-409">Not every role or application that’s installed on a Windows-based computer supports this generalization.</span></span> <span data-ttu-id="822f6-410">Pertanto, prima eseguire questa procedura, vedere toohello seguente articolo toomake assicurarsi che tale ruolo hello del computer è supportata da sysprep.</span><span class="sxs-lookup"><span data-stu-id="822f6-410">So before you run this procedure, refer toohello following article toomake sure that hello role of that computer is supported by sysprep.</span></span> <span data-ttu-id="822f6-411">Per altre informazioni, vedere [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles) (Supporto Sysprep per i ruoli server).</span><span class="sxs-lookup"><span data-stu-id="822f6-411">For more information, [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span></span>

### <a name="steps-toogeneralize-a-vhd"></a><span data-ttu-id="822f6-412">Passaggi toogeneralize un disco rigido virtuale</span><span class="sxs-lookup"><span data-stu-id="822f6-412">Steps toogeneralize a VHD</span></span>

>[!NOTE]
> <span data-ttu-id="822f6-413">Dopo aver eseguito sysprep.exe hello specificato nella procedura seguente, disattivare la macchina virtuale hello e non riattivarla finché non si crea un'immagine da esso in Azure.</span><span class="sxs-lookup"><span data-stu-id="822f6-413">After you run sysprep.exe as specified  in hello following steps, turn off hello VM, and do not turn it back on until you create an image from it in Azure.</span></span>

1. <span data-ttu-id="822f6-414">Accedi toohello macchina virtuale di Windows.</span><span class="sxs-lookup"><span data-stu-id="822f6-414">Sign in toohello Windows VM.</span></span>
2. <span data-ttu-id="822f6-415">Eseguire il **prompt dei comandi** come amministratore.</span><span class="sxs-lookup"><span data-stu-id="822f6-415">Run **Command Prompt** as an administrator.</span></span> 
3. <span data-ttu-id="822f6-416">Passare alla directory hello: **%windir%\system32\sysprep**, quindi eseguire **sysprep.exe**.</span><span class="sxs-lookup"><span data-stu-id="822f6-416">Change hello directory to: **%windir%\system32\sysprep**, and then run **sysprep.exe**.</span></span>
3. <span data-ttu-id="822f6-417">In hello **System Preparation Tool** nella finestra di dialogo **immettere sistema Out-of-Box guidata**e assicurarsi che tale hello **Generalize** casella di controllo è selezionata.</span><span class="sxs-lookup"><span data-stu-id="822f6-417">In hello **System Preparation Tool** dialog box, select **Enter System Out-of-Box Experience (OOBE)**, and make sure that hello **Generalize** check box is selected.</span></span>

    ![Utilità preparazione sistema](media/prepare-for-upload-vhd-image/syspre.png)
4. <span data-ttu-id="822f6-419">In **Opzioni di arresto del sistema** selezionare **Arresta il sistema**.</span><span class="sxs-lookup"><span data-stu-id="822f6-419">In **Shutdown Options**, select **Shutdown**.</span></span>
5. <span data-ttu-id="822f6-420">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="822f6-420">Click **OK**.</span></span>
6. <span data-ttu-id="822f6-421">Al termine di Sysprep, arrestare hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-421">When Sysprep completes, shut down hello VM.</span></span> <span data-ttu-id="822f6-422">Non utilizzare **riavviare** tooshut verso il basso hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-422">Do not use **Restart** tooshut down hello VM.</span></span>
7. <span data-ttu-id="822f6-423">Hello disco rigido virtuale è ora pronto toobe caricato.</span><span class="sxs-lookup"><span data-stu-id="822f6-423">Now hello VHD is ready toobe uploaded.</span></span> <span data-ttu-id="822f6-424">Per ulteriori informazioni su come toocreate una macchina virtuale da un disco, vedere [caricare un disco rigido virtuale generalizzato e usarlo toocreate un nuove macchine virtuali in Azure](sa-upload-generalized.md).</span><span class="sxs-lookup"><span data-stu-id="822f6-424">For more information about how toocreate a VM from a generalized disk, see [Upload a generalized VHD and use it toocreate a new VMs in Azure](sa-upload-generalized.md).</span></span>


## <a name="complete-recommended-configurations"></a><span data-ttu-id="822f6-425">Completare le configurazioni consigliate</span><span class="sxs-lookup"><span data-stu-id="822f6-425">Complete recommended configurations</span></span>
<span data-ttu-id="822f6-426">Hello seguenti impostazioni non influisce il caricamento di disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="822f6-426">hello following settings do not affect VHD uploading.</span></span> <span data-ttu-id="822f6-427">È tuttavia fortemente consigliabile configurarle.</span><span class="sxs-lookup"><span data-stu-id="822f6-427">However, we strongly recommend that you configured them.</span></span>

* <span data-ttu-id="822f6-428">Installare hello [agente di macchine virtuali di Azure](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="822f6-428">Install hello [Azure VMs Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="822f6-429">Sarà quindi possibile abilitare le estensioni delle VM.</span><span class="sxs-lookup"><span data-stu-id="822f6-429">Then you can enable VM extensions.</span></span> <span data-ttu-id="822f6-430">le estensioni VM Hello implementare la maggior parte delle funzionalità di hello critiche che si toouse con le macchine virtuali, ad esempio la reimpostazione delle password, la configurazione RDP e così via.</span><span class="sxs-lookup"><span data-stu-id="822f6-430">hello VM extensions implement most of hello critical functionality that you might want toouse with your VMs such as resetting passwords, configuring RDP, and so on.</span></span> <span data-ttu-id="822f6-431">Per altre informazioni, vedere:</span><span class="sxs-lookup"><span data-stu-id="822f6-431">For more information, see:</span></span>

    - [<span data-ttu-id="822f6-432">Agente ed estensioni delle VM - Parte 1</span><span class="sxs-lookup"><span data-stu-id="822f6-432">VM Agent and Extensions – Part 1</span></span>](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/)
    - [<span data-ttu-id="822f6-433">Agente ed estensioni delle VM - Parte 2</span><span class="sxs-lookup"><span data-stu-id="822f6-433">VM Agent and Extensions – Part 2</span></span>](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/)
* <span data-ttu-id="822f6-434">log di Dump Hello può essere utile nella risoluzione dei problemi di arresto anomalo del sistema di Windows.</span><span class="sxs-lookup"><span data-stu-id="822f6-434">hello Dump log can be helpful in troubleshooting Windows crash issues.</span></span> <span data-ttu-id="822f6-435">Abilitare la raccolta di log Dump hello:</span><span class="sxs-lookup"><span data-stu-id="822f6-435">Enable hello Dump log collection:</span></span>
  
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "AutoReboot" -Value 0 -Type DWord
    New-Item -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps'
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
    <span data-ttu-id="822f6-436">Se si ricevono errori durante le procedure hello i passaggi in questo articolo, ciò significa che le chiavi del Registro di sistema hello esiste già.</span><span class="sxs-lookup"><span data-stu-id="822f6-436">If you receive any errors during any of hello procedural steps in this article, this means that hello registry keys already exists.</span></span> <span data-ttu-id="822f6-437">In questo caso, utilizzare hello seguente invece di comandi:</span><span class="sxs-lookup"><span data-stu-id="822f6-437">In this situation, use hello following commands instead:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
*  <span data-ttu-id="822f6-438">Dopo aver creato hello VM in Azure, è consigliabile archiviare file di paging hello in hello "temporale" volume tooimprove le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="822f6-438">After hello VM is created in Azure, we recommend that you put hello pagefile on hello ”Temporal drive” volume tooimprove performance.</span></span> <span data-ttu-id="822f6-439">A tale scopo, procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="822f6-439">You can set up this as follows:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management' -name "PagingFiles" -Value "D:\pagefile"
    ```
<span data-ttu-id="822f6-440">Se è presente qualsiasi disco dati collegato toohello macchina virtuale, la lettera di unità del volume di unità temporali hello è in genere "d".</span><span class="sxs-lookup"><span data-stu-id="822f6-440">If there’s any data disk that is attached toohello VM, hello Temporal drive volume's drive letter is typically "D."</span></span> <span data-ttu-id="822f6-441">Tale designazione potrebbe essere diverso, in base al numero di hello di unità disponibili e le impostazioni di hello apportate.</span><span class="sxs-lookup"><span data-stu-id="822f6-441">This designation could be different, depending on hello number of available drives and hello settings that you  make.</span></span>

## <a name="next-steps"></a><span data-ttu-id="822f6-442">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="822f6-442">Next steps</span></span>
* [<span data-ttu-id="822f6-443">Caricare un tooAzure immagine di macchina virtuale di Windows per le distribuzioni di gestione risorse</span><span class="sxs-lookup"><span data-stu-id="822f6-443">Upload a Windows VM image tooAzure for Resource Manager deployments</span></span>](upload-generalized-managed.md)

