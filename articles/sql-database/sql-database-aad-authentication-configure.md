---
title: Configurare Azure Active Directory Authentication Library - SQL | Documentazione Microsoft
description: Informazioni su come eseguire la connessione a un database SQL e SQL Data Warehouse con l'autenticazione di Azure Active Directory.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: 61a52813769891aa63373437e9300d4f8f47fab2
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="5c7a0-103">Configurare e gestire l'autenticazione di Azure Active Directory con il database SQL oppure con SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="5c7a0-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="5c7a0-104">Questo articolo illustra come creare e popolare Azure Active Directory e quindi usare Azure Active Directory con il database SQL di Azure o con SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-104">This article shows you how to create and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="5c7a0-105">Per una panoramica vedere [Autenticazione di Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="5c7a0-106">La connessione a SQL Server in esecuzione in una VM di Azure non è supportata con un account Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-106">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="5c7a0-107">Usare un account Active Directory di dominio.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="5c7a0-108">Creare e popolare un'istanza di Azure AD</span><span class="sxs-lookup"><span data-stu-id="5c7a0-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="5c7a0-109">Creare un'istanza di Azure AD e popolarla con utenti e gruppi.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="5c7a0-110">Azure AD può essere il dominio gestito di Azure AD iniziale.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-110">Azure AD can be the initial domain Azure AD managed domain.</span></span> <span data-ttu-id="5c7a0-111">Azure AD può anche essere un set di servizi di dominio Active Directory locali federato con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with the Azure AD.</span></span>

<span data-ttu-id="5c7a0-112">Per altre informazioni, consultare [Integrazione delle identità locali con Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Aggiungere un nome di dominio personalizzato ad Azure AD](../active-directory/active-directory-add-domain.md), [Windows Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/) (Nuovo supporto per la federazione con Active Directory di Windows Server in Windows Azure), [Amministrazione della directory di Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx) e [Gestire Azure AD con Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0) e [Porte e protocolli necessari per la soluzione ibrida di gestione delle identità](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-the-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="5c7a0-113">Facoltativo: associare o modificare l'istanza di Active Directory attualmente associata alla sottoscrizione di Azure</span><span class="sxs-lookup"><span data-stu-id="5c7a0-113">Optional: Associate or change the active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="5c7a0-114">Per associare il database alla directory di Azure AD dell'organizzazione, impostare la directory come directory attendibile per la sottoscrizione di Azure che ospita il database.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-114">To associate your database with the Azure AD directory for your organization, make the directory a trusted directory for the Azure subscription hosting the database.</span></span> <span data-ttu-id="5c7a0-115">Per altre informazioni, vedere [Associazione delle sottoscrizioni di Azure ad Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="5c7a0-116">**Altre informazioni:** ogni sottoscrizione di Azure ha una relazione di trust con un'istanza di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="5c7a0-117">Ciò significa che considera attendibile quella directory per l'autenticazione di utenti, servizi e dispositivi.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-117">This means that it trusts that directory to authenticate users, services, and devices.</span></span> <span data-ttu-id="5c7a0-118">Più sottoscrizioni possono considerare attendibile la stessa directory, ma una sottoscrizione considera attendibile una sola directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-118">Multiple subscriptions can trust the same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="5c7a0-119">È possibile vedere quale directory è considerata attendibile dalla propria sottoscrizione nella scheda **Impostazioni** all'indirizzo [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-119">You can see which directory is trusted by your subscription under the **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="5c7a0-120">Questa relazione di trust tra la sottoscrizione e la directory è diversa dalla relazione tra la sottoscrizione e tutte le altre risorse in Azure, ad esempio siti Web, database e così via, le quali sono da considerarsi più come risorse figlio di una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-120">This trust relationship that a subscription has with a directory is unlike the relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="5c7a0-121">Se la sottoscrizione scade, non sarà più possibile accedere a tutte queste altre risorse associate alla sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="5c7a0-121">If a subscription expires, then access to those other resources associated with the subscription also stops.</span></span> <span data-ttu-id="5c7a0-122">anche se la directory rimane in Azure, quindi sarà possibile associarvi un'altra sottoscrizione e continuare a gestire gli utenti della directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-122">But the directory remains in Azure, and you can associate another subscription with that directory and continue to manage the directory users.</span></span> <span data-ttu-id="5c7a0-123">Per altre informazioni sulle risorse, vedere [Informazioni sull'accesso alle risorse di Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="5c7a0-124">Le procedure seguenti illustrano come modificare la directory associata a una determinata sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-124">The following procedures show you how to change the associated directory for a given subscription.</span></span>
1. <span data-ttu-id="5c7a0-125">Connettersi al [portale di Azure classico](https://manage.windowsazure.com/) come amministratore della sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-125">Connect to your [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="5c7a0-126">Nel banner a sinistra selezionare **IMPOSTAZIONI**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-126">On the left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="5c7a0-127">Le sottoscrizioni sono visualizzate nella schermata delle impostazioni.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-127">Your subscriptions appear in the settings screen.</span></span> <span data-ttu-id="5c7a0-128">Se la sottoscrizione desiderata non è visualizzata, fare clic su **Sottoscrizioni** in alto, fare clic sulla casella di riepilogo a discesa **FILTRA PER DIRECTORY** e selezionare la directory che contiene le sottoscrizioni, quindi fare clic su **APPLICA**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-128">If the desired subscription does not appear, click **Subscriptions** at the top, drop down the **FILTER BY DIRECTORY** box and select the directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![selezionare la sottoscrizione][4]
4. <span data-ttu-id="5c7a0-130">Nell'area**impostazioni** fare clic sulla sottoscrizione e quindi su **MODIFICA DIRECTORY** in basso nella pagina.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-130">In the **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at the bottom of the page.</span></span>
   
    ![ad-settings-portal][5]
5. <span data-ttu-id="5c7a0-132">Nella casella **MODIFICA DIRECTORY** selezionare l'istanza di Azure Active Directory associata al server SQL o SQL Data Warehouse, quindi fare clic sulla freccia per continuare.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-132">In the **EDIT DIRECTORY** box, select the Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click the arrow for next.</span></span>
   
    ![edit-directory-select][6]
6. <span data-ttu-id="5c7a0-134">Nella finestra di dialogo **CONFERMA MAPPING DIRECTORY** confermare l'avviso "**Tutti i coamministratori verranno rimossi**".</span><span class="sxs-lookup"><span data-stu-id="5c7a0-134">In the **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![edit-directory-confirm][7]
7. <span data-ttu-id="5c7a0-136">Fare clic sul segno di spunta per ricaricare il portale.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-136">Click the check to reload the portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="5c7a0-137">Quando si modifica la directory, l'accesso per tutti i coamministratori, gli utenti e i gruppi di Azure AD e gli utenti delle risorse supportate dalla directory vengono rimossi e l'accesso a questa sottoscrizione o alle relative risorse non è più possibile.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-137">When you change the directory, access to all co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access to this subscription or its resources.</span></span> <span data-ttu-id="5c7a0-138">Solo l'amministratore del servizio può configurare l'accesso per le entità in base alla nuova directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-138">Only you, as a service administrator, can configure access for principals based on the new directory.</span></span> <span data-ttu-id="5c7a0-139">La propagazione di questa modifica a tutte le risorse potrebbe richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-139">This change might take a substantial amount of time to propagate to all resources.</span></span> <span data-ttu-id="5c7a0-140">La modifica della directory modifica anche l'amministratore di Azure AD per il database SQL e per SQL Data Warehouse e disabilita l'accesso al database per tutti gli utenti di Azure AD esistenti.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-140">Changing the directory, also changes the Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="5c7a0-141">L'amministratore di Azure AD deve essere reimpostato, come descritto di seguito, e dovranno essere creati nuovi utenti di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-141">The Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="5c7a0-142">Creare un amministratore di Azure Active Directory per il server SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="5c7a0-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="5c7a0-143">Ogni server di Azure SQL, che ospita un database SQL o SQL Data Warehouse, viene avviato con un singolo account amministratore del server, che è l'amministratore dell'intera istanza del server di Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is the administrator of the entire Azure SQL server.</span></span> <span data-ttu-id="5c7a0-144">È necessario creare un secondo amministratore del server SQL, cioè un account Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="5c7a0-145">Questa entità viene creata come un utente di database indipendente nel database master.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-145">This principal is created as a contained database user in the master database.</span></span> <span data-ttu-id="5c7a0-146">Per quando riguarda gli amministratori, gli account amministratore del server sono membri del ruolo **db_owner** in ogni database utente e ogni database utente viene immesso come utente **dbo**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-146">As administrators, the server administrator accounts are members of the **db_owner** role in every user database, and enter each user database as the **dbo** user.</span></span> <span data-ttu-id="5c7a0-147">Per altre informazioni sugli account amministratore del server, vedere l'articolo relativo alla [gestione di database e account di accesso nel database SQL di Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-147">For more information about the server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="5c7a0-148">Quando si usa Azure Active Directory con la replica geografica, l'amministratore di Azure Active Directory deve essere configurato sia per i server primari che per quelli secondari.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-148">When using Azure Active Directory with geo-replication, the Azure Active Directory administrator must be configured for both the primary and the secondary servers.</span></span> <span data-ttu-id="5c7a0-149">Se un server non ha un amministratore di Azure Active Directory, gli utenti e gli account di accesso di Azure Active Directory ricevono un messaggio di errore "Impossibile connettersi al server".</span><span class="sxs-lookup"><span data-stu-id="5c7a0-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" to server error.</span></span>

> [!NOTE]
> <span data-ttu-id="5c7a0-150">Gli utenti che non hanno un account Azure Active Directory, incluso l'account amministratore di Azure SQL Server, non possono creare utenti di Azure Active Directory, perché non hanno l'autorizzazione per convalidare con Azure Active Directory gli utenti di database proposti.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-150">Users that are not based on an Azure AD account (including the Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission to validate proposed database users with the Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="5c7a0-151">Eseguire il provisioning di un amministratore di Azure Active Directory per Azure SQL Server</span><span class="sxs-lookup"><span data-stu-id="5c7a0-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="5c7a0-152">Le due procedure seguenti illustrano come eseguire il provisioning di un amministratore di Azure Active Directory per il server SQL Azure usando il portale di Azure e PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-152">The following two procedures show you how to provision an Azure Active Directory administrator for your Azure SQL server in the Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="5c7a0-153">Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="5c7a0-153">Azure portal</span></span>
1. <span data-ttu-id="5c7a0-154">Nell'angolo in alto a destra del [portale di Azure](https://portal.azure.com/)fare clic sulla connessione per visualizzare un elenco a discesa delle possibili directory di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-154">In the [Azure portal](https://portal.azure.com/), in the upper-right corner, click your connection to drop down a list of possible Active Directories.</span></span> <span data-ttu-id="5c7a0-155">Scegliere la directory corretta come directory predefinita di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-155">Choose the correct Active Directory as the default Azure AD.</span></span> <span data-ttu-id="5c7a0-156">Questo passaggio elenca l'associazione della sottoscrizione di Active Directory con il server SQL di Azure, assicurando che la stessa sottoscrizione venga usata per Azure AD e per il server SQL.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-156">This step links the subscription association with Active Directory with Azure SQL server making sure that the same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="5c7a0-157">Il server SQL di Azure può ospitare il database SQL di Azure o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-157">(The Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="5c7a0-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="5c7a0-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="5c7a0-159">Nel banner a sinistra selezionare **SQL Server**, selezionare l'istanza di **SQL Server** e quindi nel pannello **SQL Server** fare clic su **Amministratore di Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-159">In the left banner select **SQL servers**, select your **SQL server**, and then in the **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="5c7a0-160">Nel pannello **Amministratore di Active Directory** fare clic su **Imposta amministratore**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-160">In the **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="5c7a0-161">![Selezionare Active Directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="5c7a0-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="5c7a0-162">Nel pannello **Aggiungi amministratore** cercare un utente, selezionare l'utente o il gruppo da impostare come amministratore e quindi fare clic su **Seleziona**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-162">In the **Add admin** blade, search for a user, select the user or group to be an administrator, and then click **Select**.</span></span> <span data-ttu-id="5c7a0-163">Il pannello Amministratore di Active Directory visualizza tutti i membri e i gruppi di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-163">(The Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="5c7a0-164">Gli utenti e i gruppi non disponibili (in grigio) non possono essere selezionati, perché non sono supportati come amministratori di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="5c7a0-165">Per l'elenco degli amministratori supportati, vedere la sezione **Funzionalità e limitazioni di Azure AD** in [Usare l'autenticazione di Azure Active Directory per l'autenticazione di un database SQL o di SQL Data Warehouse](sql-database-aad-authentication.md). Il controllo di accesso basata sui ruoli (RBAC) si applica solo al portale e non viene propagato a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-165">(See the list of supported admins in the **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only to the portal and is not propagated to SQL Server.</span></span>   
    <span data-ttu-id="5c7a0-166">![Selezionare l'amministratore](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="5c7a0-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="5c7a0-167">Nel pannello **Amministratore di Active Directory** in alto fare clic su **SALVA**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-167">At the top of the **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="5c7a0-168">![Salvare l'impostazione dell'amministratore](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="5c7a0-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="5c7a0-169">Il processo di modifica dell'amministratore può richiedere alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-169">The process of changing the administrator may take several minutes.</span></span> <span data-ttu-id="5c7a0-170">Il nuovo amministratore è quindi visualizzato nella casella **Amministratore di Active Directory** .</span><span class="sxs-lookup"><span data-stu-id="5c7a0-170">Then the new administrator appears in the **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="5c7a0-171">Quando si configura l'amministratore di Azure AD il nuovo nome dell'amministratore, utente o gruppo, non può essere già presente nel database master virtuale come un utente dell'autenticazione del server SQL.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-171">When setting up the Azure AD admin, the new admin name (user or group) cannot already be present in the virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="5c7a0-172">Se presente, l’impostazione dell’amministratore di Microsoft Azure avrà esito negativo; eseguire il rollback della creazione e indicare che tale (nome) di amministratore già esiste.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-172">If present, the Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="5c7a0-173">Poiché tale utente dell'autenticazione del server SQL non è parte di Azure AD, qualsiasi tentativo di connettersi al server mediante l'autenticazione di Azure AD ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-173">Since such a SQL Server authentication user is not part of the Azure AD, any effort to connect to the server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="5c7a0-174">Per rimuovere un amministratore in un secondo momento, nella parte superiore del pannello **Amministratore di Active Directory** fare clic su **Rimuovi amministratore**, quindi su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-174">To later remove an Admin, at the top of the **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="5c7a0-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="5c7a0-175">PowerShell</span></span>
<span data-ttu-id="5c7a0-176">Per eseguire i cmdlet di PowerShell, è necessario che Azure PowerShell sia installato e in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-176">To run PowerShell cmdlets, you need to have Azure PowerShell installed and running.</span></span> <span data-ttu-id="5c7a0-177">Per informazioni dettagliate, vedere [Come installare e configurare Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-177">For detailed information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="5c7a0-178">Per eseguire il provisioning di un amministratore di Azure AD, eseguire i comandi di Azure PowerShell seguenti:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-178">To provision an Azure AD admin, execute the following Azure PowerShell commands:</span></span>

* <span data-ttu-id="5c7a0-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="5c7a0-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="5c7a0-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="5c7a0-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="5c7a0-181">Cmdlet usati per il provisioning e la gestione dell'amministratore di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-181">Cmdlets used to provision and manage Azure AD admin:</span></span>

| <span data-ttu-id="5c7a0-182">Nome del cmdlet</span><span class="sxs-lookup"><span data-stu-id="5c7a0-182">Cmdlet name</span></span> | <span data-ttu-id="5c7a0-183">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5c7a0-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="5c7a0-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="5c7a0-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="5c7a0-185">Esegue il provisioning di un amministratore di Azure Active Directory per il server di Azure SQL o per Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="5c7a0-186">Deve far parte della sottoscrizione corrente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-186">(Must be from the current subscription.)</span></span> |
| [<span data-ttu-id="5c7a0-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="5c7a0-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="5c7a0-188">Rimuove un amministratore di Azure Active Directory per il server di Azure SQL o per Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="5c7a0-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="5c7a0-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="5c7a0-190">Restituisce informazioni sull'amministratore di Azure Active Directory attualmente configurato per il server di Azure SQL o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-190">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="5c7a0-191">Per visualizzare altri dettagli per ogni comando, usare il comando di PowerShell get-help, ad esempio ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-191">Use PowerShell command get-help to see more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="5c7a0-192">Lo script seguente effettua il provisioning di un gruppo di amministratori di Azure AD denominato **DBA_Group** (ID oggetto `40b79501-b343-44ed-9ce7-da4c8cc7353f`) per il server **demo_server** in un gruppo di risorse denominato **Group-23**:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-192">The following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for the **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="5c7a0-193">Il parametro di input **DisplayName** accetta il nome visualizzato di Azure AD o il nome dell'entità utente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-193">The **DisplayName** input parameter accepts either the Azure AD display name or the User Principal Name.</span></span> <span data-ttu-id="5c7a0-194">Ad esempio, ``DisplayName="John Smith"`` e ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="5c7a0-195">Per i gruppi di Azure AD è supportato solo il nome visualizzato di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-195">For Azure AD groups only the Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="5c7a0-196">Il comando di Azure PowerShell ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` non impedisce di eseguire il provisioning degli amministratori di Azure AD per gli utenti non supportati.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-196">The Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="5c7a0-197">È possibile eseguire il provisioning di un utente non supportato il quale non può tuttavia connettersi a un database.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-197">An unsupported user can be provisioned, but can not connect to a database.</span></span> 
> 

<span data-ttu-id="5c7a0-198">L'esempio seguente usa il valore **ObjectID**opzionale:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-198">The following example uses the optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="5c7a0-199">Il valore **ObjectID** di Azure AD è obbligatorio quando **DisplayName** non è univoco.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-199">The Azure AD **ObjectID** is required when the **DisplayName** is not unique.</span></span> <span data-ttu-id="5c7a0-200">Per recuperare i valori **ObjectID** e **DisplayName**, usare la sezione Active Directory del portale di Azure classico e visualizzare le proprietà di un utente o di un gruppo.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-200">To retrieve the **ObjectID** and **DisplayName** values, use the Active Directory section of Azure Classic Portal, and view the properties of a user or group.</span></span>
> 

<span data-ttu-id="5c7a0-201">L'esempio seguente restituisce informazioni sull'amministratore di Azure AD corrente per Azure SQL Server:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-201">The following example returns information about the current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="5c7a0-202">L'esempio seguente illustra come rimuovere un amministratore di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-202">The following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="5c7a0-203">È anche possibile effettuare il provisioning di un amministratore di Azure Active Directory usando le API REST.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-203">You can also provision an Azure Active Directory Administrator by using the REST APIs.</span></span> <span data-ttu-id="5c7a0-204">Per altre informazioni [informazioni di riferimento sull'API REST di gestione dei servizi e le operazioni per i database SQL di Azure](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="5c7a0-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="5c7a0-205">CLI</span><span class="sxs-lookup"><span data-stu-id="5c7a0-205">CLI</span></span>  
<span data-ttu-id="5c7a0-206">È anche possibile eseguire il provisioning di un admin Azure AD chiamando i comandi dell'interfaccia della riga di comando seguenti:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-206">You can also provision an Azure AD admin by calling the following CLI commands:</span></span>
| <span data-ttu-id="5c7a0-207">Comando</span><span class="sxs-lookup"><span data-stu-id="5c7a0-207">Command</span></span> | <span data-ttu-id="5c7a0-208">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5c7a0-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="5c7a0-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="5c7a0-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="5c7a0-210">Esegue il provisioning di un amministratore di Azure Active Directory per il server di Azure SQL o per Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="5c7a0-211">Deve far parte della sottoscrizione corrente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-211">(Must be from the current subscription.)</span></span> |
|[<span data-ttu-id="5c7a0-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="5c7a0-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="5c7a0-213">Rimuove un amministratore di Azure Active Directory per il server di Azure SQL o per Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="5c7a0-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="5c7a0-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="5c7a0-215">Restituisce informazioni sull'amministratore di Azure Active Directory attualmente configurato per il server di Azure SQL o Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-215">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="5c7a0-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="5c7a0-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="5c7a0-217">Aggiornare l'amministratore di Azure Active Directory per un server di Azure SQL o per Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-217">Updates the Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="5c7a0-218">Per altre informazioni sui comandi dell'interfaccia della riga di comando, vedere [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="5c7a0-219">Configurare i computer client</span><span class="sxs-lookup"><span data-stu-id="5c7a0-219">Configure your client computers</span></span>
<span data-ttu-id="5c7a0-220">È necessario installare il software seguente in tutti i computer client da cui le applicazioni o gli utenti si connettono al database SQL di Azure o ad Azure SQL Data Warehouse con le identità di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-220">On all client machines, from which your applications or users connect to Azure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install the following software:</span></span>

* <span data-ttu-id="5c7a0-221">.NET Framework 4.6 o versione successiva dalla pagina [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="5c7a0-222">Azure Active Directory Authentication Library per SQL Server (**ADALSQL.DLL**) è disponibile in più lingue (sia per x86 che per amd64) dall'Area download in [Microsoft Active Directory Authentication Library per Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from the download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="5c7a0-223">È possibile soddisfare questi requisiti tramite:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="5c7a0-224">L'installazione di [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) o [SQL Server Data Tools per Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) soddisfa i requisiti di .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets the .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="5c7a0-225">SSMS installa la versione x86 di **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-225">SSMS installs the x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="5c7a0-226">SSDT installa la versione amd64 di **ADALSQL.DLL**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-226">SSDT installs the amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="5c7a0-227">L'ultima versione di Visual Studio disponibile nella pagina [Download di Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) soddisfa i requisiti di .NET Framework 4.6, ma non installa la versione amd64 di **ADALSQL.DLL**richiesta.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-227">The latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets the .NET Framework 4.6 requirement, but does not install the required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-to-azure-ad-identities"></a><span data-ttu-id="5c7a0-228">Creare gli utenti di database indipendente nel database di cui è stato eseguito il mapping alle identità di Azure AD</span><span class="sxs-lookup"><span data-stu-id="5c7a0-228">Create contained database users in your database mapped to Azure AD identities</span></span>

<span data-ttu-id="5c7a0-229">L'autenticazione di Azure Active Directory richiede la creazione di utenti del database come utenti di database indipendente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-229">Azure Active Directory authentication requires database users to be created as contained database users.</span></span> <span data-ttu-id="5c7a0-230">Un utente di database indipendente basato su un'identità di Azure AD è un utente di database che non può accedere al database master e del quale viene eseguito il mapping a un'identità nella directory di Azure AD associata al database.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in the master database, and which maps to an identity in the Azure AD directory that is associated with the database.</span></span> <span data-ttu-id="5c7a0-231">L'identità di Azure AD può essere un singolo account utente o un gruppo.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-231">The Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="5c7a0-232">Per altre informazioni sugli utenti di database indipendente, vedere [Utenti di database indipendente: rendere portabile un database](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="5c7a0-233">Gli utenti del database, tranne gli amministratori, non possono essere creati tramite il portale.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-233">Database users (with the exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="5c7a0-234">I ruoli RBAC non vengono propagati a SQL Server, al database SQL o a SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-234">RBAC roles are not propagated to SQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="5c7a0-235">I ruoli Controllo degli accessi in base al ruolo di Azure vengono usati per la gestione delle risorse di Azure e non si applicano alle autorizzazioni di database.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-235">Azure RBAC roles are used for managing Azure Resources, and do not apply to database permissions.</span></span> <span data-ttu-id="5c7a0-236">Ad esempio, il ruolo **Collaboratore SQL Server** non consente l'accesso per connettersi al database SQL oppure a SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-236">For example, the **SQL Server Contributor** role does not grant access to connect to the SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="5c7a0-237">L'autorizzazione di accesso deve essere concessa direttamente nel database tramite istruzioni Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-237">The access permission must be granted directly in the database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="5c7a0-238">Per creare un utente di database indipendente basato su Azure AD, diverso dall'amministratore del server proprietario del database, connettersi al database con un'identità di Azure AD come utente con almeno l'autorizzazione **ALTER ANY USER** .</span><span class="sxs-lookup"><span data-stu-id="5c7a0-238">To create an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity, as a user with at least the **ALTER ANY USER** permission.</span></span> <span data-ttu-id="5c7a0-239">Usare quindi la sintassi Transact-SQL seguente:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-239">Then use the following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="5c7a0-240">*Azure_AD_principal_name* può essere il nome dell'entità utente di un utente di Azure AD o il nome visualizzato di un gruppo di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-240">*Azure_AD_principal_name* can be the user principal name of an Azure AD user or the display name for an Azure AD group.</span></span>

<span data-ttu-id="5c7a0-241">**Esempi:** per creare un utente di database indipendente che rappresenta un utente di dominio gestito o federato di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-241">**Examples:** To create a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="5c7a0-242">Per creare un utente di database indipendente che rappresenta un gruppo di dominio federato o di Azure AD, specificare il nome visualizzato di un gruppo di sicurezza:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-242">To create a contained database user representing an Azure AD or federated domain group, provide the display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="5c7a0-243">Per creare un utente di database indipendente che rappresenta un'applicazione che si connette usando un token di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-243">To create a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="5c7a0-244">È possibile creare un utente direttamente da Azure Active Directory solo se si usa l'Azure Active Directory associata alla sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-244">You cannot directly create a user from an Azure Active Directory other than the Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="5c7a0-245">Tuttavia, i membri di altre directory di Active Directory che sono utenti importati nell'Active Directory associata (chiamati utenti esterni) possono essere aggiunti a un gruppo Active Directory nell'Active Directory tenant.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-245">However, members of other Active Directories that are imported users in the associated Active Directory (known as external users) can be added to an Active Directory group in the tenant Active Directory.</span></span> <span data-ttu-id="5c7a0-246">Tramite la creazione di un utente del database indipendente per il gruppo AD, gli utenti dell'Active Directory esterna possono ottenere l'accesso al database SQL.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-246">By creating a contained database user for that AD group, the users from the external Active Directory can gain access to SQL Database.</span></span>   

<span data-ttu-id="5c7a0-247">Per altre informazioni sulla creazione di utenti di database indipendente basati su identità di Azure Active Directory, vedere [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="5c7a0-248">La rimozione dell'amministratore di Azure Active Directory per il server di Azure SQL impedisce agli utenti dell'autenticazione di Azure AD di connettersi al server.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-248">Removing the Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting to the server.</span></span> <span data-ttu-id="5c7a0-249">Se necessario, un amministratore del database SQL può eliminare manualmente gli utenti di Azure AD inutilizzabili.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="5c7a0-250">Se si riceve un messaggio di **timeout della connessione scaduto**, potrebbe essere necessario impostare il parametro `TransparentNetworkIPResolution` della stringa di connessione su false.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-250">If you receive a **Connection Timeout Expired**, you may need to set the `TransparentNetworkIPResolution` parameter of the connection string to false.</span></span> <span data-ttu-id="5c7a0-251">Per altre informazioni, vedere [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/) (Problema di timeout della connessione con .NET Framework 4.6.1 - TransparentNetworkIPResolution).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="5c7a0-252">Quando si crea un database utente, questo riceve l'autorizzazione **CONNECT** e può connettersi al database come membro del ruolo **PUBLIC**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-252">When you create a database user, that user receives the **CONNECT** permission and can connect to that database as a member of the **PUBLIC** role.</span></span> <span data-ttu-id="5c7a0-253">Inizialmente le sole autorizzazioni disponibili per l'utente sono quelle concesse al ruolo **PUBLIC** o quelle concesse a qualsiasi gruppo di Windows di cui è membro.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-253">Initially the only permissions available to the user are any permissions granted to the **PUBLIC** role, or any permissions granted to any Windows groups that they are a member of.</span></span> <span data-ttu-id="5c7a0-254">Dopo avere effettuato il provisioning di un utente di database indipendente basato su Azure AD, è possibile concedere all'utente altre autorizzazioni, esattamente come si concede un'autorizzazione a qualsiasi altro tipo di utente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-254">Once you provision an Azure AD-based contained database user, you can grant the user additional permissions, the same way as you grant permission to any other type of user.</span></span> <span data-ttu-id="5c7a0-255">In genere si concedono autorizzazioni ai ruoli del database e si aggiungono gli utenti ai ruoli.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-255">Typically grant permissions to database roles, and add users to roles.</span></span> <span data-ttu-id="5c7a0-256">Per altre informazioni, vedere l'articolo relativo alle [nozioni di base delle autorizzazioni per il motore di database](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="5c7a0-257">Per altre informazioni sui ruoli speciali del database SQL, vedere [Gestione di database e account di accesso nel database SQL di Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="5c7a0-258">Un utente di dominio federato importato in un dominio gestito deve usare l'identità del dominio gestito.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-258">A federated domain user that is imported into a manage domain, must use the managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="5c7a0-259">Gli utenti di Azure AD sono contrassegnati nei metadati del database con il tipo E (EXTERNAL_USER). I gruppi sono contrassegnati con il tipo X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-259">Azure AD users are marked in the database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="5c7a0-260">Per altre informazioni, vedere [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-to-the-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="5c7a0-261">Connettersi al data warehouse o al database utente con SSMS o SSDT</span><span class="sxs-lookup"><span data-stu-id="5c7a0-261">Connect to the user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="5c7a0-262">Per verificare che l'amministratore di Azure AD sia configurato correttamente, connettersi al database **master** con l'account amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-262">To confirm the Azure AD administrator is properly set up, connect to the **master** database using the Azure AD administrator account.</span></span>
<span data-ttu-id="5c7a0-263">Per effettuare il provisioning di un utente di database indipendente basato su Azure AD, diverso dall'amministratore del server proprietario del database, connettersi al database con un'identità di Azure AD che abbia accesso al database.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-263">To provision an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity that has access to the database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5c7a0-264">Il supporto per l'autenticazione di Azure Active Directory è disponibile con [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) e [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="5c7a0-265">La versione di agosto 2016 di SQL Server Management Studio include anche il supporto per l'autenticazione universale di Active Directory, che consente agli amministratori di richiedere la Multi-Factor Authentication mediante chiamata telefonica, SMS, smart card con pin, o notifica dell'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-265">The August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators to require Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-to-connect-using-ssms-or-ssdt"></a><span data-ttu-id="5c7a0-266">Uso di un'identità di Azure AD per la connessione con SSMS o SSDT</span><span class="sxs-lookup"><span data-stu-id="5c7a0-266">Using an Azure AD identity to connect using SSMS or SSDT</span></span>  

<span data-ttu-id="5c7a0-267">Le procedure seguenti mostrano come connettersi a un database SQL con un'identità di Azure Active Directory usando SQL Server Management Studio o SQL Server Database Tools.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-267">The following procedures show you how to connect to a SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="5c7a0-268">Autenticazione integrata di Active Directory</span><span class="sxs-lookup"><span data-stu-id="5c7a0-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="5c7a0-269">Usare questo metodo se si è connessi a Windows con le credenziali di Azure Active Directory da un dominio federato.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-269">Use this method if you are logged in to Windows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="5c7a0-270">Avviare Management Studio o Data Tools e nella finestra di dialogo **Connetti al server** (o **Connetti al motore di database**) e selezionare **Active Directory - Integrata** nella casella **Autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-270">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="5c7a0-271">La password non è necessaria e non può essere immessa, perché per la connessione vengono presentate le credenziali esistenti.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-271">No password is needed or can be entered because your existing credentials will be presented for the connection.</span></span>   

    ![Selezionare Autenticazione integrata di Active Directory][11]
2. <span data-ttu-id="5c7a0-273">Fare clic sul pulsante **Opzioni**, quindi nella pagina **Proprietà connessione** digitare il nome del database utente a cui si desidera connettersi nella casella **Connetti al database**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-273">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="5c7a0-274">L'opzione **ID tenant o nome di dominio AD** è supportata solo per le opzioni di connessione **Universale con supporto MFA**. Negli altri casi non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-274">(The **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Selezionare il nome del database][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="5c7a0-276">Autenticazione della password di Active Directory</span><span class="sxs-lookup"><span data-stu-id="5c7a0-276">Active Directory password authentication</span></span>

<span data-ttu-id="5c7a0-277">Usare questo metodo per connettersi con il nome dell'entità di Azure AD tramite il dominio gestito di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-277">Use this method when connecting with an Azure AD principal name using the Azure AD managed domain.</span></span> <span data-ttu-id="5c7a0-278">Si può anche usarlo per un account federato senza accesso al dominio, ad esempio quando si lavora in modalità remota.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-278">You can also use it for federated account without access to the domain, for example when working remotely.</span></span>

<span data-ttu-id="5c7a0-279">Usare questo metodo se si è connessi a Windows con le credenziali di un dominio non federato con Azure o quando si usa l'autenticazione di Azure AD con Azure AD basato sul dominio iniziale o client.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-279">Use this method if you are logged in to Windows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on the initial or the client domain.</span></span>

1. <span data-ttu-id="5c7a0-280">Avviare Management Studio o Data Tools e nella finestra di dialogo **Connetti al server** (o **Connetti al motore di database**) e selezionare **Active Directory - Password** nella casella **Autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-280">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="5c7a0-281">Nella casella **Nome utente** digitare il nome utente di Azure Active Directory nel formato **username@domain.com**. Deve essere un account di Azure Active Directory o un account di un dominio federato con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-281">In the **User name** box, type your Azure Active Directory user name in the format **username@domain.com**. This must be an account from the Azure Active Directory or an account from a domain federate with the Azure Active Directory.</span></span>
3. <span data-ttu-id="5c7a0-282">Nella casella **Password** digitare la password utente dell'account Azure Active Directory o dell'account di dominio federato.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-282">In the **Password** box, type your user password for the Azure Active Directory account or federated domain account.</span></span>

    ![Selezionare Autenticazione della password di Active Directory][12]
4. <span data-ttu-id="5c7a0-284">Fare clic sul pulsante **Opzioni**, quindi nella pagina **Proprietà connessione** digitare il nome del database utente a cui si desidera connettersi nella casella **Connetti al database**.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-284">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="5c7a0-285">Vedere il grafico nell'opzione precedente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-285">(See the graphic in the previous option.)</span></span>

## <a name="using-an-azure-ad-identity-to-connect-from-a-client-application"></a><span data-ttu-id="5c7a0-286">Utilizzo di un'identità di Azure Active Directory per connettersi da un'applicazione client</span><span class="sxs-lookup"><span data-stu-id="5c7a0-286">Using an Azure AD identity to connect from a client application</span></span>

<span data-ttu-id="5c7a0-287">Le procedure seguenti mostrano come connettersi a un database SQL con un'identità di Azure Active Directory da un'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-287">The following procedures show you how to connect to a SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="5c7a0-288">Autenticazione integrata di Active Directory</span><span class="sxs-lookup"><span data-stu-id="5c7a0-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="5c7a0-289">Per usare l'autenticazione integrata di Windows, l'Active Directory del dominio deve essere federato con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-289">To use integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="5c7a0-290">L'applicazione client (o un servizio) che si connette al database deve essere in esecuzione in un computer aggiunto al dominio con le credenziali di dominio dell'utente.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-290">Your client application (or a service) connecting to the database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="5c7a0-291">Per connettersi a un database usando l'autenticazione integrata e un'identità di Azure AD, la parola chiave Authentication nella stringa di connessione al database deve essere impostata su Active Directory Integrated.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-291">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword in the database connection string must be set to Active Directory Integrated.</span></span> <span data-ttu-id="5c7a0-292">L'esempio di codice C# seguente usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-292">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="5c7a0-293">La parola chiave ``Integrated Security=True`` della stringa di connessione non è supportata per la connessione al database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-293">The connection string keyword ``Integrated Security=True`` is not supported for connecting to Azure SQL Database.</span></span> <span data-ttu-id="5c7a0-294">Quando si esegue una connessione ODBC, è necessario rimuovere gli spazi e impostare l'autenticazione su 'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-294">When making an ODBC connection, you will need to remove spaces and set Authentication to 'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="5c7a0-295">Autenticazione della password di Active Directory</span><span class="sxs-lookup"><span data-stu-id="5c7a0-295">Active Directory password authentication</span></span>

<span data-ttu-id="5c7a0-296">Per connettersi a un database usando l'autenticazione integrata e un'identità di Azure AD, la parola chiave Authentication deve essere impostata su Active Directory Password.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-296">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword must be set to Active Directory Password.</span></span> <span data-ttu-id="5c7a0-297">La stringa di connessione deve contenere le parole chiave e i valori User ID/UID e Password/PWD.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-297">The connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="5c7a0-298">L'esempio di codice C# seguente usa ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-298">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="5c7a0-299">Per altre informazioni sui metodi di autenticazione di Azure AD, usare gli esempi di codice dimostrativo disponibili in [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth)(Dimostrazione GitHub dell'autenticazione di Azure AD).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-299">Learn more about Azure AD authentication methods using the demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="5c7a0-300">Token Azure AD</span><span class="sxs-lookup"><span data-stu-id="5c7a0-300">Azure AD token</span></span>
<span data-ttu-id="5c7a0-301">Questo tipo di autenticazione consente ai servizi di livello intermedio di connettersi al database SQL di Azure o ad Azure SQL Data Warehouse ottenendo un token da Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-301">This authentication method allows middle-tier services to connect to Azure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="5c7a0-302">Consente scenari complessi, tra cui l'autenticazione basata su certificato.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="5c7a0-303">Per usare l'autenticazione tramite token di Azure AD, è necessario completare quattro passaggi fondamentali:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-303">You must complete four basic steps to use Azure AD token authentication:</span></span>

1. <span data-ttu-id="5c7a0-304">Registrare l'applicazione in Azure Active Directory e ottenere l'ID client per il codice.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-304">Register your application with Azure Active Directory and get the client id for your code.</span></span> 
2. <span data-ttu-id="5c7a0-305">Creare un utente del database che rappresenta l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-305">Create a database user representing the application.</span></span> <span data-ttu-id="5c7a0-306">(Completato in precedenza al passaggio 6).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="5c7a0-307">Creare un certificato nel computer client che esegue l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-307">Create a certificate on the client computer runs the application.</span></span>
4. <span data-ttu-id="5c7a0-308">Aggiungere il certificato come chiave per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5c7a0-308">Add the certificate as a key for your application.</span></span>

<span data-ttu-id="5c7a0-309">Stringa di connessione di esempio:</span><span class="sxs-lookup"><span data-stu-id="5c7a0-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="5c7a0-310">Per altre informazioni, vedere [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/)(Blog sulla sicurezza del server SQL).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="5c7a0-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="5c7a0-311">sqlcmd</span></span>

<span data-ttu-id="5c7a0-312">Le istruzioni seguenti eseguono la connessione usando la versione 13.1 di sqlcmd disponibile in [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-312">The following statements, connect using version 13.1 of sqlcmd, which is available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="5c7a0-313">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="5c7a0-313">Next steps</span></span>
- <span data-ttu-id="5c7a0-314">Per una panoramica dell'accesso e del controllo nel database SQL, vedere l'articolo relativo al [controllo dell'accesso al database SQL](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="5c7a0-315">Per una panoramica degli account di accesso, degli utenti e dei ruoli del database nel database SQL, vedere l'articolo relativo ad [account di accesso, utenti e ruoli del database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="5c7a0-316">Per altre informazioni sulle entità di database, vedere [Entità](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="5c7a0-317">Per altre informazioni sui ruoli del database, vedere [Ruoli a livello di database](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="5c7a0-318">Per informazioni generali sulle regole del firewall, vedere l'articolo relativo alle [regole del firewall per il database SQL](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="5c7a0-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

