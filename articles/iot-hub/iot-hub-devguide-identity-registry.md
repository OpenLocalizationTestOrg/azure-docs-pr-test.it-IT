---
title: "Informazioni sul registro delle identità dell'hub IoT di Azure | Documentazione Microsoft"
description: "Guida per gli sviluppatori: descrizione del registro delle identità dell'hub IoT e come usarlo per gestire i dispositivi. Include informazioni sull'importazione e sull'esportazione in blocco delle identità dei dispositivi."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 0706eccd-e84c-4ae7-bbd4-2b1a22241147
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/08/2017
ms.author: dobett
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6e9c7b71fa6fc78f97c0144c735fc44778181d8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="understand-the-identity-registry-in-your-iot-hub"></a><span data-ttu-id="9f81d-104">Comprendere il registro delle identità nell'hub IoT</span><span class="sxs-lookup"><span data-stu-id="9f81d-104">Understand the identity registry in your IoT hub</span></span>

<span data-ttu-id="9f81d-105">Ogni hub IoT ha un registro delle identità in cui sono archiviate le informazioni sui dispositivi a cui è consentito connettersi all'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-105">Every IoT hub has an identity registry that stores information about the devices permitted to connect to the IoT hub.</span></span> <span data-ttu-id="9f81d-106">Prima che un dispositivo possa connettersi a un hub IoT, è necessario che sia presente una voce relativa al dispositivo nel registro delle identità dell'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-106">Before a device can connect to an IoT hub, there must be an entry for that device in the IoT hub's identity registry.</span></span> <span data-ttu-id="9f81d-107">Un dispositivo deve autenticarsi anche con l'hub IoT in base alle credenziali archiviate nel registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-107">A device must also authenticate with the IoT hub based on credentials stored in the identity registry.</span></span>

<span data-ttu-id="9f81d-108">L'ID dispositivo archiviato nel registro delle identità fa distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="9f81d-108">The device ID stored in the identity registry is case-sensitive.</span></span>

<span data-ttu-id="9f81d-109">A livello generale, il registro delle identità è una raccolta delle risorse relative alle identità dei dispositivi che supporta REST.</span><span class="sxs-lookup"><span data-stu-id="9f81d-109">At a high level, the identity registry is a REST-capable collection of device identity resources.</span></span> <span data-ttu-id="9f81d-110">Quando si aggiunge una voce nel registro delle identità, l'hub IoT crea un set di risorse per dispositivo, ad esempio una coda contenente messaggi da cloud a dispositivo in elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-110">When you add an entry in the identity registry, IoT Hub creates a set of per-device resources such as the queue that contains in-flight cloud-to-device messages.</span></span>

### <a name="when-to-use"></a><span data-ttu-id="9f81d-111">Quando usare le autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="9f81d-111">When to use</span></span>

<span data-ttu-id="9f81d-112">Usare il registro delle identità quando è necessario:</span><span class="sxs-lookup"><span data-stu-id="9f81d-112">Use the identity registry when you need to:</span></span>

* <span data-ttu-id="9f81d-113">Il provisioning dei dispositivi che si connettono per l'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-113">Provision devices that connect to your IoT hub.</span></span>
* <span data-ttu-id="9f81d-114">Controllare l'accesso per dispositivo agli endpoint che usano dispositivi dell'hub.</span><span class="sxs-lookup"><span data-stu-id="9f81d-114">Control per-device access to your hub's device-facing endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="9f81d-115">Il registro delle identità non contiene metadati specifici delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9f81d-115">The identity registry does not contain any application-specific metadata.</span></span>

## <a name="identity-registry-operations"></a><span data-ttu-id="9f81d-116">Operazioni del registro delle identità</span><span class="sxs-lookup"><span data-stu-id="9f81d-116">Identity registry operations</span></span>

<span data-ttu-id="9f81d-117">Il registro delle identità dell'hub IoT espone le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9f81d-117">The IoT Hub identity registry exposes the following operations:</span></span>

* <span data-ttu-id="9f81d-118">Creare l'identità del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-118">Create device identity</span></span>
* <span data-ttu-id="9f81d-119">Aggiornare l'identità del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-119">Update device identity</span></span>
* <span data-ttu-id="9f81d-120">Recuperare l'identità del dispositivo tramite ID</span><span class="sxs-lookup"><span data-stu-id="9f81d-120">Retrieve device identity by ID</span></span>
* <span data-ttu-id="9f81d-121">Eliminare l'identità del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-121">Delete device identity</span></span>
* <span data-ttu-id="9f81d-122">Elencare al massimo 1000 identità</span><span class="sxs-lookup"><span data-stu-id="9f81d-122">List up to 1000 identities</span></span>
* <span data-ttu-id="9f81d-123">Esportare tutte le identità nell'Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="9f81d-123">Export all identities to Azure blob storage</span></span>
* <span data-ttu-id="9f81d-124">Importare le identità nell'Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="9f81d-124">Import identities from Azure blob storage</span></span>

<span data-ttu-id="9f81d-125">Tutte queste operazioni possono usare la concorrenza ottimistica, come specificato in [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9f81d-125">All these operations can use optimistic concurrency, as specified in [RFC7232][lnk-rfc7232].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9f81d-126">L'unico modo per recuperare tutte le identità nel registro delle identità di un hub IoT consiste nell'usare la funzionalità [Esporta][lnk-export].</span><span class="sxs-lookup"><span data-stu-id="9f81d-126">The only way to retrieve all identities in an IoT hub's identity registry is to use the [Export][lnk-export] functionality.</span></span>

<span data-ttu-id="9f81d-127">Un registro delle identità di un hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9f81d-127">An IoT Hub identity registry:</span></span>

* <span data-ttu-id="9f81d-128">Non contiene metadati delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9f81d-128">Does not contain any application metadata.</span></span>
* <span data-ttu-id="9f81d-129">È accessibile come un dizionario, usando il valore **deviceId** come chiave.</span><span class="sxs-lookup"><span data-stu-id="9f81d-129">Can be accessed like a dictionary, by using the **deviceId** as the key.</span></span>
* <span data-ttu-id="9f81d-130">Non supporta le query espressive.</span><span class="sxs-lookup"><span data-stu-id="9f81d-130">Does not support expressive queries.</span></span>

<span data-ttu-id="9f81d-131">Una soluzione IoT include in genere un archivio separato specifico della soluzione che contiene metadati specifici dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-131">An IoT solution typically has a separate solution-specific store that contains application-specific metadata.</span></span> <span data-ttu-id="9f81d-132">Ad esempio, l'archivio specifico della soluzione in una soluzione per un edificio efficiente registra l'ambiente in cui viene distribuito un sensore di temperatura.</span><span class="sxs-lookup"><span data-stu-id="9f81d-132">For example, the solution-specific store in a smart building solution would record the room in which a temperature sensor is deployed.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9f81d-133">Usare il registro delle identità solo per le operazioni di gestione e provisioning dei dispositivi.</span><span class="sxs-lookup"><span data-stu-id="9f81d-133">Only use the identity registry for device management and provisioning operations.</span></span> <span data-ttu-id="9f81d-134">Le operazioni a velocità effettiva elevata in fase di esecuzione non devono dipendere dall'esecuzione di operazioni nel registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-134">High throughput operations at run time should not depend on performing operations in the identity registry.</span></span> <span data-ttu-id="9f81d-135">Ad esempio, la verifica dello stato di connessione di un dispositivo prima dell'invio di un comando non è uno schema supportato.</span><span class="sxs-lookup"><span data-stu-id="9f81d-135">For example, checking the connection state of a device before sending a command is not a supported pattern.</span></span> <span data-ttu-id="9f81d-136">Assicurarsi di verificare le [frequenze di limitazione][lnk-quotas] per il registro delle identità dei dispositivi e il modello di [heartbeat del dispositivo][lnk-guidance-heartbeat].</span><span class="sxs-lookup"><span data-stu-id="9f81d-136">Make sure to check the [throttling rates][lnk-quotas] for the identity registry, and the [device heartbeat][lnk-guidance-heartbeat] pattern.</span></span>

## <a name="disable-devices"></a><span data-ttu-id="9f81d-137">Disabilitare i dispositivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-137">Disable devices</span></span>

<span data-ttu-id="9f81d-138">È possibile disabilitare i dispositivi aggiornando la proprietà **status** di un'identità nel registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-138">You can disable devices by updating the **status** property of an identity in the identity registry.</span></span> <span data-ttu-id="9f81d-139">Questa proprietà viene in genere usata in due scenari:</span><span class="sxs-lookup"><span data-stu-id="9f81d-139">Typically, you use this property in two scenarios:</span></span>

* <span data-ttu-id="9f81d-140">Durante un processo di orchestrazione di provisioning.</span><span class="sxs-lookup"><span data-stu-id="9f81d-140">During a provisioning orchestration process.</span></span> <span data-ttu-id="9f81d-141">Per altre informazioni, vedere [Provisioning di dispositivi][lnk-guidance-provisioning].</span><span class="sxs-lookup"><span data-stu-id="9f81d-141">For more information, see [Device Provisioning][lnk-guidance-provisioning].</span></span>
* <span data-ttu-id="9f81d-142">Se, per qualsiasi motivo, si considera un dispositivo compromesso o non più autorizzato.</span><span class="sxs-lookup"><span data-stu-id="9f81d-142">If, for any reason, you consider a device is compromised or has become unauthorized.</span></span>

## <a name="import-and-export-device-identities"></a><span data-ttu-id="9f81d-143">Importare ed esportare le identità dei dispositivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-143">Import and export device identities</span></span>

<span data-ttu-id="9f81d-144">È possibile esportare in blocco le identità dei dispositivi dal registro delle identità di un hub IoT usando operazioni asincrone sull'[endpoint del provider di risorse dell'hub IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9f81d-144">You can export device identities in bulk from an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9f81d-145">Le esportazioni sono processi a esecuzione prolungata che usano un contenitore BLOB specificato dal cliente per salvare i dati relativi alle identità dei dispositivi letti dal registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-145">Exports are long-running jobs that use a customer-supplied blob container to save device identity data read from the identity registry.</span></span>

<span data-ttu-id="9f81d-146">È possibile importare in blocco le identità dei dispositivi nel registro delle identità di un hub IoT usando operazioni asincrone sull'[endpoint del provider di risorse dell'hub IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="9f81d-146">You can import device identities in bulk to an IoT hub's identity registry, by using asynchronous operations on the [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="9f81d-147">Le importazioni sono processi a esecuzione prolungata che usano un contenitore BLOB specificato dal cliente per scrivere i dati relativi alle identità nel registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-147">Imports are long-running jobs that use data in a customer-supplied blob container to write device identity data into the identity registry.</span></span>

* <span data-ttu-id="9f81d-148">Per informazioni dettagliate sulle API di importazione e di esportazione, vedere [IoT Hub resource provider REST APIs][lnk-resource-provider-apis] (API REST del provider di risorse dell'hub IoT).</span><span class="sxs-lookup"><span data-stu-id="9f81d-148">For detailed information about the import and export APIs, see [IoT Hub resource provider REST APIs][lnk-resource-provider-apis].</span></span>
* <span data-ttu-id="9f81d-149">Per altre informazioni sull'esecuzione dei processi di importazione ed esportazione, vedere [Gestione in blocco delle identità dei dispositivi dell'hub IoT][lnk-bulk-identity].</span><span class="sxs-lookup"><span data-stu-id="9f81d-149">To learn more about running import and export jobs, see [Bulk management of IoT Hub device identities][lnk-bulk-identity].</span></span>

## <a name="device-provisioning"></a><span data-ttu-id="9f81d-150">Provisioning di dispositivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-150">Device provisioning</span></span>

<span data-ttu-id="9f81d-151">I dati del dispositivo archiviati da una soluzione IoT dipendono dai requisiti specifici di tale soluzione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-151">The device data that a given IoT solution stores depends on the specific requirements of that solution.</span></span> <span data-ttu-id="9f81d-152">Tuttavia, come minimo, una soluzione deve archiviare identità di dispositivo e chiavi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-152">But, as a minimum, a solution must store device identities and authentication keys.</span></span> <span data-ttu-id="9f81d-153">L'hub IoT di Azure include un registro delle identità in grado di archiviare i valori per ogni dispositivo, ad esempio ID, chiavi di autenticazione e codici di stato.</span><span class="sxs-lookup"><span data-stu-id="9f81d-153">Azure IoT Hub includes an identity registry that can store values for each device such as IDs, authentication keys, and status codes.</span></span> <span data-ttu-id="9f81d-154">Una soluzione può usare altri servizi di Azure, ad esempio archiviazione tabelle, Archiviazione BLOB o Cosmos DB per archiviare dati aggiuntivi sui dispositivi.</span><span class="sxs-lookup"><span data-stu-id="9f81d-154">A solution can use other Azure services such as table storage, blob storage, or Cosmos DB to store any additional device data.</span></span>

<span data-ttu-id="9f81d-155">*Provisioning di dispositivi* è il processo di aggiunta dei dati iniziali dei dispositivi agli archivi nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-155">*Device provisioning* is the process of adding the initial device data to the stores in your solution.</span></span> <span data-ttu-id="9f81d-156">Per abilitare un nuovo dispositivo per la connessione all'hub è necessario aggiungere un ID dispositivo e le relative chiavi al registro delle identità dell'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-156">To enable a new device to connect to your hub, you must add a device ID and keys to the IoT Hub identity registry.</span></span> <span data-ttu-id="9f81d-157">Come parte del processo di provisioning, può essere necessario inizializzare i dati specifici del dispositivo in altri archivi di soluzioni.</span><span class="sxs-lookup"><span data-stu-id="9f81d-157">As part of the provisioning process, you might need to initialize device-specific data in other solution stores.</span></span>

## <a name="device-heartbeat"></a><span data-ttu-id="9f81d-158">Heartbeat dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-158">Device heartbeat</span></span>

<span data-ttu-id="9f81d-159">Il registro delle identità dell'hub IoT contiene un campo denominato **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="9f81d-159">The IoT Hub identity registry contains a field called **connectionState**.</span></span> <span data-ttu-id="9f81d-160">Durante le fasi di sviluppo e debug, usare solo il campo **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="9f81d-160">Only use the **connectionState** field during development and debugging.</span></span> <span data-ttu-id="9f81d-161">Le soluzioni IoT non devono eseguire query sul campo in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-161">IoT solutions should not query the field at run time.</span></span> <span data-ttu-id="9f81d-162">Ad esempio, non devono eseguire query sul campo **connectionState** per verificare se un dispositivo è connesso prima di inviare un messaggio da cloud a dispositivo o un SMS.</span><span class="sxs-lookup"><span data-stu-id="9f81d-162">For example, do not query the **connectionState** field to check if a device is connected before you send a cloud-to-device message or an SMS.</span></span>

<span data-ttu-id="9f81d-163">Se la soluzione IoT deve sapere se un dispositivo è connesso, è necessario implementare il *modello di heartbeat*.</span><span class="sxs-lookup"><span data-stu-id="9f81d-163">If your IoT solution needs to know if a device is connected, you should implement the *heartbeat pattern*.</span></span>

<span data-ttu-id="9f81d-164">Nel modello di heartbeat il dispositivo invia messaggi da dispositivo a cloud almeno una volta ogni intervallo di tempo stabilito, ad esempio almeno una volta ogni ora.</span><span class="sxs-lookup"><span data-stu-id="9f81d-164">In the heartbeat pattern, the device sends device-to-cloud messages at least once every fixed amount of time (for example, at least once every hour).</span></span> <span data-ttu-id="9f81d-165">Di conseguenza, anche se in un dispositivo non sono presenti dati da inviare, viene comunque inviato un messaggio vuoto da dispositivo a cloud, in genere con una proprietà che lo identifica come heartbeat.</span><span class="sxs-lookup"><span data-stu-id="9f81d-165">Therefore, even if a device does not have any data to send, it still sends an empty device-to-cloud message (usually with a property that identifies it as a heartbeat).</span></span> <span data-ttu-id="9f81d-166">Sul lato servizio, la soluzione gestisce una mappa con l'ultimo heartbeat ricevuto per ogni dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-166">On the service side, the solution maintains a map with the last heartbeat received for each device.</span></span> <span data-ttu-id="9f81d-167">e presuppone che sia presente un problema con il dispositivo se non riceve un messaggio di heartbeat entro il tempo previsto.</span><span class="sxs-lookup"><span data-stu-id="9f81d-167">If the solution does not receive a heartbeat message within the expected time from the device, it assumes that there is a problem with the device.</span></span>

<span data-ttu-id="9f81d-168">Un'implementazione più complessa può includere le informazioni acquisite dal [monitoraggio delle operazioni][lnk-devguide-opmon] per identificare i dispositivi che provano a connettersi o a comunicare ma con esito negativo.</span><span class="sxs-lookup"><span data-stu-id="9f81d-168">A more complex implementation could include the information from [operations monitoring][lnk-devguide-opmon] to identify devices that are trying to connect or communicate but failing.</span></span> <span data-ttu-id="9f81d-169">Quando si implementa il modello di heartbeat, assicurarsi di controllare [Quote e limitazioni dell'hub IoT][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="9f81d-169">When you implement the heartbeat pattern, make sure to check [IoT Hub Quotas and Throttles][lnk-quotas].</span></span>

> [!NOTE]
> <span data-ttu-id="9f81d-170">Se una soluzione IoT usa lo stato di connessione esclusivamente per determinare se inviare i messaggi da cloud a dispositivo e i messaggi non vengono trasmessi a grandi set di dispositivi, è da considerare l'uso del criterio *a breve scadenza* più semplice.</span><span class="sxs-lookup"><span data-stu-id="9f81d-170">If an IoT solution uses the connection state solely to determine whether to send cloud-to-device messages, and messages are not broadcast to large sets of devices, consider using the simpler *short expiry time* pattern.</span></span> <span data-ttu-id="9f81d-171">Un modello di questo tipo consente di gestire il registro dello stato di connessione del dispositivo in modo analogo a un modello di heartbeat, ma con maggiore efficienza.</span><span class="sxs-lookup"><span data-stu-id="9f81d-171">This pattern achieves the same result as maintaining a device connection state registry using the heartbeat pattern, while being more efficient.</span></span> <span data-ttu-id="9f81d-172">Se si richiede l'acknowledgement dei messaggi, l'hub IoT può inviare una notifica per indicare quali dispositivi possono ricevere messaggi e quali no.</span><span class="sxs-lookup"><span data-stu-id="9f81d-172">If you request message acknowledgements, IoT Hub can notify you about which devices are able to receive messages and which are not.</span></span>

## <a name="device-lifecycle-notifications"></a><span data-ttu-id="9f81d-173">Notifiche del ciclo di vita dei dispositivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-173">Device lifecycle notifications</span></span>

<span data-ttu-id="9f81d-174">L'hub IoT può inviare una notifica alla soluzione IoT quando un'identità dispositivo viene creata o eliminata inviando notifiche del ciclo di vita dei dispositivi.</span><span class="sxs-lookup"><span data-stu-id="9f81d-174">IoT Hub can notify your IoT solution when a device identity is created or deleted by sending device lifecycle notifications.</span></span> <span data-ttu-id="9f81d-175">A questo scopo, la soluzione IoT deve creare una route e impostare l'origine dati su *DeviceLifecycleEvents*.</span><span class="sxs-lookup"><span data-stu-id="9f81d-175">To do so, your IoT solution needs to create a route and to set the Data Source equal to *DeviceLifecycleEvents*.</span></span> <span data-ttu-id="9f81d-176">Per impostazione predefinita, non vengono inviate notifiche del ciclo di vita, il che significa che queste route non sono preesistenti.</span><span class="sxs-lookup"><span data-stu-id="9f81d-176">By default, no lifecycle notifications are sent, that is, no such routes pre-exist.</span></span> <span data-ttu-id="9f81d-177">Il messaggio di notifica include le proprietà e il corpo.</span><span class="sxs-lookup"><span data-stu-id="9f81d-177">The notification message includes properties, and body.</span></span>

<span data-ttu-id="9f81d-178">Proprietà: le proprietà di sistema del messaggio hanno come prefisso il simbolo `'$'`.</span><span class="sxs-lookup"><span data-stu-id="9f81d-178">Properties: Message system properties are prefixed with the `'$'` symbol.</span></span>

| <span data-ttu-id="9f81d-179">Nome</span><span class="sxs-lookup"><span data-stu-id="9f81d-179">Name</span></span> | <span data-ttu-id="9f81d-180">Valore</span><span class="sxs-lookup"><span data-stu-id="9f81d-180">Value</span></span> |
| --- | --- |
<span data-ttu-id="9f81d-181">$content-type</span><span class="sxs-lookup"><span data-stu-id="9f81d-181">$content-type</span></span> | <span data-ttu-id="9f81d-182">application/json</span><span class="sxs-lookup"><span data-stu-id="9f81d-182">application/json</span></span> |
<span data-ttu-id="9f81d-183">$iothub-enqueuedtime</span><span class="sxs-lookup"><span data-stu-id="9f81d-183">$iothub-enqueuedtime</span></span> |  <span data-ttu-id="9f81d-184">Data e ora in cui è stata inviata la notifica</span><span class="sxs-lookup"><span data-stu-id="9f81d-184">Time when the notification was sent</span></span> |
<span data-ttu-id="9f81d-185">$iothub-message-source</span><span class="sxs-lookup"><span data-stu-id="9f81d-185">$iothub-message-source</span></span> | <span data-ttu-id="9f81d-186">deviceLifecycleEvents</span><span class="sxs-lookup"><span data-stu-id="9f81d-186">deviceLifecycleEvents</span></span> |
<span data-ttu-id="9f81d-187">$content-encoding</span><span class="sxs-lookup"><span data-stu-id="9f81d-187">$content-encoding</span></span> | <span data-ttu-id="9f81d-188">utf-8</span><span class="sxs-lookup"><span data-stu-id="9f81d-188">utf-8</span></span> |
<span data-ttu-id="9f81d-189">opType</span><span class="sxs-lookup"><span data-stu-id="9f81d-189">opType</span></span> | <span data-ttu-id="9f81d-190">**createDeviceIdentity** o **deleteDeviceIdentity**</span><span class="sxs-lookup"><span data-stu-id="9f81d-190">**createDeviceIdentity** or **deleteDeviceIdentity**</span></span> |
<span data-ttu-id="9f81d-191">hubName</span><span class="sxs-lookup"><span data-stu-id="9f81d-191">hubName</span></span> | <span data-ttu-id="9f81d-192">Nome dell'hub IoT</span><span class="sxs-lookup"><span data-stu-id="9f81d-192">Name of IoT Hub</span></span> |
<span data-ttu-id="9f81d-193">deviceId</span><span class="sxs-lookup"><span data-stu-id="9f81d-193">deviceId</span></span> | <span data-ttu-id="9f81d-194">ID del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9f81d-194">ID of the device</span></span> |
<span data-ttu-id="9f81d-195">operationTimestamp</span><span class="sxs-lookup"><span data-stu-id="9f81d-195">operationTimestamp</span></span> | <span data-ttu-id="9f81d-196">Timestamp ISO8601 dell'operazione</span><span class="sxs-lookup"><span data-stu-id="9f81d-196">ISO8601 timestamp of operation</span></span> |
<span data-ttu-id="9f81d-197">iothub-message-schema</span><span class="sxs-lookup"><span data-stu-id="9f81d-197">iothub-message-schema</span></span> | <span data-ttu-id="9f81d-198">deviceLifecycleNotification</span><span class="sxs-lookup"><span data-stu-id="9f81d-198">deviceLifecycleNotification</span></span> |

<span data-ttu-id="9f81d-199">Corpo: questa sezione è in formato JSON e rappresenta la copia dell'identità dispositivo creata.</span><span class="sxs-lookup"><span data-stu-id="9f81d-199">Body: This section is in JSON format and represents the twin of the created device identity.</span></span> <span data-ttu-id="9f81d-200">Ad esempio,</span><span class="sxs-lookup"><span data-stu-id="9f81d-200">For example,</span></span>

```json
{
    "deviceId":"11576-ailn-test-0-67333793211",
    "etag":"AAAAAAAAAAE=",
    "properties": {
        "desired": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        },
        "reported": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        }
    }
}
```

## <a name="reference-topics"></a><span data-ttu-id="9f81d-201">Argomenti di riferimento:</span><span class="sxs-lookup"><span data-stu-id="9f81d-201">Reference topics:</span></span>

<span data-ttu-id="9f81d-202">Gli argomenti di riferimento seguenti offrono altre informazioni sul registro delle identità.</span><span class="sxs-lookup"><span data-stu-id="9f81d-202">The following reference topics provide you with more information about the identity registry.</span></span>

## <a name="device-identity-properties"></a><span data-ttu-id="9f81d-203">Proprietà delle identità dei dispositivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-203">Device identity properties</span></span>

<span data-ttu-id="9f81d-204">Le identità dei dispositivi vengono rappresentate da documenti JSON con le proprietà indicate di seguito.</span><span class="sxs-lookup"><span data-stu-id="9f81d-204">Device identities are represented as JSON documents with the following properties:</span></span>

| <span data-ttu-id="9f81d-205">Proprietà</span><span class="sxs-lookup"><span data-stu-id="9f81d-205">Property</span></span> | <span data-ttu-id="9f81d-206">Opzioni</span><span class="sxs-lookup"><span data-stu-id="9f81d-206">Options</span></span> | <span data-ttu-id="9f81d-207">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9f81d-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9f81d-208">deviceId</span><span class="sxs-lookup"><span data-stu-id="9f81d-208">deviceId</span></span> |<span data-ttu-id="9f81d-209">Obbligatoria, di sola lettura negli aggiornamenti</span><span class="sxs-lookup"><span data-stu-id="9f81d-209">required, read-only on updates</span></span> |<span data-ttu-id="9f81d-210">Stringa con distinzione tra maiuscole e minuscole (con lunghezza massima di 128 caratteri) di caratteri alfanumerici ASCII a 7 bit + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="9f81d-210">A case-sensitive string (up to 128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="9f81d-211">generationId</span><span class="sxs-lookup"><span data-stu-id="9f81d-211">generationId</span></span> |<span data-ttu-id="9f81d-212">Obbligatoria, di sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-212">required, read-only</span></span> |<span data-ttu-id="9f81d-213">Stringa con distinzione tra maiuscole/minuscole generata dall'hub IoT con lunghezza massima di 128 caratteri.</span><span class="sxs-lookup"><span data-stu-id="9f81d-213">An IoT hub-generated, case-sensitive string up to 128 characters long.</span></span> <span data-ttu-id="9f81d-214">Tale valore viene usato per distinguere i dispositivi con la stessa proprietà **deviceId** in caso di eliminazione e nuova creazione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-214">This value is used to distinguish devices with the same **deviceId**, when they have been deleted and re-created.</span></span> |
| <span data-ttu-id="9f81d-215">etag</span><span class="sxs-lookup"><span data-stu-id="9f81d-215">etag</span></span> |<span data-ttu-id="9f81d-216">Obbligatoria, di sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-216">required, read-only</span></span> |<span data-ttu-id="9f81d-217">Stringa che rappresenta un ETag vulnerabile per l'identità del dispositivo, come indicato in [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="9f81d-217">A string representing a weak ETag for the device identity, as per [RFC7232][lnk-rfc7232].</span></span> |
| <span data-ttu-id="9f81d-218">auth</span><span class="sxs-lookup"><span data-stu-id="9f81d-218">auth</span></span> |<span data-ttu-id="9f81d-219">Facoltativa</span><span class="sxs-lookup"><span data-stu-id="9f81d-219">optional</span></span> |<span data-ttu-id="9f81d-220">Oggetto composito contenente le informazioni di autenticazione e i materiali di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="9f81d-220">A composite object containing authentication information and security materials.</span></span> |
| <span data-ttu-id="9f81d-221">auth.symkey</span><span class="sxs-lookup"><span data-stu-id="9f81d-221">auth.symkey</span></span> |<span data-ttu-id="9f81d-222">Facoltativa</span><span class="sxs-lookup"><span data-stu-id="9f81d-222">optional</span></span> |<span data-ttu-id="9f81d-223">Oggetto composito contenente una chiave primaria e una chiave secondaria, archiviate in formato Base 64.</span><span class="sxs-lookup"><span data-stu-id="9f81d-223">A composite object containing a primary and a secondary key, stored in base64 format.</span></span> |
| <span data-ttu-id="9f81d-224">status</span><span class="sxs-lookup"><span data-stu-id="9f81d-224">status</span></span> |<span data-ttu-id="9f81d-225">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="9f81d-225">required</span></span> |<span data-ttu-id="9f81d-226">Indicatore di accesso.</span><span class="sxs-lookup"><span data-stu-id="9f81d-226">An access indicator.</span></span> <span data-ttu-id="9f81d-227">Può essere **Enabled** o **Disabled**.</span><span class="sxs-lookup"><span data-stu-id="9f81d-227">Can be **Enabled** or **Disabled**.</span></span> <span data-ttu-id="9f81d-228">Se è **Enabled**, il dispositivo sarà autorizzato alla connessione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-228">If **Enabled**, the device is allowed to connect.</span></span> <span data-ttu-id="9f81d-229">Se è **Disabled**, il dispositivo non potrà accedere ad alcun endpoint per il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9f81d-229">If **Disabled**, this device cannot access any device-facing endpoint.</span></span> |
| <span data-ttu-id="9f81d-230">statusReason</span><span class="sxs-lookup"><span data-stu-id="9f81d-230">statusReason</span></span> |<span data-ttu-id="9f81d-231">Facoltativa</span><span class="sxs-lookup"><span data-stu-id="9f81d-231">optional</span></span> |<span data-ttu-id="9f81d-232">Stringa con 128 caratteri di lunghezza che memorizza il motivo dello stato dell'identità del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9f81d-232">A 128 character-long string that stores the reason for the device identity status.</span></span> <span data-ttu-id="9f81d-233">Sono consentiti tutti i caratteri UTF-8.</span><span class="sxs-lookup"><span data-stu-id="9f81d-233">All UTF-8 characters are allowed.</span></span> |
| <span data-ttu-id="9f81d-234">statusUpdateTime</span><span class="sxs-lookup"><span data-stu-id="9f81d-234">statusUpdateTime</span></span> |<span data-ttu-id="9f81d-235">Sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-235">read-only</span></span> |<span data-ttu-id="9f81d-236">Indicatore temporale che mostra la data e l'ora dell'ultimo aggiornamento dello stato.</span><span class="sxs-lookup"><span data-stu-id="9f81d-236">A temporal indicator, showing the date and time of the last status update.</span></span> |
| <span data-ttu-id="9f81d-237">connectionState</span><span class="sxs-lookup"><span data-stu-id="9f81d-237">connectionState</span></span> |<span data-ttu-id="9f81d-238">Sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-238">read-only</span></span> |<span data-ttu-id="9f81d-239">Campo indicante lo stato della connessione: **Connected** o **Disconnected**.</span><span class="sxs-lookup"><span data-stu-id="9f81d-239">A field indicating connection status: either **Connected** or **Disconnected**.</span></span> <span data-ttu-id="9f81d-240">Questo campo rappresenta la visualizzazione Hub IoT dello stato di connessione del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9f81d-240">This field represents the IoT Hub view of the device connection status.</span></span> <span data-ttu-id="9f81d-241">**Importante**: è consigliabile usare questo campo solo per scopi di sviluppo e di debug.</span><span class="sxs-lookup"><span data-stu-id="9f81d-241">**Important**: This field should be used only for development/debugging purposes.</span></span> <span data-ttu-id="9f81d-242">Lo stato di connessione viene aggiornato solo per i dispositivi che usano MQTT o AMQP.</span><span class="sxs-lookup"><span data-stu-id="9f81d-242">The connection state is updated only for devices using MQTT or AMQP.</span></span> <span data-ttu-id="9f81d-243">Si basa anche su ping a livello di protocollo (ping MQTT o AMQP) e può avere un ritardo massimo di soli 5 minuti.</span><span class="sxs-lookup"><span data-stu-id="9f81d-243">Also, it is based on protocol-level pings (MQTT pings, or AMQP pings), and it can have a maximum delay of only 5 minutes.</span></span> <span data-ttu-id="9f81d-244">Per questi motivi possono essere presenti falsi positivi, ad esempio dispositivi segnalati come connessi, ma in realtà disconnessi.</span><span class="sxs-lookup"><span data-stu-id="9f81d-244">For these reasons, there can be false positives, such as devices reported as connected but that are disconnected.</span></span> |
| <span data-ttu-id="9f81d-245">connectionStateUpdatedTime</span><span class="sxs-lookup"><span data-stu-id="9f81d-245">connectionStateUpdatedTime</span></span> |<span data-ttu-id="9f81d-246">Sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-246">read-only</span></span> |<span data-ttu-id="9f81d-247">Indicatore temporale che mostra la data e l'ora dell'ultimo aggiornamento dello stato della connessione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-247">A temporal indicator, showing the date and last time the connection state was updated.</span></span> |
| <span data-ttu-id="9f81d-248">lastActivityTime</span><span class="sxs-lookup"><span data-stu-id="9f81d-248">lastActivityTime</span></span> |<span data-ttu-id="9f81d-249">Sola lettura</span><span class="sxs-lookup"><span data-stu-id="9f81d-249">read-only</span></span> |<span data-ttu-id="9f81d-250">Indicatore temporale che mostra la data e l'ora in cui il dispositivo si è connesso oppure ha ricevuto o inviato un messaggio per l'ultima volta.</span><span class="sxs-lookup"><span data-stu-id="9f81d-250">A temporal indicator, showing the date and last time the device connected, received, or sent a message.</span></span> |

> [!NOTE]
> <span data-ttu-id="9f81d-251">Lo stato della connessione può rappresentare solo la visualizzazione Hub IoT dello stato della connessione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-251">Connection state can only represent the IoT Hub view of the status of the connection.</span></span> <span data-ttu-id="9f81d-252">Gli aggiornamenti dello stato possono essere ritardati a seconda delle condizioni e delle configurazioni della rete.</span><span class="sxs-lookup"><span data-stu-id="9f81d-252">Updates to this state may be delayed, depending on network conditions and configurations.</span></span>

## <a name="additional-reference-material"></a><span data-ttu-id="9f81d-253">Materiale di riferimento</span><span class="sxs-lookup"><span data-stu-id="9f81d-253">Additional reference material</span></span>

<span data-ttu-id="9f81d-254">Di seguito sono indicati altri argomenti di riferimento reperibili nella Guida per gli sviluppatori dell'hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9f81d-254">Other reference topics in the IoT Hub developer guide include:</span></span>

* <span data-ttu-id="9f81d-255">[Endpoint dell'hub IoT][lnk-endpoints] illustra i diversi endpoint esposti da ogni hub IoT per operazioni della fase di esecuzione e di gestione.</span><span class="sxs-lookup"><span data-stu-id="9f81d-255">[IoT Hub endpoints][lnk-endpoints] describes the various endpoints that each IoT hub exposes for run-time and management operations.</span></span>
* <span data-ttu-id="9f81d-256">[Quote e limitazioni][lnk-quotas] descrive le quote e i comportamenti di limitazione applicabili al servizio hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-256">[Throttling and quotas][lnk-quotas] describes the quotas and throttling behaviors that apply to the IoT Hub service.</span></span>
* <span data-ttu-id="9f81d-257">[Azure IoT SDK per dispositivi e servizi][lnk-sdks] elenca gli SDK nei diversi linguaggi che è possibile usare quando si sviluppano app per dispositivi e servizi che interagiscono con l'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-257">[Azure IoT device and service SDKs][lnk-sdks] lists the various language SDKs you can use when you develop both device and service apps that interact with IoT Hub.</span></span>
* <span data-ttu-id="9f81d-258">[Linguaggio di query dell'hub IoT][lnk-query] descrive il linguaggio di query che è possibile usare per recuperare informazioni dall'hub IoT sui dispositivi gemelli e sui processi.</span><span class="sxs-lookup"><span data-stu-id="9f81d-258">[IoT Hub query language][lnk-query] describes the query language you can use to retrieve information from IoT Hub about your device twins and jobs.</span></span>
* <span data-ttu-id="9f81d-259">[Supporto di MQTT nell'hub IoT][lnk-devguide-mqtt] offre altre informazioni sul supporto dell'hub IoT per il protocollo MQTT.</span><span class="sxs-lookup"><span data-stu-id="9f81d-259">[IoT Hub MQTT support][lnk-devguide-mqtt] provides more information about IoT Hub support for the MQTT protocol.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9f81d-260">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="9f81d-260">Next steps</span></span>

<span data-ttu-id="9f81d-261">Ora che si è appreso come usare il registro delle identità dell'hub IoT, si potrebbe essere interessati agli argomenti seguenti della Guida per gli sviluppatori dell'hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9f81d-261">Now you have learned how to use the IoT Hub identity registry, you may be interested in the following IoT Hub developer guide topics:</span></span>

* <span data-ttu-id="9f81d-262">[Controllare l'accesso all'hub IoT][lnk-devguide-security]</span><span class="sxs-lookup"><span data-stu-id="9f81d-262">[Control access to IoT Hub][lnk-devguide-security]</span></span>
* <span data-ttu-id="9f81d-263">[Use device twins to synchronize state and configurations][lnk-devguide-device-twins] (Usare dispositivi gemelli per sincronizzare lo stato e le configurazioni)</span><span class="sxs-lookup"><span data-stu-id="9f81d-263">[Use device twins to synchronize state and configurations][lnk-devguide-device-twins]</span></span>
* <span data-ttu-id="9f81d-264">[Richiamare un metodo diretto in un dispositivo][lnk-devguide-directmethods]</span><span class="sxs-lookup"><span data-stu-id="9f81d-264">[Invoke a direct method on a device][lnk-devguide-directmethods]</span></span>
* <span data-ttu-id="9f81d-265">[Pianificare processi in più dispositivi][lnk-devguide-jobs]</span><span class="sxs-lookup"><span data-stu-id="9f81d-265">[Schedule jobs on multiple devices][lnk-devguide-jobs]</span></span>

<span data-ttu-id="9f81d-266">Per provare alcuni dei concetti descritti in questo articolo, può essere utile l'esercitazione seguente sull'hub IoT:</span><span class="sxs-lookup"><span data-stu-id="9f81d-266">If you would like to try out some of the concepts described in this article, you may be interested in the following IoT Hub tutorial:</span></span>

* <span data-ttu-id="9f81d-267">[Introduzione all'hub IoT di Azure][lnk-getstarted-tutorial]</span><span class="sxs-lookup"><span data-stu-id="9f81d-267">[Get started with Azure IoT Hub][lnk-getstarted-tutorial]</span></span>

<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://docs.microsoft.com/rest/api/iothub/iothubresource
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md
