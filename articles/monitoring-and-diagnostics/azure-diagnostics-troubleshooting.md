---
title: Risoluzione dei problemi relativi a Diagnostica di Azure | Documentazione Microsoft
description: Risoluzione dei problemi per l'uso di Diagnostica di Azure nelle macchine virtuali di Azure, in Service Fabric o in Servizi cloud.
services: monitoring-and-diagnostics
documentationcenter: .net
author: rboucher
manager: carmonm
editor: 
ms.assetid: 66469bce-d457-4d1e-b550-a08d2be4d28c
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 07/12/2017
ms.author: robb
ms.openlocfilehash: a0cb529836b14df71e83616f4f625a002c535b7b
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-diagnostics-troubleshooting"></a><span data-ttu-id="77970-103">Risoluzione dei problemi di Diagnostica di Azure</span><span class="sxs-lookup"><span data-stu-id="77970-103">Azure Diagnostics Troubleshooting</span></span>
<span data-ttu-id="77970-104">Informazioni sulla risoluzione dei problemi relativi all'uso di Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="77970-104">Troubleshooting information relevant to using Azure Diagnostics.</span></span> <span data-ttu-id="77970-105">Per altre informazioni su Diagnostica di Azure, vedere [Panoramica di Diagnostica di Azure](azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="77970-105">For more information on Azure diagnostics, see [Azure Diagnostics Overview](azure-diagnostics.md).</span></span>

## <a name="logical-components"></a><span data-ttu-id="77970-106">Componenti logici</span><span class="sxs-lookup"><span data-stu-id="77970-106">Logical Components</span></span>
<span data-ttu-id="77970-107">**Utilità di avvio del plug-in di diagnostica (DiagnosticsPluginLauncher.exe)**: avvia l'estensione Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="77970-107">**Diagnostics Plugin Launcher (DiagnosticsPluginLauncher.exe)**: Launches the Azure Diagnostics extension.</span></span> <span data-ttu-id="77970-108">Svolge la funzione di processo del punto di ingresso.</span><span class="sxs-lookup"><span data-stu-id="77970-108">Serves as the entry point process.</span></span>

<span data-ttu-id="77970-109">**Plug-in di diagnostica (DiagnosticsPlugin.exe)**: processo principale avviato dall'utilità di avvio che configura l'agente di monitoraggio, lo avvia e ne gestisce il ciclo di vita.</span><span class="sxs-lookup"><span data-stu-id="77970-109">**Diagnostics Plugin (DiagnosticsPlugin.exe)**: Main process that is launched by the launcher above and configures the Monitoring Agent, launches it and manages its lifetime.</span></span> 

<span data-ttu-id="77970-110">**Agente di monitoraggio (processi di MonAgent\*.exe)**: questi processi eseguono la maggior parte delle operazioni, ovvero monitoraggio, raccolta e trasferimento dei dati di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-110">**Monitoring Agent (MonAgent\*.exe processes)**: These processes do the bulk of the work; i.e., monitoring, collection and transfer of the diagnostics data.</span></span>  

## <a name="logartifact-paths"></a><span data-ttu-id="77970-111">Percorsi di log ed elementi</span><span class="sxs-lookup"><span data-stu-id="77970-111">Log/Artifact Paths</span></span>
<span data-ttu-id="77970-112">Di seguito sono elencati i percorsi di alcuni log ed elementi importanti.</span><span class="sxs-lookup"><span data-stu-id="77970-112">Here are the paths to some important logs and artifacts.</span></span> <span data-ttu-id="77970-113">Nella parte rimanente del documento verrà fatto riferimento a questi elementi:</span><span class="sxs-lookup"><span data-stu-id="77970-113">We keep referring to these throughout the rest of the document:</span></span>
### <a name="cloud-services"></a><span data-ttu-id="77970-114">Servizi cloud</span><span class="sxs-lookup"><span data-stu-id="77970-114">Cloud Services</span></span>
| <span data-ttu-id="77970-115">Elemento</span><span class="sxs-lookup"><span data-stu-id="77970-115">Artifact</span></span> | <span data-ttu-id="77970-116">Path</span><span class="sxs-lookup"><span data-stu-id="77970-116">Path</span></span> |
| --- | --- |
| <span data-ttu-id="77970-117">**File di configurazione di Diagnostica di Azure**</span><span class="sxs-lookup"><span data-stu-id="77970-117">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="77970-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<versione>\Config.txt</span><span class="sxs-lookup"><span data-stu-id="77970-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\Config.txt</span></span> |
| <span data-ttu-id="77970-119">**File di log**</span><span class="sxs-lookup"><span data-stu-id="77970-119">**Log files**</span></span> | <span data-ttu-id="77970-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<versione>\\</span><span class="sxs-lookup"><span data-stu-id="77970-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\\</span></span> |
| <span data-ttu-id="77970-121">**Archivio locale dei dati di diagnostica**</span><span class="sxs-lookup"><span data-stu-id="77970-121">**Local store for diagnostics data**</span></span> | <span data-ttu-id="77970-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<NomeRuolo>.DiagnosticStore\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="77970-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span></span> |
| <span data-ttu-id="77970-123">**File di configurazione dell'agente di monitoraggio**</span><span class="sxs-lookup"><span data-stu-id="77970-123">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="77970-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<NomeRuolo>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="77970-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="77970-125">**Pacchetto dell'estensione di diagnostica di Azure**</span><span class="sxs-lookup"><span data-stu-id="77970-125">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="77970-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<versione></span><span class="sxs-lookup"><span data-stu-id="77970-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version></span></span> |
| <span data-ttu-id="77970-127">**Percorso dell'utilità di raccolta dei log**</span><span class="sxs-lookup"><span data-stu-id="77970-127">**Log collection utility path**</span></span> | <span data-ttu-id="77970-128">%SystemDrive%\Packages\GuestAgent\\</span><span class="sxs-lookup"><span data-stu-id="77970-128">%SystemDrive%\Packages\GuestAgent\\</span></span> |
| <span data-ttu-id="77970-129">**File di log MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="77970-129">**MonAgentHost log file**</span></span> | <span data-ttu-id="77970-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span><span class="sxs-lookup"><span data-stu-id="77970-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

### <a name="virtual-machines"></a><span data-ttu-id="77970-131">Macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="77970-131">Virtual Machines</span></span>
| <span data-ttu-id="77970-132">Elemento</span><span class="sxs-lookup"><span data-stu-id="77970-132">Artifact</span></span> | <span data-ttu-id="77970-133">Path</span><span class="sxs-lookup"><span data-stu-id="77970-133">Path</span></span> |
| --- | --- |
| <span data-ttu-id="77970-134">**File di configurazione di Diagnostica di Azure**</span><span class="sxs-lookup"><span data-stu-id="77970-134">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="77970-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<versione>\RuntimeSettings</span><span class="sxs-lookup"><span data-stu-id="77970-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\RuntimeSettings</span></span> |
| <span data-ttu-id="77970-136">**File di log**</span><span class="sxs-lookup"><span data-stu-id="77970-136">**Log files**</span></span> | <span data-ttu-id="77970-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<versione>\Logs\\</span><span class="sxs-lookup"><span data-stu-id="77970-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Logs\\</span></span> |
| <span data-ttu-id="77970-138">**Archivio locale dei dati di diagnostica**</span><span class="sxs-lookup"><span data-stu-id="77970-138">**Local store for diagnostics data**</span></span> | <span data-ttu-id="77970-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<VersioneDiagnostica>\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="77970-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Tables</span></span> |
| <span data-ttu-id="77970-140">**File di configurazione dell'agente di monitoraggio**</span><span class="sxs-lookup"><span data-stu-id="77970-140">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="77970-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<VersioneDiagnostica>\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="77970-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="77970-142">**File di stato**</span><span class="sxs-lookup"><span data-stu-id="77970-142">**Status file**</span></span> | <span data-ttu-id="77970-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<versione>\Status</span><span class="sxs-lookup"><span data-stu-id="77970-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Status</span></span> |
| <span data-ttu-id="77970-144">**Pacchetto dell'estensione di diagnostica di Azure**</span><span class="sxs-lookup"><span data-stu-id="77970-144">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="77970-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<VersioneDiagnostica></span><span class="sxs-lookup"><span data-stu-id="77970-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion></span></span>|
| <span data-ttu-id="77970-146">**Percorso dell'utilità di raccolta dei log**</span><span class="sxs-lookup"><span data-stu-id="77970-146">**Log collection utility path**</span></span> | <span data-ttu-id="77970-147">C:\WindowsAzure\Packages</span><span class="sxs-lookup"><span data-stu-id="77970-147">C:\WindowsAzure\Packages</span></span> |
| <span data-ttu-id="77970-148">**File di log MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="77970-148">**MonAgentHost log file**</span></span> | <span data-ttu-id="77970-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span><span class="sxs-lookup"><span data-stu-id="77970-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

## <a name="metric-data-doesnt-show-in-azure-portal"></a><span data-ttu-id="77970-150">I dati relativi alle metriche non sono visualizzati nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="77970-150">Metric data doesn't show in Azure portal</span></span>
<span data-ttu-id="77970-151">Diagnostica di Microsoft Azure fornisce una serie di dati relativi alle metriche che possono essere visualizzati nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="77970-151">Azure Diagnostics provides a bunch of metric data, which can be displayed in Azure portal.</span></span> <span data-ttu-id="77970-152">Se si verificano problemi con la visualizzare di questi dati nel portale, controllare l'account di account di archiviazione -> tabella WADMetrics\* per vedere se i record delle metriche corrispondenti sono presenti.</span><span class="sxs-lookup"><span data-stu-id="77970-152">If you have problems with seeing these data in portal, check the diagnostics storage account -> WADMetrics\* table to see if the corresponding metric records are there.</span></span> <span data-ttu-id="77970-153">In questo caso, il PartitionKey della tabella è l'ID risorsa della macchina virtuale o il set di scalabilità di macchine virtuali e il RowKey è il nome della metrica, ovvero il nome del contatore delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="77970-153">Here, the PartitionKey of the table is the resource ID of virtual machine or virtual machine scale set, and the RowKey is the metric name i.e. performance counter name.</span></span>

<span data-ttu-id="77970-154">Se l'ID risorsa non è corretto, controllare Configurazione di diagnostica -> Metriche -> IDRisorsa per vedere se l'ID risorsa è impostato correttamente.</span><span class="sxs-lookup"><span data-stu-id="77970-154">If the resource ID is incorrect, check Diagnostics Configuration -> Metrics -> ResourceId to see if the resource ID is set correctly.</span></span>

<span data-ttu-id="77970-155">Se non sono presenti dati per la metrica specifica, controllare Configurazione di diagnostica -> PerformanceCounter per verificare se la metrica (contatore prestazioni) è inclusa.</span><span class="sxs-lookup"><span data-stu-id="77970-155">If there's no data for the specific metric, check Diagnostics Configuration -> PerformanceCounter to see if the metric(performance counter) is included.</span></span> <span data-ttu-id="77970-156">Per impostazione predefinita sono attivati i contatori seguenti.</span><span class="sxs-lookup"><span data-stu-id="77970-156">We enable the following counters by default.</span></span>
- <span data-ttu-id="77970-157">\Processor(_Total)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77970-157">\Processor(_Total)\% Processor Time</span></span>
- <span data-ttu-id="77970-158">\Memory\Available Bytes</span><span class="sxs-lookup"><span data-stu-id="77970-158">\Memory\Available Bytes</span></span>
- <span data-ttu-id="77970-159">\ASP.NET Applications(__Total__)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="77970-159">\ASP.NET Applications(__Total__)\Requests/Sec</span></span>
- <span data-ttu-id="77970-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span><span class="sxs-lookup"><span data-stu-id="77970-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span></span>
- <span data-ttu-id="77970-161">\ASP.NET\Requests Queued</span><span class="sxs-lookup"><span data-stu-id="77970-161">\ASP.NET\Requests Queued</span></span>
- <span data-ttu-id="77970-162">\ASP.NET\Requests Rejected</span><span class="sxs-lookup"><span data-stu-id="77970-162">\ASP.NET\Requests Rejected</span></span>
- <span data-ttu-id="77970-163">\Processor(w3wp)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77970-163">\Processor(w3wp)\% Processor Time</span></span>
- <span data-ttu-id="77970-164">\Process(w3wp)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77970-164">\Process(w3wp)\Private Bytes</span></span>
- <span data-ttu-id="77970-165">\Process(WaIISHost)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77970-165">\Process(WaIISHost)\% Processor Time</span></span>
- <span data-ttu-id="77970-166">\Process(WaIISHost)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77970-166">\Process(WaIISHost)\Private Bytes</span></span>
- <span data-ttu-id="77970-167">\Process(WaWorkerHost)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77970-167">\Process(WaWorkerHost)\% Processor Time</span></span>
- <span data-ttu-id="77970-168">\Process(WaWorkerHost)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77970-168">\Process(WaWorkerHost)\Private Bytes</span></span>
- <span data-ttu-id="77970-169">\Memory\Page Faults/sec</span><span class="sxs-lookup"><span data-stu-id="77970-169">\Memory\Page Faults/sec</span></span>
- <span data-ttu-id="77970-170">\.NET CLR Memory(_Global_)\% Time in GC</span><span class="sxs-lookup"><span data-stu-id="77970-170">\.NET CLR Memory(_Global_)\% Time in GC</span></span>
- <span data-ttu-id="77970-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77970-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="77970-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77970-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span></span>
- <span data-ttu-id="77970-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77970-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="77970-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77970-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span></span>

<span data-ttu-id="77970-175">Se la configurazione è impostata correttamente, ma non è ancora possibile visualizzare i dati delle metriche, seguire le istruzioni riportate di seguito per ulteriori indagini.</span><span class="sxs-lookup"><span data-stu-id="77970-175">If the configuration is set correctly but you still cannot see the metric data, follow the guidelines below for the further investigation.</span></span>


## <a name="azure-diagnostics-is-not-starting"></a><span data-ttu-id="77970-176">Mancato avvio di Diagnostica Azure</span><span class="sxs-lookup"><span data-stu-id="77970-176">Azure Diagnostics is not Starting</span></span>
<span data-ttu-id="77970-177">Per informazioni sui motivi del mancato avvio della diagnostica, controllare i file **DiagnosticsPluginLauncher.log** e **DiagnosticsPlugin.log** dal percorso dei file di log indicato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="77970-177">Look at **DiagnosticsPluginLauncher.log** and **DiagnosticsPlugin.log** files from the location of the log files provided above for information on why diagnostics failed to start.</span></span> 

<span data-ttu-id="77970-178">Se questi log indicano `Monitoring Agent not reporting success after launch`, significa che si è verificato un errore di avvio di MonAgentHost.exe.</span><span class="sxs-lookup"><span data-stu-id="77970-178">If these logs indicate `Monitoring Agent not reporting success after launch`, it means there was a failure launching MonAgentHost.exe.</span></span> <span data-ttu-id="77970-179">Esaminare i log relativi nella posizione indicata per `MonAgentHost log file` nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="77970-179">Look at the logs for that in the location indicated for `MonAgentHost log file` in the section above.</span></span>

<span data-ttu-id="77970-180">L'ultima riga del file di log contiene il codice di uscita.</span><span class="sxs-lookup"><span data-stu-id="77970-180">The last line of the log files contains the exit code.</span></span>  

```
DiagnosticsPluginLauncher.exe Information: 0 : [4/16/2016 6:24:15 AM] DiagnosticPlugin exited with code 0
```
<span data-ttu-id="77970-181">Se si trova un codice di uscita **negativo**, fare riferimento alla [tabella dei codici di uscita](#azure-diagnostics-plugin-exit-codes) in [Riferimenti](#references).</span><span class="sxs-lookup"><span data-stu-id="77970-181">If you find a **negative** exit code, refer to the [exit code table](#azure-diagnostics-plugin-exit-codes) in the [References](#references).</span></span>

## <a name="diagnostics-data-is-not-logged-to-azure-storage"></a><span data-ttu-id="77970-182">I dati di diagnostica non vengono registrati in Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="77970-182">Diagnostics Data is Not Logged to Azure Storage</span></span>
<span data-ttu-id="77970-183">Determinare se non vengono visualizzati tutti i dati o parte di essi.</span><span class="sxs-lookup"><span data-stu-id="77970-183">Determine if no data is showing up or only some of the data is not showing up.</span></span>

### <a name="diagnostics-infrastructure-logs"></a><span data-ttu-id="77970-184">Log dell'infrastruttura di diagnostica</span><span class="sxs-lookup"><span data-stu-id="77970-184">Diagnostics Infrastructure Logs</span></span>
<span data-ttu-id="77970-185">La diagnostica di Azure registra gli errori rilevati nei log dell'infrastruttura di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-185">Diagnostics Infrastructure Logs is where azure diagnostics logs any errors that it runs into.</span></span> <span data-ttu-id="77970-186">Assicurarsi di aver abilitato ([Come?](#how-to-check-diagnostics-extension-configuration)) l'acquisizione dei log dell'infrastruttura di diagnostica nella configurazione ed esaminare rapidamente eventuali errori rilevanti visualizzati nella tabella `DiagnosticInfrastructureLogsTable` nell'account di archiviazione configurato.</span><span class="sxs-lookup"><span data-stu-id="77970-186">Make sure you have enabled ([how to?](#how-to-check-diagnostics-extension-configuration)) capturing of Diagnostics Infrastructure logs in your configuration and quickly look for any relevant errors that show up in the `DiagnosticInfrastructureLogsTable` table in your configured storage account.</span></span>

### <a name="no-data-is-showing-up"></a><span data-ttu-id="77970-187">Non sono visualizzati dati</span><span class="sxs-lookup"><span data-stu-id="77970-187">No data is showing up</span></span>
<span data-ttu-id="77970-188">La causa più comune della mancanza di tutti i dati degli eventi è la definizione non corretta delle informazioni sull'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="77970-188">The most common cause of event data entirely missing is incorrectly defined storage account information.</span></span>

<span data-ttu-id="77970-189">Soluzione: correggere la configurazione della diagnostica e reinstallare Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-189">Solution: Correct your Diagnostics configuration and reinstall Diagnostics.</span></span>

<span data-ttu-id="77970-190">Se l'account di archiviazione è configurato correttamente, connettersi tramite desktop remoto al computer e assicurarsi che DiagnosticsPlugin.exe e MonAgentCore.exe siano in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="77970-190">If the storage account is configured correctly, remote desktop into the machine and make sure DiagnosticsPlugin.exe and MonAgentCore.exe are running.</span></span> <span data-ttu-id="77970-191">Se non sono in esecuzione, seguire le istruzioni in [Mancato avvio di Diagnostica di Azure](#azure-diagnostics-is-not-starting).</span><span class="sxs-lookup"><span data-stu-id="77970-191">If they are not running, follow [Azure Diagnostics is not Starting](#azure-diagnostics-is-not-starting).</span></span> <span data-ttu-id="77970-192">Se i processi sono in esecuzione, passare a [I dati vengono acquisiti in locale](#is-data-getting-captured-locally) e seguire le istruzioni rimanenti della guida.</span><span class="sxs-lookup"><span data-stu-id="77970-192">If the processes are running, jump to [Is data getting captured locally](#is-data-getting-captured-locally) and follow this guide from there on.</span></span>

### <a name="part-of-the-data-is-missing"></a><span data-ttu-id="77970-193">Alcuni dati sono mancanti</span><span class="sxs-lookup"><span data-stu-id="77970-193">Part of the data is missing</span></span>
<span data-ttu-id="77970-194">Alcuni dati sono presenti ma una parte dei dati è mancante.</span><span class="sxs-lookup"><span data-stu-id="77970-194">If you are getting some data but not other.</span></span> <span data-ttu-id="77970-195">Ciò significa che la pipeline di raccolta dati/trasferimento è impostata correttamente.</span><span class="sxs-lookup"><span data-stu-id="77970-195">This means the data collection / transfer pipeline is set correctly.</span></span> <span data-ttu-id="77970-196">Attenersi alle istruzioni delle sezioni riportate di seguito per circoscrivere il problema:</span><span class="sxs-lookup"><span data-stu-id="77970-196">Follow the subsections here to narrow down what the issue is:</span></span>
#### <a name="is-collection-configured"></a><span data-ttu-id="77970-197">La raccolta è configurata:</span><span class="sxs-lookup"><span data-stu-id="77970-197">Is Collection Configured:</span></span> 
<span data-ttu-id="77970-198">La configurazione della diagnostica include la parte che indica il tipo di dati specifico da raccogliere.</span><span class="sxs-lookup"><span data-stu-id="77970-198">Diagnostics Configuration contains the part that instructs for a particular type of data to be collected.</span></span> <span data-ttu-id="77970-199">[Rivedere la configurazione](#how-to-check-diagnostics-extension-configuration) per assicurarsi di non cercare dati che non sono stati configurati per la raccolta.</span><span class="sxs-lookup"><span data-stu-id="77970-199">[Review your configuration](#how-to-check-diagnostics-extension-configuration) to make sure you are not looking for data you have not configured for collection.</span></span>
#### <a name="is-the-host-generating-data"></a><span data-ttu-id="77970-200">L'host genera i dati:</span><span class="sxs-lookup"><span data-stu-id="77970-200">Is the host generating data:</span></span>
- <span data-ttu-id="77970-201">**Contatori delle prestazioni**: aprire perfmon e controllare il contatore.</span><span class="sxs-lookup"><span data-stu-id="77970-201">**Performance Counters**: open perfmon and check the counter.</span></span>
- <span data-ttu-id="77970-202">**Log di traccia**: connettersi tramite desktop remoto alla macchina virtuale e aggiungere TextWriterTraceListener al file di configurazione dell'app.</span><span class="sxs-lookup"><span data-stu-id="77970-202">**Trace Logs**:  Remote desktop into the VM and add a TextWriterTraceListener to the app’s config file.</span></span>  <span data-ttu-id="77970-203">Vedere http://msdn.microsoft.com/library/sk36c28t.aspx per impostare il listener di testo.</span><span class="sxs-lookup"><span data-stu-id="77970-203">See http://msdn.microsoft.com/library/sk36c28t.aspx to set up the text listener.</span></span>  <span data-ttu-id="77970-204">Verificare che l'elemento `<trace>` includa `<trace autoflush="true">`.</span><span class="sxs-lookup"><span data-stu-id="77970-204">Make sure the `<trace>` element has `<trace autoflush="true">`.</span></span><br />
<span data-ttu-id="77970-205">Se i log di traccia non vengono generati, seguire le istruzioni in [Altre informazioni sui log di traccia mancanti](#more-about-trace-logs-missing).</span><span class="sxs-lookup"><span data-stu-id="77970-205">If you don't see trace logs getting generated, follow [More About Trace Logs Missing](#more-about-trace-logs-missing).</span></span>
- <span data-ttu-id="77970-206">**Tracce ETW**: connettersi tramite desktop remoto alla macchina virtuale e installare PerfView.</span><span class="sxs-lookup"><span data-stu-id="77970-206">**ETW traces**: Remote desktop into the VM and install PerfView.</span></span>  <span data-ttu-id="77970-207">In PerfView eseguire File -> User Command -> Listen etwprovder1,etwprovider2 (File -> Comando utente -> Attesa etwprovder1,etwprovider2) e così via.  Si noti che nel comando di attesa viene fatta distinzione tra maiuscole e minuscole e non possono essere presenti spazi nell'elenco dei provider ETW separato da virgole.</span><span class="sxs-lookup"><span data-stu-id="77970-207">In PerfView run File -> User Command -> Listen etwprovder1, etwprovider2, etc.  Note that the Listen command is case-sensitive and there cannot be spaces between the comma-separated list of ETW providers.</span></span>  <span data-ttu-id="77970-208">Se il comando non viene eseguito è possibile fare clic sul pulsante 'Log' nella parte inferiore destra dello strumento Perfview per visualizzare i tentativi di esecuzione e i risultati.</span><span class="sxs-lookup"><span data-stu-id="77970-208">If the command fails to run, you can click the 'Log' button in the bottom-right of the Perfview tool to see what was attempted to run and what the result was.</span></span>  <span data-ttu-id="77970-209">Presupponendo che l'input sia corretto, viene visualizzata una nuova finestra e dopo pochi secondi saranno visibili le tracce ETW.</span><span class="sxs-lookup"><span data-stu-id="77970-209">Assuming the input is correct then a new window will pop up and in a few seconds you will begin seeing ETW traces.</span></span>
- <span data-ttu-id="77970-210">**Log eventi**: connettersi tramite desktop remoto alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-210">**Event Logs**: Remote desktop into the VM.</span></span> <span data-ttu-id="77970-211">Aprire `Event Viewer` e assicurarsi che gli eventi siano presenti.</span><span class="sxs-lookup"><span data-stu-id="77970-211">Open `Event Viewer` and ensure the events exist.</span></span>
#### <a name="is-data-getting-captured-locally"></a><span data-ttu-id="77970-212">I dati vengono acquisiti in locale:</span><span class="sxs-lookup"><span data-stu-id="77970-212">Is data getting captured locally:</span></span>
<span data-ttu-id="77970-213">Assicurarsi quindi che i dati vengano acquisiti in locale.</span><span class="sxs-lookup"><span data-stu-id="77970-213">Next make sure the data is getting captured locally.</span></span>
<span data-ttu-id="77970-214">I dati vengono archiviati in locale nei file `*.tsf` nell'[archivio locale per i dati di diagnostica](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="77970-214">The data is locally stored in `*.tsf` files in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="77970-215">I diversi tipi di log vengono raccolti in file `.tsf` diversi.</span><span class="sxs-lookup"><span data-stu-id="77970-215">Different kinds of logs get collected in different `.tsf` files.</span></span> <span data-ttu-id="77970-216">I nomi sono simili ai nomi delle tabelle nell'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="77970-216">The names are similar to the table names in azure storage.</span></span> <span data-ttu-id="77970-217">Ad esempio, `Performance Counters` viene raccolto in `PerformanceCountersTable.tsf`, i log eventi vengono raccolti in `WindowsEventLogsTable.tsf`.</span><span class="sxs-lookup"><span data-stu-id="77970-217">For example `Performance Counters` get collected in `PerformanceCountersTable.tsf`, Event Logs get collected in `WindowsEventLogsTable.tsf`.</span></span> <span data-ttu-id="77970-218">Usare le istruzioni nella sezione [Estrazione dei log locali](#local-log-extraction) per aprire i file di raccolta locali e assicurarsi che vengano raccolti su disco.</span><span class="sxs-lookup"><span data-stu-id="77970-218">Use the instructions in [Local Log Extraction](#local-log-extraction) section to open the local collection files and make sure you see them getting collected on disk.</span></span>

<span data-ttu-id="77970-219">Se i log non vengono raccolti in locale ed è già stato verificato che l'host genera dati, è possibile che sia presente un problema di configurazione.</span><span class="sxs-lookup"><span data-stu-id="77970-219">If you don't see logs getting collected locally and have already verified that the host is generating data, you likely have a configuration issue.</span></span> <span data-ttu-id="77970-220">Rivedere attentamente la configurazione della sezione appropriata.</span><span class="sxs-lookup"><span data-stu-id="77970-220">Review your configuration carefully for the appropriate section.</span></span> <span data-ttu-id="77970-221">Rivedere anche la configurazione generata per l'agente di monitoraggio [MaConfig.xml](#log-artifacts-path) e assicurarsi che sia presente una sezione che descriva l'origine dei log e che non sia stata persa durante la conversione tra la configurazione di diagnostica di Azure e la configurazione dell'agente di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="77970-221">Also review the configuration generated for MonitoringAgent [MaConfig.xml](#log-artifacts-path) and make sure there is some section describing the relevant log source and that it is not lost in translation between azure diagnostics configuration and monitoring agent configuration.</span></span>
#### <a name="is-data-getting-transferred"></a><span data-ttu-id="77970-222">I dati vengono trasferiti:</span><span class="sxs-lookup"><span data-stu-id="77970-222">Is data getting transferred:</span></span>
<span data-ttu-id="77970-223">Se è stato verificato che i dati vengono acquisiti in locale e i dati non sono ancora visibili nell'account di archiviazione:</span><span class="sxs-lookup"><span data-stu-id="77970-223">If you have verified the data is getting captured locally but you still don't see it in your storage account:</span></span> 
- <span data-ttu-id="77970-224">Innanzitutto verificare di aver specificato un account di archiviazione corretto e che non sia stato eseguito il rollover di chiavi e altri elementi per l'account di archiviazione specificato.</span><span class="sxs-lookup"><span data-stu-id="77970-224">First and foremost, make sure that you have provided a correct storage account and that you have not rolled over keys etc.for the given storage account.</span></span> <span data-ttu-id="77970-225">Per i servizi cloud, a volte gli utenti non aggiornano `useDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="77970-225">For cloud services, sometimes we see that people don't update their `useDevelopmentStorage=true`.</span></span>
- <span data-ttu-id="77970-226">Se l'account di archiviazione specificato è corretto.</span><span class="sxs-lookup"><span data-stu-id="77970-226">If provided storage account is correct.</span></span> <span data-ttu-id="77970-227">Verificare che non siano presenti limitazioni di rete che non consentono ai componenti di raggiungere gli endpoint di archiviazione pubblici.</span><span class="sxs-lookup"><span data-stu-id="77970-227">Make sure you do not have some network restrictions that do not allow the components to reach public storage endpoints.</span></span> <span data-ttu-id="77970-228">Questa operazione può essere eseguita collegandosi tramite desktop remoto al computer e provando a scrivere nello stesso account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="77970-228">One way to do that is to remote desktop into the machine and try to write something to the same storage account yourself.</span></span>
- <span data-ttu-id="77970-229">Infine, è possibile controllare gli errori segnalati dall'agente di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="77970-229">Finally, you can try and see what failure are being reported by Monitoring Agent.</span></span> <span data-ttu-id="77970-230">L'agente di monitoraggio scrive i log in `maeventtable.tsf` nell'[archivio locale dei dati di diagnostica](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="77970-230">Monitoring agent writes its logs in `maeventtable.tsf` located in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="77970-231">Seguire le istruzioni nella sezione [Estrazione dei log locali](#local-log-extraction) per aprire il file e verificare se sono presenti `errors` che indicano errori di lettura dei file locali o di scrittura nell'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="77970-231">Follow instructions in [Local Log Extraction](#local-log-extraction) section to open this file and try and figure out if there are `errors` indicating failures to read local files or write to storage.</span></span>

### <a name="capturing--archiving-logs"></a><span data-ttu-id="77970-232">Acquisizione e archiviazione dei log</span><span class="sxs-lookup"><span data-stu-id="77970-232">Capturing / Archiving logs</span></span>
<span data-ttu-id="77970-233">Sono stati eseguiti i passaggi descritti ma non è ancora stata individuata la causa del problema e si sta considerando la possibilità di rivolgersi al supporto tecnico.</span><span class="sxs-lookup"><span data-stu-id="77970-233">You went through the above steps but could not figure out what was wrong and are thinking about contacting support.</span></span> <span data-ttu-id="77970-234">Il supporto tecnico potrebbe innanzitutto richiedere di raccogliere i registri del computer.</span><span class="sxs-lookup"><span data-stu-id="77970-234">The first thing they might ask you is to collect logs from your machine.</span></span> <span data-ttu-id="77970-235">È possibile risparmiare tempo eseguendo questa operazione autonomamente.</span><span class="sxs-lookup"><span data-stu-id="77970-235">You can save time by doing that yourself.</span></span> <span data-ttu-id="77970-236">Eseguire l'utilità `CollectGuestLogs.exe` nel [percorso di Raccolta di log](#log-artifacts-path). Viene generato un file con estensione zip con tutti i log di Azure rilevanti nella stessa cartella.</span><span class="sxs-lookup"><span data-stu-id="77970-236">Run the `CollectGuestLogs.exe` utility at  [Log Collection Utility path](#log-artifacts-path) and it generates a zip file with all relevant azure logs in the same folder.</span></span>

## <a name="diagnostics-data-tables-not-found"></a><span data-ttu-id="77970-237">Tabelle dei dati di diagnostica non trovate</span><span class="sxs-lookup"><span data-stu-id="77970-237">Diagnostics data Tables not found</span></span>
<span data-ttu-id="77970-238">Le tabelle nell'archiviazione di Azure contenenti gli eventi ETW vengono denominate usando il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="77970-238">The tables in Azure storage holding ETW events are named using the following code:</span></span>

```C#
        if (String.IsNullOrEmpty(eventDestination)) {
            if (e == "DefaultEvents")
                tableName = "WADDefault" + MD5(provider);
            else
                tableName = "WADEvent" + MD5(provider) + eventId;
        }
        else
            tableName = "WAD" + eventDestination;
```

<span data-ttu-id="77970-239">Di seguito è fornito un esempio:</span><span class="sxs-lookup"><span data-stu-id="77970-239">Here is an example:</span></span>

```XML
        <EtwEventSourceProviderConfiguration provider="prov1">
          <Event id="1" />
          <Event id="2" eventDestination="dest1" />
          <DefaultEvents />
        </EtwEventSourceProviderConfiguration>
        <EtwEventSourceProviderConfiguration provider="prov2">
          <DefaultEvents eventDestination="dest2" />
        </EtwEventSourceProviderConfiguration>
```
```JSON
"EtwEventSourceProviderConfiguration": [
    {
        "provider": "prov1",
        "Event": [
            {
                "id": 1
            },
            {
                "id": 2,
                "eventDestination": "dest1"
            }
        ],
        "DefaultEvents": {
            "eventDestination": "DefaultEventDestination",
            "sinks": ""
        }
    },
    {
        "provider": "prov2",
        "DefaultEvents": {
            "eventDestination": "dest2"
        }
    }
]
```
<span data-ttu-id="77970-240">Vengono generate 4 tabelle:</span><span class="sxs-lookup"><span data-stu-id="77970-240">That generates 4 tables:</span></span>

| <span data-ttu-id="77970-241">Evento</span><span class="sxs-lookup"><span data-stu-id="77970-241">Event</span></span> | <span data-ttu-id="77970-242">Nome tabella</span><span class="sxs-lookup"><span data-stu-id="77970-242">Table Name</span></span> |
| --- | --- |
| <span data-ttu-id="77970-243">provider="prov1" &lt;Event id=v1" /&gt;</span><span class="sxs-lookup"><span data-stu-id="77970-243">provider=”prov1” &lt;Event id=”1” /&gt;</span></span> |<span data-ttu-id="77970-244">WADEvent+MD5(“prov1”)+”1”</span><span class="sxs-lookup"><span data-stu-id="77970-244">WADEvent+MD5(“prov1”)+”1”</span></span> |
| <span data-ttu-id="77970-245">provider="prov1" &lt;Event id="2" eventDestination="dest1" /&gt;</span><span class="sxs-lookup"><span data-stu-id="77970-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span></span> |<span data-ttu-id="77970-246">WADdest1</span><span class="sxs-lookup"><span data-stu-id="77970-246">WADdest1</span></span> |
| <span data-ttu-id="77970-247">provider="prov1" &lt;DefaultEvents /&gt;</span><span class="sxs-lookup"><span data-stu-id="77970-247">provider=”prov1” &lt;DefaultEvents /&gt;</span></span> |<span data-ttu-id="77970-248">WADDefault+MD5(“prov1”)</span><span class="sxs-lookup"><span data-stu-id="77970-248">WADDefault+MD5(“prov1”)</span></span> |
| <span data-ttu-id="77970-249">provider="prov2" &lt;DefaultEvents eventDestination="dest2" /&gt;</span><span class="sxs-lookup"><span data-stu-id="77970-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span></span> |<span data-ttu-id="77970-250">WADdest2</span><span class="sxs-lookup"><span data-stu-id="77970-250">WADdest2</span></span> |

## <a name="references"></a><span data-ttu-id="77970-251">Riferimenti</span><span class="sxs-lookup"><span data-stu-id="77970-251">References</span></span>

### <a name="how-to-check-diagnostics-extension-configuration"></a><span data-ttu-id="77970-252">Come controllare la configurazione dell'estensione di diagnostica</span><span class="sxs-lookup"><span data-stu-id="77970-252">How to check Diagnostics Extension Configuration</span></span>
<span data-ttu-id="77970-253">Il modo più semplice per controllare la configurazione dell'estensione consiste nel passare a http://resources.azure.com, quindi alla macchina virtuale o al servizio cloud in cui si vuole controllare l'estensione di diagnostica di Azure (IaaSDiagnostics/PaaDiagnostics).</span><span class="sxs-lookup"><span data-stu-id="77970-253">The easiest way to check your extension configuration is to navigate to http://resources.azure.com, navigate to the virtual machine or cloud service on which the Azure Diagnostics extension (IaaSDiagnostics / PaaDiagnostics) is in question.</span></span>

<span data-ttu-id="77970-254">In alternativa, connettersi tramite desktop remoto al computer ed esaminare il file di configurazione di Diagnostica di Azure descritto [qui](#log-artifacts-path) nella sezione appropriata.</span><span class="sxs-lookup"><span data-stu-id="77970-254">Alternatively, remote desktop into the machine and look at the Azure Diagnostics Configuration file described in the appropriate section [here](#log-artifacts-path).</span></span>

<span data-ttu-id="77970-255">In entrambi i casi cercare **Microsoft.Azure.Diagnostics** quindi cercare il campo **xmlCfg** o **WadCfg**.</span><span class="sxs-lookup"><span data-stu-id="77970-255">In either case search for **Microsoft.Azure.Diagnostics** then for the **xmlCfg** or **WadCfg** field.</span></span> 

<span data-ttu-id="77970-256">In caso di macchine virtuali se il campo WadCfg è presente, significa che il file di configurazione è in JSON.</span><span class="sxs-lookup"><span data-stu-id="77970-256">In case of virtual machines, if the WadCfg field is present, it means the config is in JSON.</span></span> <span data-ttu-id="77970-257">Se il campo xmlCfg è presente, significa che la configurazione è in formato XML e contiene la codifica Base64.</span><span class="sxs-lookup"><span data-stu-id="77970-257">If the xmlCfg field is present, it means the config is in XML and is base64 encoded.</span></span> <span data-ttu-id="77970-258">Per visualizzare il codice XML caricato da Diagnostica è necessario [decodificare](http://www.bing.com/search?q=base64+decoder) il file.</span><span class="sxs-lookup"><span data-stu-id="77970-258">You need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

<span data-ttu-id="77970-259">Per il ruolo del servizio cloud, se si seleziona la configurazione dal disco, i dati sono codificati in base 64, pertanto sarà necessario [decodificarli](http://www.bing.com/search?q=base64+decoder) per visualizzare il codice XML caricato da Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-259">For Cloud Service role, if you pick the configuration from disk, the data is base64 encoded so you’ll need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

### <a name="azure-diagnostics-plugin-exit-codes"></a><span data-ttu-id="77970-260">Codici di uscita del plug-in Diagnostica di Azure</span><span class="sxs-lookup"><span data-stu-id="77970-260">Azure Diagnostics Plugin Exit Codes</span></span>
<span data-ttu-id="77970-261">Il plug-in restituisce i seguenti codici di uscita:</span><span class="sxs-lookup"><span data-stu-id="77970-261">The plugin returns the following exit codes:</span></span>

| <span data-ttu-id="77970-262">Codice di uscita</span><span class="sxs-lookup"><span data-stu-id="77970-262">Exit Code</span></span> | <span data-ttu-id="77970-263">Descrizione</span><span class="sxs-lookup"><span data-stu-id="77970-263">Description</span></span> |
| --- | --- |
| <span data-ttu-id="77970-264">0</span><span class="sxs-lookup"><span data-stu-id="77970-264">0</span></span> |<span data-ttu-id="77970-265">Completamento della procedura.</span><span class="sxs-lookup"><span data-stu-id="77970-265">Success.</span></span> |
| <span data-ttu-id="77970-266">-1</span><span class="sxs-lookup"><span data-stu-id="77970-266">-1</span></span> |<span data-ttu-id="77970-267">Errore generico.</span><span class="sxs-lookup"><span data-stu-id="77970-267">Generic Error.</span></span> |
| <span data-ttu-id="77970-268">-2</span><span class="sxs-lookup"><span data-stu-id="77970-268">-2</span></span> |<span data-ttu-id="77970-269">Impossibile caricare il file rcf.</span><span class="sxs-lookup"><span data-stu-id="77970-269">Unable to load the rcf file.</span></span><p><span data-ttu-id="77970-270">Questo errore interno dovrebbe verificarsi solo se l'utilità di avvio del plug-in dell'agente guest viene richiamata manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-270">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="77970-271">-3</span><span class="sxs-lookup"><span data-stu-id="77970-271">-3</span></span> |<span data-ttu-id="77970-272">Impossibile caricare il file di configurazione di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-272">Cannot load the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77970-273">Soluzione: questo errore si verifica quando un file di configurazione non ha superato la convalida dello schema.</span><span class="sxs-lookup"><span data-stu-id="77970-273">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="77970-274">La soluzione consiste nel fornire un file di configurazione conforme allo schema.</span><span class="sxs-lookup"><span data-stu-id="77970-274">The solution is to provide a configuration file that complies with the schema.</span></span> |
| <span data-ttu-id="77970-275">-4</span><span class="sxs-lookup"><span data-stu-id="77970-275">-4</span></span> |<span data-ttu-id="77970-276">La directory delle risorse locali è già usata da un'altra istanza dell'agente di monitoraggio di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-276">Another instance of the monitoring agent Diagnostics is already using the local resource directory.</span></span><p><p><span data-ttu-id="77970-277">Soluzione: specificare un valore diverso per **LocalResourceDirectory**.</span><span class="sxs-lookup"><span data-stu-id="77970-277">Solution: Specify a different value for **LocalResourceDirectory**.</span></span> |
| <span data-ttu-id="77970-278">-6</span><span class="sxs-lookup"><span data-stu-id="77970-278">-6</span></span> |<span data-ttu-id="77970-279">L'utilità di avvio del plug-in dell'agente guest ha tentato di avviare Diagnostica con una riga di comando non valida.</span><span class="sxs-lookup"><span data-stu-id="77970-279">The guest agent plugin launcher attempted to launch Diagnostics with an invalid command line.</span></span><p><p><span data-ttu-id="77970-280">Questo errore interno dovrebbe verificarsi solo se l'utilità di avvio del plug-in dell'agente guest viene richiamata manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-280">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="77970-281">-10</span><span class="sxs-lookup"><span data-stu-id="77970-281">-10</span></span> |<span data-ttu-id="77970-282">Il plug-in di Diagnostica ha generato un'eccezione non gestita.</span><span class="sxs-lookup"><span data-stu-id="77970-282">The Diagnostics plugin exited with an unhandled exception.</span></span> |
| <span data-ttu-id="77970-283">-11</span><span class="sxs-lookup"><span data-stu-id="77970-283">-11</span></span> |<span data-ttu-id="77970-284">L'agente guest non è stato in grado di creare il processo responsabile dell'avvio e del monitoraggio dell'agente di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="77970-284">The guest agent was unable to create the process responsible for launching and monitoring the monitoring agent.</span></span><p><p><span data-ttu-id="77970-285">Soluzione: verificare che siano disponibili risorse di sistema sufficienti per avviare nuovi processi.</span><span class="sxs-lookup"><span data-stu-id="77970-285">Solution: Verify that sufficient system resources are available to launch new processes.</span></span><p> |
| <span data-ttu-id="77970-286">-101</span><span class="sxs-lookup"><span data-stu-id="77970-286">-101</span></span> |<span data-ttu-id="77970-287">Argomenti non validi durante la chiamata del plug-in di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-287">Invalid arguments when calling the Diagnostics plugin.</span></span><p><p><span data-ttu-id="77970-288">Questo errore interno dovrebbe verificarsi solo se l'utilità di avvio del plug-in dell'agente guest viene richiamata manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-288">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="77970-289">-102</span><span class="sxs-lookup"><span data-stu-id="77970-289">-102</span></span> |<span data-ttu-id="77970-290">Il processo del plug-in non è in grado di inizializzarsi.</span><span class="sxs-lookup"><span data-stu-id="77970-290">The plugin process is unable to initialize itself.</span></span><p><p><span data-ttu-id="77970-291">Soluzione: verificare che siano disponibili risorse di sistema sufficienti per avviare nuovi processi.</span><span class="sxs-lookup"><span data-stu-id="77970-291">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="77970-292">-103</span><span class="sxs-lookup"><span data-stu-id="77970-292">-103</span></span> |<span data-ttu-id="77970-293">Il processo del plug-in non è in grado di inizializzarsi.</span><span class="sxs-lookup"><span data-stu-id="77970-293">The plugin process is unable to initialize itself.</span></span> <span data-ttu-id="77970-294">In particolare, non è in grado di creare l'oggetto logger.</span><span class="sxs-lookup"><span data-stu-id="77970-294">Specifically it is unable to create the logger object.</span></span><p><p><span data-ttu-id="77970-295">Soluzione: verificare che siano disponibili risorse di sistema sufficienti per avviare nuovi processi.</span><span class="sxs-lookup"><span data-stu-id="77970-295">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="77970-296">-104</span><span class="sxs-lookup"><span data-stu-id="77970-296">-104</span></span> |<span data-ttu-id="77970-297">Impossibile caricare il file rcf fornito dall'agente guest.</span><span class="sxs-lookup"><span data-stu-id="77970-297">Unable to load the rcf file provided by the guest agent.</span></span><p><p><span data-ttu-id="77970-298">Questo errore interno dovrebbe verificarsi solo se l'utilità di avvio del plug-in dell'agente guest viene richiamata manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-298">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="77970-299">-105</span><span class="sxs-lookup"><span data-stu-id="77970-299">-105</span></span> |<span data-ttu-id="77970-300">Il plug-in di Diagnostica non è in grado di aprire il file di configurazione di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-300">The Diagnostics plugin cannot open the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77970-301">Questo errore interno dovrebbe verificarsi solo se il plug-in di Diagnostica viene richiamato manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-301">This internal error should only happen if the Diagnostics plugin is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="77970-302">-106</span><span class="sxs-lookup"><span data-stu-id="77970-302">-106</span></span> |<span data-ttu-id="77970-303">Impossibile leggere il file di configurazione di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-303">Cannot read the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77970-304">Soluzione: questo errore si verifica quando un file di configurazione non ha superato la convalida dello schema.</span><span class="sxs-lookup"><span data-stu-id="77970-304">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="77970-305">La soluzione consiste nel fornire un file di configurazione conforme allo schema.</span><span class="sxs-lookup"><span data-stu-id="77970-305">So the solution is to provide a configuration file that complies with the schema.</span></span> <span data-ttu-id="77970-306">Vedere [Come controllare la configurazione dell'estensione di diagnostica](#how-to-check-diagnostics-extension-configuration).</span><span class="sxs-lookup"><span data-stu-id="77970-306">See [How to check Diagnostics Extension Configuration](#how-to-check-diagnostics-extension-configuration).</span></span> |
| <span data-ttu-id="77970-307">-107</span><span class="sxs-lookup"><span data-stu-id="77970-307">-107</span></span> |<span data-ttu-id="77970-308">La directory delle risorse passata all'agente di monitoraggio non è valida.</span><span class="sxs-lookup"><span data-stu-id="77970-308">The resource directory pass to the monitoring agent is invalid.</span></span><p><p><span data-ttu-id="77970-309">Questo errore interno dovrebbe verificarsi solo se l'agente di monitoraggio viene richiamato manualmente, in modo non corretto, sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="77970-309">This internal error should only happen if the monitoring agent is manually invoked, incorrectly, on the VM.</span></span></p> |
| <span data-ttu-id="77970-310">-108</span><span class="sxs-lookup"><span data-stu-id="77970-310">-108</span></span> |<span data-ttu-id="77970-311">Impossibile convertire il file di configurazione di Diagnostica nel file di configurazione dell'agente di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="77970-311">Unable to convert the Diagnostics configuration file into the monitoring agent configuration file.</span></span><p><p><span data-ttu-id="77970-312">Questo errore interno dovrebbe verificarsi solo se il plug-in di Diagnostica viene richiamato manualmente con un file di configurazione non valido.</span><span class="sxs-lookup"><span data-stu-id="77970-312">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="77970-313">-110</span><span class="sxs-lookup"><span data-stu-id="77970-313">-110</span></span> |<span data-ttu-id="77970-314">Errore di configurazione generale di Diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-314">General Diagnostics configuration error.</span></span><p><p><span data-ttu-id="77970-315">Questo errore interno dovrebbe verificarsi solo se il plug-in di Diagnostica viene richiamato manualmente con un file di configurazione non valido.</span><span class="sxs-lookup"><span data-stu-id="77970-315">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="77970-316">-111</span><span class="sxs-lookup"><span data-stu-id="77970-316">-111</span></span> |<span data-ttu-id="77970-317">Impossibile avviare l'agente di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="77970-317">Unable to start the monitoring agent.</span></span><p><p><span data-ttu-id="77970-318">Soluzione: verificare che siano disponibili risorse di sistema sufficienti.</span><span class="sxs-lookup"><span data-stu-id="77970-318">Solution: Verify that sufficient system resources are available.</span></span> |
| <span data-ttu-id="77970-319">-112</span><span class="sxs-lookup"><span data-stu-id="77970-319">-112</span></span> |<span data-ttu-id="77970-320">Errore generale:</span><span class="sxs-lookup"><span data-stu-id="77970-320">General error</span></span> |

### <a name="local-log-extraction"></a><span data-ttu-id="77970-321">Estrazione dei log locali</span><span class="sxs-lookup"><span data-stu-id="77970-321">Local Log Extraction</span></span>
<span data-ttu-id="77970-322">L'agente di monitoraggio raccoglie log ed elementi come file `.tsf`.</span><span class="sxs-lookup"><span data-stu-id="77970-322">The monitoring agent collects logs and artifacts as `.tsf` files.</span></span> <span data-ttu-id="77970-323">Il file `.tsf` non è leggibile ma è possibile convertirlo in `.csv` come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="77970-323">`.tsf` file is not readable but you can convert it into a `.csv` as follows:</span></span> 

```
<Azure diagnostics extension package>\Monitor\x64\table2csv.exe <relevantLogFile>.tsf
```
<span data-ttu-id="77970-324">Un nuovo file denominato `<relevantLogFile>.csv` verrà creato nello stesso percorso del file `.tsf` corrispondente.</span><span class="sxs-lookup"><span data-stu-id="77970-324">A new file called `<relevantLogFile>.csv` will be created in the same path as the corresponding `.tsf` file.</span></span>

<span data-ttu-id="77970-325">**NOTA**: è necessario eseguire questa utilità solo nel file tsf principale, ad esempio PerformanceCountersTable.tsf.</span><span class="sxs-lookup"><span data-stu-id="77970-325">**NOTE**: You only need to run this utility against the main tsf file (e.g., PerformanceCountersTable.tsf).</span></span> <span data-ttu-id="77970-326">Gli altri file, ad esempio PerformanceCountersTables_\*\*001.tsf e PerformanceCountersTables_\*\*002.tsf, verranno elaborati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="77970-326">The accompanying files (e.g., PerformanceCountersTables_\*\*001.tsf, PerformanceCountersTables_\*\*002.tsf etc.) will automatically be processed.</span></span>

### <a name="more-about-trace-logs-missing"></a><span data-ttu-id="77970-327">Altre informazioni sui log di traccia mancanti</span><span class="sxs-lookup"><span data-stu-id="77970-327">More About Trace Logs Missing</span></span>

<span data-ttu-id="77970-328">**Nota:** nella maggior parte dei casi ciò si applica solo ai servizi cloud, a meno che non sia stato configurato DiagnosticsMonitorTraceListener in un'applicazione in esecuzione nella macchina virtuale IaaS.</span><span class="sxs-lookup"><span data-stu-id="77970-328">**Note:** This mostly applies to cloud services only unless you have configured the DiagnosticsMonitorTraceListener on an application running on your IaaS VM.</span></span> 

- <span data-ttu-id="77970-329">Verificare che DiagnosticMonitorTraceListener sia configurato in web.config o app.config.  DiagnosticMonitorTraceListener è configurato per impostazione predefinita nei progetti del servizio cloud, ma alcuni clienti hanno segnalato che in questo modo le istruzioni di traccia non verranno raccolte dalla diagnostica.</span><span class="sxs-lookup"><span data-stu-id="77970-329">Make sure the DiagnosticMonitorTraceListener is configured in the web.config or app.config.  This is configured by default in cloud service projects, but some customers comment it out which will cause the trace statements to not be collected by diagnostics.</span></span> 
- <span data-ttu-id="77970-330">Se i log non vengono scritti dal metodo OnStart o Run, verificare che DiagnosticMonitorTraceListener si trovi in app.config.  Per impostazione predefinita DiagnosticMonitorTraceListener si trova in web.config, ma solo nel caso di codice eseguito in w3wp.exe. Per acquisire le tracce in esecuzione in WaIISHost.exe è necessario che si trovi in app.config.</span><span class="sxs-lookup"><span data-stu-id="77970-330">If logs are not getting written from the OnStart or Run method make sure the DiagnosticMonitorTraceListener is in the app.config.  By default it is in the web.config, but that only applies to code running within w3wp.exe; so you need it in app.config to capture traces running in WaIISHost.exe.</span></span>
- <span data-ttu-id="77970-331">Assicurarsi di usare Diagnostics.Trace.TraceXXX anziché Diagnostics.Debug.WriteXXX.</span><span class="sxs-lookup"><span data-stu-id="77970-331">Make sure you are using Diagnostics.Trace.TraceXXX instead of Diagnostics.Debug.WriteXXX.</span></span>  <span data-ttu-id="77970-332">Le istruzioni di debug verranno rimosse da una build di versione.</span><span class="sxs-lookup"><span data-stu-id="77970-332">The Debug statements will be removed from a Release build.</span></span>
- <span data-ttu-id="77970-333">Assicurarsi che il codice compilato includa le righe Diagnostics.Trace (usare Reflector, ildasm o ILSpy per verificare).</span><span class="sxs-lookup"><span data-stu-id="77970-333">Make sure the compiled code actually has the Diagnostics.Trace lines (use Reflector, ildasm or ILSpy to verify).</span></span>  <span data-ttu-id="77970-334">I comandi Diagnostics.Trace vengono rimossi dal file binario compilato a meno che non venga usato il simbolo di compilazione condizionale TRACE.</span><span class="sxs-lookup"><span data-stu-id="77970-334">Diagnostics.Trace commands are removed from the compiled binary unless you use the TRACE conditional compilation symbol.</span></span>  <span data-ttu-id="77970-335">Questo problema è comune se si usa msbuild per la compilazione del progetto.</span><span class="sxs-lookup"><span data-stu-id="77970-335">If using msbuild to build the project then this is a common problem to run into.</span></span>

## <a name="known-issues-and-mitigations"></a><span data-ttu-id="77970-336">Problemi noti e prevenzione</span><span class="sxs-lookup"><span data-stu-id="77970-336">Known Issues and Mitigations</span></span>
<span data-ttu-id="77970-337">Di seguito è riportato un elenco di problemi noti con le relative misure di prevenzione:</span><span class="sxs-lookup"><span data-stu-id="77970-337">Here is a list of known issues with known mitigations:</span></span>

<span data-ttu-id="77970-338">**1. Dipendenza di .NET 4.5:**</span><span class="sxs-lookup"><span data-stu-id="77970-338">**1. .NET 4.5 dependency:**</span></span>

<span data-ttu-id="77970-339">WAD presenta una dipendenza di runtime nel framework .NET 4.5 o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="77970-339">WAD has a runtime dependency on .NET 4.5 framework or above.</span></span> <span data-ttu-id="77970-340">Attualmente, in tutti i computer per i servizi cloud e in tutte le immagini di base di macchine virtuali di Azure ufficiali è installato .NET 4.5 o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="77970-340">At the time of writing this, all machines provisioned for cloud services as well as all official azure Virtual Machine base images have .NET 4.5 or above installed.</span></span> <span data-ttu-id="77970-341">È possibile tuttavia che si verifichi la situazione in cui si tenti di eseguire WAD in un computer in cui non è installato .NET 4.5 o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="77970-341">It is still however possible to land in a situation where you try to run WAD on a machine which does not have .NET 4.5 or above.</span></span> <span data-ttu-id="77970-342">Ciò si verifica quando si crea il computer a partire da un'immagine o uno snapshot precedente o si usa un disco personalizzato.</span><span class="sxs-lookup"><span data-stu-id="77970-342">This happens when you create your machine off of an old image or snapshot; or bring your own custom disk.</span></span>

<span data-ttu-id="77970-343">Questa situazione si manifesta in genere come codice di uscita **255** durante l'esecuzione di DiagnosticsPluginLauncher.exe.</span><span class="sxs-lookup"><span data-stu-id="77970-343">This generally manifests as an exit code **255** when running DiagnosticsPluginLauncher.exe.</span></span> <span data-ttu-id="77970-344">L'errore si verifica a causa dell'eccezione non gestita:</span><span class="sxs-lookup"><span data-stu-id="77970-344">Failure happens due to the unhandled exception:</span></span> 
```
System.IO.FileLoadException: Could not load file or assembly 'System.Threading.Tasks, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies
```

<span data-ttu-id="77970-345">**Prevenzione:** installare .NET 4.5 o versione successiva nel computer.</span><span class="sxs-lookup"><span data-stu-id="77970-345">**Mitigation:** Install .NET 4.5 or higher on your machine.</span></span>

<span data-ttu-id="77970-346">**2. I dati dei contatori delle prestazioni sono disponibili nell'archiviazione ma non vengono visualizzati nel portale**</span><span class="sxs-lookup"><span data-stu-id="77970-346">**2. Performance Counters data available in storage but not showing in portal**</span></span>

<span data-ttu-id="77970-347">Il portale delle macchine virtuali visualizza determinati contatori delle prestazioni per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="77970-347">Virtual machines portal experience shows certain performance counters by default.</span></span> <span data-ttu-id="77970-348">Se i contatori non sono visualizzati e si è certi che i dati vengano generati perché sono disponibili nell'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="77970-348">If you don't see them and you know the data is getting generated because it is available in storage.</span></span> <span data-ttu-id="77970-349">Controllare:</span><span class="sxs-lookup"><span data-stu-id="77970-349">Check:</span></span>
- <span data-ttu-id="77970-350">Se i dati nell'archiviazione hanno nomi di contatore in lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="77970-350">If the data in storage has counter names in English.</span></span> <span data-ttu-id="77970-351">Se i nomi dei contatori non sono in inglese, il grafico delle metriche del portale non sarà in grado di riconoscerli.</span><span class="sxs-lookup"><span data-stu-id="77970-351">If the counter names are not in English, portal metric chart will not be able to recognize it.</span></span>
- <span data-ttu-id="77970-352">Se si usano caratteri jolly (\*) nei nomi dei contatori delle prestazioni, il portale non sarà in grado di correlare il contatore configurato e il contatore raccolto.</span><span class="sxs-lookup"><span data-stu-id="77970-352">If you are using wild cards (\*) in your performance counter names, the portal will not be able to correlate the configured and collected counter.</span></span>

<span data-ttu-id="77970-353">**Prevenzione**: modificare la lingua del computer impostando l'inglese per gli account di sistema.</span><span class="sxs-lookup"><span data-stu-id="77970-353">**Mitigation**: Change the machine's language to English for system accounts.</span></span> <span data-ttu-id="77970-354">Pannello di controllo -> Area geografica -> Opzioni di amministrazione -> Impostazioni copia -> deselezionare "Schermata iniziale e account di sistema" in modo che la lingua personalizzata non venga applicata all'account di sistema.</span><span class="sxs-lookup"><span data-stu-id="77970-354">Control Panel -> Region -> Administrative -> Copy Settings -> uncheck "Welcome screen and system accounts" so that the custom language is not applied to system account.</span></span> <span data-ttu-id="77970-355">Assicurarsi anche di non usare caratteri jolly per consentire al portale di rappresentare l'esperienza di utilizzo principale.</span><span class="sxs-lookup"><span data-stu-id="77970-355">Also make sure you do not use wild cards if you want portal to be your primary consumption experience.</span></span>
