---
title: Accedere ai log applicazioni YARN Hadoop a livello di codice - Azure | Microsoft Docs
description: Accedere ai log applicazioni a livello di codice su un cluster Hadoop in HDInsight.
services: hdinsight
documentationcenter: 
tags: azure-portal
author: mumian
manager: jhubbard
editor: cgronlun
ms.assetid: 0198d6c9-7767-4682-bd34-42838cf48fc5
ms.service: hdinsight
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2017
ms.author: jgao
ROBOTS: NOINDEX
ms.openlocfilehash: 90323af4a1f4526ab9b26811c8679337076112d1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="access-yarn-application-logs-on-windows-based-hdinsight"></a><span data-ttu-id="5b0a2-103">Accesso ai log applicazioni YARN in HDInsight basato su Windows</span><span class="sxs-lookup"><span data-stu-id="5b0a2-103">Access YARN application logs on Windows-based HDInsight</span></span>
<span data-ttu-id="5b0a2-104">Questo argomento illustra come accedere ai log delle applicazioni di YARN (Yet Another Resource Negotiator) completati in un cluster Hadoop basato su Windows in Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="5b0a2-104">This topic explains how to access the logs for YARN (Yet Another Resource Negotiator) applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5b0a2-105">Le informazioni contenute in questo documento si applicano solo ai cluster HDInsight basati su Windows.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-105">The information in this document applies only to Windows-based HDInsight clusters.</span></span> <span data-ttu-id="5b0a2-106">Linux è l'unico sistema operativo usato in HDInsight versione 3.4 o successiva.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="5b0a2-107">Per altre informazioni, vedere la sezione relativa al [ritiro di HDInsight in Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="5b0a2-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span> <span data-ttu-id="5b0a2-108">Per informazioni sull'accesso ai log YARN in cluster HDInsight basati su Linux, vedere [Accedere ai log delle applicazioni YARN su Hadoop basato su Linux in HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span><span class="sxs-lookup"><span data-stu-id="5b0a2-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span></span>
>


### <a name="prerequisites"></a><span data-ttu-id="5b0a2-109">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="5b0a2-109">Prerequisites</span></span>
* <span data-ttu-id="5b0a2-110">Un cluster HDInsight basato su Windows.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-110">A Windows-based HDInsight cluster.</span></span>  <span data-ttu-id="5b0a2-111">Vedere [Creare cluster Hadoop basati su Windows in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="5b0a2-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span></span>

## <a name="yarn-timeline-server"></a><span data-ttu-id="5b0a2-112">Server di sequenza temporale YARN</span><span class="sxs-lookup"><span data-stu-id="5b0a2-112">YARN Timeline Server</span></span>
<span data-ttu-id="5b0a2-113">Il <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">Server di sequenza temporale YARN</a> fornisce informazioni generiche sulle applicazioni completate, nonché informazioni sulle applicazioni specifiche del framework, tramite due interfacce diverse.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-113">The <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="5b0a2-114">In particolare:</span><span class="sxs-lookup"><span data-stu-id="5b0a2-114">Specifically:</span></span>

* <span data-ttu-id="5b0a2-115">L'archiviazione e il recupero di informazioni generiche sulle applicazioni nei cluster HDInsight sono stati abilitati a partire dalla versione 3.1.1.374.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="5b0a2-116">Il componente di informazioni sulle applicazioni specifiche del framework del server di sequenza temporale non è attualmente disponibile nei cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-116">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="5b0a2-117">Le informazioni generiche sulle applicazioni includono i seguenti tipi di dati:</span><span class="sxs-lookup"><span data-stu-id="5b0a2-117">Generic information on applications includes the following sorts of data:</span></span>

* <span data-ttu-id="5b0a2-118">ID applicazione, un identificatore univoco di un'applicazione</span><span class="sxs-lookup"><span data-stu-id="5b0a2-118">The application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="5b0a2-119">Utente che ha avviato l'applicazione</span><span class="sxs-lookup"><span data-stu-id="5b0a2-119">The user who started the application</span></span>
* <span data-ttu-id="5b0a2-120">Informazioni sui tentativi effettuati per completare l'applicazione</span><span class="sxs-lookup"><span data-stu-id="5b0a2-120">Information on attempts made to complete the application</span></span>
* <span data-ttu-id="5b0a2-121">Contenitori usati da qualsiasi tentativo dell'applicazione specifico</span><span class="sxs-lookup"><span data-stu-id="5b0a2-121">The containers used by any given application attempt</span></span>

<span data-ttu-id="5b0a2-122">Nei cluster HDInsight queste informazioni verranno archiviate da Gestione risorse di Azure in un archivio di cronologia nel contenitore predefinito dell'account di archiviazione di Azure predefinito.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-122">On your HDInsight clusters, this information will be stored by Azure Resource Manager to a history store in the default container of your default Azure Storage account.</span></span> <span data-ttu-id="5b0a2-123">Questi dati generici sulle applicazioni completate possono essere recuperati tramite un'API REST:</span><span class="sxs-lookup"><span data-stu-id="5b0a2-123">This generic data on completed applications can be retrieved through a REST API:</span></span>

    GET on https://<cluster-dns-name>.azurehdinsight.net/ws/v1/applicationhistory/apps


## <a name="yarn-applications-and-logs"></a><span data-ttu-id="5b0a2-124">Log e applicazioni YARN</span><span class="sxs-lookup"><span data-stu-id="5b0a2-124">YARN applications and logs</span></span>
<span data-ttu-id="5b0a2-125">YARN supporta diversi modelli di programmazione, tra cui MapReduce, separando la gestione delle risorse dalla pianificazione e dal monitoraggio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-125">YARN supports multiple programming models (MapReduce being one of them) by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="5b0a2-126">A tale scopo, vengono usati un oggetto *ResourceManager* (RM) globale, oggetti *NodeManagers* (NM) per ogni nodo di lavoro e oggetti *ApplicationMasters* (AM) per ogni applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-126">This is done through a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="5b0a2-127">L'AM per applicazione negozia le risorse (CPU, memoria, disco e rete) per l'esecuzione dell'applicazione con l'RM.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-127">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span></span> <span data-ttu-id="5b0a2-128">L'oggetto RM opera con gli oggetti NM per concedere queste risorse come *contenitori*.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-128">The RM works with NMs to grant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="5b0a2-129">L'AM è responsabile del monitoraggio dello stato dei contenitori assegnati dall'RM.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-129">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span></span> <span data-ttu-id="5b0a2-130">A seconda del tipo, un'applicazione può richiedere più contenitori.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-130">An application may require many containers depending on the nature of the application.</span></span>

<span data-ttu-id="5b0a2-131">Ogni applicazione, inoltre, può essere costituita da più *tentativi dell'applicazione* finalizzati al completamento in presenza di arresti anomali o di perdita della comunicazione tra gli oggetti AM e RM.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-131">Furthermore, each application may consist of multiple *application attempts* in order to finish in the presence of crashes or due to the loss of communication between an AM and an RM.</span></span> <span data-ttu-id="5b0a2-132">Di conseguenza, i contenitori vengono concessi a uno specifico tentativo di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-132">Hence, containers are granted to a specific attempt of an application.</span></span> <span data-ttu-id="5b0a2-133">In un certo senso, un contenitore fornisce il contesto per l'unità di base del lavoro eseguito da un'applicazione YARN e tutto il lavoro svolto all'interno del contesto di un contenitore viene eseguito nel singolo nodo di lavoro in cui è stato allocato il contenitore.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-133">In a sense, a container provides the context for basic unit of work performed by a YARN application, and all work that is done within the context of a container is performed on the single worker node on which the container was allocated.</span></span> <span data-ttu-id="5b0a2-134">Per altri riferimenti, vedere [Concetti YARN][YARN-concepts].</span><span class="sxs-lookup"><span data-stu-id="5b0a2-134">See [YARN Concepts][YARN-concepts] for further reference.</span></span>

<span data-ttu-id="5b0a2-135">I log applicazione (e i log contenitore associati) sono essenziali per il debug di applicazioni Hadoop problematiche.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-135">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="5b0a2-136">YARN offre un framework utile per la raccolta, l'aggregazione e l'archiviazione dei log applicazioni tramite la funzionalità di [aggregazione dei log][log-aggregation].</span><span class="sxs-lookup"><span data-stu-id="5b0a2-136">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="5b0a2-137">La funzionalità di aggregazione dei log rende più deterministico l'accesso ai log applicazioni poiché aggrega i log di tutti i contenitori in un nodo di lavoro e li archivia sotto forma di unico file di log aggregato per ogni nodo di lavoro nel file system predefinito dopo il completamento di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-137">The Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on the default file system after an application finishes.</span></span> <span data-ttu-id="5b0a2-138">L'applicazione può usare centinaia o migliaia di contenitori, ma i log di tutti i contenitori eseguiti su un singolo nodo di lavoro verranno sempre aggregati in un unico file, dando luogo a un solo file di log per ogni nodo di lavoro usato dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-138">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node will always be aggregated to a single file, resulting in one log file per worker node used by your application.</span></span> <span data-ttu-id="5b0a2-139">La funzionalità di aggregazione dei log è abilitata per impostazione predefinita nei cluster HDInsight (versione 3.0 e successive). I log aggregati si trovano nel contenitore predefinito del cluster nel percorso seguente:</span><span class="sxs-lookup"><span data-stu-id="5b0a2-139">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in the default container of your cluster at the following location:</span></span>

    wasb:///app-logs/<user>/logs/<applicationId>

<span data-ttu-id="5b0a2-140">In questo percorso, *user* è il nome dell'utente che ha avviato l'applicazione e *applicationId* è l'identificatore univoco di un'applicazione assegnato dall'oggetto RM YARN.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-140">In that location, *user* is the name of the user who started the application, and *applicationId* is the unique identifier of an application as assigned by the YARN RM.</span></span>

<span data-ttu-id="5b0a2-141">I log aggregati non sono leggibili direttamente perché vengono scritti in un oggetto [TFile][T-file], un [formato binario][binary-format] indicizzato dal contenitore.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-141">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="5b0a2-142">YARN fornisce gli strumenti CLI per eseguire il dump di questi log come testo normale per le applicazioni o i contenitori di interesse.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-142">YARN provides CLI tools to dump these logs as plain text for applications or containers of interest.</span></span> <span data-ttu-id="5b0a2-143">È possibile visualizzare questi log come testo normale eseguendo uno dei seguenti comandi YARN direttamente sui nodi del cluster (dopo la connessione tramite RDP):</span><span class="sxs-lookup"><span data-stu-id="5b0a2-143">You can view these logs as plain text by running one of the following YARN commands directly on the cluster nodes (after connecting to it through RDP):</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>


## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="5b0a2-144">Interfaccia utente di ResourceManager YARN</span><span class="sxs-lookup"><span data-stu-id="5b0a2-144">YARN ResourceManager UI</span></span>
<span data-ttu-id="5b0a2-145">L'interfaccia utente di YARN ResourceManager viene eseguita sul nodo head del cluster ed è accessibile tramite il dashboard del portale di Azure:</span><span class="sxs-lookup"><span data-stu-id="5b0a2-145">The YARN ResourceManager UI runs on the cluster headnode, and can be accessed through the Azure portal dashboard:</span></span>

1. <span data-ttu-id="5b0a2-146">Accedere al [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="5b0a2-146">Sign in to [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="5b0a2-147">Scegliere **Esplora** dal menu a sinistra, fare clic su **Cluster HDInsight** e quindi su un cluster basato su Windows da configurare per l'accesso ai log applicazioni YARN.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-147">On the left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want to access the YARN application logs.</span></span>
3. <span data-ttu-id="5b0a2-148">Nel menu in alto fare clic su **Dashboard**.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-148">On the top menu, click **Dashboard**.</span></span> <span data-ttu-id="5b0a2-149">Verrà aperta una pagina in una nuova scheda del browser denominata **Console query HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="5b0a2-149">You will see a page opened on a new browser tab called **HDInsight Query Console**.</span></span>
4. <span data-ttu-id="5b0a2-150">In **HDInsight Query Console** (Console query HDInsight) fare clic su **Yarn UI** (UI YARN).</span><span class="sxs-lookup"><span data-stu-id="5b0a2-150">From **HDInsight Query Console**, click **Yarn UI**.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/
