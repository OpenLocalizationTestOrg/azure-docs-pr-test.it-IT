---
title: Data Lake archivio ottimizzazione linee guida sulle prestazioni aaaAzure | Documenti Microsoft
description: Linee guida per l'ottimizzazione delle prestazioni di Azure Data Lake Store
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="609d5-103">Ottimizzazione delle prestazioni di Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="609d5-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="609d5-104">Data Lake Store supporta la velocità effettiva elevata per l'analisi con uso intensivo dell'I/O e lo spostamento dei dati.</span><span class="sxs-lookup"><span data-stu-id="609d5-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="609d5-105">In archivio Azure Data Lake utilizzando tutti disponibile velocità effettiva: quantità hello di dati che possono essere letti o scritti al secondo: è importante tooget ottenere prestazioni ottimali hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="609d5-106">Questo risultato viene ottenuto eseguendo il numero massimo possibile di operazioni di lettura e scrittura in parallelo.</span><span class="sxs-lookup"><span data-stu-id="609d5-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Prestazioni di Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="609d5-108">Archivio Azure Data Lake adattabile tooprovide hello necessaria una velocità effettiva per scenario analitica tutti.</span><span class="sxs-lookup"><span data-stu-id="609d5-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="609d5-109">Per impostazione predefinita, un account archivio Azure Data Lake fornisce automaticamente la velocità effettiva sufficiente esigenze hello toomeet di un'ampia categoria di casi di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="609d5-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="609d5-110">Per i casi in cui i clienti eseguire in limite predefinito di hello hello hello account ADLS può essere configurato tooprovide maggiore velocità effettiva contattando il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="609d5-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="609d5-111">Inserimento di dati</span><span class="sxs-lookup"><span data-stu-id="609d5-111">Data ingestion</span></span>

<span data-ttu-id="609d5-112">Durante l'inserimento di dati da un tooADLS di sistema di origine, è importante tooconsider che hello tooADLS di connettività di rete, hardware di rete di origine e hardware di origine può essere collo di bottiglia hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Prestazioni di Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="609d5-114">È importante tooensure che hello lo spostamento dei dati non è interessato da tali fattori.</span><span class="sxs-lookup"><span data-stu-id="609d5-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="609d5-115">Hardware di origine</span><span class="sxs-lookup"><span data-stu-id="609d5-115">Source Hardware</span></span>

<span data-ttu-id="609d5-116">Se si utilizza il computer locale o macchine virtuali in Azure, è necessario scegliere con attenzione hardware appropriato hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="609d5-117">Per l'Hardware del disco di origine, preferisce tooHDDs unità SSD e selezionare l'hardware del disco con dischi più veloci.</span><span class="sxs-lookup"><span data-stu-id="609d5-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="609d5-118">Per l'Hardware di rete di origine, utilizzare le schede NIC tempi hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="609d5-119">In Azure, si consiglia di macchine virtuali di Azure D14 disco in modo appropriato potente hello e hardware di rete.</span><span class="sxs-lookup"><span data-stu-id="609d5-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="609d5-120">Archivio tooAzure Data Lake di connettività di rete</span><span class="sxs-lookup"><span data-stu-id="609d5-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="609d5-121">connettività di rete Hello tra i dati di origine e l'archivio Azure Data Lake può talvolta essere collo di bottiglia hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="609d5-122">Quando i dati di origine sono in locale, valutare l'opportunità di usare un collegamento dedicato con [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="609d5-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="609d5-123">Se i dati di origine in Azure, hello prestazioni saranno migliori quando i dati di hello sono hello stessa area Azure hello archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="609d5-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="609d5-124">Configurare gli strumenti di inserimento di dati per la massima parallelizzazione</span><span class="sxs-lookup"><span data-stu-id="609d5-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="609d5-125">Una volta siano risolti hardware origine hello e colli di bottiglia connettività precedente di rete, si è pronti tooconfigure gli strumenti di inserimento.</span><span class="sxs-lookup"><span data-stu-id="609d5-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="609d5-126">Hello nella tabella seguente sono riepilogate le impostazioni di chiave hello di più strumenti comuni di inserimento e fornisce approfondita ottimizzazione delle prestazioni degli articoli per essi.</span><span class="sxs-lookup"><span data-stu-id="609d5-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="609d5-127">toolearn ulteriori informazioni su quale strumento toouse per lo scenario, visitare questo [articolo](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="609d5-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="609d5-128">Strumento</span><span class="sxs-lookup"><span data-stu-id="609d5-128">Tool</span></span>               | <span data-ttu-id="609d5-129">Impostazioni</span><span class="sxs-lookup"><span data-stu-id="609d5-129">Settings</span></span>     | <span data-ttu-id="609d5-130">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="609d5-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="609d5-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="609d5-131">Powershell</span></span>       | <span data-ttu-id="609d5-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="609d5-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="609d5-133">Collegamento</span><span class="sxs-lookup"><span data-stu-id="609d5-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="609d5-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="609d5-134">AdlCopy</span></span>    | <span data-ttu-id="609d5-135">Unità Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="609d5-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="609d5-136">Collegamento</span><span class="sxs-lookup"><span data-stu-id="609d5-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="609d5-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="609d5-137">DistCp</span></span>            | <span data-ttu-id="609d5-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="609d5-138">-m (mapper)</span></span>   | [<span data-ttu-id="609d5-139">Collegamento</span><span class="sxs-lookup"><span data-stu-id="609d5-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="609d5-140">Data factory di Azure</span><span class="sxs-lookup"><span data-stu-id="609d5-140">Azure Data Factory</span></span>| <span data-ttu-id="609d5-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="609d5-141">parallelCopies</span></span>    | [<span data-ttu-id="609d5-142">Collegamento</span><span class="sxs-lookup"><span data-stu-id="609d5-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="609d5-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="609d5-143">Sqoop</span></span>           | <span data-ttu-id="609d5-144">fs.azure.block.size, -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="609d5-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="609d5-145">Collegamento</span><span class="sxs-lookup"><span data-stu-id="609d5-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="609d5-146">Strutturare il set di dati</span><span class="sxs-lookup"><span data-stu-id="609d5-146">Structure your data set</span></span>

<span data-ttu-id="609d5-147">Quando i dati vengono archiviati in archivio Data Lake, dimensioni del file hello, numero di file e la struttura di cartelle attiva un impatto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="609d5-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="609d5-148">Hello nella sezione seguente vengono descritte le procedure consigliate in queste aree.</span><span class="sxs-lookup"><span data-stu-id="609d5-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="609d5-149">Dimensioni complete</span><span class="sxs-lookup"><span data-stu-id="609d5-149">File size</span></span>

<span data-ttu-id="609d5-150">I motori di analisi come HDInsight e Azure Data Lake Analytics in genere gestiscono il sovraccarico a livello di singolo file.</span><span class="sxs-lookup"><span data-stu-id="609d5-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="609d5-151">Se quindi si archiviano i dati in molti file di piccole dimensioni, questo può influire negativamente sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="609d5-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="609d5-152">Per ottenere prestazioni migliori, è in genere opportuno organizzare i dati in file di dimensioni più grandi.</span><span class="sxs-lookup"><span data-stu-id="609d5-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="609d5-153">Come regola generale, organizzare i set di dati in file di 256 MB o di dimensione maggiore.</span><span class="sxs-lookup"><span data-stu-id="609d5-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="609d5-154">In alcuni casi, ad esempio immagini e dati binari, non è possibile tooprocess usarle in parallelo.</span><span class="sxs-lookup"><span data-stu-id="609d5-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="609d5-155">In questi casi, è consigliabile tookeep singoli file meno di 2GB.</span><span class="sxs-lookup"><span data-stu-id="609d5-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="609d5-156">In alcuni casi, le pipeline di dati non dispongono di controllo sui dati non elaborati di hello che dispone di molti file di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="609d5-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="609d5-157">È consigliabile toohave processo "cooking" che genera l'errore maggiori file toouse per le applicazioni a valle.</span><span class="sxs-lookup"><span data-stu-id="609d5-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="609d5-158">Organizzazione dei dati di serie temporali in cartelle</span><span class="sxs-lookup"><span data-stu-id="609d5-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="609d5-159">Hive e ADLA carichi di lavoro, l'eliminazione di partizione dei dati della serie temporale consente di alcune query solo un subset di dati hello che migliora le prestazioni di lettura.</span><span class="sxs-lookup"><span data-stu-id="609d5-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="609d5-160">Queste pipeline che inseriscono dati di serie temporali, posizionano spesso i file usando un sistema di denominazione molto strutturato per file e cartelle.</span><span class="sxs-lookup"><span data-stu-id="609d5-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="609d5-161">Di seguito è riportato un esempio molto comune in cui i dati sono strutturati per data:</span><span class="sxs-lookup"><span data-stu-id="609d5-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="609d5-162">Si noti che le informazioni di data/ora hello viene visualizzato come cartelle e nel nome file hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="609d5-163">Per data e ora, hello seguito è riportato un modello comune</span><span class="sxs-lookup"><span data-stu-id="609d5-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="609d5-164">Nuovamente, scelta hello effettuata con l'organizzazione di file e cartelle hello necessario ottimizzare per hello dimensione dei file e un numero ragionevole di file in ogni cartella.</span><span class="sxs-lookup"><span data-stu-id="609d5-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="609d5-165">Ottimizzazione dei processi con uso intensivo dell'I/O nei carichi di lavoro Hadoop e Spark in HDInsight</span><span class="sxs-lookup"><span data-stu-id="609d5-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="609d5-166">I processi rientrano in uno dei seguenti tre categorie di hello:</span><span class="sxs-lookup"><span data-stu-id="609d5-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="609d5-167">**Uso intensivo della CPU.**</span><span class="sxs-lookup"><span data-stu-id="609d5-167">**CPU intensive.**</span></span>  <span data-ttu-id="609d5-168">Questi processi hanno tempi di elaborazione lunghi e tempi di I/O minimi,</span><span class="sxs-lookup"><span data-stu-id="609d5-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="609d5-169">come i processi di machine learning e quelli di elaborazione del linguaggio naturale.</span><span class="sxs-lookup"><span data-stu-id="609d5-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="609d5-170">**Uso intensivo della memoria.**</span><span class="sxs-lookup"><span data-stu-id="609d5-170">**Memory intensive.**</span></span>  <span data-ttu-id="609d5-171">Questi processi usano grandi quantità di memoria,</span><span class="sxs-lookup"><span data-stu-id="609d5-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="609d5-172">come i processi di PageRank e quelli di analisi in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="609d5-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="609d5-173">**Uso intensivo dell'I/O.**</span><span class="sxs-lookup"><span data-stu-id="609d5-173">**I/O intensive.**</span></span>  <span data-ttu-id="609d5-174">Questi processi impiegano la maggior parte del tempo a eseguire operazioni di I/O.</span><span class="sxs-lookup"><span data-stu-id="609d5-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="609d5-175">Un esempio comune è rappresentato da un processo di copia che esegue solo operazioni di lettura e scrittura.</span><span class="sxs-lookup"><span data-stu-id="609d5-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="609d5-176">Altri esempi includono i processi preparazione dei dati letti una grande quantità di dati, esegue alcune trasformazioni di dati e quindi scrive hello archivio back-toohello dati.</span><span class="sxs-lookup"><span data-stu-id="609d5-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="609d5-177">istruzioni disponibili Hello è solo applicabili tooI processi/O intensivo.</span><span class="sxs-lookup"><span data-stu-id="609d5-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="609d5-178">Considerazioni generali per un cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="609d5-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="609d5-179">**Versioni di HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="609d5-179">**HDInsight versions.**</span></span> <span data-ttu-id="609d5-180">Per prestazioni ottimali, utilizzare l'ultima versione di hello di HDInsight.</span><span class="sxs-lookup"><span data-stu-id="609d5-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="609d5-181">**Aree.**</span><span class="sxs-lookup"><span data-stu-id="609d5-181">**Regions.**</span></span> <span data-ttu-id="609d5-182">Inserire l'archivio Data Lake di hello in hello cluster HDInsight hello stessa area.</span><span class="sxs-lookup"><span data-stu-id="609d5-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="609d5-183">Un cluster HDInsight è composto da due nodi head e da alcuni nodi di ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="609d5-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="609d5-184">Ogni nodo di lavoro fornisce un numero specifico di core e memoria, è determinata dal hello tipo di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="609d5-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="609d5-185">Quando si esegue un processo, YARN è negoziatore risorse hello che alloca la memoria disponibile di hello e contenitori toocreate Core.</span><span class="sxs-lookup"><span data-stu-id="609d5-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="609d5-186">Ogni contenitore viene eseguito processo hello toocomplete necessarie attività di hello.</span><span class="sxs-lookup"><span data-stu-id="609d5-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="609d5-187">Contenitori vengono eseguiti in parallelo tooprocess attività rapidamente.</span><span class="sxs-lookup"><span data-stu-id="609d5-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="609d5-188">È quindi possibile ottenere un miglioramento delle prestazioni eseguendo la quantità massima possibile di contenitori paralleli.</span><span class="sxs-lookup"><span data-stu-id="609d5-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="609d5-189">Esistono tre livelli all'interno di un cluster HDInsight che possono essere ottimizzate tooincrease hello numero di contenitori e usare la velocità effettiva tutti disponibile.</span><span class="sxs-lookup"><span data-stu-id="609d5-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="609d5-190">**Livello fisico**</span><span class="sxs-lookup"><span data-stu-id="609d5-190">**Physical layer**</span></span>
* <span data-ttu-id="609d5-191">**Livello YARN**</span><span class="sxs-lookup"><span data-stu-id="609d5-191">**YARN layer**</span></span>
* <span data-ttu-id="609d5-192">**Livello del carico di lavoro**</span><span class="sxs-lookup"><span data-stu-id="609d5-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="609d5-193">Livello fisico</span><span class="sxs-lookup"><span data-stu-id="609d5-193">Physical Layer</span></span>

<span data-ttu-id="609d5-194">**Eseguire il cluster con più nodi e/o macchine virtuali di dimensioni maggiori.**</span><span class="sxs-lookup"><span data-stu-id="609d5-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="609d5-195">Un cluster di dimensioni maggiore consentirà si toorun più contenitori di YARN, come illustrato nell'immagine di hello riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="609d5-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Prestazioni di Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="609d5-197">**Usare macchine virtuali con maggiore larghezza di banda di rete.**</span><span class="sxs-lookup"><span data-stu-id="609d5-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="609d5-198">quantità di Hello di larghezza di banda di rete può essere un collo di bottiglia, se è meno larghezza di banda di rete di velocità effettiva di archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="609d5-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="609d5-199">Macchine virtuali differenti avranno dimensioni variabili della larghezza di banda di rete.</span><span class="sxs-lookup"><span data-stu-id="609d5-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="609d5-200">Scegliere un tipo di macchina virtuale che dispone di hello più grande possibile larghezza di banda.</span><span class="sxs-lookup"><span data-stu-id="609d5-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="609d5-201">Livello YARN</span><span class="sxs-lookup"><span data-stu-id="609d5-201">YARN Layer</span></span>

<span data-ttu-id="609d5-202">**Usare contenitori YARN di dimensioni inferiori.**</span><span class="sxs-lookup"><span data-stu-id="609d5-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="609d5-203">Ridurre le dimensioni di hello di ogni toocreate contenitore YARN più contenitori con hello stessa quantità di risorse.</span><span class="sxs-lookup"><span data-stu-id="609d5-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Prestazioni di Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="609d5-205">A seconda del carico di lavoro, sarà sempre necessaria una dimensione minima per i contenitori YARN.</span><span class="sxs-lookup"><span data-stu-id="609d5-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="609d5-206">Se si sceglie un contenitore troppo piccolo, si verificheranno problemi di memoria insufficiente per i processi.</span><span class="sxs-lookup"><span data-stu-id="609d5-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="609d5-207">In genere, la dimensione dei contenitori YARN non deve essere inferiore a 1 GB.</span><span class="sxs-lookup"><span data-stu-id="609d5-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="609d5-208">Si tratta di contenitori YARN 3GB toosee comuni.</span><span class="sxs-lookup"><span data-stu-id="609d5-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="609d5-209">Per alcuni carichi di lavoro, possono essere necessari contenitori YARN più grandi.</span><span class="sxs-lookup"><span data-stu-id="609d5-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="609d5-210">**Aumentare il numero di core per contenitore YARN.**</span><span class="sxs-lookup"><span data-stu-id="609d5-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="609d5-211">Aumentare il numero di hello di core allocati tooeach contenitore tooincrease hello numero di attività parallele in esecuzione in ogni contenitore.</span><span class="sxs-lookup"><span data-stu-id="609d5-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="609d5-212">Questa soluzione è valida per le applicazioni, come Spark, che eseguono più attività per contenitore.</span><span class="sxs-lookup"><span data-stu-id="609d5-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="609d5-213">Per le applicazioni, ad esempio Hive che eseguono un singolo thread in ogni contenitore, è meglio toohave più contenitori anziché più core per ogni contenitore.</span><span class="sxs-lookup"><span data-stu-id="609d5-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="609d5-214">Livello del carico di lavoro</span><span class="sxs-lookup"><span data-stu-id="609d5-214">Workload Layer</span></span>

<span data-ttu-id="609d5-215">**Usare tutti i contenitori disponibili.**</span><span class="sxs-lookup"><span data-stu-id="609d5-215">**Use all available containers.**</span></span>  <span data-ttu-id="609d5-216">Impostare il numero di hello di attività toobe uguale o maggiore del numero di hello di contenitori disponibili, in modo che tutte le risorse vengono utilizzate.</span><span class="sxs-lookup"><span data-stu-id="609d5-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Prestazioni di Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="609d5-218">**Le attività che non vengono eseguite correttamente sono dispendiose.**</span><span class="sxs-lookup"><span data-stu-id="609d5-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="609d5-219">Se ogni attività dispone di una grande quantità di dati tooprocess, errore di un'attività risultati in un nuovo tentativo di costoso.</span><span class="sxs-lookup"><span data-stu-id="609d5-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="609d5-220">Pertanto, è preferibile toocreate altre attività, ognuno dei quali elabora una piccola quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="609d5-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="609d5-221">In aggiunta toohello linee guida generali sopra, ogni applicazione dispone di parametri diversi tootune disponibili per l'applicazione specifica.</span><span class="sxs-lookup"><span data-stu-id="609d5-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="609d5-222">tabella Hello riportata di seguito sono elencate alcune hello parametri e i collegamenti tooget avviato con l'ottimizzazione delle prestazioni per ogni applicazione.</span><span class="sxs-lookup"><span data-stu-id="609d5-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="609d5-223">Carico di lavoro</span><span class="sxs-lookup"><span data-stu-id="609d5-223">Workload</span></span>               | <span data-ttu-id="609d5-224">Attività tooset parametro</span><span class="sxs-lookup"><span data-stu-id="609d5-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="609d5-225">Spark in HDInisight</span><span class="sxs-lookup"><span data-stu-id="609d5-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="609d5-226">Num-executors</span><span class="sxs-lookup"><span data-stu-id="609d5-226">Num-executors</span></span></li><li><span data-ttu-id="609d5-227">Executor-memory</span><span class="sxs-lookup"><span data-stu-id="609d5-227">Executor-memory</span></span></li><li><span data-ttu-id="609d5-228">Executor-cores</span><span class="sxs-lookup"><span data-stu-id="609d5-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="609d5-229">Hive in HDInsight</span><span class="sxs-lookup"><span data-stu-id="609d5-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="609d5-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="609d5-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="609d5-231">MapReduce in HDInsight</span><span class="sxs-lookup"><span data-stu-id="609d5-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="609d5-232">Mapreduce.map.memory</span><span class="sxs-lookup"><span data-stu-id="609d5-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="609d5-233">Mapreduce.job.maps</span><span class="sxs-lookup"><span data-stu-id="609d5-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="609d5-234">Mapreduce.reduce.memory</span><span class="sxs-lookup"><span data-stu-id="609d5-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="609d5-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="609d5-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="609d5-236">Storm in HDInsight</span><span class="sxs-lookup"><span data-stu-id="609d5-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="609d5-237">Numero di processi del ruolo di lavoro</span><span class="sxs-lookup"><span data-stu-id="609d5-237">Number of worker processes</span></span></li><li><span data-ttu-id="609d5-238">Numero di istanze di spout executor</span><span class="sxs-lookup"><span data-stu-id="609d5-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="609d5-239">Numero di istanze di bolt executor</span><span class="sxs-lookup"><span data-stu-id="609d5-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="609d5-240">Numero di attività spout</span><span class="sxs-lookup"><span data-stu-id="609d5-240">Number of spout tasks</span></span></li><li><span data-ttu-id="609d5-241">Numero di attività bolt</span><span class="sxs-lookup"><span data-stu-id="609d5-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="609d5-242">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="609d5-242">See also</span></span>
* [<span data-ttu-id="609d5-243">Panoramica dell’Archivio Data Lake di Azure</span><span class="sxs-lookup"><span data-stu-id="609d5-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="609d5-244">Introduzione all’analisi dei dati di Data Lake di Azure</span><span class="sxs-lookup"><span data-stu-id="609d5-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
