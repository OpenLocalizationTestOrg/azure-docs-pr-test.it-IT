---
title: Correlazione di dati di Application Insights Telemetry di Azure | Microsoft Docs
description: Correlazione di dati di Application Insights Telemetry
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 747c00842f4df9c7fbd816c99771ba8a267106a4
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="f994d-103">Correlazione di dati di telemetria in Application Insights</span><span class="sxs-lookup"><span data-stu-id="f994d-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="f994d-104">Nel mondo dei microservizi, ogni operazione logica richiede un lavoro sui vari componenti del servizio.</span><span class="sxs-lookup"><span data-stu-id="f994d-104">In the world of micro services, every logical operation requires work done in various components of the service.</span></span> <span data-ttu-id="f994d-105">Ognuno di questi componenti può essere monitorato separatamente tramite [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="f994d-106">Il componente app Web comunica con il componente provider di autenticazione per convalidare le credenziali dell'utente e con il componente API per ottenere dati per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="f994d-106">The web app component communicates with authentication provider component to validate user credentials, and with the API component to get data for visualization.</span></span> <span data-ttu-id="f994d-107">Il componente API può a sua volta eseguire query sui dati di altri servizi, usare componenti del provider di cache e notificare questa richiesta al componente fatturazione.</span><span class="sxs-lookup"><span data-stu-id="f994d-107">The API component in its turn can query data from other services and use cache-provider components and notify the billing component about this call.</span></span> <span data-ttu-id="f994d-108">Application Insights supporta la correlazione di dati di telemetria distribuita.</span><span class="sxs-lookup"><span data-stu-id="f994d-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="f994d-109">Consente di individuare quale componente è responsabile di errori o della riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f994d-109">It allows you to detect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="f994d-110">Questo articolo illustra il modello di dati usato da Application Insights per correlare i dati di telemetria inviati da più componenti.</span><span class="sxs-lookup"><span data-stu-id="f994d-110">This article explains the data model used by Application Insights to correlate telemetry sent by multiple components.</span></span> <span data-ttu-id="f994d-111">Illustra le tecniche di propagazione del contesto e i protocolli.</span><span class="sxs-lookup"><span data-stu-id="f994d-111">It covers the context propagation techniques and protocols.</span></span> <span data-ttu-id="f994d-112">Descrive inoltre l'implementazione dei concetti di correlazione in linguaggi e piattaforme diversi.</span><span class="sxs-lookup"><span data-stu-id="f994d-112">It also covers the implementation of the correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="f994d-113">Modello di dati per la correlazione di dati di telemetria</span><span class="sxs-lookup"><span data-stu-id="f994d-113">Telemetry correlation data model</span></span>

<span data-ttu-id="f994d-114">Application Insights definisce un [modello di dati](application-insights-data-model.md) per la correlazione di dati di telemetria distribuita.</span><span class="sxs-lookup"><span data-stu-id="f994d-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="f994d-115">Per associare i dati di telemetria all'operazione logica, ogni elemento di telemetria dispone di un campo di contesto denominato `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="f994d-115">To associate telemetry with the logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="f994d-116">Questo identificatore viene condiviso da ogni elemento di telemetria nella traccia distribuita.</span><span class="sxs-lookup"><span data-stu-id="f994d-116">This identifier is shared by every telemetry item in the distributed trace.</span></span> <span data-ttu-id="f994d-117">Se quindi si verifica una perdita di dati di telemetria da un singolo livello, è comunque possibile associare i dati di telemetria segnalati da altri componenti.</span><span class="sxs-lookup"><span data-stu-id="f994d-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="f994d-118">Un'operazione logica distribuita consiste in genere in un set di operazioni più piccole, vale a dire richieste elaborate da uno dei componenti.</span><span class="sxs-lookup"><span data-stu-id="f994d-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of the components.</span></span> <span data-ttu-id="f994d-119">Tali operazioni sono definite dalla [telemetria delle richieste](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="f994d-120">Ogni telemetria delle richieste è dotata di un proprio `id` che la identifica in modo univoco a livello globale.</span><span class="sxs-lookup"><span data-stu-id="f994d-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="f994d-121">Tutti i dati di telemetria, ad esempio tracce, eccezioni e così via, associati alla richiesta devono impostare `operation_parentId` sul valore di `id` della richiesta.</span><span class="sxs-lookup"><span data-stu-id="f994d-121">And all telemetry - traces, exceptions, etc. associated with this request should set the `operation_parentId` to the value of the request `id`.</span></span>

<span data-ttu-id="f994d-122">Ogni operazione in uscita come richiesta HTTP a un altro componente è rappresentata dalla [telemetria delle dipendenze](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-122">Every outgoing operation like http call to another component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="f994d-123">Anche la telemetria delle dipendenze dispone di un proprio `id` globalmente univoco.</span><span class="sxs-lookup"><span data-stu-id="f994d-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="f994d-124">La telemetria delle richieste, avviata dalla chiamata di dipendenza, lo usa come `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="f994d-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="f994d-125">È possibile creare la visualizzazione dell'operazione logica distribuita usando `operation_Id`, `operation_parentId` e `request.id` con `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="f994d-125">You can build the view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="f994d-126">Tali campi definiscono anche l'ordine della causalità delle chiamate di telemetria.</span><span class="sxs-lookup"><span data-stu-id="f994d-126">Those fields also define the causality order of telemetry calls.</span></span>

<span data-ttu-id="f994d-127">in un ambiente di microservizi, le tracce dai componenti possono finire in risorse di archiviazione diverse.</span><span class="sxs-lookup"><span data-stu-id="f994d-127">In micro services environment, traces from components may go to the different storages.</span></span> <span data-ttu-id="f994d-128">Ogni componente può avere la propria chiave di strumentazione in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="f994d-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="f994d-129">Per ottenere i dati di telemetria per l'operazione logica, è necessario eseguire query sui dati da ogni risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="f994d-129">To get telemetry for the logical operation, you need to query data from every storage.</span></span> <span data-ttu-id="f994d-130">Quando il numero di risorse di archiviazione è enorme, è necessario avere un suggerimento sulla successiva posizione in cui cercare.</span><span class="sxs-lookup"><span data-stu-id="f994d-130">When number of storages is huge, you need to have a hint on where to look next.</span></span>

<span data-ttu-id="f994d-131">Per risolvere questo problema, nel modello di dati di Application Insights sono definiti due campi: `request.source` e `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="f994d-131">Application Insights data model defines two fields to solve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="f994d-132">Il primo campo definisce il componente che ha avviato la richiesta di dipendenza, mentre il secondo identifica quale componente ha restituito la risposta alla chiamata di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="f994d-132">The first field identifies the component that initiated the dependency request, and the second identifies which component returned the response of the dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="f994d-133">Esempio</span><span class="sxs-lookup"><span data-stu-id="f994d-133">Example</span></span>

<span data-ttu-id="f994d-134">Un'applicazione STOCK PRICES mostra il prezzo di mercato di un'azione usando l'API esterna denominata STOCKS API.</span><span class="sxs-lookup"><span data-stu-id="f994d-134">Let's take an example of an application STOCK PRICES showing the current market price of a stock using the external API called STOCKS API.</span></span> <span data-ttu-id="f994d-135">L'applicazione STOCK PRICE dispone di una pagina `Stock page` aperta dal Web browser client tramite `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="f994d-135">The STOCK PRICES application has a page `Stock page` opened by the client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="f994d-136">L'applicazione esegue una query a STOCK API mediante una chiamata HTTP `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="f994d-136">The application queries the STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="f994d-137">È possibile analizzare i dati di telemetria risultanti eseguendo una query:</span><span class="sxs-lookup"><span data-stu-id="f994d-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="f994d-138">Nella visualizzazione dei risultati, tutti gli elementi di telemetria condividono l'elemento `operation_Id` radice.</span><span class="sxs-lookup"><span data-stu-id="f994d-138">In the result view note that all telemetry items share the root `operation_Id`.</span></span> <span data-ttu-id="f994d-139">Quando la chiamata ajax viene eseguita dalla pagina, viene assegnato un nuovo ID univoco `qJSXU` alla telemetria delle dipendenze e l'ID di pageView viene usato come `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="f994d-139">When ajax call made from the page - new unique id `qJSXU` is assigned to the dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="f994d-140">La richiesta del server usa a sua volta l'ID ajax come `operation_ParentId` e così via.</span><span class="sxs-lookup"><span data-stu-id="f994d-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="f994d-141">itemType</span><span class="sxs-lookup"><span data-stu-id="f994d-141">itemType</span></span>   | <span data-ttu-id="f994d-142">name</span><span class="sxs-lookup"><span data-stu-id="f994d-142">name</span></span>                      | <span data-ttu-id="f994d-143">id</span><span class="sxs-lookup"><span data-stu-id="f994d-143">id</span></span>           | <span data-ttu-id="f994d-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="f994d-144">operation_ParentId</span></span> | <span data-ttu-id="f994d-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="f994d-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="f994d-146">pageView</span><span class="sxs-lookup"><span data-stu-id="f994d-146">pageView</span></span>   | <span data-ttu-id="f994d-147">Pagina Stock</span><span class="sxs-lookup"><span data-stu-id="f994d-147">Stock page</span></span>                |              | <span data-ttu-id="f994d-148">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-148">STYz</span></span>               | <span data-ttu-id="f994d-149">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-149">STYz</span></span>         |
| <span data-ttu-id="f994d-150">dipendenza</span><span class="sxs-lookup"><span data-stu-id="f994d-150">dependency</span></span> | <span data-ttu-id="f994d-151">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="f994d-151">GET /Home/Stock</span></span>           | <span data-ttu-id="f994d-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="f994d-152">qJSXU</span></span>        | <span data-ttu-id="f994d-153">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-153">STYz</span></span>               | <span data-ttu-id="f994d-154">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-154">STYz</span></span>         |
| <span data-ttu-id="f994d-155">richiesta</span><span class="sxs-lookup"><span data-stu-id="f994d-155">request</span></span>    | <span data-ttu-id="f994d-156">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="f994d-156">GET Home/Stock</span></span>            | <span data-ttu-id="f994d-157">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="f994d-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="f994d-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="f994d-158">qJSXU</span></span>              | <span data-ttu-id="f994d-159">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-159">STYz</span></span>         |
| <span data-ttu-id="f994d-160">dipendenza</span><span class="sxs-lookup"><span data-stu-id="f994d-160">dependency</span></span> | <span data-ttu-id="f994d-161">GET /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="f994d-161">GET /api/stock/value</span></span>      | <span data-ttu-id="f994d-162">bBrf2L7mm2g =</span><span class="sxs-lookup"><span data-stu-id="f994d-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="f994d-163">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="f994d-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="f994d-164">STYz</span><span class="sxs-lookup"><span data-stu-id="f994d-164">STYz</span></span>         |

<span data-ttu-id="f994d-165">Quando la chiamata `GET /api/stock/value` viene effettuata a un servizio esterno, si vuole conoscere l'identità del relativo server.</span><span class="sxs-lookup"><span data-stu-id="f994d-165">Now when the call `GET /api/stock/value` made to an external service you want to know the identity of that server.</span></span> <span data-ttu-id="f994d-166">È pertanto possibile impostare il campo `dependency.target` in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="f994d-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="f994d-167">Quando il servizio esterno non supporta il monitoraggio, `target` è impostato sul nome host del servizio, ad esempio `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="f994d-167">When the external service does not support monitoring - `target` is set to the host name of the service like `stock-prices-api.com`.</span></span> <span data-ttu-id="f994d-168">Se tuttavia il servizio identifica se stesso restituendo un'intestazione HTTP predefinita, `target` contiene l'identità del servizio che consente ad Application Insights di creare la traccia distribuita eseguendo query sui dati di telemetria di quel servizio.</span><span class="sxs-lookup"><span data-stu-id="f994d-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains the service identity that allows Application Insights to build distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="f994d-169">Intestazioni di correlazione</span><span class="sxs-lookup"><span data-stu-id="f994d-169">Correlation headers</span></span>

<span data-ttu-id="f994d-170">Microsoft sta lavorando alla proposta RFC per il [protocollo HTTP per la correlazione](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-170">We are working on RFC proposal for the [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="f994d-171">Questa proposta definisce due intestazioni:</span><span class="sxs-lookup"><span data-stu-id="f994d-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="f994d-172">`Request-Id` porta l'ID globalmente univoco della chiamata</span><span class="sxs-lookup"><span data-stu-id="f994d-172">`Request-Id` carry the globally unique id of the call</span></span>
- <span data-ttu-id="f994d-173">`Correlation-Context` porta la raccolta di coppie nome-valore delle proprietà della traccia distribuita</span><span class="sxs-lookup"><span data-stu-id="f994d-173">`Correlation-Context` - carry the name value pairs collection of the distributed trace properties</span></span>

<span data-ttu-id="f994d-174">Lo standard definisce inoltre due schemi di generazione di `Request-Id`: semplice e gerarchico.</span><span class="sxs-lookup"><span data-stu-id="f994d-174">The standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="f994d-175">Con lo schema semplice è presente una chiave di `Id` ben nota definita per la raccolta `Correlation-Context`.</span><span class="sxs-lookup"><span data-stu-id="f994d-175">With the flat schema, there is a well-known `Id` key defined for the `Correlation-Context` collection.</span></span>

<span data-ttu-id="f994d-176">Application Insights definisce l'[estensione](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) per il protocollo HTTP per la correlazione.</span><span class="sxs-lookup"><span data-stu-id="f994d-176">Application Insights defines the [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for the correlation HTTP protocol.</span></span> <span data-ttu-id="f994d-177">Usa le coppie nome-valore `Request-Context` per propagare la raccolta di proprietà usate dal chiamante o dal destinatario della chiamata.</span><span class="sxs-lookup"><span data-stu-id="f994d-177">It uses `Request-Context` name value pairs to propagate the collection of properties used by the immediate caller or callee.</span></span> <span data-ttu-id="f994d-178">Application Insights SDK usa questa intestazione per impostare i campi `dependency.target` e `request.source`.</span><span class="sxs-lookup"><span data-stu-id="f994d-178">Application Insights SDK uses this header to set `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="f994d-179">OpenTracing e Application Insights</span><span class="sxs-lookup"><span data-stu-id="f994d-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="f994d-180">Ecco come si presentano i modelli di dati di [OpenTracing](http://opentracing.io/) e Application Insights:</span><span class="sxs-lookup"><span data-stu-id="f994d-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="f994d-181">`request`, `pageView` esegue il mapping a **Span** con `span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="f994d-181">`request`, `pageView` maps to **Span** with `span.kind = server`</span></span>
- <span data-ttu-id="f994d-182">`dependency` esegue il mapping a **Span** con `span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="f994d-182">`dependency` maps to **Span** with `span.kind = client`</span></span>
- <span data-ttu-id="f994d-183">`id` di una `request` e `dependency` esegue il mapping a **Span.Id**</span><span class="sxs-lookup"><span data-stu-id="f994d-183">`id` of a `request` and `dependency` maps to **Span.Id**</span></span>
- <span data-ttu-id="f994d-184">`operation_Id` esegue il mapping a **TraceId**</span><span class="sxs-lookup"><span data-stu-id="f994d-184">`operation_Id` maps to **TraceId**</span></span>
- <span data-ttu-id="f994d-185">`operation_ParentId` esegue il mapping a **Reference** di tipo `ChileOf`</span><span class="sxs-lookup"><span data-stu-id="f994d-185">`operation_ParentId` maps to **Reference** of type `ChileOf`</span></span>

<span data-ttu-id="f994d-186">Per informazioni sul modello di dati e sui tipi di Application Insights, vedere il [modello di dati](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="f994d-187">Per le definizioni di OpenTracing, vedere a [specifica](https://github.com/opentracing/specification/blob/master/specification.md) e le [convenzioni semantiche](https://github.com/opentracing/specification/blob/master/semantic_conventions.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="f994d-188">Correlazione di dati di telemetria in .NET</span><span class="sxs-lookup"><span data-stu-id="f994d-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="f994d-189">Il linguaggio .NET ha definito nel corso del tempo numerosi modi per correlare i log di diagnostica e di telemetria.</span><span class="sxs-lookup"><span data-stu-id="f994d-189">Over time .NET defined number of ways to correlate telemetry and diagnostics logs.</span></span> <span data-ttu-id="f994d-190">`System.Diagnostics.CorrelationManager` consente di tenere traccia di [LogicalOperationStack e ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="f994d-190">There is `System.Diagnostics.CorrelationManager` allowing to track [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="f994d-191">`System.Diagnostics.Tracing.EventSource` ed Event Tracing for Windows definiscono il metodo [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="f994d-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define the method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="f994d-192">`ILogger` usa gli [ambiti dei log](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="f994d-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="f994d-193">WCF e Http collegano la propagazione del contesto "corrente".</span><span class="sxs-lookup"><span data-stu-id="f994d-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="f994d-194">Queste soluzioni non consentono tuttavia il supporto automatico della traccia distribuita.</span><span class="sxs-lookup"><span data-stu-id="f994d-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="f994d-195">`DiagnosticsSource` rappresenta un modo per supportare la correlazione automatica tra computer.</span><span class="sxs-lookup"><span data-stu-id="f994d-195">`DiagnosticsSource` is a way to support automatic cross machine correlation.</span></span> <span data-ttu-id="f994d-196">Le librerie .NET supportano DiagnosticsSource e consentono la propagazione automatica tra computer del contesto di correlazione tramite il protocollo di trasporto, ad esempio http.</span><span class="sxs-lookup"><span data-stu-id="f994d-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of the correlation context via the transport like http.</span></span>

<span data-ttu-id="f994d-197">La [guida alle attività](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) di DiagnosticsSource fornisce le nozioni fondamentali delle attività di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="f994d-197">The [guide to Activities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains the basics of tracking Activities.</span></span> 

<span data-ttu-id="f994d-198">ASP.NET Core 2.0 supporta l'estrazione di intestazioni HTTP e l'avvio della nuova attività.</span><span class="sxs-lookup"><span data-stu-id="f994d-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting the new Activity.</span></span> 

<span data-ttu-id="f994d-199">`System.Net.HttpClient` a partire dalla versione `<fill in>` supporta l'inserimento automatico delle intestazioni Http di correlazione e il monitoraggio della chiamata http come attività.</span><span class="sxs-lookup"><span data-stu-id="f994d-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of the correlation Http Headers and tracking the http call as an Activity.</span></span>

<span data-ttu-id="f994d-200">È disponibile un nuovo modulo HTTP [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) per la versione classica di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f994d-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for the ASP.NET Classic.</span></span> <span data-ttu-id="f994d-201">Questo modulo implementa correlazione di dati di telemetria usando DiagnosticsSource.</span><span class="sxs-lookup"><span data-stu-id="f994d-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="f994d-202">Avvia l'attività in base alle intestazioni di richiesta in ingresso.</span><span class="sxs-lookup"><span data-stu-id="f994d-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="f994d-203">Correla inoltre i dati di telemetria delle diverse fasi di elaborazione della richiesta,</span><span class="sxs-lookup"><span data-stu-id="f994d-203">It also correlates telemetry from the different stages of request processing.</span></span> <span data-ttu-id="f994d-204">anche per i casi in cui ogni fase dell'elaborazione di IIS viene eseguita in un thread di gestione diverso.</span><span class="sxs-lookup"><span data-stu-id="f994d-204">Even for the cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="f994d-205">La versione iniziale di Application Insights SDK `2.4.0-beta1` usa DiagnosticsSource e la classe Activity per raccogliere i dati di telemetria e associarli all'attività corrente.</span><span class="sxs-lookup"><span data-stu-id="f994d-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity to collect telemetry and associate it with the current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="f994d-206">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f994d-206">Next steps</span></span>

- [<span data-ttu-id="f994d-207">Scrivere dati di telemetria personalizzati</span><span class="sxs-lookup"><span data-stu-id="f994d-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="f994d-208">Caricare tutti i componenti del microservizio in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="f994d-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="f994d-209">Controllare le [piattaforme supportate](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="f994d-210">Per informazioni sul modello di dati e sui tipi di Application Insights, vedere il [modello di dati](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="f994d-211">Informazioni su come [estendere e filtrare i dati di telemetria](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="f994d-211">Learn how to [extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>
