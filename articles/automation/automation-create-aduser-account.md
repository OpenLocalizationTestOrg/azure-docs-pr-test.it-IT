---
title: Creare un account utente di Azure AD | Microsoft Docs
description: Questo articolo descrive come creare le credenziali di un account utente di Azure AD per i runbook di Automazione di Azure ai fini dell'autenticazione in Azure e nella distribuzione classica di Azure.
services: automation
documentationcenter: 
author: MGoedtel
manager: jwhit
editor: tysonn
keywords: utente di Azure Active Directory, Azure Service Management, account utente Azure AD
ms.assetid: fcfe266d-b22e-4dfb-8272-adcab09fc0cf
ms.service: automation
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/13/2017
ms.author: magoedte
ms.openlocfilehash: 4eaa3e36ededddeb5268ec4f49b9daee2f824cee
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="authenticate-runbooks-with-azure-classic-deployment-and-resource-manager"></a><span data-ttu-id="1a30f-104">Autenticare i runbook con la distribuzione classica di Azure e Resource Manager</span><span class="sxs-lookup"><span data-stu-id="1a30f-104">Authenticate Runbooks with Azure classic deployment and Resource Manager</span></span>
<span data-ttu-id="1a30f-105">Questo articolo descrive le procedure da eseguire per configurare un account utente di Azure AD per i runbook di Automazione di Azure in esecuzione in risorse di Azure Resource Manager o del modello di distribuzione classica di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-105">This article describes the steps you must perform to configure an Azure AD User account for Azure Automation runbooks running against Azure classic deployment model or Azure Resource Manager resources.</span></span>  <span data-ttu-id="1a30f-106">Anche se questa identità di autenticazione è ancora supportata per i runbook basati su Azure Resource Manager, il metodo consigliato consiste nell'usare un account RunAs di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-106">While this continues to be a supported authentication identity for your Azure Resource Manager based runbooks, the recommended method is using an Azure Run As account.</span></span>       

## <a name="create-a-new-azure-active-directory-user"></a><span data-ttu-id="1a30f-107">Creare un nuovo utente di Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="1a30f-107">Create a new Azure Active Directory user</span></span>
1. <span data-ttu-id="1a30f-108">Accedere al portale di Azure classico come amministratore del servizio per la sottoscrizione di Azure da gestire.</span><span class="sxs-lookup"><span data-stu-id="1a30f-108">Log in to the Azure Classic portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="1a30f-109">Selezionare **Active Directory**e quindi il nome della directory dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="1a30f-109">Select **Active Directory**, and then select the name of your organization directory.</span></span>
3. <span data-ttu-id="1a30f-110">Selezionare la scheda **Utenti** e quindi nell'area di comando selezionare **Aggiungi utente**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-110">Select the **Users** tab, and then, in the command area, select **Add User**.</span></span>
4. <span data-ttu-id="1a30f-111">Nella pagina **Informazioni sull'utente** in **Tipo di utente** selezionare **Nuovo utente nell'organizzazione**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-111">On the **Tell us about this user** page, under **Type of user**, select **New user in your organization**.</span></span>
5. <span data-ttu-id="1a30f-112">Immettere un nome utente.</span><span class="sxs-lookup"><span data-stu-id="1a30f-112">Enter a user name.</span></span>  
6. <span data-ttu-id="1a30f-113">Selezionare il nome di directory associata alla sottoscrizione di Azure nella pagina Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1a30f-113">Select the directory name that is associated with your Azure subscription on the Active Directory page.</span></span>
7. <span data-ttu-id="1a30f-114">Nella pagina **Profilo utente** specificare nome e cognome, un nome descrittivo e un utente dall'elenco **Ruoli**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-114">On the **user profile** page, provide a first and last name, a user-friendly name, and User from the **Roles** list.</span></span>  <span data-ttu-id="1a30f-115">Non selezionare **Abilita Multi-Factor Authentication**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-115">Do not **Enable Multi-Factor Authentication**.</span></span>
8. <span data-ttu-id="1a30f-116">Prendere nota del nome completo dell'utente e della password temporanea.</span><span class="sxs-lookup"><span data-stu-id="1a30f-116">Note the user’s full name and temporary password.</span></span>
9. <span data-ttu-id="1a30f-117">Selezionare **Impostazioni -> Amministratori > Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-117">Select **Settings > Administrators > Add**.</span></span>
10. <span data-ttu-id="1a30f-118">Digitare il nome completo dell'utente creato.</span><span class="sxs-lookup"><span data-stu-id="1a30f-118">Type the full user name of the user that you created.</span></span>
11. <span data-ttu-id="1a30f-119">Selezionare la sottoscrizione che si vuole far gestire dall'utente.</span><span class="sxs-lookup"><span data-stu-id="1a30f-119">Select the subscription that you want the user to manage.</span></span>
12. <span data-ttu-id="1a30f-120">Disconnettersi da Azure e ripetere l'accesso con l'account appena creato.</span><span class="sxs-lookup"><span data-stu-id="1a30f-120">Log out of Azure and then log back in with the account you just created.</span></span> <span data-ttu-id="1a30f-121">Verrà chiesto di cambiare la password dell'utente.</span><span class="sxs-lookup"><span data-stu-id="1a30f-121">You will be prompted to change the user’s password.</span></span>

## <a name="create-an-automation-account-in-azure-classic-portal"></a><span data-ttu-id="1a30f-122">Creare un account di Automazione nel portale di Azure classico</span><span class="sxs-lookup"><span data-stu-id="1a30f-122">Create an Automation account in Azure Classic portal</span></span>
<span data-ttu-id="1a30f-123">La procedura descritta in questa sezione consente di creare nel portale di Azure un account di Automazione di Azure da usare con i runbook che gestiscono risorse nella distribuzione classica di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-123">In this section, you perform the following steps to create an Azure Automation account in the Azure portal for use with your runbooks managing resources in Azure classic deployment.</span></span>  

> [!NOTE]
> <span data-ttu-id="1a30f-124">Gli account di Automazione creati con il portale di Azure classico possono essere gestiti sia dal portale di Azure che dal portale di Azure classico e da entrambi i set di cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1a30f-124">Automation accounts created with the Azure Classic portal can be managed by both the Azure Classic and Azure portal and either set of cmdlets.</span></span> <span data-ttu-id="1a30f-125">Una volta creato l'account, non fa alcuna differenza come si creano e gestiscono le risorse all'interno dell'account.</span><span class="sxs-lookup"><span data-stu-id="1a30f-125">Once the account is created, it makes no difference how you create and manage resources within the account.</span></span> <span data-ttu-id="1a30f-126">Se si prevede di continuare a usare il portale di Azure classico, è consigliabile creare gli account di Automazione con tale portale anziché con il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-126">If you are planning to continue to use the Azure Classic portal, then you should use it instead of the Azure portal to create any Automation accounts.</span></span>
> 
> 

1. <span data-ttu-id="1a30f-127">Accedere al portale di Azure classico come amministratore del servizio per la sottoscrizione di Azure da gestire.</span><span class="sxs-lookup"><span data-stu-id="1a30f-127">Log in to the Azure Classic portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="1a30f-128">Selezionare **Automazione**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-128">Select **Automation**.</span></span>
3. <span data-ttu-id="1a30f-129">Nella pagina **Automazione** selezionare **Crea un account di Automazione**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-129">On the **Automation** page, select **Create an Automation Account**.</span></span>
4. <span data-ttu-id="1a30f-130">Nella casella **Crea un account di Automazione** digitare un nome per il nuovo account di Automazione e selezionare un'area dall'elenco a discesa **Area**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-130">In the **Create an Automation Account** box, type in a name for your new Automation account and select a **Region** from the drop-down list.</span></span>  
5. <span data-ttu-id="1a30f-131">Fare clic su **OK** per accettare le impostazioni e creare l'account.</span><span class="sxs-lookup"><span data-stu-id="1a30f-131">Click **OK** to accept your settings and create the account.</span></span>
6. <span data-ttu-id="1a30f-132">Al termine della creazione, verrà visualizzato nell'elenco della pagina **Automazione** .</span><span class="sxs-lookup"><span data-stu-id="1a30f-132">After it is created it will be listed on the **Automation** page.</span></span>
7. <span data-ttu-id="1a30f-133">Fare clic sull'account per visualizzare la pagina Dashboard.</span><span class="sxs-lookup"><span data-stu-id="1a30f-133">Click on the account and it will bring you to the Dashboard page.</span></span>  
8. <span data-ttu-id="1a30f-134">Nella pagina del dashboard di Automazione selezionare **Asset**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-134">On the Automation Dashboard page, select **Assets**.</span></span>
9. <span data-ttu-id="1a30f-135">Nella pagina **Asset** selezionare l'opzione **Aggiungi impostazioni** nella parte inferiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="1a30f-135">On the **Assets** page, select **Add Settings** located at the bottom of the page.</span></span>
10. <span data-ttu-id="1a30f-136">Nella pagina **Aggiungi impostazioni** selezionare **Aggiungi credenziali**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-136">On the **Add Settings** page, select **Add Credential**.</span></span>
11. <span data-ttu-id="1a30f-137">Nella pagina **Definisci credenziali** selezionare **Credenziali per Windows PowerShell** nell'elenco a discesa **Tipo di credenziali** e specificare un nome per le credenziali.</span><span class="sxs-lookup"><span data-stu-id="1a30f-137">On the **Define Credential** page, select **Windows PowerShell Credential** from the **Credential Type** drop-down list and provide a name for the credential.</span></span>
12. <span data-ttu-id="1a30f-138">Nella pagina **Definisci credenziali** successiva digitare il nome utente dell'account utente Active Directory nel campo **Nome utente** e specificare la password nei campi **Password** e **Conferma password**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-138">On the following **Define Credential** page type in the username of the AD user account created earlier in the **User Name** field and the password in the **Password** and **Confirm Password** fields.</span></span> <span data-ttu-id="1a30f-139">Fare clic su **OK** per salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="1a30f-139">Click **OK** to save your changes.</span></span>

## <a name="create-an-automation-account-in-the-azure-portal"></a><span data-ttu-id="1a30f-140">Creare un account di Automazione nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="1a30f-140">Create an Automation account in the Azure portal</span></span>
<span data-ttu-id="1a30f-141">La procedura descritta in questa sezione consente di creare nel portale di Azure un account di Automazione di Azure da usare con i runbook che gestiscono risorse in modalità Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="1a30f-141">In this section, perform the following steps to create an Azure Automation account in the Azure portal for use with your runbooks managing resources in Azure Resource Manager mode.</span></span>  

1. <span data-ttu-id="1a30f-142">Accedere al portale di Azure come amministratore del servizio per la sottoscrizione di Azure da gestire.</span><span class="sxs-lookup"><span data-stu-id="1a30f-142">Log in to the Azure portal as a service administrator for the Azure subscription you want to manage.</span></span>
2. <span data-ttu-id="1a30f-143">Selezionare **Account di automazione**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-143">Select **Automation Accounts**.</span></span>
3. <span data-ttu-id="1a30f-144">Nel pannello Account di automazione fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-144">In the Automation Accounts blade, click **Add**.</span></span><br><br><span data-ttu-id="1a30f-145">![Aggiungi account di Automazione](media/automation-create-aduser-account/add-automation-acct-properties.png)</span><span class="sxs-lookup"><span data-stu-id="1a30f-145">![Add Automation Account](media/automation-create-aduser-account/add-automation-acct-properties.png)</span></span>
4. <span data-ttu-id="1a30f-146">Nella casella **Nome** del pannello **Aggiungi account di Automazione** digitare un nome per il nuovo account di Automazione.</span><span class="sxs-lookup"><span data-stu-id="1a30f-146">In the **Add Automation Account** blade, in the **Name** box type in a name for your new Automation account.</span></span>
5. <span data-ttu-id="1a30f-147">Se si hanno più sottoscrizioni, specificare quella per il nuovo account, un **Gruppo di risorse** nuovo o esistente e la **Località** per il data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-147">If you have more than one subscription, specify the one for the new account, as well as a new or existing **Resource group** and an Azure datacenter **Location**.</span></span>
6. <span data-ttu-id="1a30f-148">Selezionare il valore **Sì** per l'opzione **Crea un account RunAs di Azure** e fare clic sul pulsante **Crea**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-148">Select the value **Yes** for the **Create Azure Run As account** option, and click the **Create** button.</span></span>  
   
    > [!NOTE]
    > <span data-ttu-id="1a30f-149">Se si sceglie di non creare l'account RunAs selezionando l'opzione **No**, verrà visualizzato un messaggio di avviso nel pannello **Aggiungi account di Automazione**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-149">If you choose to not create the Run As account by selecting the option **No**, you will be presented with a warning message in the **Add Automation Account** blade.</span></span>  <span data-ttu-id="1a30f-150">Durante la creazione e l'assegnazione al ruolo **Collaboratore** nella sottoscrizione, l'account non ha un'identità di autenticazione corrispondente nel servizio directory delle sottoscrizioni e, di conseguenza, non ha accesso alle risorse nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="1a30f-150">While the account is created and assigned to the **Contributor** role in the subscription, it will not have a corresponding authentication identity within your subscriptions directory service and therefore, no access resources in your subscription.</span></span>  <span data-ttu-id="1a30f-151">Questo impedisce ai runbook che fanno riferimento a questo account di autenticarsi ed eseguire attività sulle risorse di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="1a30f-151">This will prevent any runbooks referencing this account from being able to authenticate and perform tasks against Azure Resource Manager resources.</span></span>
    > 
    >

    <br>![Aggiungi account di Automazione, avviso](media/automation-create-aduser-account/add-automation-acct-properties-error.png)<br>  
7. <span data-ttu-id="1a30f-153">Mentre Azure crea l'account di Automazione, è possibile tenere traccia dello stato di avanzamento in **Notifiche** dal menu.</span><span class="sxs-lookup"><span data-stu-id="1a30f-153">While Azure creates the Automation account, you can track the progress under **Notifications** from the menu.</span></span>

<span data-ttu-id="1a30f-154">Al termine della creazione delle credenziali, è necessario creare un asset credenziali per associare l'account di Automazione all'account utente di Active Directory creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="1a30f-154">When the creation of the credential is completed, you need to create a Credential Asset to associate the Automation Account with the AD User account created earlier.</span></span>  <span data-ttu-id="1a30f-155">Per ora, si è solo creato l'account di Automazione, ma questo non è associato ad alcuna identità di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="1a30f-155">Remember, we only created the Automation account and it is not associated with an authentication identity.</span></span>  <span data-ttu-id="1a30f-156">Seguire la procedura illustrata nell'articolo [Asset credenziali in Automazione di Azure](automation-credentials.md#creating-a-new-credential-asset) e specificare il valore per il **nome utente** nel formato **dominio\utente**.</span><span class="sxs-lookup"><span data-stu-id="1a30f-156">Perform the steps outlined in the [Credential assets in Azure Automation article](automation-credentials.md#creating-a-new-credential-asset) and enter the value for **username** in the format **domain\user**.</span></span>

## <a name="use-the-credential-in-a-runbook"></a><span data-ttu-id="1a30f-157">Usare le credenziali in un Runbook</span><span class="sxs-lookup"><span data-stu-id="1a30f-157">Use the credential in a runbook</span></span>
<span data-ttu-id="1a30f-158">È possibile recuperare le credenziali in un runbook usando l'attività [Get-AutomationPSCredential](http://msdn.microsoft.com/library/dn940015.aspx) e quindi usarle con [Add-AzureAccount](http://msdn.microsoft.com/library/azure/dn722528.aspx) per connettersi alla sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-158">You can retrieve the credential in a runbook using the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/dn940015.aspx) activity and then use it with [Add-AzureAccount](http://msdn.microsoft.com/library/azure/dn722528.aspx) to connect to your Azure subscription.</span></span> <span data-ttu-id="1a30f-159">Se le credenziali appartengono a un amministratore di più sottoscrizioni di Azure, occorre usare anche [Select-AzureSubscription](http://msdn.microsoft.com/library/dn495203.aspx) per specificare la sottoscrizione corretta.</span><span class="sxs-lookup"><span data-stu-id="1a30f-159">If the credential is an administrator of multiple Azure subscriptions, then you should also use [Select-AzureSubscription](http://msdn.microsoft.com/library/dn495203.aspx) to specify the correct one.</span></span> <span data-ttu-id="1a30f-160">L'esempio di Windows PowerShell seguente illustra il codice presente in genere all'inizio della maggior parte dei Runbook di automazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="1a30f-160">This is shown in the sample Windows PowerShell below that will typically appear at the top of most Azure Automation runbooks.</span></span>

    $cred = Get-AutomationPSCredential –Name "myuseraccount.onmicrosoft.com"
    Add-AzureAccount –Credential $cred
    Select-AzureSubscription –SubscriptionName "My Subscription"

<span data-ttu-id="1a30f-161">È necessario ripetere queste righe dopo ogni [checkpoints](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints) del Runbook.</span><span class="sxs-lookup"><span data-stu-id="1a30f-161">You should repeat these lines after any [checkpoints](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints) in your runbook.</span></span> <span data-ttu-id="1a30f-162">Se il Runbook è sospeso e quindi ripreso da un altro thread di lavoro, sarà necessario eseguire di nuovo l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="1a30f-162">If the runbook is suspended and then resumes on another worker, then it will need to perform the authentication again.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1a30f-163">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="1a30f-163">Next Steps</span></span>
* <span data-ttu-id="1a30f-164">Esaminare i vari tipi di runbook e le procedure per creare runbook personalizzati nell'articolo [Tipi di runbook di Automazione di Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="1a30f-164">Review the different runbook types and steps for creating your own runbooks from the following article [Azure Automation runbook types](automation-runbook-types.md)</span></span>

